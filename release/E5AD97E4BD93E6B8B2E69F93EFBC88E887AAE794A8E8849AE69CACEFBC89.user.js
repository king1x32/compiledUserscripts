// ==UserScript==
// @name               字体渲染（自用脚本）
// @name:en            Font Rendering (Customized)
// @version            2025.11.01.1
// @author             F9y4ng
// @icon               data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFtklEQVR4nO1WW0yURxSe1rQ1aVMbH9ukTZvG9qXxiUbTF/CCgnLRBVEQIgpdVigoCLtcRC5WvC0iN0EQ0K0uVRZQELRAAS0spIq0CHW3ihdUWFh2/xm0aXrxa2aUBQoGVmv70km+ZOfMOXO+c/acMz8h/69p1sjIiCOltIlS+lCSJEt/f3/l4ODgPPJvLMaYF6X09/v3TaiqvIi68+2wWKwYGhqiNTU1Di/UuSRJcxlj5ms9vVjtEo/ItZkI8dqHTb5pGBoahsFguEoIee2FEWCMJTLGsEV+EOkbT6Ahvk0g0icLR/KqwM+ys7ODX4hzALMlSRr8sdMI2fLtqI/X2wjoohrgsSxOZKGrq+syIWS2xWKZwxiLZYxVWyyWaqvVus1kMr3xzAQYY5/zCBNjCrE3UGNzPorwNRk4pW0ApfSRRqORM8auc32j8TZ6b9wR2RkYGLjV3Nz8/rNE/zJjzHDjeh88lqhwLrZFOM0PKYcusl78Ph5eCx+PJEgShSRJj0ymISg2qbHSSYkVi2KwRXEQZrMFPT09bYSQV+yNfhWPQL2nFDv8C2xRr3VNgnJdjm0ftGo3ztfoRbRpKV8h2GM36uJaURffioCVXyInQyfOMjMzA+wl0NLfPwi3pSqciWkWzoo2n8F6WSrclqhQq7woZAWKCgT57cG9eya4OEXbssNxIqIGbouVGB6yoLOzs33G3cIY+4yzLjpchZhx0YZ5pUOrqUNCdAHSNhyzyX1XJiMi9CAUq/ZNqpMN7rtQXHhW/EXJycluMyJAKa2wDFtF3596ElFdbCvWLNsO2fIEgTBZus1JxqZSOC2MgCbsrNiXRzXgTHSTLUOyFQmcAFpbW88TQmZN53wepfRP3akmhHqpJ0U0Fcoi6xHplWXbR6zJQKzvobG6cdmBSt0FWK3W30JDQxdORyCfUgq/1Sk4+kX1jAgcDqmw1UlVdJOoEVEnqu+E7MBGLQK8U0Ux1tfXf00IeWlK52az+U1K6S+NDZcQ6LHL5iA3pAzr3VOx3mMiAtx3QhNejcOKcptuin8R1Lu1SIotwp4ns4MPMM+lcWhqvAyz2Tzi7Oz88dOKz4OzjAnPRVbwSdulfm4pOF/bhp+NtyeAt5hi9X5UbPvWpuu5JA7uzrGie3jqR+WpAcViRvD7T58+nTclAUmS1j2e+5nIlZcJw+zgk+Lh4fK+vr673d3dXUaj8RrfNzZcxmrn+AkjunJbI3RR9QKV0Y02+TeqFqx0isGVDgP6+/uH5s+f/84kAhaL5T1Jkv5o13fBfakK/m6pohOudFzjBfSro6OjnBDyoV6vTxBEFZnY4Tc2pKZD7LpDUG49JILRarWpU2bBYDCkcQWTyYyrXdfFY8N7uLCwMJ8Q8smTQv2pp/smXJ2icU71eCCdCK/FZpkaCtn+CeCy0VauimmCi2M0bly/g97e3puEkDlTkigrK1N0dHS0GY1Gg16vb5bL5fGEkE959T548GA+J7gr6RiivMdaT+65D6rIXBTmnZ6ArWFZCPfOGHvAvDOg3l0qsqBQKDyf3o+EvE4I4a/YB+OZUkpduHFoUDr2BR4Xl2q3nIProhjcuzsgLh4P/iryqPms4LppAUcRGZYlzhITE5XE3kUpnceNK8suwG2REuGyA6LF8rMrJzkfRfqeUqHDdd0Wq1BT3SLkrq6uG+xybrVa3+JP9OjFLRd/QH5OJZoaLz3V+Sj4bDlyuArft3fbZH19fbfUavVce6IP5Ib52SeREHXguVCUVy5IlJSU7LSHQAQ38veOQ+1eX7Tl+jwTzqT5IcgvURAoLi4uIIS8bDeBS/k+uK2VPRP0OWv/TmDWjAgwxoK40Q5lDta6K58LOxPyR7+os2dM4OHDh28PDw/T6QpupjCZTJKDg4N9naDRaD4qLS3N1el0J54HJSUlhQsWLNhECHnXLgLj1qv/AKb+Lvgv1l/c+5HQxwRN2QAAAABJRU5ErkJggg==
// @namespace          https://github.com/F9y4ng/GreasyFork-Scripts/
// @homepage           https://f9y4ng.github.io/GreasyFork-Scripts/
// @homepageURL        https://f9y4ng.github.io/GreasyFork-Scripts/
// @supportURL         https://github.com/F9y4ng/GreasyFork-Scripts/issues
// @require            https://f9y4ng.github.io/GreasyFork-Scripts/lib/frColorPicker.js#sha256-NOTvR0GLDjoSMU4CzhSSj158s2Xc9mMTdyzVj1WF0bM=
// @match              *://*/*
// @grant              GM_getValue
// @grant              GM.getValue
// @grant              GM_setValue
// @grant              GM.setValue
// @grant              GM_listValues
// @grant              GM.listValues
// @grant              GM_deleteValue
// @grant              GM.deleteValue
// @grant              GM_openInTab
// @grant              GM.openInTab
// @grant              GM_addElement
// @grant              GM_registerMenuCommand
// @grant              GM.registerMenuCommand
// @grant              GM_unregisterMenuCommand
// @compatible         edge version≥90 (Compatible Tampermonkey, Violentmonkey)
// @compatible         Chrome version≥90 (Compatible Tampermonkey, Violentmonkey)
// @compatible         Firefox version≥84 (Compatible Greasemonkey, Tampermonkey, Violentmonkey)
// @compatible         Opera version≥78 (Compatible Tampermonkey, Violentmonkey)
// @compatible         Safari version≥15.4 (Compatible Tampermonkey, Userscripts)
// @license            GPL-3.0-only
// @copyright          2020-2025, F9y4ng
// @run-at             document-start
// @downloadURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/E5AD97E4BD93E6B8B2E69F93EFBC88E887AAE794A8E8849AE69CACEFBC89.user.js
// @updateURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/E5AD97E4BD93E6B8B2E69F93EFBC88E887AAE794A8E8849AE69CACEFBC89.meta.js
// ==/UserScript==
!function(e,t,n,o,s){"use strict";const a={debugging:!1,atob:t.atob.bind(t),btoa:t.btoa.bind(t),alert:e.alert.bind(e),prompt:e.prompt.bind(e),confirm:e.confirm.bind(e),setTimeout:e.setTimeout.bind(e),console:t.Object.assign(s.oC(),e.console),RC2:{flag:"5295b9589c42a644ca9304163cd8",date:"2025.04.05"},info:"undefined"!=typeof GM_info?GM_info:"undefined"!=typeof GM&&GM.info?GM.info:{script:{}}},i=e.wrappedJSObject?Array.from:t.Array.from,r={oS:t.Object.prototype.toString,aF:(...e)=>i(...e),aS:(...e)=>{return t=i(...e),o.method.every(([e,n])=>Reflect.defineProperty(t,e,{value:n.bind(t),...o.option})),t;var t}};e.navigation||["pushState","replaceState"].forEach(t=>{e.history[t]=s.eH(t)}),function(e,t,n,o){function s(t){return{setValue:"undefined"!=typeof GM_setValue?GM_setValue:"undefined"!=typeof GM?GM.setValue:Z?.setItem.bind(Z),getValue:"undefined"!=typeof GM_getValue?GM_getValue:"undefined"!=typeof GM?GM.getValue:Z?.getItem.bind(Z),deleteValue:"undefined"!=typeof GM_deleteValue?GM_deleteValue:"undefined"!=typeof GM?GM.deleteValue:Z?.removeItem.bind(Z),listValues:"undefined"!=typeof GM_listValues?GM_listValues:"undefined"!=typeof GM?GM.listValues:()=>Object.keys(Z??{}),openInTab:"undefined"!=typeof GM_openInTab?GM_openInTab:"undefined"!=typeof GM?GM.openInTab:e.open.bind(e),addElement:"undefined"!=typeof GM_addElement?i.bind(e):r.bind(e),registerMenuCommand:"undefined"!=typeof GM_registerMenuCommand?GM_registerMenuCommand:"undefined"!=typeof GM?GM.registerMenuCommand:void 0,unregisterMenuCommand:"undefined"!=typeof GM_unregisterMenuCommand?GM_unregisterMenuCommand:void 0,contextMode:"content"===j.injectInto||"content"===j.script["inject-into"]||["dom","js"].includes(j.sandboxMode),unsafeWindow:"undefined"!=typeof unsafeWindow?unsafeWindow:e}[t]??a("warn",`Grant 'GM.${t}' is not available.`)??(()=>{})}function a(e,t,...n){const[o,s,a]=[this??V,t??"",{log:["log","%c➤%c ","display:inline-block",""],info:["log","%c➤%c ","display:inline-block;padding:4px 0",""],error:["error","%c🚩%c ","display:inline-block",""],warn:["warn","%c🚩%c ","display:inline-block;",""],count:["count","➤ "]}[e]];if(!a)return o.log(s,...n);const[i,r,...c]=a;return o[i](r+s,...c,...n)}function i(...e){try{return"Tampermonkey"===te&&"string"!=typeof e[0]&&e[0].ownerDocument!==document?r(...e):GM_addElement(...e)}catch(t){return be(`${t.name} in SafeAddElement:`,{...e,e:t.message}),r(...e)}}function r(e,t,n){try{return"string"==typeof e&&(n=t||{})&&(t=e)&&(e=(/^(?:script|style|link|meta)$/i.test(t)?document.head:document.body)||document.documentElement),w(e,p(t,n))}catch(e){be(`${e.name} in GeneralAddElement:`,{...arguments,e:e})}}function c(e,t=document){try{return t.querySelector(e)}catch(e){return e&&null}}function l(e,t=document){try{return Y(t.querySelectorAll(e))}catch(e){return e&&Y([])}}function d(e,t,n,o=null){const[s,a,i]=[[t],new Set,new Set],r=e=>(!a.has(e)&&a.add(e),(o=e.shadowRoot)&&!i.has(o)&&i.add(o)&&s.push(o));for(;s.length;)(o=s.pop())&&(o.nodeType===Node.ELEMENT_NODE?!a.has(o)&&a.add(o):o instanceof ShadowRoot&&!i.has(o)&&i.add(o),("function"==typeof n?l(e,o).filter(n):l(e,o)).forEach(r));return{elementSet:a,shadowSet:i}}function p(e,t){const n=document.createElement(e);if("[object Object]"!==J.call(t))return n;for(const[e,o]of Object.entries(t))"class"===e?Array.isArray(o)?n.classList.add(...o):n.classList.add(o):["innerHTML","textContent"].includes(e)?n[e]=o:n.setAttribute(e,o);return n}function f(e){return e?Fe.var.attachShadow.call(e,{mode:"closed"}):null}function u(t,n=null){return t?.nodeType!==Node.ELEMENT_NODE?new Proxy(Q(),{get:()=>NaN}):e.getComputedStyle(t,n)}function m({range:t,length:n=1,type:o="round"}){const s=e.crypto.getRandomValues(new Uint32Array(Number(n)||1));return X(s,e=>(Math[o]??Math.round)(e/4294967295*(Number(t)||10)))}function h(e,t=Boolean,n=null){return Array.isArray(e)?X(new Set("function"==typeof t?e.filter(t):e),"function"==typeof n?n:void 0):[]}function b(e){return"symbol"==typeof e?e.description:String(e)}function g(e){return(e=b(e??"").toLowerCase()).replace(/^\b[a-z]|\s[a-z]/g,e=>e.toUpperCase())}function $(e){return e?.localName??""}function x(e,t=!0){"string"!=typeof e&&(e=b(e));try{const n=t?encodeURIComponent(e):e;return D(n)}catch(e){return e&&""}}function v(e,t=!0){if("string"!=typeof e)return"";try{const n=A(e.replace(/[^A-Za-z0-9+/=]/g,""));return t?decodeURIComponent(n):n}catch(e){return e&&""}}function w(e,...t){if(!e||!t.length)return;const n={fragment:document.createDocumentFragment(),value:null};for(const e of function*(e){for(const t of e.flat(1/0))yield t instanceof Node?t:new Text(t)}(t))(n.value=e)&&n.fragment.appendChild(e);return e.appendChild(n.fragment)&&n.value}function y(e,t,n,o=K,s=W){return"date"===t?(n=(new Date).setHours(20,30,40,50).toString(16)).padEnd(e,n):"hex"===t||"number"===t?X(m({range:n="hex"===t?16:10,length:e,type:"floor"}),e=>e.toString(n)).join(""):X(m({range:(n="mix"===t?o:s).length,length:e}),(e,t)=>n!==o||t?n[e]:s[m({range:70})]).join("")}function k(e){const t=new URL(e?.replace(/^blob:/,"")||"about:blank");return Y(Fe.url.prohibit.split("|")).SomeX(e=>t.hostname===e||t.pathname.startsWith(e))}function S({primary:e=!1,target:t=document}){return e?c(`style#${Fe.id.rndStyle}`,document.head):l("style[id]",t).filter(e=>Y(e.attributes).SomeX(e=>/^fr-css-[0-9a-f]{8}$/.test(e.name)))}function T(){return I(500,{useCachedSetTimeout:!0}).then(()=>e.location.reload(!0))}function F(e){e&&(e.id||(e.id=Fe.const.root),e.hasAttribute(Fe.const.const.once)||e.setAttribute(Fe.const.const.once,""))}function E(e){const t=new RegExp(`//\\s+@${e}\\s+(.+)`),n=(j.scriptMetaStr||j.scriptSource)?.match(t);return n?.[1]}function C(e=navigator.language){return new Set(["zh-CN","zh-TW","en","ja","ko"]).has(e)?e:e.startsWith("zh")?"zh-TW":"en"}function L(){const t=v("Rjl5NG5n"),n=new URL(e.location).searchParams.get("whoami");return Object.is(t,n)}function I(e,{useCachedSetTimeout:t,instance:n}={}){const o=t?U:Ee.setTimeout,s=new Promise(t=>{o(t,e)}),a=e=>s.then(()=>e);return a.then=s.then.bind(s),a.catch=s.catch.bind(s),n?s:a}function M({fn:e,delay:t,once:n=!1,immed:o=!1}){function s(...s){const i=this,r=()=>(e.apply(i,s),a=n||null);if(!0!==a){if(a)Ee.clearTimeout(a);else if(o&&r())return;a=Ee.setTimeout(r,t)}}if("function"!=typeof e||"number"!=typeof t||t<0)throw new Error("createDeBounce: Invalid arguments");let a;return s.setImmediate=e=>o=Boolean(e),s}function R(e,t){return!!e&&(Array.isArray(e)?e:"string"==typeof e?l(e,t):e?.nodeType?[e]:[]).every(e=>e.remove()||null===e.parentNode)}function N(e,{immediate:t=!0,preventDefault:n=!1}={}){n&&e.preventDefault(),Fe.var[t?"stopImmediatePropagation":"stopPropagation"].call(e)}function O(e){return"string"!=typeof e?"":X(e,e=>`\\${("00"+e.charCodeAt(0).toString(16)).slice(-4)}`).join("").toUpperCase()}function z(e,t="text/plain"){try{navigator.clipboard.writeText(e)}catch(n){const o=s=>{s.preventDefault(n),s.clipboardData.setData(t,e),document.removeEventListener("copy",o,!0)};document.addEventListener("copy",o,!0),document.execCommand("copy")}}const{atob:A,btoa:D,alert:B,prompt:P,confirm:_,console:V,setTimeout:U,debugging:H,info:j,RC2:G}=n,{mS:K,cS:W,aF:X,aS:Y,oS:J,lS:Z,sS:q,oC:Q}=o,ee=j.version??j.scriptHandlerVersion??"unknown",te=j.scriptHandler,ne=s("setValue"),oe=s("getValue"),se=s("deleteValue"),ae=s("listValues"),ie=s("openInTab"),re=s("addElement"),ce=s("registerMenuCommand"),le=s("unregisterMenuCommand"),de=s("unsafeWindow"),pe=s("contextMode"),fe=(navigator.language||Intl.DateTimeFormat().resolvedOptions().locale||"en-US").startsWith("zh"),ue=L()||H,me=ue?a.bind(V,"log"):()=>{},he=ue?a.bind(V,"info"):()=>{},be=ue?a.bind(V,"error"):()=>{},ge=ue?a.bind(V,"count"):()=>{},{h:$e,hR:xe,hN:ve,pN:we,pT:ye,tH:ke,iT:Se,fS:Te}=function(t){const{host:n,href:o,hostname:s,pathname:a,protocol:i}=e.location,r=e.self===e.top;try{t=r?n:e.top.location.host}catch(n){t=n&&new URL(document.referrer||e.location).host}return{h:n,hR:o,hN:s,pN:a,pT:i,tH:t,iT:r,fS:r?"":"[FRAMES]"}}(),Fe={count:{clickTimer:0},array:{exps:[],scaleMatrix:[],props:{window:[],element:[],html:[]},values:new Set,iframe:new Set},const:{seed:y(6,"mix"),root:y(6,"char"),raf:Symbol(`𐠱${y(8,"hex")}`),caf:Symbol(`𐠱${y(8,"hex")}`),dialog:`fr-dialog-${y(8,"hex")}`,cssAttrName:`fr-css-${y(8,"hex")}`,boldAttrName:`fr-bold-${y(8,"date")}`,iframeAttrName:`fr-iframe-${y(8,"hex")}`,regexp:new RegExp("\\b#[\\u{1D68A}-\\u{1D6A3}\\w\\u{1D670}-\\u{1D689}]+(?=\\s)","gu"),const:{once:"fr-init-once",conflict:"fr-callback-conflict",vpu:"data-fr-processed",navinfo:"__Navigation#INFO__"}},var:{curVersion:E("version")??j.script.version??"2025.11.01.0",scriptName:E(`name:${C()}`)??j.script.locales?.[C()]?.name??v("Rm9udCUyMFJlbmRlcmluZw=="),scriptAuthor:E("author")??j.script.author??v("Rjl5NG5n"),attachShadow:Element.prototype.attachShadow,getClientRects:Element.prototype.getClientRects,getBoundingClientRect:Element.prototype.getBoundingClientRect,getScreenCTM:SVGGraphicsElement.prototype.getScreenCTM,fillText:CanvasRenderingContext2D.prototype.fillText,strokeText:CanvasRenderingContext2D.prototype.strokeText,stopImmediatePropagation:Event.prototype.stopImmediatePropagation,stopPropagation:Event.prototype.stopPropagation},url:{introURL:v("aHR0cHMlM0ElMkYlMkZmOXk0bmcubGlrZXMuZmFucyUyRkZvbnQtUmVuZGVyaW5n"),redundant:v("aHR0cHMlM0ElMkYlMkZmOXk0bmcubGlrZXMuZmFucyUyRnJlZHVuZGFudC1pc3N1ZQ=="),fontlistImg:v("aHR0cHMlM0ElMkYlMkZvb28uMHgwLm9vbyUyRjIwMjUlMkYwMyUyRjI1JTJGT1NkVVVZLmdpZg=="),loadingImg:v("aHR0cHMlM0ElMkYlMkZmOXk0bmcuZ2l0aHViLmlvJTJGR3JlYXN5Rm9yay1TY3JpcHRzJTJGaW1hZ2VzJTJGbG9hZGluZy5naWY="),Anton:v("aHR0cHMlM0ElMkYlMkZmb250cy5nc3RhdGljLmNvbSUyRnMlMkZhbnRvbiUyRnYyNSUyRjFQdGdnODdMUk95QW0zS3otQzgud29mZjI="),predefined:v("aHR0cHMlM0ElMkYlMkZmOXk0bmcuZ2l0aHViLmlvJTJGR3JlYXN5Rm9yay1TY3JpcHRzJTJGcmVuZGVyaW5nUnVsZXM="),feedback:E("supportURL")??j.script.supportURL??v("aHR0cHMlM0ElMkYlMkZnaXRodWIuY29tJTJGRjl5NG5nJTJGR3JlYXN5Rm9yay1TY3JpcHRzJTJGaXNzdWVz"),homepage:E("homepageURL")??j.script.homepage??v("aHR0cHMlM0ElMkYlMkZmOXk0bmcuZ2l0aHViLmlvJTJGR3JlYXN5Rm9yay1TY3JpcHRzJTJG"),prohibit:"challenges.cloudflare.com|m.stripe.network|js.stripe.com"},class:{guide:y(7,"mix"),title:y(8,"char"),rotation:y(7,"char"),emoji:y(7,"mix"),main:y(8,"char"),fontList:y(8,"char"),spanlabel:y(6,"mix"),label:y(6,"mix"),checkbox:y(8,"char"),flex:y(8,"char"),tooltip:y(8,"char"),tooltiptext:y(8,"char"),ps1:y(6,"mix"),ps2:y(6,"mix"),ps3:y(6,"mix"),ps4:y(6,"mix"),ps5:y(6,"mix"),slider:y(8,"char"),frColorPicker:y(9,"char"),readonly:y(8,"mix"),notreadonly:y(8,"mix"),reset:y(7,"mix"),cancel:y(7,"mix"),submit:y(7,"mix"),selector:y(8,"char"),selectFontID:y(8,"char"),close:y(7,"char"),db:y(9,"mix"),dbbc:y(8,"mix"),dbb:y(8,"char"),dbm:y(8,"char"),dbt:y(8,"char"),dbbt:y(7,"mix"),dbbf:y(7,"mix"),dbbn:y(7,"mix"),switcher:y(6,"mix"),anim:y(6,"mix"),range:y(9,"char"),rangeProgress:y(9,"mix")},id:{rndStyle:y(12,"char"),configure:y(12,"char"),dialogbox:y(12,"char"),container:y(10,"char"),field:y(10,"mix"),fontList:y(8,"mix"),fontFace:y(8,"mix"),fontSmooth:y(8,"mix"),fontStroke:y(8,"mix"),fontShadow:y(8,"mix"),shadowColor:y(8,"mix"),fontCss:y(8,"mix"),fontEx:y(8,"mix"),submit:y(8,"char"),fface:y(8,"mix"),smooth:y(8,"mix"),fontSize:y(8,"mix"),fontScale:y(8,"mix"),scale:y(8,"mix"),fviewport:y(8,"char"),fixViewport:y(8,"mix"),strokeSize:y(8,"mix"),stroke:y(8,"mix"),fstroke:y(8,"mix"),fshadow:y(8,"mix"),fixStroke:y(8,"mix"),rdCanvas:y(8,"char"),renderCanvas:y(8,"mix"),lazyload:y(8,"mix"),fixShadow:y(8,"mix"),shadowSize:y(8,"mix"),shadow:y(8,"mix"),color:y(8,"mix"),cssinclued:y(8,"mix"),cssexclude:y(8,"mix"),render:y(8,"char"),mono:y(8,"char"),cm:y(8,"mix"),fi:y(8,"mix"),iscusmono:y(6,"char"),selector:y(8,"char"),cleaner:y(6,"char"),fonttooltip:y(9,"char"),fontName:y(8,"char"),cSwitch:y(6,"mix"),eSwitch:y(6,"mix"),backup:y(8,"char"),files:y(6,"char"),tfiles:y(6,"mix"),db:y(6,"char"),ct:y(6,"char"),isclosetip:y(7,"mix"),bk:y(6,"char"),isbackup:y(7,"mix"),pv:y(6,"char"),ispreview:y(7,"mix"),fs:y(6,"char"),isfontsize:y(7,"mix"),fvp:y(6,"char"),isfixviewport:y(7,"mix"),hk:y(6,"char"),ishotkey:y(7,"mix"),mps:y(6,"char"),maxps:y(7,"mix"),gc:y(6,"char"),globaldisable:y(7,"char"),feedback:y(7,"char"),pdr:y(6,"char"),pdrr:y(7,"mix"),flc:y(6,"char"),flcid:y(7,"mix")}};if(function(e){if(!Se&&k(xe))return!0;const n=fe?`${Fe.var.scriptName}警告：脚本的注入模式已设置为"content"，部分脚本功能可能受到限制，如框架页面内部分功能失效、字体缩放后无法全局修正坐标等。`:`${Fe.var.scriptName} Warning: The injection mode is set to "content" and some functions may be limited, such as some functions within the frame page are invalid, coordinates cannot be globally corrected after font scaling, etc.`;if(pe&&Se&&a("warn",n),!0===e[Fe.const.const.once]||document.documentElement?.hasAttribute(Fe.const.const.once))return(()=>{const e=fe?`🚩【脚本冗余警告】发现冗余安装的脚本: "${Fe.var.scriptName}"，如刷新后问题依旧，请访问 ${Fe.url.redundant} 排查错误。`:`🚩 [Redundance Warning] Found Redundant Scripts: '${Fe.var.scriptName}', if persists after reloading, please visit ${Fe.url.redundant} to troubleshoot.`,t="￸🛑 "+(fe?"发现冗余安装的脚本，点击排查！":"Troubleshoot Redundant Issue");return Se&&(a("error",e),ce(t,()=>ie(`${Fe.url.feedback}/117`,!1))),!0})();(e[Fe.const.const.once]=!0)&&t.Object.freeze(Fe.const)&&F(document.documentElement)}(de))return;const Ee=new class{constructor(e){t.Object.assign(this,{context:e,timerMap:{timeout:{},interval:{}}}),this._registerAnimationFrame(e),["setTimeout","setInterval","clearTimeout","clearInterval"].forEach(e=>this[e]=this[e].bind(this))}_registerAnimationFrame(e){const n=Y(["ms","moz","webkit","o"]).FindX(t=>e[`${t}RequestAnimationFrame`]),o=e.requestAnimationFrame||e[`${n}RequestAnimationFrame`],s=e.cancelAnimationFrame||e[`${n}CancelAnimationFrame`]||e[`${n}CancelRequestAnimationFrame`];t.Object.assign(e,{[Fe.const.raf]:o.bind(de),[Fe.const.caf]:s.bind(de)})}_ticking(e,t,n,...o){let s=performance.now();const a=Symbol(t),i=()=>{const r=performance.now();if(r-s<(Number(n)||0))return this._setTimerMap(a,t,i);"interval"===t?(s=r)&&this._setTimerMap(a,t,i):this.clearTimeout(a),"function"==typeof e&&e.apply(this.context,o)};return this._setTimerMap(a,t,i),a}_setTimerMap(e,t,n){this.timerMap[t][e]=this.context[Fe.const.raf](n)}_clearTimerMap(e,t){this.context[Fe.const.caf](this.timerMap[t][e]),delete this.timerMap[t][e]}setTimeout(e,t,...n){return this._ticking(e,"timeout",t,...n)}clearTimeout(e){this._clearTimerMap(e,"timeout")}setInterval(e,t,...n){return this._ticking(e,"interval",t,...n)}clearInterval(e){this._clearTimerMap(e,"interval")}}(e);class Ce{constructor(e=document){const n=e&&"string"==typeof e?()=>c(e):e&&e.getRootNode()===e?()=>e:()=>Promise.reject(new Error("Target locator must be String or RootNode."));t.Object.assign(this,{checkTarget:n,callbacks:new Map,targetNode:null,initialObserver:null,nodeObserver:null})}_waitForTarget(e){return(this.targetNode=this.checkTarget())?Promise.resolve(this.targetNode):new Promise((t,n)=>{const o=Ee.setTimeout(()=>{this.initialObserver&&(this.initialObserver=this.initialObserver.disconnect()??null),n(new ReferenceError(`Target node not found within ${e/1e3} seconds.`))},e);this.initialObserver=new MutationObserver(()=>{(this.targetNode=this.checkTarget())&&(Ee.clearTimeout(o),this.initialObserver=this.initialObserver.disconnect()??null,t(this.targetNode))}),this.initialObserver.observe(document,{childList:!0,subtree:!0})})}_observeElement(e,t){this.nodeObserver&&this.nodeObserver.disconnect(),this.nodeObserver=new MutationObserver((t,n)=>{for(const[o,s]of this.callbacks)try{s({node:e,mutations:t,observer:n})}catch(e){be(`${e.name} in NodeObserver callback '${o}':`,e.message)}}),this.nodeObserver.observe(e,t)}onUpdate(e,t){if(e&&this.callbacks.has(e)&&!t)return this.callbacks.delete(e);"function"==typeof t&&e&&this.callbacks.get(e)!==t&&this.callbacks.set(e,t)}async startObserver({name:e,callback:t,config:n,timeout:o=1e4}={}){e&&this.onUpdate(e,t),this.config=n??{childList:!0,subtree:!0,attributes:!0};try{const e=await this._waitForTarget(o);return this.callbacks.size&&this._observeElement(e,this.config),{target:e,observer:this.nodeObserver}}catch(e){be(`${e.name} in NodeObserver:`,e.message)}}}!async function(n,o,s){function i(e,t){kt(document,Fe.var.style.frDialog,`${Fe.const.seed}-dialog-style`,!1);const n=c(`dialog#${Fe.const.dialog}`)??re(t,"dialog",{id:Fe.const.dialog});return n instanceof Node&&(w(n,e),n.hasAttribute("open")&&n.close?.(),n.inert=!0,n.showModal?.(),n.removeAttribute("inert"),n.focus()),n}function E(e){return e?.close?.(),document.removeEventListener("blur",N,!0),R(e||`dialog#${Fe.const.dialog}`)}function C({WEBKIT:e=NaN,BLINK:t=NaN,GECKO:n=NaN,more:o=!0}={}){if(it)return!1;const s=e=>o?Ye>=e:Ye<e;return at&&s(e)||ot&&s(t)||st&&s(n)}function A(e,t,n,o=!0){try{const s=function(e,t,n){return(n=new CSSStyleSheet).id=e,n.replaceSync(t),n}(n,t,null),a=Y(e.adoptedStyleSheets).FindIndeX(e=>e.id===n);if(!~a)return e.adoptedStyleSheets.push(s);o&&!function(e,t){if(!e||!t)return!1;const[n,o]=[X(e.cssRules),X(t.cssRules)];return n.length===o.length&&n.every((e,t)=>e.cssText===o[t].cssText)}(e.adoptedStyleSheets[a],s)&&(e.adoptedStyleSheets[a]=s)}catch(e){be(`${e.name} in UpdateAdoptedStyleSheets:`,e.message)}}function D(e,t,n,o=!0){try{const s=c(`style#${n}`,e=e instanceof ShadowRoot?e:e.head);if(!s)return re(e,"style",{id:n,media:"screen",type:"text/css",textContent:t});o&&s.textContent!==t&&(s.textContent=t)}catch(e){be(`${e.name} in UpdateInlineStyle:`,e.message)}}function V({target:e,id:t,cssText:n,overwrite:o=!1}){if(!e||!t||!n)return!1;const s=S({target:e});if(o)s.forEach(e=>(e.dataset.frRemoved=!0)&&R(e));else if(s.length)return!0;return Boolean(re(e,"style",{id:t,media:"screen",type:"text/css",textContent:n,[Fe.const.cssAttrName]:o}))}function U({cur:n,prev:o=1,props:s}){function a(e){return new Proxy(e,{get:(e,t)=>{const o=Reflect.get(e,t);return"number"==typeof o?o/n:o}})}if(!Se&&(C({BLINK:128})||C({GECKO:126,more:null})))return;const i=[{objs:[MouseEvent.prototype],props:["clientX","clientY","pageX","pageY","layerX","layerY","offsetX","offsetY","screenX","screenY","x","y"]},{objs:[e,de],props:["pageXOffset","pageYOffset","scrollX","scrollY",...s.window]},{objs:[Element.prototype],props:["scrollLeft","scrollTop",...s.element]},{objs:[HTMLElement.prototype],props:[...s.html]}],[r,c]=[n/o,H&&new Set],l=({objs:e,props:t})=>{const[o,s]=[h(e),h(t)];o.forEach(e=>{s.forEach(t=>{!function(e,t,o){try{if("function"!=typeof o?.get)return;const s=["scrollLeft","scrollTop"].includes(t),a=s?HTMLHtmlElement.prototype:e,i=s?n:r,l={configurable:!0,enumerable:!0,get(){return o.get.call(this)/i},...s&&{set(e){"number"!=typeof e||isNaN(e)||("scrollLeft"===t&&this.scrollTo(e*n,0),"scrollTop"===t&&this.scrollTo(0,e*n))}}};Reflect.defineProperty(a,t,l),H&&c.add({obj:J.call(a),prop:t})}catch(e){be(`${e.name} in definePropertyProcess '${t}':`,e.message)}}(e,t,Reflect.getOwnPropertyDescriptor(e,t))})})};t.Object.assign(e,{frDOMRects:{toggle:C({BLINK:128})||st,cur:n,prev:o}});try{i.forEach(l),ot&&(p=SVGGraphicsElement.prototype,Reflect.defineProperty(p,"getScreenCTM",{value:function(){const e=Fe.var.getScreenCTM.call(this),o=this.ownerSVGElement?.createSVGMatrix()??document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGMatrix();return t.Object.assign(o,...["a","b","c","d","e","f"].map(t=>({[t]:e[t]/n}))),o}}),H&&c.add({obj:J.call(p),prop:"getScreenCTM()"})),e.frDOMRects.toggle&&(d=Element.prototype,Reflect.defineProperty(d,"getClientRects",{value:function(){const e=Fe.var.getClientRects.call(this),n=X(e,e=>DOMRect.fromRect(a(e)));return n.item=e=>n[e]??null,n[Symbol.iterator]=function*(){for(let e=0;e<this.length;e++)yield this[e]},t.Object.freeze(n)}}),Reflect.defineProperty(d,"getBoundingClientRect",{value:function(){const e=Fe.var.getBoundingClientRect.call(this);return DOMRect.fromRect(a(e))}}),H&&c.add({obj:J.call(d),prop:"getDOMRects"})),me(`[FONTSCALE]${Te} %O Done (%s)`,c||"Adjust",r.toFixed(3))}catch(e){be(`${e.name} in AdjustCoordinateOffset:`,e.message)}var d,p}function K(e){if(!Array.isArray(e))return[];const t=new Map;return e.reduce((e,n)=>{if(!n)return e;if(t.has(n.ch)||t.has(n.en)){const o=t.get(n.ch)||t.get(n.en);n.ps&&e[o]&&!e[o].ps&&(e[o]=n)}else e.push(n)&&[n.ch,n.en].forEach(n=>n&&t.set(n,e.length-1));return e},[])}async function W(e=ut){try{const t=await oe(Pe),n=t?o.parse(v(t)):[];return K([...e,...n])}catch(t){return be(`${t.name} in GetMergedFontCheckList:`,t.message)??[...e]}}function pe(e,t=$e){return Y(e).FindIndeX(e=>e.domain===t)}function ue(e,t){try{q?.removeItem(Fe.const.const.conflict),ne(e,x(o.stringify(t)))}catch(e){be(`${e.name} in SaveData:`,e.message)}}function Le(e){return"string"!=typeof e?"":p("fr-safeInner",{innerHTML:n.createHTML(e.replace(/expression\([^)]*\)|url\(.*?\)|\\u[0-9a-fA-F]{4}|\\x[0-9a-fA-F]{2}|`|{|}/gi,""))}).textContent.trim().replace(/(\s*,\s*)+$/,"")}function Ie(e,t){return Fe.array.scaleMatrix.push(Fe.var.curScale=e&&t>=.8&&t<=2.5?t:mt.fontSize),Number(Fe.var.curScale).toFixed(3)}async function Me(){const e=await et.startObserver().then(e=>e.target.id);return!e||!Se&&(C({BLINK:130,more:null})||rt)?":root ":`:root#${e} `}async function Re(){try{const e=await fetch(`${Fe.url.predefined}?${y(32,"hex")}`);if(!e.ok)throw new Error(`Network response was not ok. Status: ${e.status}`);const t=await e.text();return me(`Pull predefined data: %c${t?"Succeeded":"Failed"} (${t?.length??0})`,"color:"+(t?"#008000":"#dc143c")),t}catch(e){be(`${e.name} in getRenderRules:`,e.message)}}function Ne(e,t){if(!e)return t;try{const n=([e])=>e.includes(ve)||"ALL"===String(e)||Y(e).SomeX(e=>e.startsWith("*")&&ve.endsWith(e.slice(1))),s=Y(o.parse(o.parse(v(e)))).FindX(n);if(!(Fe.var.apply=Boolean(s)))return t;for(const[e,n]of Object.entries(s[1])){if(!n||!(e in t))continue;const[o,s]=n.split("∯",2);"+"===o?!t[e].includes(s)&&(t[e]+=`${s}`):"-"===o?t[e]=t[e].replace(new RegExp(s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),""):"@"===o?t[e]=Boolean(Number(s)):"#"===o&&(t[e]=s)}}catch(e){be(`${e.name} in ApplyPredefinedRenderConfig:`,e.message)}return t}const[Oe,ze,Ae,De]=["_REMOTERENDERRULESDATA_","_CONFIGURE_","_EXCLUDE_SITES_","_FONTS_SET_"],[Be,Pe,_e,Ve]=["_DOMAINS_FONTS_SET_","_CUSTOM_FONTLIST_","_CUSTOM_PROPERTY_","_MONOSPACED_SITERULES_"],[Ue,He,je]=["_MONOSPACED_FONTLIST_","_MONOSPACED_FEATURE_","_FONTOVERRIDE_DEF_"],[Ge,Ke,We]=["_FONTSCALE_DEF_","_FONTCHECKLIST_","_FR_IS_DISCUZ_"],{engine:Xe,engineVersion:Ye,creditEngine:Je,brand:Ze,os:qe,voucher:Qe}=s=o.parse(s||null)||(q?.setItem(Fe.const.const.navinfo,o.stringify(s=await async function(){function t(e){if(!e)return"0.0.0.0";const t=e.split(".").map(e=>parseInt(e)||0);for(;t.length<4;)t.push(0);return t.join(".")}function n(e){if(!e)return"Unknown";const t=g(e);return/^(?:Like Mac|Ios)$/.test(t)?"iOS":"Cros"===t?"Chrome OS":t.startsWith("Win")?"Windows":t.startsWith("Mac")?"MacOS":"X11"===t?"Linux":t}function o(e){return/(?:Gecko\/|Firefox\/|FxiOS)/.test(e)?"Gecko":/(?:Chrom(?:e|ium)\/|CriOS)/.test(e)?"Blink":/(?:AppleWebKit\/|Version\/)/.test(e)?"WebKit":"Unknown"}function s(e){return n(Y(["like Mac","Mac","Android","Debian","Ubuntu","Linux","Win","CrOS","X11"]).FindX(t=>e(t,"i"))||"Unknown")}const a=(r=e).GestureEvent?"WebKit":r.scrollByLines||r.getDefaultComputedStyle?"Gecko":r.webkitRequestFileSystem||r.webkitSpeechGrammar?"Blink":"Unknown",i=await async function(e){return e.startsWith("Violentmonkey")&&j.platform?(({browserName:t,browserVersion:n,os:o,arch:s})=>{const[a,i]=s?.split("-")??[];let r=[{brand:g(t),version:n}];if(parseFloat(n)<78&&j.userAgent){const[,e,t]=j.userAgent.match(/\s(Chrom(?:e|ium)|Firefox)\/(\d+[.0-9]*)/i)??[];e&&(r=[{brand:g(e),version:t},...r])}return{bitness:i,architecture:a,brands:r,platform:g(o),source:"ext",voucher:e}})(j.platform):(e.startsWith("Tampermonkey")||e.startsWith("ScriptCat"))&&j.userAgentData?(t=>{if("Gecko"===a&&parseFloat(t.brands[0].version)<78){const[,e,n]=navigator.userAgent.match(/\s(Firefox)\/(\d+[.0-9]*)/i)??[];if(e)return{...t,brands:[{brand:g(e),version:n},...t.brands],source:"ua"}}return{...t,source:"ext",voucher:e}})(j.userAgentData):navigator.userAgentData?.brands?.[0]?await(async e=>await e.getHighEntropyValues(["bitness","architecture","fullVersionList"]).then(e=>(e.brands=e.fullVersionList,delete e.fullVersionList,e)))(navigator.userAgentData):null}(`${te} ${ee}`);var r;return i?function(e){const s=n(e.platform),[i,r]=e.brands?.map(({brand:e,version:t})=>`${/Not[^a-z]*A[^a-z]*Brand/i.test(e)?9:/^(?:Chrom(?:e|ium)|Firefox|Safari)$/i.test(e)?5:1}${e}\r${t}`).sort()[0]?.slice(1).split("\r")??[],[c,l]=e.brands?.map(({brand:e,version:t})=>/^(?:Chrom(?:e|ium)|Firefox|Safari)$/i.test(e)&&`${e}\r${t}`).filter(Boolean)[0]?.split("\r")??[i,r];return{engine:{Chrome:"Blink",Chromium:"Blink",Firefox:"Gecko",Safari:"WebKit"}[g(c)]??o(navigator.userAgent),engineVersion:parseFloat(l)||99,creditEngine:a,brand:(i?.split(/\s/)??[]).slice(-1)[0]??"Unknown",brandVersion:t(r),os:s,source:e.source??"uad",voucher:e.voucher??null}}(i):function(e){const n=(t,n="")=>new RegExp(t,n).test(e),{brand:i,brandVersion:r,engine:c,engineVersion:l}=function(e,n,s){const a=o(e),i={OPR:{brand:"Opera",engine:"Blink",as:"Chrome"},YaBrowser:{brand:"Yandex",engine:"Blink",as:"Chrome"},Edg:{brand:"Edge",engine:"Blink",as:"Chrome"},Chromium:{brand:"Chromium",engine:"Blink"},Chrome:{brand:"Chrome",engine:"Blink"},LibreWolf:{brand:"LibreWolf",engine:"Gecko",as:"Firefox"},SeaMonkey:{brand:"SeaMonkey",engine:"Gecko",as:"Firefox"},PaleMoon:{brand:"PaleMoon",engine:"Gecko",as:"Firefox"},Waterfox:{brand:"Waterfox",engine:"Gecko",as:"Firefox"},Firefox:{brand:"Firefox",engine:"Gecko"},Konqueror:{brand:"Konqueror",engine:"webkit"},Kindle:{brand:"Kindle",engine:"WebKit",as:"Version"},Safari:{brand:"Safari",engine:"WebKit",as:"Version",verset:["Version"]},Trident:{brand:"IE",engine:"Trident",verset:["MSIE","rv"]},Presto:{brand:"Opera",engine:"Presto"}};for(const[e,{brand:o,engine:a,verset:r,as:c}]of Object.entries(i)){if(!n(e))continue;const i=Y(r??[]).FindX(e=>n(e))||e;let l=s(i,i.length+1);if(!l)continue;const d=c||e,p=parseFloat(s(d,d.length+1)||99);return{brand:o,brandVersion:t(l),engine:a,engineVersion:p}}const{b:r,bv:c,ev:l}=function(e){const[n,o]=[e.lastIndexOf(" ")+1,e.lastIndexOf("/")];if(0===n||-1===o||o<n)return{b:"Unknown",bv:"0.0.0.0",ev:99};const s=e.slice(n,o).trim(),a=t(e.slice(o+1).match(/\d*\.?\d+/)?.[0]),i=parseFloat(e.match(/(?:Chrom(?:e|ium)|Firefox|Version)\/(\d+[.0-9]*)/i)?.[1]||a||99);return{b:s,bv:!/(?:version|\/|\(|\)|;)/i.test(s)&&a||"0.0.0.0",ev:i}}(e);return{brand:r,brandVersion:c,engine:a,engineVersion:l}}(e,n,(t,o)=>n(t)&&e.slice(e.indexOf(t)+o).match(/\d+(\.\d+)*/)?.[0]);return{engine:c,engineVersion:l,creditEngine:a,brand:i,brandVersion:r,os:s(n),source:"ua",voucher:null}}(navigator.userAgent)}())),s),[et,tt,nt]=["html","head","body"].map(e=>new Ce(e)),[ot,st,at]=["Blink","Gecko","WebKit"].map(e=>e===Je),it=null===Qe&&(Xe!==Je||($t=navigator.userAgentData,!!ot&&(e.isSecureContext&&!$t||$t&&"[object NavigatorUAData]"!==b($t)))),[rt,ct]=[["Greasemonkey","Userscripts","FireMonkey","tamp","OrangeMonkey"].includes(te),"MacOS"===qe],[lt,dt]=[96,123].map(e=>C({BLINK:e})),pt=C({WEBKIT:16.4,BLINK:99,GECKO:101})&&"function"==typeof document.adoptedStyleSheets?.push,ft=fe?`<li class="${Fe.const.seed}.fixed">优化重构脚本核心函数，提升脚本兼容性。</li>\n            <li class="${Fe.const.seed}.fixed">优化粗体描边样式修正脚本冲突检测阈值。</li>\n            <li class="${Fe.const.seed}.fixed">修复字体阴影拾色器中的各种隐藏问题。</li>\n            <li class="${Fe.const.seed}.fixed">修复一些已知的问题，优化代码，优化样式。</li>`:`<li class="${Fe.const.seed}.fixed">Refactored core functions to improve compatibility.</li>\n            <li class="${Fe.const.seed}.fixed">Optimized Bold-Fix script conflict detection threshold.</li>\n            <li class="${Fe.const.seed}.fixed">Fixed various hidden issues in the shadow colorpicker.</li>\n            <li class="${Fe.const.seed}.fixed">Fixed some known issues, optimized code & style.</li>`,ut=new Set([{ch:"微软雅黑",en:"Microsoft YaHei UI",ps:"MicrosoftYaHeiUI"},{ch:"微軟正黑體",en:"Microsoft JhengHei",ps:"MicrosoftJhengHeiRegular"},{ch:"苹方-简",en:"PingFang SC",ps:"PingFangSC-Regular"},{ch:"蘋方-繁",en:"PingFang TC",ps:"PingFangTC-Regular"},{ch:"蘋方-港",en:"PingFang HK",ps:"PingFangHK-Regular"},{ch:"更纱黑体 SC",en:"Sarasa Gothic SC",ps:"Sarasa-Gothic-SC-Regular"},{ch:"更紗黑體 TC",en:"Sarasa Gothic TC",ps:"Sarasa-Gothic-TC-Regular"},{ch:"冬青黑体简",en:"Hiragino Sans GB",ps:"HiraginoSansGB-Regular"},{ch:"兰亭黑-简",en:"Lantinghei SC",ps:"FZLTTHK--GBK1-0"},{ch:"OPPO Sans",en:"OPPO Sans",ps:"OPPOSans"},{ch:"霞鹜文楷",en:"LXGW WenKai",ps:"LXGWWenKai-Regular"},{ch:"鸿蒙黑体",en:"HarmonyOS Sans SC",ps:"HarmonyOS_Sans_SC"},{ch:"浪漫雅圆",en:"LMYY",ps:"浪漫雅圆"},{ch:"思源黑体",en:"Source Han Sans SC",ps:"SourceHanSansSC-Regular"},{ch:"思源宋体",en:"Source Han Serif SC",ps:"SourceHanSerifSC-Regular"},{ch:"汉仪旗黑",en:"HYQiHei",ps:"HYQiHei-EES"},{ch:"文泉驿微米黑",en:"WenQuanYi Micro Hei",ps:"WenQuanYiMicroHei"},{ch:"文泉驿正黑",en:"WenQuanYi Zen Hei",ps:"WenQuanYiZenHei"},{ch:"方正舒体",en:"FZShuTi",ps:"FZSTK--GBK1-0"},{ch:"方正姚体",en:"FZYaoti",ps:"FZYTK--GBK1-0"},{ch:"华文仿宋",en:"STFangsong",ps:"STFangsong"},{ch:"华文楷体",en:"STKaiti",ps:"STKaiti"},{ch:"华文细黑",en:"STXihei",ps:"STXihei"},{ch:"华文彩云",en:"STCaiyun",ps:"STCaiyun"},{ch:"华文琥珀",en:"STHupo",ps:"STHupo"},{ch:"华文新魏",en:"STXinwei",ps:"STXinwei"},{ch:"华文隶书",en:"STLiti",ps:"STLiti"},{ch:"华文行楷",en:"STXingkai",ps:"STXingkai"},{ch:"雅痞-简",en:"Yuppy SC",ps:"YuppySC-Regular"},{ch:"圆体-简",en:"Yuanti SC",ps:"YuantiSC-Regular"},{ch:"手书体",en:"ShouShuti",ps:"ShouShuti"},{ch:"幼圆",en:"YouYuan",ps:"YouYuan"}]),mt={fontSelect:at||!it&&ct?"'PingFang SC'":"'Microsoft YaHei UI'",fontFace:!0,fontSmooth:!0,fontSize:1,fixViewport:!0,fontStroke:st?.08:ot?.015:0,fixStroke:lt,lazyload:!1,fontShadow:st?.36:.75,fixShadow:!1,renderCanvas:!1,shadowColor:st?"#70707070":"#7C7C7CDD",fontCSS:":not(i[class],head *):not(mjx-container *,.katex *):not([class*='glyph']):not([class*='symbols' i]):not([class*='icon' i]):not([class*='fa-']):not([class*='vjs-'])",fontEx:"[class*='watermark' i],.textLayer *,pre,pre *,code,code *"},ht={isBackupFunction:!0,isPreview:!1,isFontsize:!1,isFixViewport:!1,isHotkey:!0,isCloseTip:!1,maxPersonalSites:100},bt={...ht,rebuild:void 0,curVersion:void 0,globalDisable:!1,isCustomMono:!1},gt={fontBase:"system-ui,-apple-system,BlinkMacSystemFont,sans-serif",fontEmoji:"'Apple Color Emoji','Segoe UI Emoji','Noto Color Emoji','Android Emoji',EmojiSymbols,'EmojiOne Mozilla','Twemoji Mozilla','Segoe UI Symbol','Noto Color Emoji Compat','Font Awesome 6 Pro','Font Awesome 5 Pro',FontAwesome,emoji,codicon,iconfont,icomoon,IcoFont,bwi-font,fontello,themify,bootstrap-icons,'Segoe Fluent Icons','Material Icons','Material Icons Extended','Material Icons Outlined','Material Icons Round','Material Icons Sharp','Material Icons Two Tone','Google Material Icons','Google Material Icons Filled','Material Symbols Outlined','Material Symbols Round','Material Symbols Rounded','Material Symbols Sharp','Google Symbols'",monospacedFont:"'Operator Mono Lig','Fira Code','Source Code Pro','JetBrains Mono',Inconsolata,Monaco,'Roboto Mono','Ubuntu Mono','Anonymous Pro','Droid Sans Mono',Menlo,Consolas",monospacedFeature:'"liga" 0,"tnum","zero"',editorialSiteList:"image.baidu.com|feishu.cn|github.com|github.dev|github1s.com|docs.google.com|fonts.google.com|mail.google.com|support.google.com|newassets.hcaptcha.com|kdocs.cn|leetcode.cn|leetcode.com|notion.site|notion.so|notion.com|docs.qq.com|weread.qq.com|regex101.com|shimo.im|addon.tencentsuite.com|tool.lu|vscode.dev|wolai.com|wqxuetang.com|xiezuocat.com|note.youdao.com|youtube.com|yuque.com"};var $t;Fe.url.guideURI=`${Fe.url.feedback}/../wiki/${fe?encodeURIComponent("字体渲染（自用脚本）"):"Font-Rendering-(Customized)"}`,Fe.url.installURI=`${Fe.url.homepage}${fe?"index.html#字体渲染自用脚本":"index_en.html#font-rendering-customized"}-font-renderinguserjs`,Fe.var.style=t.Object.freeze({firefox:"input:is([type='text'],[type='password'],[type='search'],[type='email'],[type='tel'],[type='url'],[type='number']),input:not([type]){font-family:serif!important}",frDialog:`:root>dialog#${Fe.const.dialog}{display:block!important;visibility:visible!important;width:auto!important;height:auto!important;background:none!important;opacity:1!important;border:none!important;outline:none!important;z-index:2147483647!important}:root>dialog#${Fe.const.dialog}::backdrop{background:transparent!important}@font-face{font-family:Anton;font-style:normal;font-weight:400;font-display:swap;src:local("Impact"),url(${Fe.url.Anton}) format("woff2");unicode-range:U+00??,U+0131,U+0152-0153,U+02bb-02bc,U+02c6,U+02da,U+02dc,U+0304,U+0308,U+0329,U+2000-206f,U+2074,U+20ac,U+2122,U+2191,U+2193,U+2212,U+2215,U+feff,U+fffd}`,shared:`:host(fr-dialogbox),:host(fr-configure){position:fixed!important;top:0!important;left:0!important;width:100%!important;height:100%!important;background:0 0!important;pointer-events:none!important;--fr-shared-fontfamily:${mt.fontSelect},system-ui,-apple-system,BlinkMacSystemFont,sans-serif;--fr-shared-monospace:ui-monospace,'Operator Mono Lig','JetBrains Mono',monospace,${mt.fontSelect},sans-serif;--fr-shared-emoji:system-ui,-apple-system,BlinkMacSystemFont,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji,Android Emoji,mojiSymbol,EmojiOne Mozilla,Twemoji Mozilla,bwi-font;}.${Fe.const.seed}\\.disp\\:inline\\.block{display:inline-block!important}.${Fe.const.seed}\\.disp\\:block{display:block!important}.${Fe.const.seed}\\.disp\\:none{display:none!important}.${Fe.const.seed}\\.vis\\:visible{visibility:visible!important}.${Fe.const.seed}\\.vis\\:hidden{visibility:hidden!important}.${Fe.const.seed}\\.clr\\:8b0000{color:#8b0000!important}.${Fe.const.seed}\\.clr\\:cecece{color:#cecece!important}.${Fe.const.seed}\\.clr\\:crimson{color:#dc143c!important}.${Fe.const.seed}\\.fw\\:700{font-weight:700!important}.${Fe.const.seed}\\.opac\\:1{opacity:1!important}:is(#${Fe.id.container},.${Fe.class.db}) .${Fe.class.emoji}{text-shadow:1px 1px 2px #4b5b6b!important;vertical-align:2px;font:normal 400 16px/150% var(--fr-shared-emoji)!important}.${Fe.class.readonly}{background:linear-gradient(45deg,#ffe9e9,#ffe9e9 25%,transparent 0,transparent 50%,#ffe9e9 0,#ffe9e9 75%,transparent 0,transparent)!important;background-color:#fff7f7!important;background-size:50px 50px!important}`,frDialogBox:`:host(#${Fe.id.dialogbox}){z-index:2147483647}.${Fe.class.db}{position:absolute;top:calc(12% + 10px);right:20px;z-index:99999;display:block;overflow:hidden;box-sizing:content-box;width:100%;max-width:420px;border:2px solid #efefef;border-radius:6px;background:#fff;box-shadow:0 0 10px 0 #0000004d;color:#444;transition:opacity .5s;pointer-events:auto;opacity:0}.${Fe.class.db} *{text-shadow:0 0 1.25px #3d3d3d5f!important;font-family:var(--fr-shared-fontfamily),var(--fr-shared-emoji)!important;line-height:1.5!important;-webkit-text-stroke:0 transparent!important}.${Fe.class.db} textarea,.${Fe.class.db} input{background:#fefefe;color:#333}.${Fe.class.dbt}{display:flex;margin-top:0;padding:10px 15px;width:auto;background:#efefef;text-align:left;font-weight:700;font-size:18px!important;flex-wrap:nowrap;justify-content:space-between;align-items:center;align-content:center}#${Fe.const.seed}\\.dialog\\.close{cursor:pointer;color:gray}#${Fe.const.seed}\\.dialog\\.close:hover{transform:scale(1.8);color:grey}.${Fe.class.dbt},.${Fe.class.dbt} *{font-weight:700;font-size:20px!important;font-family:Candara,Times,var(--fr-shared-fontfamily)!important}.${Fe.class.dbm}{display:block;margin:5px;padding:10px;color:#444;text-align:left;font-weight:500;font-size:16px!important}.${Fe.class.dbb}{display:inline-block;box-sizing:content-box;margin:2px 1%;padding:8px 12px;min-width:12%;border-radius:4px;text-align:center;text-decoration:none!important;letter-spacing:0;font-weight:400;cursor:pointer}.${Fe.const.seed}\\.gradient\\.bg{background:#e7ffd9;animation:gradient 2s ease-in-out forwards}@keyframes gradient{0%{background:#e7ffd9}to{background:transparent}}.${Fe.class.db} .${Fe.class.dbt},.${Fe.class.db} .${Fe.class.dbb}{text-shadow:none!important;-webkit-text-stroke:0 transparent!important;-webkit-user-select:none;user-select:none}.${Fe.class.db} .${Fe.class.dbb}:hover{box-sizing:content-box;color:#fff;text-decoration:none!important;font-weight:700;opacity:.8}.${Fe.class.db} .${Fe.class.dbbf}:hover{box-shadow:0 0 3px #d93223!important}.${Fe.class.db} .${Fe.class.dbbf}{border:1px solid #d93223!important;border-radius:6px;background:#d93223!important;color:#fff!important;font-size:14px!important}.${Fe.class.db} .${Fe.class.dbbt}{border:1px solid #038c5a!important;border-radius:6px;background:#038c5a!important;color:#fff!important;font-size:14px!important}.${Fe.class.db} .${Fe.class.dbbt}:hover{box-shadow:0 0 3px #038c5a!important}.${Fe.class.db} .${Fe.class.dbbn}{border:1px solid #777!important;border-radius:6px;background:#777!important;color:#fff!important;font-size:14px!important}.${Fe.class.db} .${Fe.class.dbbn}:hover{box-shadow:0 0 3px #777!important}.${Fe.class.dbbc}{display:block;padding:2.5%;background:#efefef;color:#fff;text-align:right;font-size:initial}.${Fe.class.dbm} textarea{cursor:auto;overscroll-behavior:contain;scrollbar-color:auto}.${Fe.class.dbm} textarea::-webkit-scrollbar{width:8px;height:8px}.${Fe.class.dbm} textarea::-webkit-scrollbar-corner{border-radius:2px;background:#efefef;box-shadow:inset 0 0 3px #aaa}.${Fe.class.dbm} textarea::-webkit-scrollbar-thumb{border-radius:2px;background:#cfcfcf;box-shadow:inset 0 0 5px #999}.${Fe.class.dbm} textarea::-webkit-scrollbar-track{border-radius:2px;background:#efefef;box-shadow:inset 0 0 5px #aaa;}.${Fe.class.dbm} button:hover{background:#f6f6f6!important;box-shadow:0 0 3px #a7a7a7!important;cursor:pointer}.${Fe.class.dbm} p{margin:5px 0!important;text-align:left;text-indent:0;font-weight:400;font-size:16px;line-height:1.5!important;-webkit-user-select:none;user-select:none}.${Fe.class.dbm} ul{margin:0 0 0 10px!important;padding:2px;color:#808080;list-style:none;font:italic 400 14px/150% var(--fr-shared-fontfamily)!important;-webkit-user-select:none;user-select:none}.${Fe.class.dbm} ul::-webkit-scrollbar{width:10px;height:1px}.${Fe.class.dbm} ul::-webkit-scrollbar-thumb{border-radius:10px;background:#cfcfcf;box-shadow:inset 0 0 5px #999;}.${Fe.class.dbm} ul::-webkit-scrollbar-track{border-radius:10px;background:#efefef;box-shadow:inset 0 0 5px #aaa}.${Fe.class.dbm} ul li{display:list-item;list-style-type:none;word-break:break-all}.${Fe.class.dbm} li:before{display:none}.${Fe.class.dbm} ul#${Fe.const.seed}\\.vlist li:hover{background:#fdf6eccc!important}#${Fe.const.seed}\\.temp{padding:18px 8px;text-align:center;color:#555;font-size:14px!important}#${Fe.id.bk},#${Fe.id.pv},#${Fe.id.fs},#${Fe.id.fvp},#${Fe.id.hk},#${Fe.id.ct},#${Fe.id.mps},#${Fe.id.pdr},#${Fe.id.flc},#${Fe.id.gc},#${Fe.id.cm},#${Fe.id.fi}{display:flex;box-sizing:content-box;margin:0;padding:2px 4px!important;width:calc(98% - 10px);height:max-content;min-width:auto;min-height:40px;list-style:none;font-style:normal;justify-content:space-between;align-items:flex-start;word-break:break-word}.${Fe.class.checkbox}{display:none!important}.${Fe.class.checkbox}+label{position:relative;display:inline-block;box-sizing:content-box;margin:0 2px 0 0;padding:0;width:76px;height:32px;border-radius:7px;background:#f7836d;box-shadow:inset 0 0 10px #0000001a,0 0 5px #f5929266;white-space:nowrap;cursor:pointer}.${Fe.class.checkbox}+label::before{position:absolute;top:0;left:0;z-index:99;width:24px;height:32px;border-radius:7px;background:#fff;box-shadow:0 0 1px #00000099;color:#fff;content:' '}.${Fe.class.checkbox}+label::after{position:absolute;top:0;left:28px;padding:5px;border-radius:100px;color:#fff;content:'OFF';font-weight:700;font-style:normal;font-size:16px}.${Fe.class.checkbox}:checked+label{margin:0 2px 0 0;background:#67a5df!important;box-shadow:inset 0 0 10px #0000001a,0 0 5px #92c4f566;cursor:pointer}.${Fe.class.checkbox}:checked+label::after{left:10px;content:'ON'}.${Fe.class.checkbox}:checked+label::before{position:absolute;left:52px;z-index:99;content:' '}#${Fe.const.seed}\\.monospaced\\.siterules::placeholder,#${Fe.const.seed}\\.monospaced\\.font::placeholder,#${Fe.const.seed}\\.monospaced\\.feature::placeholder,#${Fe.const.seed}\\.custom\\.feature::placeholder,#${Fe.const.seed}\\.custom\\.variant::placeholder{color:#aaa!important;white-space:pre-line!important;font:normal 400 14px/150% var(--fr-shared-fontfamily)!important}.${Fe.const.seed}\\.VIP{margin:2px 0 0 0;color:#b8860b!important;font:normal 400 16px/150% var(--fr-shared-fontfamily)}.${Fe.const.seed}\\.VIP>u{all:initial;margin:0 4px 0 0;font:normal 500 16px/150% Arial!important;color:#b8860b!important}:is(#${Fe.id.pdr},#${Fe.id.flc},#${Fe.id.gc}) button{box-sizing:border-box!important;margin:0 5px 0 0!important;padding:5px!important;border:1px solid #999!important;border-radius:4px!important;background:#eee;color:#444!important;letter-spacing:normal!important;font-weight:400!important;font-size:14px!important}.${Fe.class.dbm} a{color:#0969da;text-decoration:none!important;font-style:inherit}.${Fe.class.dbm} a:hover{color:#dc143c;text-decoration:underline}#${Fe.id.feedback}{box-sizing:content-box;margin:0;padding:2px 10px;width:max-content;height:22px;min-width:auto;font-style:normal;font-size:16px;cursor:pointer}.${Fe.class.dbm} #${Fe.id.files}{display:none}#${Fe.id.feedback}:hover{color:#dc143c!important}#${Fe.id.feedback}:after{width:0;height:0;background:url('${Fe.url.loadingImg}') no-repeat -400px -300px;content:""}#${Fe.id.pdrr},#${Fe.id.flcid}{width:max-content;height:max-content;min-width:70px;min-height:32px}#${Fe.id.maxps}{box-sizing:border-box;padding:4px 5px;width:70px;min-width:70px;border:2px solid #b8860b;border-radius:4px;background:#efefef;color:#333;text-align:center;font:normal 400 16px/150% 'Anton',Times,serif!important}.${Fe.class.dbm} ul.${Fe.class.main}{overflow-x:hidden;box-sizing:content-box;margin:0;padding:5px 0;max-height:255px;overscroll-behavior:contain;scrollbar-color:auto}#${Fe.id.globaldisable}{width:max-content;height:max-content;min-width:70px;min-height:32px}#${Fe.const.seed}\\.del\\.sitedata{box-sizing:border-box;margin-left:15px;padding:3px 5px;width:max-content;height:max-content;max-width:120px;min-height:30px;border:1px solid #777;border-radius:4px;background:#eee;color:#333!important;letter-spacing:normal;font-weight:400;font-size:12px!important;cursor:pointer}#${Fe.const.seed}\\.sitedatalist>span{margin:0;padding:0 2px;color:#3e3e3e;font-weight:400;font-size:12px!important;cursor:pointer}#${Fe.const.seed}\\.save\\.sitedata{color:#4b0082;cursor:help;word-break:break-all}p.${Fe.const.seed}\\.exclusion{font:italic 700 24px/150% Candara,Times!important;word-break:break-all}#${Fe.const.seed}\\.sdata{box-sizing:content-box;margin:4px 6px;padding:2px 6px;width:57%;height:22px;outline:none!important;border:2px solid #777;border-radius:4px;font:normal 400 16px/150% var(--fr-shared-monospace)!important}#${Fe.const.seed}\\.sdata\\:search{box-sizing:border-box;margin:0;padding:3px 10px;width:max-content;height:max-content;min-width:60px;min-height:30px;border:1px solid #777;border-radius:4px;background:#eee;color:#333!important;outline:none!important;vertical-align:initial;text-align:center;letter-spacing:normal;font-weight:400;font-size:12px!important;cursor:pointer}#${Fe.const.seed}\\.sdata\\:clear{box-sizing:border-box;margin:0 0 0 4px;padding:3px 10px;width:max-content;height:max-content;min-width:60px;min-height:30px;border:1px solid #777;border-radius:4px;background:#eee;color:#333!important;vertical-align:initial;text-align:center;letter-spacing:normal;font-weight:400;font-size:12px!important;cursor:pointer}#${Fe.const.seed}\\.vlist{overflow-x:hidden;margin:0!important;padding:0!important;max-height:190px;list-style:none!important;overscroll-behavior:contain;scrollbar-color:auto}#${Fe.const.seed}\\.sdata\\:add{box-sizing:border-box;margin:0 0 0 4px;padding:3px 10px;width:max-content;height:max-content;min-width:60px;min-height:30px;border:1px solid #777;border-radius:4px;background:#eee;color:#8b0000!important;vertical-align:initial;text-align:center;letter-spacing:normal;font-weight:400;font-size:12px!important;cursor:pointer}#${Fe.const.seed}\\.vlist li[id^='${Fe.const.seed}.vlist.item:']{display:flex;overflow:hidden;margin:0;padding:5px;max-width:364px;color:#555;list-style:none;white-space:nowrap;font:normal 400 14px/150% var(--fr-shared-fontfamily)!important;justify-content:space-between}#${Fe.const.seed}\\.vlist span.${Fe.const.seed}\\.domainlist{overflow:hidden;margin-right:auto;padding-left:5px;width:85%;text-overflow:ellipsis;font-weight:700;-webkit-user-select:all;user-select:all}#${Fe.const.seed}\\.vlist span.${Fe.const.seed}\\.customdomain{overflow:hidden;margin-left:5px;width:57%;text-overflow:ellipsis;font-weight:700;-webkit-user-select:all;user-select:all}#${Fe.const.seed}\\.vlist a[id^='${Fe.const.seed}.vlist.item.link:']{padding:2px;background:0 0;color:#8b0000;font-size:14px!important;cursor:pointer}#${Fe.const.seed}\\.exSite\\.add{font:italic 700 24px/150% Candara,Times!important;word-break:break-all}#${Fe.const.seed}\\.custom\\.fontlist,#${Fe.const.seed}\\.fontoverride\\.defarray,#${Fe.const.seed}\\.fontscale\\.defjson{box-sizing:content-box;margin:0 0 4px 0;padding:5px;max-width:372px;min-width:372px;min-height:160px;max-height:457px;outline:0;border:1px solid #999;border-radius:6px;white-space:pre;font:normal 400 14px/150% var(--fr-shared-monospace)!important;resize:vertical;overscroll-behavior:contain;scrollbar-color:auto}#${Fe.const.seed}\\.warning\\.chn{display:block;margin:-7px 0 0 -7px!important;height:max-content;color:#dc143c;font-size:14px!important}#${Fe.const.seed}\\.warning\\.en{display:block;margin:-5px 0 0 0!important;height:max-content;color:#dc143c;font-size:14px!important}#${Fe.const.seed}\\.monospaced\\.siterules{box-sizing:border-box;margin:0!important;padding:5px!important;max-width:388px!important;min-width:388px!important;min-height:140px!important;max-height:256px;outline:0!important;border:1px solid #999;border-radius:6px;white-space:pre;font:normal 400 14px/150% var(--fr-shared-monospace)!important;resize:vertical;overscroll-behavior:contain;scrollbar-color:auto;word-break:keep-all!important}#${Fe.const.seed}\\.monospaced\\.font,#${Fe.const.seed}\\.monospaced\\.feature,#${Fe.const.seed}\\.custom\\.feature,#${Fe.const.seed}\\.custom\\.variant{box-sizing:border-box;padding:5px;width:380px;outline:0!important;border:1px solid #999;border-radius:6px;font:normal 400 14px/150% var(--fr-shared-monospace)!important}.${Fe.class.dbm} p:is(.${Fe.const.seed}\\.mono\\.notify,.${Fe.const.seed}\\.fontfeature,.${Fe.const.seed}\\.fontvariant){display:block;margin-top:10px!important;color:#555;font-size:14px!important}#${Fe.id.cm},#${Fe.id.fi}{margin:0 0 8px;width:97%!important;border-bottom:1px groove #ccc}.${Fe.class.dbm} span.${Fe.const.seed}\\.cusmono{margin:2px 0 0 0;color:#555!important;font-weight:700!important;user-select:none;-webkit-user-select:none}#${Fe.const.seed}\\.kbd{display:inline-block;box-sizing:content-box;margin:4px 0 0;padding:3px 10px;width:94%;border:1px solid #afb8c166;border-radius:6px;background:#f6f8fa;color:#666;vertical-align:middle;text-align:center;font-size:14px!important}.${Fe.const.seed}\\.clr\\:808080{color:#808080!important}.${Fe.const.seed}\\.fst\\:nml{font-style:normal!important}.${Fe.const.seed}\\.fst\\:ita{font-style:italic!important}.${Fe.const.seed}\\.fs\\:20p{font-size:20px!important}.${Fe.const.seed}\\.save\\:p{display:flex;height:30px;align-items:center}.${Fe.const.seed}\\.mh\\:22p{min-height:22px}.${Fe.const.seed}\\.indent\\:6p{text-indent:6px!important}.${Fe.const.seed}\\.mgr\\:5p{margin:0 5px 0 0}.${Fe.const.seed}\\.pd\\:0{padding:0}.${Fe.const.seed}\\.fs\\:14p{font-size:14px!important}.${Fe.const.seed}\\.fs\\:11p{font-size:11px!important}.${Fe.const.seed}\\.cs\\:pointer{cursor:pointer}.${Fe.const.seed}\\.wrap\\.break{word-wrap:break-word;word-break:break-all!important}.${Fe.const.seed}\\.clr\\:indigo{color:#4b0082!important}.${Fe.const.seed}\\.clr\\:green{color:#006400!important}.${Fe.const.seed}\\.clr\\:555{color:#555!important}.${Fe.const.seed}\\.fs\\:12p{font-size:12px!important}.${Fe.const.seed}\\.clr\\:tan{color:#d2b48c!important}.${Fe.const.seed}\\.clr\\:708090{color:#708090!important}.${Fe.const.seed}\\.clr\\:ff7f50{color:#ff7f50!important}.${Fe.const.seed}\\.list\\:p{display:flex;justify-content:left;align-items:center}.${Fe.const.seed}\\.mg\\:05p{margin:0 5px}.${Fe.const.seed}\\.clr\\:ff6347{color:#ff6347!important}.${Fe.const.seed}\\.v\\.en{padding:0px 4px;font:italic 700 20px/130% Candara,Times New Roman!important}.${Fe.const.seed}\\.v\\.cn{padding:4px;font:italic 700 22px/150% Candara,Times!important}.${Fe.const.seed}\\.hi\\.cn{font:italic 700 22px/150% var(--fr-shared-fontfamily)!important}.${Fe.const.seed}\\.hi\\.en{font:normal 700 20px/150% var(--fr-shared-fontfamily)!important}.${Fe.const.seed}\\.pd\\:4p{padding:4px}.${Fe.const.seed}\\.lh\\:180{line-height:180%!important}.${Fe.const.seed}\\.clr\\:b8860b{color:#b8860b!important}.${Fe.const.seed}\\.tal\\:center{text-align:center!important}.${Fe.const.seed}\\.cps{padding-bottom:6px;font-size:18px!important}.${Fe.const.seed}\\.cpsa{display:inline-block;overflow:hidden;width:302px;height:237px;border:2px solid #b8860b;border-radius:8px;background:url('${Fe.url.loadingImg}') 50% 50% no-repeat}.${Fe.const.seed}\\.clr\\:ff0000{border-color:#ff0000!important}.${Fe.const.seed}\\.clr\\:ff8c00{border-color:#ff8c00!important}.${Fe.const.seed}\\.input\\.pdb\\:5px{padding-bottom:5px;width:98%;}.${Fe.const.seed}\\.bd\\:crimson{border:2px solid #dc143c!important}.${Fe.const.seed}\\.list\\.reset{text-decoration:line-through;font-style:italic}#${Fe.const.seed}\\.report\\:author{overflow-y:auto;margin:0!important;padding:0!important;max-height:300px;list-style-position:outside}#${Fe.const.seed}\\.report\\:author li{padding:2px}#${Fe.const.seed}\\.custom\\.fontlist::placeholder{color:#aaa!important;white-space:pre-line!important;font:normal 400 14px/150% var(--fr-shared-fontfamily)!important;word-break:break-all!important}#${Fe.const.seed}\\.update li{margin:0;padding:1px 4px;color:#808080;font:normal 400 14px/150% var(--fr-shared-fontfamily)!important}#${Fe.const.seed}\\.update .${Fe.const.seed}\\.added{list-style-type:'＋'}#${Fe.const.seed}\\.update .${Fe.const.seed}\\.removed{list-style-type:'－'}#${Fe.const.seed}\\.update .${Fe.const.seed}\\.fixed{list-style-type:'＠'}#${Fe.const.seed}\\.update .${Fe.const.seed}\\.info{color:#daa520;word-break:break-word;list-style-type:'♯'}#${Fe.const.seed}\\.update .${Fe.const.seed}\\.warn{color:#e90000;word-break:break-word;list-style-type:'✘'}#${Fe.const.seed}\\.update .${Fe.const.seed}\\.init{color:#65a16a;word-break:break-word;list-style-type:'⚑'}.${Fe.class.dbm} input:focus,.${Fe.class.dbm} textarea:focus{box-shadow:inset 0 1px 3px #0000001a,0 0 4px #6e6f7099!important}@-moz-document url-prefix() {.${Fe.class.dbm} textarea,.${Fe.class.dbm} ul,#${Fe.const.seed}\\.custom\\.fontlist,#${Fe.const.seed}\\.monospaced\\.siterules,#${Fe.const.seed}\\.fontoverride\\.defarray,#${Fe.const.seed}\\.fontscale\\.defjson{scrollbar-color:#bbbbbbba #eeeeee12;scrollbar-width:thin}}`,frConfigure:`:host(#${Fe.id.configure}){z-index:2147483645}#${Fe.id.container}{position:absolute;top:10px;right:24px;z-index:99999;display:block;box-sizing:content-box;padding:4px;border-radius:12px;background:#f0f6ff!important;box-shadow:0 0 4px 0 #0000004d;color:#333;text-align:left;font-weight:700;font-size:16px!important;opacity:0;transition:opacity .5s;width:auto;overflow:hidden;pointer-events:auto}#${Fe.id.container} .${Fe.const.seed}\\.dialog\\.scrollbar{display:block;visibility:hidden;overflow-x:hidden;overflow-y:auto;max-height:max(calc(98vh - 10px),100px);min-height:10%;scrollbar-color:auto;overscroll-behavior:contain}#${Fe.id.container} .${Fe.const.seed}\\.dialog\\.scrollbar:hover{visibility:visible}#${Fe.id.container} .${Fe.const.seed}\\.dialog\\.scrollbar::-webkit-scrollbar{width:6px;height:1px}#${Fe.id.container} .${Fe.const.seed}\\.dialog\\.scrollbar::-webkit-scrollbar-thumb{border-radius:10px;background:#487baf;box-shadow:inset 0 0 5px #67a5df}#${Fe.id.container} .${Fe.const.seed}\\.dialog\\.scrollbar::-webkit-scrollbar-track{border-radius:10px;background:#efefef;box-shadow:inset 0 0 5px #67a5df}#${Fe.id.container} *{text-shadow:none!important;font-weight:700;font-size:16px;font-family:var(--fr-shared-fontfamily),var(--fr-shared-emoji)!important;line-height:1.5!important;-webkit-text-stroke:0 transparent!important}#${Fe.id.container} fieldset{display:block;visibility:visible;margin:2px;padding:4px 6px;width:auto;height:auto;min-height:475px;border:2px groove #67a5df!important;border-radius:10px;background:#f0f6ff}#${Fe.id.container} legend{position:relative;float:none;display:block;visibility:visible;box-sizing:content-box;margin:0;padding:0 32px 0 8px;width:auto!important;height:auto!important;border:none!important;border-radius:6px;background:#f0f6ff!important;font:normal 700 16px/150% var(--fr-shared-fontfamily)!important}#${Fe.id.container} fieldset ul{margin:0;padding:0;background:#f0f6ff!important}#${Fe.id.container} ul li{float:none;display:block;box-sizing:content-box;margin:3px 0;min-width:-webkit-fill-available;min-width:-moz-available;border:none;background:#f0f6ff!important;list-style:none;cursor:default;-webkit-user-select:none;user-select:none}#${Fe.id.container} ul li:before{display:none}#${Fe.id.container} .${Fe.class.rotation} svg{visibility:visible!important;overflow:hidden;width:24px;height:24px;vertical-align:initial!important;fill:#67a5df}#${Fe.id.container} .${Fe.class.rotation} svg:hover{cursor:help}#${Fe.const.seed}\\.scriptname{display:inline-block;margin:0 4px 0 0;vertical-align:bottom;overflow:hidden;min-width:130px;max-width:225px;text-overflow:ellipsis;white-space:nowrap;font-weight:700!important;-webkit-user-select:all;user-select:all}#${Fe.const.seed}\\.scriptname:hover{cursor:help}#${Fe.id.container} .${Fe.class.title} .${Fe.class.guide}{position:absolute;display:inline-block;cursor:pointer}@keyframes rotation{0%{-webkit-transform:rotate(0)}to{-webkit-transform:rotate(1turn)}}.${Fe.class.title} .${Fe.class.rotation}{position:relative;display:inline-block;top:auto;right:auto;bottom:auto;left:auto;margin:0;padding:0;width:24px;height:24px;-webkit-transform:rotate(1turn);transform-origin:center 50% 0;animation:rotation 6s linear infinite}#${Fe.id.container} input:not([type='range'],[type='checkbox']):focus,#${Fe.id.container} textarea:focus{box-shadow:inset 0 1px 3px #0000001a,0 0 6px #52a8ec99!important}#${Fe.id.fontList}{padding:2px 10px 0;min-height:73px}#${Fe.id.fontFace},#${Fe.id.fontSmooth}{display:flex!important;padding:2px 10px;width:calc(100% - 18px);height:40px;min-width:auto;align-items:center;justify-content:space-between}#${Fe.id.fontSize}{padding:2px 10px;height:60px}#${Fe.id.fontStroke}{padding:2px 10px;height:60px}#${Fe.id.fontShadow}{padding:2px 10px;height:60px}#${Fe.id.container} #${Fe.id.shadowColor}{display:flex;padding:2px 10px;width:auto;min-height:45px;align-items:center;justify-content:space-around;flex-wrap:nowrap;flex-direction:row}#${Fe.id.fontCss},#${Fe.id.fontEx}{padding:2px 10px;height:110px;min-height:110px;min-width:254px!important}#${Fe.id.submit}{padding:2px 10px;height:40px;display:flex!important}#${Fe.id.fontList} .${Fe.class.selector} a{text-decoration:none;font-weight:400}#${Fe.id.fontList} .${Fe.class.label}{display:inline-block;margin:-1px 4px 5px 0;padding:0;height:34px;line-height:100%!important}#${Fe.id.fontList} .${Fe.class.label} span{display:inline-block;overflow:hidden;box-sizing:border-box;padding:5px;width:max-content;height:max-content;max-width:200px;min-width:12px;background:#67a5df;color:#fff;text-overflow:ellipsis;white-space:nowrap;font-weight:400;font-size:16px!important}#${Fe.id.fontList} .${Fe.class.close}:hover{border-radius:2px;background:#2d7dca;color:#ff6347}#${Fe.id.fontList} .${Fe.class.close}{width:12px}#${Fe.id.fontList} .${Fe.class.selector}{overflow-x:hidden;box-sizing:border-box;margin:0 0 6px 0;padding:6px 0 0 6px;width:100%;max-width:254px;max-height:90px;min-width:100%;min-height:45px;border:2px solid #67a5df!important;border-radius:6px;overscroll-behavior:contain;scrollbar-color:auto}#${Fe.id.selector}{width:100%;max-width:100%;display:none}#${Fe.id.selector} label{display:block;margin:0 0 4px;color:#333;cursor:auto}#${Fe.id.cleaner}{margin-left:5px;cursor:pointer}#${Fe.id.cleaner}:hover{color:#dc143c}#${Fe.id.fontList} .${Fe.class.selector}::-webkit-scrollbar{width:6px;height:1px}#${Fe.id.fontList} .${Fe.class.selector}::-webkit-scrollbar-thumb{border-radius:10px;background:#487baf;box-shadow:inset 0 0 2px #67a5df}#${Fe.id.fontList} .${Fe.class.selector}::-webkit-scrollbar-track{border-radius:10px;background:#efefef;box-shadow:inset 0 0 2px #67a5df}#${Fe.id.fontList} .${Fe.class.selectFontID} span.${Fe.class.spanlabel},#${Fe.id.selector} span.${Fe.class.spanlabel}{display:block!important;margin:0!important;padding:0 0 4px;width:auto;border:0;background:transparent!important;color:#333;text-align:left!important}#${Fe.id.fontList} .${Fe.class.selectFontID}{width:auto}#${Fe.id.fontList} .${Fe.class.selectFontID} input{overflow:hidden;box-sizing:border-box;margin:0;padding:1px 4px 1px 0px;width:230px;height:42px;max-width:100%;min-width:100%;outline:none;border:2px solid #67a5df;border-radius:6px;background:#fafafa;text-indent:8px;text-overflow:ellipsis;color:#333;font:normal 700 16px/150% var(--fr-shared-fontfamily)!important}#${Fe.id.fontList} .${Fe.class.selectFontID} input[disabled]{pointer-events:none!important}#${Fe.id.fontList} input[disabled]::placeholder{color:#444a!important}#${Fe.id.fontList} .${Fe.class.selectFontID} input:focus:not(:placeholder-shown)~span{display:none}#${Fe.id.fontList} .${Fe.class.selectFontID} input::-webkit-search-cancel-button{margin:auto 4px;cursor:pointer}#${Fe.id.fontList} .${Fe.class.selectFontID} dl{display:none;position:absolute;z-index:1000;overflow-x:hidden;box-sizing:content-box;margin:4px 0 0;padding:4px 8px;width:auto;max-width:calc(100% - 68px);max-height:298px;min-width:60%;border:2px solid #67a5df!important;border-radius:6px;background:#fff;white-space:nowrap;font-size:18px!important;overscroll-behavior:contain;scrollbar-color:auto}#${Fe.const.seed}\\.fontoverride\\.def:hover,#${Fe.const.seed}\\.fontscale\\.def:hover{cursor:help;color:#8b0000}#${Fe.const.seed}\\.search::placeholder{color:#3699!important;font:normal 700 16px/150% var(--fr-shared-fontfamily)!important}#${Fe.id.fontList} .${Fe.class.selectFontID} dl::-webkit-scrollbar{width:10px;height:1px}#${Fe.id.fontList} .${Fe.class.selectFontID} dl::-webkit-scrollbar-thumb{border-radius:10px;background:#487baf;box-shadow:inset 0 0 5px #67a5df}#${Fe.id.fontList} .${Fe.class.selectFontID} dl::-webkit-scrollbar-track{border-radius:10px;background:#efefef;box-shadow:inset 0 0 5px #67a5df}#${Fe.id.fontList} .${Fe.class.selectFontID} dl dd{display:block;overflow-x:hidden;box-sizing:content-box;margin:1px 8px;padding:5px 0;width:-moz-available;width:-webkit-fill-available;max-width:100%;min-width:100%;text-overflow:ellipsis;font-weight:400;font-size:21px!important}#${Fe.id.fontList} .${Fe.class.selectFontID} dl dd:hover{overflow-x:hidden;box-sizing:content-box;min-width:-moz-available;min-width:-webkit-fill-available;background:#67a5df;color:#fff;text-overflow:ellipsis}.${Fe.class.checkbox}{display:none!important}.${Fe.class.checkbox}+label{position:relative;display:inline-block;box-sizing:content-box;margin:0 2px 0 0;padding:0;width:76px;height:32px;border-radius:7px;background:#f7836d;box-shadow:inset 0 0 10px #0000001a,0 0 5px #f5929266;white-space:nowrap;cursor:pointer}.${Fe.class.checkbox}+label::before{position:absolute;top:0;left:0;z-index:99;width:24px;height:32px;border-radius:7px;background:#fff;box-shadow:0 0 1px #00000099;color:#fff;content:" "}.${Fe.class.checkbox}+label::after{position:absolute;top:0;left:28px;padding:5px;border-radius:100px;color:#fff;content:"OFF";font-weight:700;font-style:normal;font-size:16px}.${Fe.class.checkbox}:checked+label{margin:0 2px 0 0;background:#67a5df!important;box-shadow:inset 0 0 10px #0000001a,0 0 5px #92c4f566;cursor:pointer}.${Fe.class.checkbox}:checked+label::after{left:10px;content:"ON"}.${Fe.class.checkbox}:checked+label::before{position:absolute;left:52px;z-index:99;content:" "}#${Fe.id.fface} label,#${Fe.id.fface}+label::after,#${Fe.id.fface}+label::before,#${Fe.id.smooth} label,#${Fe.id.smooth}+label::after,#${Fe.id.smooth}+label::before{-webkit-transition:all .3s ease-in;transition:all .3s ease-in}#${Fe.id.fontShadow} div.${Fe.class.flex}:before,#${Fe.id.fontShadow} div.${Fe.class.flex}:after,#${Fe.id.fontStroke} div.${Fe.class.flex}:before,#${Fe.id.fontStroke} div.${Fe.class.flex}:after,#${Fe.id.fontSize} div.${Fe.class.flex}:before,#${Fe.id.fontSize} div.${Fe.class.flex}:after{display:none}#${Fe.id.shadowSize},#${Fe.id.strokeSize},#${Fe.id.fontScale}{box-sizing:content-box;margin:0 10px 0 0!important;padding:0;width:56px!important;height:32px!important;outline:none!important;border:2px solid #67a5df!important;border-radius:4px;background:#fafafa!important;color:#111!important;text-align:center;text-indent:0;font-weight:400!important;font-size:17px!important;font-family:'Anton',Times,serif!important}#${Fe.id.fontScale}[disabled]{background:#e4e7edd1!important;color:#555!important;filter:grayscale(.9)}#${Fe.id.fviewport},#${Fe.id.fstroke},#${Fe.id.rdCanvas}{visibility:visible;width:auto;color:#666;font-size:12px!important}#${Fe.id.fviewport}>label,#${Fe.id.fstroke}>label,#${Fe.id.rdCanvas}>label{float:none!important;display:inline!important;margin:0!important;padding:0 4px 0 2px!important;color:#666!important;font-size:12px!important;cursor:help!important}#${Fe.id.fixViewport},#${Fe.id.fixStroke},#${Fe.id.renderCanvas}{display:inline-block;margin:0 2px 0 0!important;width:14px!important;height:14px!important;vertical-align:text-bottom;cursor:pointer;-webkit-appearance:none!important}#${Fe.id.fixViewport}:checked::after,#${Fe.id.fixStroke}:checked::after,#${Fe.id.renderCanvas}:checked::after{border:0!important;background:#65a0db;color:#fff;content:"✓";font-weight:700;font-size:12px;line-height:14px}.${Fe.class.flex}{display:flex;width:auto;min-width:100%;align-items:center;justify-content:space-between;flex-wrap:nowrap;flex-direction:row}.${Fe.class.slider} input{visibility:hidden}#${Fe.id.fixViewport}::after,#${Fe.id.fixStroke}::after,#${Fe.id.renderCanvas}::after{position:relative;top:0;display:inline-block;margin:0;padding:0;width:14px;height:14px;border-radius:3px;background:#aaa;color:#fff;content:"✗";vertical-align:top;text-align:center;font-weight:700;font-size:10px;line-height:14px}#${Fe.id.shadowColor} .${Fe.class.frColorPicker} #${Fe.id.color}{box-sizing:border-box;margin:0;padding:0 8px 0 0;min-width:160px;max-width:160px;height:35px!important;outline:none!important;border:2px solid #67a5df!important;border-radius:4px;background:#fdfdffb0;color:#333!important;text-align:center;text-indent:0;font-weight:400!important;font-size:18px!important;font-family:'Anton',Times,serif!important;cursor:pointer}#${Fe.id.fontCss} textarea,#${Fe.id.fontEx} textarea{display:block;box-sizing:border-box;margin:0;padding:5px;width:calc(100% - 2px)!important;height:78px;max-width:calc(100% - 2px);max-height:78px;min-width:calc(100% - 2px);min-height:78px;outline:none!important;border:2px solid #67a5df!important;border-radius:6px;scrollbar-color:auto;color:#0b5b9c!important;font:normal 600 14px/150% var(--fr-shared-monospace)!important;resize:none;cursor:auto;word-break:break-all;overscroll-behavior:contain;scrollbar-color:auto}#${Fe.id.fontCss} textarea::-webkit-scrollbar{width:6px;height:1px}#${Fe.id.fontCss} textarea::-webkit-scrollbar-thumb{border-radius:10px;background:#487baf;box-shadow:inset 0 0 2px #67a5df}#${Fe.id.fontCss} textarea::-webkit-scrollbar-track{border-radius:10px;background:#efefef;box-shadow:inset 0 0 2px #00000033}#${Fe.id.fontEx} textarea{background:#fafafa!important}#${Fe.id.fontEx} textarea::-webkit-scrollbar{width:6px;height:1px}#${Fe.id.fontEx} textarea::-webkit-scrollbar-thumb{border-radius:10px;background:#487baf;box-shadow:inset 0 0 2px #67a5df}#${Fe.id.fontEx} textarea::-webkit-scrollbar-track{border-radius:10px;background:#efefef;box-shadow:inset 0 0 2px #67a5df}.${Fe.class.switcher}{float:right;box-sizing:border-box;margin:-2px 4px 0 0;padding:0 6px;border:2px double #67a5df;border-radius:4px;color:#0a68c1;}#${Fe.id.fontCss} textarea::placeholder,#${Fe.id.fontEx} textarea::placeholder{color:#555;font:italic 500 14px/150% var(--fr-shared-fontfamily)!important;opacity:.85}#${Fe.id.cSwitch}:hover,#${Fe.id.eSwitch}:hover{cursor:pointer;-webkit-user-select:none;user-select:none}.${Fe.class.notreadonly}{background:linear-gradient(45deg,#e9ffe9,#e9ffe9 25%,transparent 0,transparent 50%,#e9ffe9 0,#e9ffe9 75%,transparent 0,transparent)!important;background-color:#f7fff7!important;background-size:50px 50px!important}#${Fe.id.submit} .${Fe.class.submit}{margin-left:auto}#${Fe.id.backup}{display:none}#${Fe.id.submit} button{box-sizing:border-box;margin:0;padding:5px 10px;width:auto;height:35px;min-width:min-content;min-height:35px;border:2px solid #6ba7e0;border-radius:6px;background:#67a5df;background-image:none;color:#fff!important;font:normal 600 14px/150% var(--fr-shared-fontfamily)!important;cursor:pointer}#${Fe.id.submit} button:hover{box-shadow:0 0 5px #042f6459!important}#${Fe.id.submit} .${Fe.class.cancel},#${Fe.id.submit} .${Fe.class.reset}{margin-right:6px}.${Fe.class.anim}{border:2px solid #dc143c!important;background:#dc143c!important;animation:jiggle 1.8s ease-in infinite}@keyframes jiggle{48%,62%{transform:scale(1,1)}50%{transform:scale(1.1,.9)}56%{transform:scale(.9,1.1) translate(0,-5px)}59%{transform:scale(1,1) translate(0,-3px)}}.${Fe.class.tooltip}{position:relative;padding:0;cursor:help;-webkit-user-select:none;user-select:none}.${Fe.class.tooltip}:active .${Fe.class.tooltip}{display:block}.${Fe.const.seed}\\.mgl\\:-5p{margin:0 0 0 -5px}#${Fe.id.container} .${Fe.class.tooltip} .${Fe.class.tooltip} *{font-size:14px}.${Fe.class.tooltip} .${Fe.class.tooltip}{position:absolute;z-index:999999;display:none;box-sizing:content-box;padding:10px 10px 0 10px;width:234px;max-width:234px;border:2px solid #b8c4ce;border-radius:6px;background:#54a2ec;color:#fff;font-weight:400;opacity:.92;word-break:break-all}#${Fe.id.container} .${Fe.class.tooltip} .${Fe.class.tooltip} em{font-style:normal}#${Fe.id.container} .${Fe.class.tooltip} .${Fe.class.tooltip} strong{color:#ff8c00;font-size:18px}#${Fe.id.container} .${Fe.class.tooltip} .${Fe.class.tooltip} p{display:block;margin:0 0 10px;color:#fff;text-indent:0;line-height:150%}.${Fe.class.ps1}{position:relative;top:-33px;right:3px;float:right;margin:0;padding:0;width:24px;height:0}.${Fe.class.ps2}{top:35px;right:-7px}.${Fe.class.ps3},.${Fe.class.ps4},.${Fe.class.ps5}{bottom:30px;left:auto}#${Fe.id.fshadow}{visibility:hidden;margin-top:5px;position:absolute;z-index:999;box-sizing:content-box;padding:10px;width:234px;max-width:234px;border:2px solid #67a5df;border-radius:6px;background:#f0f6ff;color:#333;opacity:.92;left:21px}#${Fe.id.fshadow} .${Fe.const.seed}\\.fix\\.label{display:flex;align-items:center;justify-content:space-around}#${Fe.id.fshadow} .${Fe.const.seed}\\.fix\\.text{padding:5px;font-size:12px;font-weight:400;line-height:170%!important;color:#808287;word-break:break-all}.${Fe.const.seed}\\.mg\\:0\\.pd\\:0{margin:0;padding:0}.${Fe.const.seed}\\.checkbox{height:32px;align-self:center}.${Fe.const.seed}\\.ft\\:gs1{filter:grayscale(1)!important}.${Fe.const.seed}\\.mg\\:0-3p\\.pd\\:0{margin:0 -3px;padding:0}.${Fe.const.seed}\\.mgb\\:6p{margin:0 0 6px 0}.${Fe.const.seed}\\.bdlr\\:4px{border-top-left-radius:4px;border-bottom-left-radius:4px}.${Fe.const.seed}\\.bdrr\\:4px{border-top-right-radius:4px;border-bottom-right-radius:4px}.${Fe.const.seed}\\.usel\\:none{user-select:none!important}.${Fe.const.seed}\\.h\\:35p\\.mh\\:35p{height:35px!important;min-height:35px!important}.${Fe.const.seed}\\.prvw{background:#ff7f50!important;border-color:#ff7f50!important}.${Fe.const.seed}\\.input\\.color{background-position:left top,left top!important;background-size:var(--fr-input-gb-size,"auto,35px 16px")!important;background-repeat:repeat-y,repeat-y!important;background-origin:padding-box,padding-box!important;background-image:linear-gradient(90deg,var(--fr-input-color) 0,var(--fr-input-color) var(--fr-input-color-edge,35px),transparent var(--fr-input-color-edge2,36px),transparent),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACMAAAAQCAYAAACcN8ZaAAAAAXNSR0IArs4c6QAAAFNJREFUSEtjnDlz5n8GPODs2bP4pBmMjY3xypOin3HUMUhhiRyyoyGDnMhGQwZXlhu8IZOWloa3nKFmOYItdJDLIcZRxyAF0WjI4MpNoyEz5EIGAMmNh+nDrPy/AAAAAElFTkSuQmCC")!important;padding-left:var(--fr-input-padding-left,43px)!important}#${Fe.id.fontList} .${Fe.class.selectFontID} dl>dt{all:initial;display:none;padding:8px;border-radius:4px;border:1px solid #e51111;background:#e51111;word-break:break-all;color:#efea11;font-size:15px;cursor:progress}@-moz-document url-prefix() {#${Fe.id.fontList} .${Fe.class.label}{margin:-1px 0 4px 0}#${Fe.id.fontList} .${Fe.class.selectFontID} input{padding:1px 24px 1px 0px!important}#${Fe.id.fontList} .${Fe.class.selectFontID} input:focus:not(:placeholder-shown){padding:1px 8px 1px 0px!important}#${Fe.id.container} .${Fe.const.seed}\\.dialog\\.scrollbar{padding:0 4px 0 2px}#${Fe.id.container} .${Fe.const.seed}\\.dialog\\.scrollbar,#${Fe.id.fontList} .${Fe.class.selector},#${Fe.id.fontList} .${Fe.class.selectFontID} dl,#${Fe.id.fontCss} textarea,#${Fe.id.fontEx} textarea{scrollbar-color: #c3cdddff #f1f0f012;scrollbar-width:thin}}`,frSlider:`:host(.${Fe.class.range}){--primary-color:#67a5df;--value-offset-y:var(--ticks-gap);--value-active-color:#fff;--value-background:transparent;--value-background-hover:var(--primary-color);--value-font:italic 700 14px/14px ui-monospace,Consolas,monospace;--fill-color:var(--primary-color);--progress-background:#dfdfdf;--progress-radius:20px;--show-min-max:none;--track-height:calc(var(--thumb-size) / 2);--min-max-font:12px serif;--min-max-opacity:0.5;--min-max-x-offset:10%;--thumb-size:22px;--thumb-color:#fff;--thumb-shadow:0 0 3px #00000066,0 0 1px #00000080 inset,0 0 0 99px var(--thumb-color) inset;--thumb-shadow-active:0 0 0 calc(var(--thumb-size) / 4) inset var(--thumb-color),0 0 0 99px var(--primary-color) inset,0 0 3px #00000066;--thumb-shadow-hover:0 0 0 calc(var(--thumb-size) / 4) inset var(--thumb-color),0 0 0 99px #ff8c00 inset,0 0 3px #00000066;--ticks-thickness:1px;--ticks-height:5px;--ticks-gap:var(--ticks-height, 0);--ticks-color:transparent;--ticks-count:(var(--max) - var(--min))/var(--step);--maxTicksAllowed:1000;--too-many-ticks:Min(1, Max(var(--ticks-count) - var(--maxTicksAllowed), 0));--x-step:Max(var(--step), var(--too-many-ticks) * (var(--max) - var(--min)));--tickIntervalPerc_1:Calc((var(--max) - var(--min)) / var(--x-step));--tickIntervalPerc:calc((100% - var(--thumb-size)) / var(--tickIntervalPerc_1) * var(--tickEvery, 1));--value-a:Clamp(var(--min), var(--value, 0), var(--max));--value-b:var(--value, 0);--text-value-a:var(--text-value, "");--completed-a:calc((var(--value-a) - var(--min)) / (var(--max) - var(--min)) * 100);--completed-b:calc((var(--value-b) - var(--min)) / (var(--max) - var(--min)) * 100);width:auto;min-width:105%!important;margin:-3px 0 0 -7px;box-sizing:content-box;display:inline-block;height:Max(var(--track-height),var(--thumb-size));background:linear-gradient(to right,var(--ticks-color) var(--ticks-thickness),transparent 1px) repeat-x;background-color:transparent;background-size:var(--tickIntervalPerc) var(--ticks-height);background-position-x:calc(var(--thumb-size)/ 2 - var(--ticks-thickness)/ 2);background-position-y:var(--flip-y,bottom);padding-bottom:var(--flip-y,var(--ticks-gap));padding-top:calc(var(--flip-y) * var(--ticks-gap));position:relative;z-index:1;--ca:Min(var(--completed-a), var(--completed-b));--cb:Max(var(--completed-a), var(--completed-b));--thumbs-too-close:Clamp(-1, 1000 * (Min(1, Max(var(--cb) - var(--ca) - 5, -1)) + 0.001), 1);--thumb-close-to-min:Min(1, Max(var(--ca) - 5, 0));--thumb-close-to-max:Min(1, Max(95 - var(--cb), 0))}:host(.${Fe.class.range}[disabled]){filter:grayscale(0.9);}:host(.${Fe.class.range}[data-ticks-position=top]){--flip-y:1}:host(.${Fe.class.range}::after),:host(.${Fe.class.range}::before){--offset:calc(var(--thumb-size) / 2);content:counter(x);display:var(--show-min-max,block);font:var(--min-max-font);position:absolute;bottom:var(--flip-y,-2.5ch);top:calc(-2.5ch * var(--flip-y));opacity:Clamp(0,var(--at-edge),var(--min-max-opacity));transform:translateX(calc(var(--min-max-x-offset) * var(--before,-1) * -1)) scale(var(--at-edge));pointer-events:none}:host(.${Fe.class.range}::before){--before:1;--at-edge:var(--thumb-close-to-min);counter-reset:x var(--min);left:var(--offset)}:host(.${Fe.class.range}::after){--at-edge:var(--thumb-close-to-max);counter-reset:x var(--max);right:var(--offset)}.${Fe.class.rangeProgress}{--start-end:calc(var(--thumb-size) / 2);--clip-end:calc(100% - (var(--cb)) * 1%);--clip-start:calc(var(--ca) * 1%);--clip:inset(-20px var(--clip-end) -20px var(--clip-start));position:absolute;left:var(--start-end);right:var(--start-end);top:calc(var(--ticks-gap) * var(--flip-y,0) + var(--thumb-size)/ 2 - var(--track-height)/ 2);height:calc(var(--track-height));background:var(--progress-background,#eee);pointer-events:none;z-index:-1;border-radius:var(--progress-radius)}.${Fe.class.rangeProgress}::before{content:"";position:absolute;left:0;right:0;clip-path:var(--clip);top:0;bottom:0;background:var(--fill-color,#000);box-shadow:var(--progress-flll-shadow);z-index:1;border-radius:inherit}.${Fe.class.rangeProgress}::after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;box-shadow:var(--progress-shadow);pointer-events:none;border-radius:inherit}:host(.${Fe.class.range})>input:only-of-type~.${Fe.class.rangeProgress}{--clip-start:0}:host(.${Fe.class.range})>input::-webkit-slider-runnable-track{background:transparent!important;box-shadow:none!important;border:none!important}:host(.${Fe.class.range})>input{-webkit-appearance:none;box-shadow:none!important;width:100%;height:var(--thumb-size)!important;margin:0!important;padding:0!important;position:absolute!important;left:0;top:calc(50% - Max(var(--track-height),var(--thumb-size))/ 2 + calc(var(--ticks-gap)/ 2 * var(--flip-y,-1)))!important;border:0!important;cursor:grab;outline:0!important;background:0 0!important;--thumb-shadow:var(--thumb-shadow-active)}:host(.${Fe.class.range})>input:not(:only-of-type){pointer-events:none}:host(.${Fe.class.range})>input::-webkit-slider-thumb{appearance:none;border:none;height:var(--thumb-size);width:var(--thumb-size);transform:var(--thumb-transform);border-radius:var(--thumb-radius,50%);background:var(--thumb-color);box-shadow:var(--thumb-shadow);pointer-events:auto;transition:.1s}:host(.${Fe.class.range})>input::-moz-range-thumb{appearance:none;border:none;height:var(--thumb-size);width:var(--thumb-size);transform:var(--thumb-transform);border-radius:var(--thumb-radius,50%);background:var(--thumb-color);box-shadow:var(--thumb-shadow);pointer-events:auto;transition:.1s}:host(.${Fe.class.range})>input::-ms-thumb{appearance:none;border:none;height:var(--thumb-size);width:var(--thumb-size);transform:var(--thumb-transform);border-radius:var(--thumb-radius,50%);background:var(--thumb-color);box-shadow:var(--thumb-shadow);pointer-events:auto;transition:.1s}:host(.${Fe.class.range})>input:hover{--thumb-shadow:var(--thumb-shadow-active)}:host(.${Fe.class.range})>input:hover+output{--value-background:var(--value-background-hover);--y-offset:-1px;color:var(--value-active-color);box-shadow:0 0 0 3px var(--value-background)}:host(.${Fe.class.range})>input:active{--thumb-shadow:var(--thumb-shadow-hover);cursor:grabbing;z-index:2}:host(.${Fe.class.range})>input:active+output{transition:0s;opacity:0.9;display:-webkit-box;-webkit-box-orient:horizontal;-webkit-box-pack:center;-webkit-box-align:center;-moz-box-orient:horizontal;-moz-box-pack:center;-moz-box-align:center}:host(.${Fe.class.range})>input:nth-of-type(1){--is-left-most:Clamp(0, (var(--value-a) - var(--value-b)) * 99999, 1)}:host(.${Fe.class.range})>input:nth-of-type(1)+output{--value:var(--value-a);--x-offset:calc(var(--completed-a) * -1%)})}:host(.${Fe.class.range})>input:nth-of-type(1)+output:not(:only-of-type){--flip:calc(var(--thumbs-too-close) * -1)}:host(.${Fe.class.range})>input:nth-of-type(1)+output::after{content:var(--prefix, "") var(--text-value-a) var(--suffix, "")}:host(.${Fe.class.range})>input:nth-of-type(2){--is-left-most:Clamp(0, (var(--value-b) - var(--value-a)) * 99999, 1)}:host(.${Fe.class.range})>input:nth-of-type(2)+output{--value:var(--value-b)}:host(.${Fe.class.range})>input+output::after{content:var(--prefix, "") var(--text-value-b) var(--suffix, "");font:var(--value-font)}:host(.${Fe.class.range})>input+output{--flip:-1;--x-offset:calc(var(--completed-b) * -1%);--pos:calc(((var(--value) - var(--min)) / (var(--max) - var(--min))) * 100%);pointer-events:none;width:auto;min-width:40px;height:24px;min-height:24px;text-align:center;position:absolute;z-index:5;background:var(--value-background);border-radius:4px;padding:0 6px;left:var(--pos);transform:translate(var(--x-offset),calc(150% * var(--flip) - (var(--y-offset,0) + var(--value-offset-y)) * var(--flip)));transition:all .12s ease-out,left 0s;opacity:0;box-sizing:content-box}`});const xt=e=>`:host(${e}){display:block!important;visibility:visible!important;opacity:1!important}`,vt=(e,t="#fffafa")=>`display:inline-block;background:${e};color:${t};border-radius:4px;padding:4px 8px`,wt=e=>`display:inline-block;color:${e};padding:4px 0;line-height:120%`;class yt{constructor(){if(yt.instance)return yt.instance;t.Object.assign(this,{functionsToRun:[],finalFunctionsToRun:[],isRegistered:!1}),this._registerEventListeners(),document.addEventListener("readystatechange",this._checkDocumentReadyState.bind(this)),yt.instance=this}_runFunctions(e,t,n="[DOM.STATE]"){let[o,s]=[0,0];for(const{fn:t,args:n}of e)try{t.apply(null,n),o++}catch(e){be(`${e.name} in ${g(t.name)||"(anonymous)"}:`,e.message),s++}this._logReadyState(t,n,o,s,document.readyState)}_registerEventListeners(){if(this.isRegistered)return;const t=()=>this._runFunctions(this.finalFunctionsToRun,"#008080","[WIN.ONLOAD]"),n=(...e)=>this._runFunctions(this.functionsToRun,...e);if(rt){const n=e.onload;e.onload="function"==typeof n?()=>(t(),n()):t}else"loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>n("#6a5acd")):e.addEventListener("load",()=>n("#4682b4","[WIN.LOADED]"));this.isRegistered=!0}_checkDocumentReadyState(){this.isRegistered&&"complete"===document.readyState&&this._runFunctions(rt?this.functionsToRun:this.finalFunctionsToRun,"#008000")}_logReadyState(e,t,...n){const o=[vt(e),"display:block;height:0",wt("0"),wt("#a9a9a9")];he(`%c${t}:${n}!%c\r\n%c 　➦${Te} ${ve} %c${we}`,...o)}addFn(e,...t){"function"==typeof e&&this.functionsToRun.push({fn:e,args:t})}addFinalFn(e,...t){"function"==typeof e&&this.finalFunctionsToRun.push({fn:e,args:t})}}let kt=(...e)=>(kt=pt?A:D)(...e);const St=String(xt("fr-dialogbox")+Fe.var.style.shared+Fe.var.style.frDialogBox);class Tt{constructor({titleText:e="Test",messageText:n="Test message.",trueButtonText:o="OK",falseButtonText:s=null,neutralButtonText:a=null}={}){t.Object.assign(this,{cssText:St,titleText:e,messageText:n,trueButtonText:o,falseButtonText:s,neutralButtonText:a}),t.Object.assign(this,{hasFalse:null!==s,hasNeutral:null!==a,parent:document.documentElement}),this._create(this),this._append()}static closure(){return R(`#${Fe.id.dialogbox}`)}_create(e){this.container=p("fr-dialogbox",{id:Fe.id.dialogbox});const t=Fe.var.dialogIf=f(this.container);kt(t,this.cssText,`${Fe.const.seed}-dialogbox`,!1),this.frDialog=p("fr-box",{class:Fe.class.db}),w(t,this.frDialog);const o=`${this.titleText}<span id="${Fe.const.seed}.dialog.close" title="${fe?"关闭":"Close"}">&times;</span>`,s=p("fr-title",{class:Fe.class.dbt,innerHTML:n.createHTML(o)}),a=p("fr-message",{class:Fe.class.dbm,innerHTML:n.createHTML(this.messageText)}),i=p("fr-buttons",{class:Fe.class.dbbc});w(this.frDialog,s,a,i),this.trueButton=p("button",{class:[Fe.class.dbb,Fe.class.dbbt],textContent:this.trueButtonText}),[this.trueButton,c(`#${Fe.const.seed}\\.dialog\\.close`,t)].forEach(t=>t?.addEventListener("click",()=>{e._destroy()})),w(i,this.trueButton),this.hasFalse&&(this.falseButton=p("button",{class:[Fe.class.dbb,Fe.class.dbbf],textContent:this.falseButtonText}),this.falseButton.addEventListener("click",()=>{e._destroy()}),w(i,this.falseButton)),this.hasNeutral&&(this.neutralButton=p("button",{class:[Fe.class.dbb,Fe.class.dbbn],textContent:this.neutralButtonText}),this.neutralButton.addEventListener("click",()=>{e._destroy()}),w(i,this.neutralButton))}_append(){Se&&this.container&&Tt.closure()&&(this.root=i(this.container,this.parent),I(200).then(()=>this.frDialog.classList.add(`${Fe.const.seed}.opac:1`)))}_destroy(){this.container&&(this.frDialog.classList.remove(`${Fe.const.seed}.opac:1`),R(this.container)&&!c("fr-configure")&&E(this.root))}async respond(){return new Promise((e,t)=>{this.frDialog&&this.trueButton||t(new Error("FrDialogBox not exist!")),this.trueButton.addEventListener("click",()=>{e(!0)}),this.hasFalse&&this.falseButton.addEventListener("click",()=>{e(!1)})}).catch(e=>{be(`${e.name} in FrDialogBox:`,e.message)})}}class Ft{constructor(e){this.d=X(e).reduce((e,t)=>e+t.charCodeAt(0),""),[this.s,this.c,this.u]=[Math.floor(this.d.length/5),Math.ceil(e.length/2),Math.pow(2,31)-1],this.m=parseInt(this.d[this.s]+this.d[2*this.s]+this.d[3*this.s]+this.d[4*this.s]+this.d[5*this.s])}encrypt(e){if(this.m<2||!e)return"";let t=m({range:1e9})[0]%1e8,[n,o]=[this.d+t,""];for(;n.length>10;)n=(parseInt(n.slice(0,10))+parseInt(n.slice(10))).toString();n=(this.m*n+this.c)%this.u;for(let t=0,s=e.length;t<s;t++)(o+=parseInt(e.charCodeAt(t)^Math.floor(n/this.u*255)).toString(16).padStart(2,"0"))&&(n=(this.m*n+this.c)%this.u);return o+t.toString(16).padStart(8,"0")}decrypt(e){if(this.m<2||!e)return"";const t=parseInt(e.slice(-8),16);e=e.slice(0,-8);let[n,o]=[this.d+t,""];for(;n.length>10;)n=(parseInt(n.slice(0,10))+parseInt(n.slice(10))).toString();n=(this.m*n+this.c)%this.u;for(let t=0,s=e.length;t<s;t+=2){let s=parseInt(parseInt(e.slice(t,t+2),16)^Math.floor(n/this.u*255));(o+=String.fromCharCode(s))&&(n=(this.m*n+this.c)%this.u)}return decodeURIComponent(o)}}const Et={value:(e,t)=>({data:e,expired:Date.now()+("number"==typeof t?t:6048e5)}),set:(e,...t)=>{ne(e,x(o.stringify(Et.value(...t))))},get:async e=>{try{const t=await oe(e);if(!t)return;const n=Date.now(),{data:s,expired:a}=o.parse(v(t));return me("cache Remaining: %c%s hrs","color:#dc143c;font-weight:700",((a-n)/36e5).toFixed(2)),s&&a>n?s:Et.remove(e)}catch(t){return t&&Et.remove(e)}},remove:e=>{se(e)}};class Ct{constructor(){t.Object.assign(this,{canvasWidth:200,canvasHeight:100,fontSize:80,fontText:"Aa啊",originFont:"'Courier New',Courier,monospace",detectFontData:null}),this.canvasContext=this._createCanvasContext(),this.originFontData=this._checkFont(this.originFont)}static checkCanvasFingerprintProtection(){const e=p("canvas").getContext("2d"),{data:t}=(e.fillStyle="#000",e.fillRect(0,0,50,50),e.getImageData(0,0,50,50)),n=(e,t)=>0!==e[t]||0!==e[t+1]||0!==e[t+2]||255!==e[t+3];for(let e=0;e<t.length;e+=4)if(n(t,e))return Ct.checkCanvasFingerprintProtection=()=>!0,!0;return Ct.checkCanvasFingerprintProtection=()=>!1,!1}_createCanvasContext(){const e=p("canvas");t.Object.assign(e,{width:this.canvasWidth,height:this.canvasHeight});const n=e.getContext("2d",{willReadFrequently:!0});return t.Object.assign(n,{frFontFace:!0,fillStyle:"#000",textAlign:"center",textBaseline:"middle"}),n}_checkFont(e){try{this.canvasContext.clearRect(0,0,this.canvasWidth,this.canvasHeight);const t=this.originFont.toUpperCase()===e.toUpperCase()?this.originFont:`'${e}',${this.originFont}`;this.canvasContext.font=`${this.fontSize}px ${t}`,this.canvasContext.fillText(this.fontText,this.canvasWidth/2,this.canvasHeight/2);const{data:n}=this.canvasContext.getImageData(0,0,this.canvasWidth,this.canvasHeight),{actualBoundingBoxLeft:o,actualBoundingBoxRight:s}=this.canvasContext.measureText(this.fontText);return{fontData:X(n).filter(Boolean).join(),fontWidth:o+s}}catch(e){be(`${e.name} in FontFaceSetObserver.checkFont:`,e.message)}}_unescape(e){return e.replace(/\\[\dA-F]{4}/g,e=>String.fromCharCode(parseInt(e.substr(1),16)))}destroy(){this.canvasContext=this.detectFontData=this.originFontData=null}detect(e){if("string"!=typeof e||!e)return!1;if(this.originFont.toUpperCase().includes(e.toUpperCase()))return!0;if(this.detectFontData=this._checkFont(e),!this.detectFontData)return!1;const t=this.originFontData.fontData!==this.detectFontData.fontData&&this.originFontData.fontWidth!==this.detectFontData.fontWidth;return t&&me("detect Fonts: <Detected>",{data:this.detectFontData,font:this._unescape(e)}),t}}!async function(m,g,A,D,H,j){function ne(e,t,n){a(e,`%c${Fe.var.scriptName}\r\n%cINTRO.URL: ${Fe.url.introURL}\r\n%c${t}`,"color:#dc143c;font:normal 700 16px/150% ui-monospace,monospace","color:#777;font:italic 400 10px/180% ui-monospace,monospace",`color:${n};font:normal 500 12px/180% ui-monospace,monospace`)}function de(e,t){const n=S({target:t})[0],o=n?.id||Fe.id.rndStyle,s=t?.ownerDocument?.documentElement?.id,a=C({BLINK:130,more:null})||rt||!s?"":`#${s}`;return{css:(e=C({BLINK:128,GECKO:138,more:null})?e:e.replace("var(--fr-font-fontscale)","initial")).replace(Fe.const.regexp,a),id:o,style:n?.textContent}}function Xe({condition:e,nodeArray:t,cssText:n}){Se&&Do&&("Preview"===e&&Fe.array.iframe.size&&Ye(Fe.array.iframe,e,n??Bo),Array.isArray(t)||(t=l("html>:not(head) *").flatMap(e=>e.shadowRoot?l("iframe",e.shadowRoot):"iframe"===$(e)?[e]:[])),Ye(t,e,n??Bo))}function Ye(e,t,n){if(e.size)return e.forEach(e=>e?.postMessage({fontRenderX:{command:"𝐬𝐞𝐧𝐝",data:n,condition:t}},"*"));e.forEach(e=>{const[{display:o,visibility:s},{width:a,height:i}]=[u(e),e.getBoundingClientRect(),e.removeAttribute("sandbox")];if(!("none"===o||"hidden"===s||a<4||i<4||k(e.src))){if(rt&&"Userscripts"!==te&&"Preview"!==t&&e.addEventListener("load",()=>Je(e,"Passive",n)),Fe.var.frameDone&&"Preview"!==t)return delete Fe.var.frameDone;Je(e,t,n)}})}function Je(e,t,n){Fe.var.frameDone=rt&&"Userscripts"!==te||null;const o=e.contentWindow;try{const{css:s,id:a,style:i}=de(n,o.document.head);if(i===s||!V({target:o.document.head,id:a,cssText:s,overwrite:"DOMLoaded"!==t}))return;e.setAttribute(Fe.const.iframeAttrName,t)??ge(`[ASYNCFRAMES][ACT:${t}]`),tn("iframe",vo,o.document,!0)}catch(s){if(rt&&"Userscripts"!==te||!o||"DOMLoaded"===t)return be(`${s.name} in InsertFrameStyle:`,{node:e,condition:t});o.postMessage({fontRenderX:{command:"𝐬𝐞𝐧𝐝",data:n,condition:t}},"*")}}function qe(e,t=Bo,n=!0){try{if(!e||!Se)return;const[o,s]=[`#${document.documentElement.id}`,t.match(Fe.const.regexp)?.[0]];if(s&&s!==o&&(t=t.replace(Fe.const.regexp,o)),V({target:document.head,id:Fe.id.rndStyle,cssText:t,overwrite:!0})&&Nn){const{prev:e,cur:t}=function(e){const[t,n]=Fe.array.scaleMatrix=e.slice(-2);return{prev:t||1,cur:n||1}}(Fe.array.scaleMatrix);t!==e&&U({cur:t,prev:e,props:Fe.array.props}),me("scale<Matrix>: %o",Fe.array.scaleMatrix)}Xe({condition:"Preview",cssText:t}),Fe.var.preview=!n}catch(e){be(`${e.name} in LoadPreview:`,e.message)}}function Qe(e,t,n){if(!e)return;const[o,s]=[`:host(div.${e.parentNode.host.className})`,Number(t).toFixed(n)],a=`${o}{--step:${e.step};--min:${e.min};--max:${e.max};--value:${s};--text-value:'${b(s)}'}`;kt(e.parentNode,a,`${Fe.const.seed}-${e.name}`),e.setAttribute("value",s),e.value=s}function et(e,t,n,o,s=!1){e&&t&&(e.addEventListener("input",()=>e.value=e.value.replace(/[^0-9.]/g,"")),e.addEventListener("change",()=>{const a="OFF"===e.value?Number(s):Number(e.value),[i,r,c]=["value","min","max"].map(e=>Number(t.getAttribute(e))),l=n.test(a)&&a>=r&&a<=c?a:i;Qe(t,l,o),e.value=l===Number(s)?"OFF":l.toFixed(o)}))}function pt({name:e,pid:t,sid:o,min:s,max:a,step:i,value:r,bits:l}){const d=Fe.var[e]=f(c(`#${t}>.${Fe.class.range}`,Fe.var.configIf));if(!d)return;const[p,u,m]=[`:host(.${d.host.className})`,Number(r).toFixed(l),"fr-scale"===e?Po:""],h=`${p}{--step:${i};--min:${s};--max:${a};--value:${u};--text-value:'${b(u)}'}`,g=`<input id="${o}" type="range" name="${e}" min="${s}" max="${a}" step="${i}" value="${u}" ${m} /><output></output><div class="${Fe.class.rangeProgress}"></div>`;d.innerHTML=n.createHTML(g),kt(d,h,`${Fe.const.seed}-${e}`,!1),kt(d,Fe.var.style.frSlider,`${Fe.const.seed}-range`,!1)}function bt(...e){!Fe.var.runOnce&&document.addEventListener("blur",N,Fe.var.runOnce=!0),X(e).forEach(e=>["keydown","keyup","keypress","paste"].forEach(t=>e?.addEventListener(t,N)))}function $t(e){const t=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,[n,o,s,a]=e?.match(/[0-9a-f]{2}/gi)?.map(e=>parseInt(e,16))??[0,0,0,0],i=(e,t,n)=>.2126*e+.7152*t+.0722*n;return i(n,o,s)*(a/255)+(t?i(40,40,40):i(255,255,255))*(1-a/255)}function wt(e,t){const n={y:()=>String(t.getFullYear()),M:()=>String(t.getMonth()+1).padStart(2,"0"),d:()=>String(t.getDate()).padStart(2,"0"),H:()=>String(t.getHours()).padStart(2,"0"),m:()=>String(t.getMinutes()).padStart(2,"0"),s:()=>String(t.getSeconds()).padStart(2,"0"),S:()=>String(t.getMilliseconds()).padStart(3,"0")};return e.replace(/y+|M+|d+|H+|m+|s+|S+/g,e=>n[e[0]]())}function St(){try{const e=decodeURI("%C3%99%C3%97%C3%9D%7F%7D%C2%9A%7D%C3%9D%C2%9A%7F%C3%9EZ%C3%B7%C3%87%1B%C3%99%C3%B6%C2%BB%C3%93n%C3%BC%C3%AB%C2%A7x"),t=$n.decrypt(x(e,null)),n=new RegExp(Fe.var.scriptAuthor).exec(v(t))?.[0];return{keycode:()=>t,inspect:(e=v(t))=>e.includes(n)}}catch(e){be(`${e.name} in InspectLicense:`,e.message)}}async function Lt(e,t){const n={newInstall:fe?"新安装首次运行":"new-install execute",dataReset:fe?"数据重置后运行":"data-rebuilt execute",historicalQuery:fe?"您通过历史查询":"historical query for",updateFirstRun:fe?"更新后首次运行":"update first execute"},o={undefined:n.newInstall,null:n.dataReset,[Fe.var.curVersion]:n.historicalQuery},s={firstInstall:fe?`<li class="${Fe.const.seed}.init"><strong>温馨提示</strong> 首次加载此脚本时，默认使用内置参数进行渲染，若显示效果不佳，<b>属于正常情况</b>。请根据您本地的显示器及浏览器配置，<b>重新设定</b>渲染参数以达到最佳效果！</li>`:`<li class="${Fe.const.seed}.init ${Fe.const.seed}.wrap.break"><strong>Tip:</strong> When first loaded, the default rendering will use the built-in parameters, which <b>Normally</b> do not display well. Please <b>reconfigure</b> the rendering parameters according to your monitor and browser to achieve the best display effect!</li>`,structureError:fe?`<li class="${Fe.const.seed}.warn"><strong>数据重置警告</strong> 因检测到数据解析异常、或代码/存储数据被非法篡改，数据已全部初始化，请手动还原您本地备份数据！若反复提示此问题，请尝试重新安装脚本！</li>`:`<li class="${Fe.const.seed}.warn ${Fe.const.seed}.wrap.break"><strong>Data Reset Warning</strong> Data has been initialized due to detect data parsing anomaly, or illegally tamper with code/data, please restore your local backup manually! If this appears repeatedly, please reinstall the script!</li>`,dataRebuilt:fe?`<li class="${Fe.const.seed}.warn ${Fe.const.seed}.clr:indigo"><strong>数据已重建</strong> 脚本已开启更新后数据重建选项，所有数据已初始化，您可手动还原本地备份数据。如您的备份较为久远，强烈建议您重新设置参数，记得及时重新备份哟！</li>`:`<li class="${Fe.const.seed}.warn ${Fe.const.seed}.clr:indigo ${Fe.const.seed}.wrap.break"><strong>Data Reconstructed</strong> The script turns on the option to rebuild data after upgrade, all data is initialized and you can restore the local backup manually. If your backups are older, it is recommended that you reconfigure the parameters, and remember to re-backup in time!</b></li>`},a=o[t]??n.updateFirstRun,i=void 0===t?s.firstInstall:"",r=Fe.var.structureError?s.structureError:null===t?s.dataRebuilt:"",[c,l]=fe?["好，去看看","不，算了吧"]:["Yes, Let's go","No, Thanks"],d=fe?"脚本更新 - 温馨提示":"Script Updates - Update Tips",p=fe?`<p class="${Fe.const.seed}.wrap.break"><span class="${Fe.const.seed}.clr:ff6347 ${Fe.const.seed}.hi.cn">您好！</span>这是${a}<span class="${Fe.const.seed}.pd:4p ${Fe.const.seed}.fw:700">${Fe.var.scriptName}</span>的新版本<span class="${Fe.const.seed}.clr:ff6347 ${Fe.const.seed}.v.cn">v${Fe.var.curVersion}</span>，以下为更新详情：</p><p><ul id="${Fe.const.seed}.update">${i}${r}${ft}</ul></p><p>建议您先去查阅 <strong class="${Fe.const.seed}.clr:ff6347 ${Fe.const.seed}.fw:700 ${Fe.const.seed}.fst:ita">新版使用文档</strong> ，要去看一下吗？</p>`:`<p class="${Fe.const.seed}.wrap.break" class="${Fe.const.seed}.lh:180"><span class="${Fe.const.seed}.clr:ff6347 ${Fe.const.seed}.hi.en">Hi! </span>This is ${a} "<span class="${Fe.const.seed}.pd:4p ${Fe.const.seed}.fw:700">${Fe.var.scriptName}</span>" in Version<span class="${Fe.const.seed}.clr:ff6347 ${Fe.const.seed}.v.en">v${Fe.var.curVersion}</span>, and the update details are as follows:</p><p><ul id="${Fe.const.seed}.update">${i}${r}${ft}</ul></p><p>Suggest you to view <strong class="${Fe.const.seed}.clr:ff6347 ${Fe.const.seed}.fw:700 ${Fe.const.seed}.fst:ita">Usage Document,</strong> okay?</p></p>`;let f=new Tt({trueButtonText:c,falseButtonText:l,messageText:p,titleText:d});await f.respond()&&ie(e,!1),I(500)(f=null).then(e=>{t===e&&T()})}function It(){if(c(`#${Fe.id.configure}`))return Kt();try{if(!function(e){const t=p("fr-configure",{id:Fe.id.configure}),o=Fe.var.configIf=f(t),s=String(xt("fr-configure")+Fe.var.style.shared+Fe.var.style.frConfigure);return o.innerHTML=n.createHTML(e),kt(o,s,`${Fe.const.seed}-configure`,!1),i(t,document.documentElement)}(is))return;pt({name:"fr-scale",pid:Fe.id.fontSize,sid:Fe.id.scale,min:.8,max:2.5,step:.001,value:Vn.fontSize,bits:3}),pt({name:"fr-stroke",pid:Fe.id.fontStroke,sid:Fe.id.stroke,min:0,max:1,step:.001,value:Vn.fontStroke,bits:3}),pt({name:"fr-shadow",pid:Fe.id.fontShadow,sid:Fe.id.shadow,min:0,max:4,step:.01,value:Vn.fontShadow,bits:2}),async function(){function s(e,t,n,o){const s=(e.value=en(e.value).replace(/['"`·“”‘’]/g,t?'"':"'").replace(/，/g,",").replace(/：/g,":").replace(o??"","")).trim();return n?Le(s):s}function i(e){const t=async e=>{const t=e.target,n=t.value.trim();if(!n)return t.classList.remove(`${Fe.const.seed}.bd:crimson`);try{const e=t.selectionStart,s=o.stringify(o.parse(n),null,4),a=e+s.length-t.value.length,i=t.scrollTop;t.value=s,t.classList.remove(`${Fe.const.seed}.bd:crimson`),await I(16.7,{instance:!0}),t.scrollTop=i,t.setSelectionRange(a,a)}catch(e){e&&t.classList.add(`${Fe.const.seed}.bd:crimson`)}};e?.addEventListener("change",e=>s(e.target,!0,!1)&&t(e)),e?.addEventListener("input",t)}function r(e,t,n){e.toggleAttribute("disabled",n),e.nextElementSibling?.classList.toggle(`${Fe.const.seed}.ft:gs1`,n),n?e.checked&&e.click():Vn[t]&&!e.checked&&e.click()}if(Se)try{const m=await async function(){try{const e=await Et.get(Ke);if(Array.isArray(e)&&e.length)return me("%cLoad font data cache","color:#008000;font-weight:700"),h(e);me("%cStart real-time font detect","color:#dc143c;font-weight:700");const t=h(await async function(){const e=await W(),t=new Ct,n=[];for(const[o,s]of e.entries())(t.detect(s.en)||(s.en=O(s.ch))&&t.detect(s.en))&&delete s.ps&&n.push({...s,sort:o+1});return t.destroy(),n.sort((e,t)=>e.sort-t.sort)}());return Et.set(Ke,t,2592e6),t}catch(e){return Et.remove(Ke),be(`${e.name} in GetAvailableFontData:`,e.message,Fe.array.exps.push(`[getAvailableFontData]: ${e}`)),[]}}(),$=function({container:e,fontData:t}){function o(e,t=!0){l(e,Fe.var.configIf).forEach(e=>{e.classList.toggle(`${Fe.const.seed}.disp:block`,t)})}function s(e){const n=e.parentNode,o=n.children[1].value,s=Number(n.children[1].attributes.sort.value)||-1,a=n.children[0].textContent;if(!R(n))return;t.push({ch:a,en:o,sort:s}),t=K(t).sort((e,t)=>e.sort-t.sort);const r=c(`#${Fe.const.seed}\\.fontsetlist`,Fe.var.configIf),l=i(Fe.id.fontName);0===l.length?(r.value=Vn.fontSelect,r.dispatchEvent(new Event("input")),c(`#${Fe.id.selector}`,Fe.var.configIf).classList.remove(`${Fe.const.seed}.disp:block`),(async e=>{await Gt(e?.checked,Gn,Un)})(c(`#${Fe.id.fface}`,Fe.var.configIf))):(r.value=Qt(l),r.dispatchEvent(new Event("input")))}function a(){l(`#${Fe.id.fontList} .${Fe.class.close}`,Fe.var.configIf).forEach(e=>{s(e)})}function i(e){return h(l(`#${Fe.id.selector} .${Fe.class.selector} input[name="${e}"]`,Fe.var.configIf),null,e=>e.value)}function r(e,t){const o=fe?"必须禁用浏览器指纹保护才能进行字体检测，请检查权限。":"The fingerprinting protection must be disabled to detect fonts, check permissions?",s=fe?"推荐您安装更多内置字体库中已定义的字体来扩充字体列表。":"Please install more defined fonts from the built-in font library to expand the fontlist.",a=e?`title="${fe?"点击重新检查权限":"Click to re-check permissions"}"`:`title="${fe?"单击下载更多字体":"Click to download more fonts"}"`;return e?n.createHTML(`<dt ${a} class="${Fe.const.seed}.disp:block">${o}</dt>`):n.createHTML(`<dt ${a}${t>(ct?4:2)?"":` class="${Fe.const.seed}.disp:block"`}>${s}</dt>`)}if(!e||"string"!=typeof e||!Array.isArray(t))return;const d=Ct.checkCanvasFingerprintProtection(),p=`#${Fe.id.fontList} .${Fe.class.selectFontID} dl`,f=e=>({title:e.ch,sort:e.sort,value:e.en,style:`font-family:'${e.en}'!important`,textContent:e.ch});return{fdeleteList:a,fresetList:function(){a();const e=c(`#${Fe.id.fontList} .${Fe.class.selector}`,Fe.var.configIf),o=mt.fontSelect.replace(/['"]/g,""),i=at||!it&&ct?"苹方-简":"微软雅黑",r=`<a class="${Fe.class.label}"><span class="${Fe.const.seed}.bdlr:4px" style="font-family:${mt.fontSelect}!important">${i}</span><input type="hidden" name="${Fe.id.fontName}" sort="0" value="${o}"/><span class="${Fe.class.close} ${Fe.const.seed}.cs:pointer ${Fe.const.seed}.bdrr:4px" style="font-family:sans-serif!important">&#215;</span></a>`;e.insertAdjacentHTML("beforeend",n.createHTML(r)),e.parentNode.classList.add(`${Fe.const.seed}.disp:block`),t=t.filter(e=>e.en!==o);const l=c(`#${Fe.id.selector} #${Fe.id.cleaner}`,Fe.var.configIf);l&&(l.onclick=()=>{a()});const d=c(`#${Fe.id.fontList} input[name="${Fe.id.fontName}"][sort="0"]~.${Fe.class.close}`,Fe.var.configIf);d&&(d.onclick=()=>{s(d)})},fsearchList:i,fsearch:function(){function u(e,t,n){t?.toggleAttribute("disabled",!e),t?.classList[e?"remove":"add"](n),!e&&a()}function m(){document.removeEventListener("click",m),Pt(p,!1),o(p,!1);const e=c(`#${Fe.id.fontList} .${Fe.class.selectFontID} input`,Fe.var.configIf);e&&(e.value="")}function h(e,s){const a=c(p,Fe.var.configIf);if(o(p,s=!1),!(t=K(t).sort((e,t)=>e.sort-t.sort)).length||!a)return;o(p);const l=new RegExp(e.replace(/[.:?*+^$[\-=\](){}/\\|]/g,"\\$&"),"i");a.innerHTML=r(d,t.length+i(Fe.id.fontName).length),t.forEach(e=>(l.test(e.ch)||l.test(e.en))&&(s=re(a,"dd",f(e))??!0)),s||(a.innerHTML+=n.createHTML(`<dd>${fe?"没有匹配的字体":"No matching fonts"}</dd>`)),b()}function b(){const e=e=>{N(e);const o=this??e.target,[r,l]=[o.attributes.value?.value,o.attributes.sort?.value],d=c(`#${Fe.id.fontList} .${Fe.class.selector}`,Fe.var.configIf),p=c(`#${Fe.const.seed}\\.fontsetlist`,Fe.var.configIf);if(r&&l&&d&&p){const e=`<a class="${Fe.class.label}"><span class="${Fe.const.seed}.bdlr:4px" style="font-family:'${r}'!important">${o.textContent}</span><input type="hidden" name="${Fe.id.fontName}" sort="${l}" value="${r}"/><span class="${Fe.class.close} ${Fe.const.seed}.cs:pointer ${Fe.const.seed}.bdrr:4px" style="font-family:Times,monospace!important">&#215;</span></a>`;d.insertAdjacentHTML("beforeend",n.createHTML(e)),d.parentNode.classList.add(`${Fe.const.seed}.disp:block`),t=(t=K(t).sort((e,t)=>e.sort-t.sort)).filter(e=>e.en!==r),p.value=Qt(i(Fe.id.fontName)),p.dispatchEvent(new Event("input"));const f=c(`#${Fe.id.selector} #${Fe.id.cleaner}`,Fe.var.configIf);f&&(f.onclick=()=>{a()});const u=c(`#${Fe.id.fontList} input[name="${Fe.id.fontName}"][sort="${l}"]~.${Fe.class.close}`,Fe.var.configIf);u&&(u.onclick=()=>{s(u)})}m()};l(`#${Fe.id.fontList} .${Fe.class.selectFontID} dl dd`,Fe.var.configIf).forEach(t=>{t.onclick=e}),c(`#${Fe.id.fontList} .${Fe.class.selectFontID} dl dt`,Fe.var.configIf)?.addEventListener("click",()=>(Et.remove(Ke),!d&&ie(`${Fe.url.feedback}/46`,!1),T())),document.addEventListener("click",m)}const[g,$]=fe?[`<span class="${Fe.class.spanlabel}">已选择字体：<span id="${Fe.id.cleaner}">[清空]</span></span>`,"输入关键字可检索字体"]:[`<span class="${Fe.class.spanlabel}">Selected Fonts: <span id="${Fe.id.cleaner}">[Clear]</span></span>`,"Enter some keywords"],x=fe?`<p><strong>温馨提示 </strong>脚本预载了常用的中文字体，下拉菜单中所罗列的字体是在代码字体表中您已安装过的字体，没有安装过则不会显示。</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">（注一）</em>如果没有重新选择字体，则使用上一次保存的字体。首次使用默认为${mt.fontSelect}字体。</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">（注二）</em>输入框可输入关键字进行搜索，支持中文和英文字体名。</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">（注三）</em>字体是按您选择的先后顺序进行优先渲染的，所以多选不如只选一个您最想要的。</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">（注四）</em>如果“字体重写”被关闭，那么本功能将自动禁用，网页字体将采用“网站默认”的字体设置。</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">（注五）</em>双击 <span class="${Fe.class.emoji}">🔔</span> 可以打开自定义字体的添加工具，以使用更多新字体。</p>`:`<p><strong>Tips: </strong>The fonts shown in the list are the fonts were installed on your system in font-library. No install & add-lib, No display.</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">(ACT1)</em> If this option is not reselected, the last saved is used. Default by ${mt.fontSelect}.</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">(ACT2)</em> Enter keywords in the inputbox to quickly search for your favorite fonts.</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">(ACT3)</em> Fonts are rendered first in the order you choose, so just pick the one you want the most.</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">(ACT4)</em> If "Font Rewrite" is turned off, this option will be disabled and the webpage will use "website-defined font".</p>\n                  <p><em class="${Fe.const.seed}.clr:8b0000">(ACT5)</em> Double-click <span class="${Fe.class.emoji}">🔔</span> to open the custom font-library adding tool to use more custom fonts.</p>`,v=`<div id="${Fe.id.selector}">\n                ${g}\n                <div class="${Fe.class.selector}"></div>\n              </div>\n              <div class="${Fe.class.selectFontID}">\n                <span class="${Fe.class.spanlabel}">${fe?"设置字体，请选择：":"Set Fonts, Please Select:"}</span>\n                <input type="search" id="${Fe.const.seed}.search" placeholder="${$}" autocomplete="off" />\n                <input type="hidden" id="${Fe.const.seed}.fontsetlist" value="${Vn.fontSelect}" />\n                <dl><dt></dt><dd></dd></dl>\n                <span class="${Fe.class.tooltip} ${Fe.class.ps1}" id="${Fe.id.fonttooltip}">\n                  <span class="${Fe.class.emoji}" title="${fe?"按住查看帮助":"Hold down for help"}">🔔</span>\n                  <span class="${Fe.class.tooltip} ${Fe.class.ps2}">\n                  ${x}\n                  </span>\n                </span>\n              </div>`,w=c(e,Fe.var.configIf);!c(`#${Fe.id.selector}`,Fe.var.configIf)&&w&&(w.innerHTML=n.createHTML(v));const y=c(`#${Fe.const.seed}\\.fontsetlist`,Fe.var.configIf),k=c(`#${Fe.id.submit} .${Fe.class.submit}`,Fe.var.configIf),S=c(`#${Fe.id.fface}`,Fe.var.configIf),F=c(`#${Fe.id.fontList} .${Fe.class.selectFontID} input`,Fe.var.configIf);S&&F&&y&&k&&(bt(F),u(S.checked,F,Fe.class.readonly),Yt(y,Vn.fontSelect,k),S.addEventListener("change",()=>{u(S.checked,F,Fe.class.readonly)}),F.addEventListener("input",()=>{h(F.value)}),F.addEventListener("click",function(e){N(e);const s=this??e.target;if(s.value.length)h(s.value);else{const e=c(p,Fe.var.configIf);t=K(t).sort((e,t)=>e.sort-t.sort),e.innerHTML=r(d,t.length+i(Fe.id.fontName).length),t.length?t.forEach(t=>re(e,"dd",f(t))):e.innerHTML+=n.createHTML(`<dd>${fe?"无可用数据":"No data available"}</dd>`),o(p),Pt(p,!0),b()}}))}}}({container:`#${Fe.id.fontList} .${Fe.class.fontList}`,fontData:m}),w=["fface","smooth","fontScale","strokeSize","shadowSize","renderCanvas","color","cssinclued","cssexclude"],[y,k,S,F,E,C,L,M,D]=w.map(e=>c(`#${Fe.id[e]}`,Fe.var.configIf)),_=["shadowColor","cSwitch","eSwitch","fontCss","fontEx","backup","mono"],[V,U,H,G,Y,q,ee]=_.map(e=>c(`#${Fe.id[e]}`,Fe.var.configIf)),[te,ne,ce]=["reset","submit","cancel"].map(e=>c(`#${Fe.id.submit} .${Fe.class[e]}`,Fe.var.configIf));(function(e){try{e?.fsearch(),c(`#${Fe.id.fonttooltip}`,Fe.var.configIf)?.addEventListener("dblclick",async e=>{N(e,{preventDefault:!0});let t="";const n=await oe(Pe);try{(n?[...o.parse(v(n))]:[]).forEach(e=>delete e.sort&&(t+=o.stringify(e)+"\r\n"))}catch(e){be(`${e.name} in FontSelectionAndCustomFonts:`,e.message)}const a=fe?`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p">⑴ 以下文本域可按预定格式增加自定义字体。请用小贴士或按示例填写，输入有误将被自动过滤。与『<a href="${Fe.url.guideURI}#既定的字体表" title="查看内置字体表" target="_blank">内置字体表</a>』重复的字体将被自动剔除。【功能小贴士：<span id="${Fe.const.seed}.addTools" title="点击开启工具" class="${Fe.const.seed}.clr:crimson ${Fe.const.seed}.cs:pointer">字体添加辅助工具</span>】</p><p><textarea id="${Fe.const.seed}.custom.fontlist" placeholder='字体表自定义格式样例，每行一组字体名称数据，如下：\r\n{ "ch":"中文字体名一","en":"EN Fontname 1" }↲\r\n{ "ch":"中文字体名二","en":"EN Fontname 2","ps":"Post-Script Name" }↲\r\n\r\n(注一：如无中文字体名，可用英文或其他语言名称替代)\r\n(注二：“ps:” 该项为字体的PostScript名称，可选填写)'>${t}</textarea></p><p id="${Fe.const.seed}.warning.chn">（请勿添加过多自定义字体，避免造成页面加载缓慢）</p><p class="${Fe.const.seed}.fontfeature">⑵ 以下设置字体的 font-variant 变体样式属性。<br/><span class="${Fe.const.seed}.clr:crimson">如果您不了解该属性，请保持留空，以免造成渲染异常。</span></p><p class="${Fe.const.seed}.input.pdb:5px"><input id="${Fe.const.seed}.custom.variant" placeholder='例如：common-ligatures small-caps' value='${Ln}'></p><p class="${Fe.const.seed}.fontvariant">⑶ 以下设置 OpenType 字体 <a href="https://learn.microsoft.com/en-us/typography/opentype/spec/featurelist" target="_blank">font-feature-settings</a> 属性。<br/><span class="${Fe.const.seed}.clr:crimson">如果您设置的常规字体非 OpenType 字体，请保持留空。</span></p><p class="${Fe.const.seed}.input.pdb:5px"><input id="${Fe.const.seed}.custom.feature" placeholder='例如："liga" 0,"tnum","zero"' value='${Cn}'></p>`:`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p">⑴ Add custom fonts in predefined formats, either by 𝐄𝐱𝐚𝐦𝐩𝐥𝐞 or by 𝐅𝐨𝐧𝐭 𝐀𝐝𝐝𝐢𝐧𝐠 𝐀𝐢𝐝. Incorrect entries will be filtered. Fonts that duplicate the <a href="${Fe.url.guideURI}#built-in-font-library" title="Viewing the built-in font library" Target="_blank">built-in font library</a> will be automatically removed. (𝐓𝐈𝐏: <span id="${Fe.const.seed}.addTools" title="Click to open the aid tool" class="${Fe.const.seed}.clr:crimson ${Fe.const.seed}.cs:pointer">𝐅𝐨𝐧𝐭 𝐀𝐝𝐝𝐢𝐧𝐠 𝐀𝐢𝐝</span>)</p><p><textarea id="${Fe.const.seed}.custom.fontlist" placeholder='One set of Fontname data per line, as follow:\r\n{ "ch":"CHN Fontname 1","en":"EN Fontname 1" }↲\r\n{ "ch":"CHN Fontname 2","en":"EN Fontname 2","ps":"Post-Script Name" }↲\r\n\r\n(Note1: If no Chinese fontname, use another instead) \r\n (Note2: "ps:" for the font PostScript name, optional)'>${t}</textarea></p><p id="${Fe.const.seed}.warning.en">(Adding too many custom fonts will cause slow loading)</p><p class="${Fe.const.seed}.fontvariant">⑵ Set font variants CSS shorthand property.<br/><span class="${Fe.const.seed}.clr:crimson">If you do not understand this property, leave it blank.</span></p><p class="${Fe.const.seed}.input.pdb:5px"><input id="${Fe.const.seed}.custom.variant" placeholder='Such as: common-ligatures small-caps' value='${Ln}'></p><p class="${Fe.const.seed}.fontfeature">⑶ Set OpenType font <a href="https://learn.microsoft.com/en-us/typography/opentype/spec/featurelist" target="_blank">font-feature-settings</a> property.<br/><span class="${Fe.const.seed}.clr:crimson">Leave blank if using custom font that is not OpenType.</span></p><p class="${Fe.const.seed}.input.pdb:5px"><input id="${Fe.const.seed}.custom.feature" placeholder='Such as: "liga" 0,"tnum","zero"' value='${Cn}'></p>`,[i,r]=fe?["保 存","帮助文档"]:["Save","Help"],[l,d]=fe?["取 消","自定义字体表"]:["Cancel","Custom Font Library"];let p=new Tt({trueButtonText:i,falseButtonText:r,neutralButtonText:l,messageText:a,titleText:d});const[f,u,m]=["fontlist","feature","variant"].map(e=>c(`#${Fe.const.seed}\\.custom\\.${e}`,Fe.var.dialogIf));bt(f,u,m);let[h,b,g]=[f.value.trim(),u.value.trim(),m.value.trim()];if(c(`#${Fe.const.seed}\\.addTools`,Fe.var.dialogIf)?.addEventListener("click",()=>{const e=fe?"请输入「英文字体家族名称」：\r\n(例如：HarmonyOS Sans SC，仅支持半角输入模式，包括英文、数字、小数点、减号、下划线、空格、@)\r\n(如没有英文字体名称，请自定义独一无二的英文名称)":"𝐏𝐥𝐞𝐚𝐬𝐞 𝐞𝐧𝐭𝐞𝐫 𝐭𝐡𝐞 '𝐄𝐧𝐠𝐥𝐢𝐬𝐡 𝐅𝐨𝐧𝐭 𝐍𝐚𝐦𝐞':\r\n(e.g. HarmonyOS Sans SC, only half-width input mode is supported, including English, numbers, decimal point, minus sign, underscore, space, @)\r\n(𝐈𝐟 𝐧𝐨 𝐄𝐧𝐠𝐥𝐢𝐬𝐡 𝐟𝐨𝐧𝐭 𝐧𝐚𝐦𝐞, 𝐝𝐨 𝐝𝐞𝐟𝐢𝐧𝐞 𝐚 𝐮𝐧𝐢𝐪𝐮𝐞 𝐄𝐧𝐠𝐥𝐢𝐬𝐡 𝐧𝐚𝐦𝐞)",t=fe?"请输入「𝐏𝐨𝐬𝐭𝐒𝐜𝐫𝐢𝐩𝐭 名称」：\r\n(为使新增字体全局生效，请尽可能填写 𝐏𝐨𝐬𝐭𝐒𝐜𝐫𝐢𝐩𝐭 名称。如果您暂时无法提供 𝐏𝐨𝐬𝐭𝐒𝐜𝐫𝐢𝐩𝐭 名称，可保持留空)\r\n(点击取消可访问 𝐃𝐢𝐬𝐜𝐮𝐬𝐬𝐢𝐨𝐧𝐬#𝟐𝟔𝟏 @𝐆𝐢𝐭𝐡𝐮𝐛)":"𝐏𝐥𝐞𝐚𝐬𝐞 𝐞𝐧𝐭𝐞𝐫 𝐭𝐡𝐞 '𝐏𝐨𝐬𝐭𝐒𝐜𝐫𝐢𝐩𝐭 𝐍𝐚𝐦𝐞':\r\n(To make the new font take effect globally, enter the postscript name as much as possible. If can not provide the postscript name at the moment, please leave it blank)\r\n(𝐂𝐚𝐧𝐜𝐞𝐥 𝐭𝐨 𝐯𝐢𝐬𝐢𝐭 𝐃𝐢𝐬𝐜𝐮𝐬𝐬𝐢𝐨𝐧𝐬#𝟐𝟔𝟏 @𝐆𝐢𝐭𝐡𝐮𝐛)";let n,o,s,a=P(fe?"请输入「中文字体家族名称」：\r\n(例如：鸿蒙黑体，仅支持半角输入模式，包括中文、日文、韩文、英文，数字、小数点、减号、下划线、空格、@)\r\n(如没有中文字体名称，可使用英文或其他语言名称来替代)":"𝐏𝐥𝐞𝐚𝐬𝐞 𝐞𝐧𝐭𝐞𝐫 𝐭𝐡𝐞 '𝐂𝐡𝐢𝐧𝐞𝐬𝐞 𝐅𝐨𝐧𝐭 𝐍𝐚𝐦𝐞':\r\n(e.g. 鸿蒙黑体, only half-width input mode is supported, including Chinese, Japanese, Korean, English, numbers, decimal point, minus sign, underscore, space, @)\r\n(𝐈𝐟 𝐧𝐨 𝐂𝐡𝐢𝐧𝐞𝐬𝐞 𝐟𝐨𝐧𝐭𝐧𝐚𝐦𝐞, 𝐮𝐬𝐞 𝐄𝐧𝐠𝐥𝐢𝐬𝐡 𝐨𝐫 𝐚𝐧𝐨𝐭𝐡𝐞𝐫 𝐢𝐧𝐬𝐭𝐞𝐚𝐝)","鸿蒙黑体");if(null!==a)if(/^@?[^"]+$/.test(a.trim())){if(n=P(e,"HarmonyOS Sans SC"),null===n)return;if(/^@?[^"\uFF00-\uFFEF\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF]+$/.test(n.trim())){if(o=P(t,""),null===o)return ie(`${Fe.url.feedback}/261`,!1);s=/^[^"]+$/.test(o.trim())?en(`{"ch":"${a.trim()}","en":"${n.trim()}","ps":"${o.trim()}"}`):en(`{"ch":"${a.trim()}","en":"${n.trim()}"}`);const e=f.value.trim()?"\r\n":"";f.value=f.value.trim().concat(e,s,"\r\n"),h=f.value.trim(),f.scrollTop=f.scrollHeight}else B(fe?"英文字体家族名称 格式输入错误！":"English Fontname Input Format Error!")}else B(fe?"中文字体家族名称 格式输入错误！":"Chinese Fontname Input Format Error!")}),f?.addEventListener("change",()=>h=s(f,!0,!1)),u?.addEventListener("change",()=>b=s(u,!0,!0,/[^\w",\- ]/g)),m?.addEventListener("change",()=>g=s(m,!0,!0,/[^\w",\- ]/g)),await p.respond()){b||g?ue(_e,{feature:b,variant:g}):se(_e);const e=/{\s*"ch":\s*"@?[^"]+"\s*,\s*"en":\s*"@?[^"\uFF00-\uFFEF\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF]+"\s*(?:,\s*"ps":\s*"[^"]+"\s*)?}/g,t=h.match(e);if(0===h.length){se(Pe);const e=fe?`<p class="${Fe.const.seed}.clr:indigo">自定义字体表已初始化成功！<p><p>字体列表全局缓存已自动重建，当前页面即将刷新。</p>`:`<p class="${Fe.const.seed}.clr:indigo">Custom font library initialized successfully!<p><p>The Fontlist cache has been rebuilt and reload.</p>`,[t,n]=fe?["确 定","自定义字体数据重置"]:["OK","Customized FontData Reset"];let o=new Tt({trueButtonText:t,messageText:e,titleText:n});Et.remove(Ke),await o.respond()&&Kt({isReload:!0}),o=null}else if(Array.isArray(t)&&t.length>0){const e=K(t.map(o.parse));ue(Pe,function(e,t){const n=new Set;return X(t).forEach(e=>(n.add(e.en),n.add(e.ch))),X(e).filter(e=>!n.has(e.en)&&!n.has(e.ch))}(e,ut));const n=fe?`<p class="${Fe.const.seed}.clr:green">您所提交的自定义字体已保存成功！<p><p>字体列表全局缓存已自动重建，当前页面即将刷新。</p><p class="${Fe.const.seed}.clr:ff7f50 ${Fe.const.seed}.fs:12p">注：格式错误或重复的字体代码将被自动过滤。</p>`:`<p class="${Fe.const.seed}.clr:green">The customized font saved successfully!<p><p>The Fontlist cache has been rebuilt and reload.</p><p class="${Fe.const.seed}.clr:ff7f50 ${Fe.const.seed}.fs:12p">Note: Incorrectly or duplicate fonts were filtered.</p>`,[s,a]=fe?["确 定","自定义字体数据保存"]:["OK","Customized FontData Save"];let i=new Tt({trueButtonText:s,messageText:n,titleText:a});Et.remove(Ke),await i.respond()&&Kt({isReload:!0}),i=null}else{z(h);const e=fe?`<p class="${Fe.const.seed}.clr:crimson">您所提交的自定义字体数据格式有误，请重新输入。<p><p>注意：先前提交的信息已自动保存至剪切板中。</p>`:`<p class="${Fe.const.seed}.clr:crimson">The custom Fontdata is incorrectly.<p><p>Note: Previous content saved to the clipboard.</p>`,[t,n]=fe?["确 定","字体表数据格式错误"]:["OK","Font Library Data Format Error"];let o=new Tt({trueButtonText:t,messageText:e,titleText:n});if(await o.respond()){const e=new Event("dblclick",{bubbles:!0,cancelable:!1});c(`#${Fe.id.fonttooltip}`,Fe.var.configIf)?.dispatchEvent(e)}o=null}}else ie(`${Fe.url.guideURI}${fe?"#自定义字体的添加":"#adding-custom-fonts"}`,!1);p=null})}catch(e){be(`${e.name} in FontSelectionAndCustomFonts:`,e.message,Fe.array.exps.push(`[fontSelectionAndCustomFonts]: ${e}`))}})($),bt(S,F,E,L,M,D),Yt(M,Vn.fontCSS,ne),Yt(D,Vn.fontEx,ne),Yt(y,Vn.fontFace,ne),Yt(k,Vn.fontSmooth,ne);const le=c(`#${Fe.id.fontList} .${Fe.class.selectFontID} input`,Fe.var.configIf),de=function(e,t,n){if(Nn&&e&&n)try{c(`#${Fe.const.seed}\\.fontscale\\.def`,Fe.var.configIf)?.addEventListener("dblclick",async e=>{N(e,{preventDefault:!0});const t=await j(),n=o.stringify(t,null,4),s=fe?`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p">以下文本域可按预定格式填写“字体比例缩放功能”所需的自定义站点缩放数据配置。由于该数据为脚本核心设置数据，如果您不了解该设置数据的格式要求或数据含义，请勿修改该数据！<span class="${Fe.const.seed}.clr:crimson">（强烈建议您：按 <a href="${Fe.url.feedback}/267#discussioncomment-7161615" target="_blank">作者提议</a> 填写此内容）</span></p><p><textarea id="${Fe.const.seed}.fontscale.defjson">${n}</textarea></p><p id="${Fe.const.seed}.warning.chn">（如果以上JSON内容格式错误，会造成脚本出错使渲染失效）</p>`:`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p">Fill in the custom site scaling data configuration of the "Font Scaling" in a predetermined format. If you do not understand the meaning of the data, please do not modify it! <span class="${Fe.const.seed}.clr:crimson">(Suggestion: "<a href="${Fe.url.feedback}/267#discussioncomment-7161615" target="_blank">Author's proposal</a>")</span></p><p><textarea id="${Fe.const.seed}.fontscale.defjson">${n}</textarea></p><p id="${Fe.const.seed}.warning.en">(If the JSON format is incorrect, font rendering will fail)</p>`,[a,r,l]=fe?["确 定","取 消","站点缩放修正设置数据"]:["OK","Cancel","Sites Scaling Setting Data"];let d=new Tt({trueButtonText:a,neutralButtonText:r,messageText:s,titleText:l});const p=c(`#${Fe.const.seed}\\.fontscale\\.defjson`,Fe.var.dialogIf);if(bt(p),i(p),await d.respond()){const t=p.value.trim();try{const e=t?o.parse(t):Q();if("[object Object]"!==J.call(e))throw new Error("Format Error");ue(Ge,e);const n=fe?`<p class="${Fe.const.seed}.clr:green">站点缩放修正设置数据已成功保存！</p><p>当前页面将在您确认后自动刷新。</p>`:`<p class="${Fe.const.seed}.clr:green">Sites Fix-scaling data saved successfully!</p><p>The page will refresh after confirmation.</p>`,[s,a]=fe?["确 定","站点缩放修正数据设置成功"]:["OK","Sites Fix-scaling Data Save"];let i=new Tt({trueButtonText:s,messageText:n,titleText:a});await i.respond()&&Kt({isReload:!0}),i=null}catch(e){const t=fe?`<p class="${Fe.const.seed}.clr:8b0000">站点缩放修正设置数据格式错误，请重新输入！</p>`:`<p class="${Fe.const.seed}.clr:8b0000">Fix-scaling Data format error, please re-enter!</p>`,[n,o]=fe?["确 定","设置数据格式错误"]:["OK","Sites Fix-scaling Data Error"];let s=new Tt({trueButtonText:n,messageText:t,titleText:o});if(await s.respond(e)){const e=new Event("dblclick",{bubbles:!0,cancelable:!1});c(`#${Fe.const.seed}\\.fontscale\\.def`,Fe.var.configIf)?.dispatchEvent(e)}s=null}}d=null});const t=c(`#${Fe.id.scale}`,n);return e.value=1===Vn.fontSize?"OFF":Vn.fontSize.toFixed(3),Wt(t,e,3,!0),et(e,t,/^[0-2](\.[0-9]{1,3})?$/,3,!0),t}catch(e){be(`${e.name} in GetFontSizeScale:`,e.message,Fe.array.exps.push(`[getFontSizeScale]: ${e}`))}finally{Yt(e,Vn.fontSize,t,!0)}}(S,ne,Fe.var["fr-scale"]),he=function(e,t){const n=c(`#${Fe.id.fixViewport}`,Fe.var.configIf);if(Nn&&zn&&e&&n)try{const t=c(`#${Fe.id.fviewport}`,Fe.var.configIf),o=()=>t?.classList.toggle(`${Fe.const.seed}.vis:hidden`,"OFF"===e.value);return e.addEventListener("change",o),o(),n}catch(e){be(`${e.name} in GetFixViewportBool:`,e.message,Fe.array.exps.push(`[getFixViewportBool]: ${e}`))}finally{Yt(n,Vn.fixViewport,t)}}(S,ne),ge=function(e,t,n){if(e&&n)try{const t=c(`#${Fe.id.stroke}`,n);return e.value=0===Vn.fontStroke?"OFF":Vn.fontStroke.toFixed(3),Wt(t,e,3),et(e,t,/^[0-1](\.[0-9]{1,3})?$/,3),t}catch(e){be(`${e.name} in GetFontsStroke:`,e.message,Fe.array.exps.push(`[getFontsStroke]: ${e}`))}finally{Yt(e,Vn.fontStroke,t)}}(F,ne,Fe.var["fr-stroke"]),{fixStrokeT:$e,fixShadowT:xe,lazyloadT:ve}=function(e,t){if(!lt||!e)return Q();const[n,o,s,a,i]=["fixStroke","fixShadow","lazyload","fstroke","fshadow"].map(e=>c(`#${Fe.id[e]}`,Fe.var.configIf));if(!(n&&s&&a&&i))return Q();const d=()=>a.classList.toggle(`${Fe.const.seed}.vis:hidden`,"OFF"===e.value),p=()=>{if(i.classList.add(`${Fe.const.seed}.vis:visible`),Pt(`#${Fe.id.fshadow}`,!0),!dt)return;const e=l(`#${Fe.id.fshadow}\\.shadow\\.label,#${Fe.id.fshadow}\\.shadow\\.text`,Fe.var.configIf),t=!Number(c(`#${Fe.id.shadowSize}`,Fe.var.configIf)?.value);e.forEach(e=>e.classList.toggle(`${Fe.const.seed}.disp:none`,t))},f=()=>{s&&r(s,"lazyload",!n.checked),dt&&o&&r(o,"fixShadow",!n.checked)},u=()=>(i.classList.remove(`${Fe.const.seed}.vis:visible`),void Pt(`#${Fe.id.fshadow}`,!1));try{return d(),e.addEventListener("change",d),n.addEventListener("mouseenter",p),i.addEventListener("mouseleave",u),n.addEventListener("click",f),{fixStrokeT:n,fixShadowT:o,lazyloadT:s}}catch(e){be(`${e.name} in GetFixStrokeBool:`,e.message,Fe.array.exps.push(`[getFixStrokeBool]: ${e}`))}finally{Yt(n,Vn.fixStroke,t),Yt(s,Vn.lazyload,t),dt&&Yt(o,Vn.fixShadow,t)}}(F,ne),we=function(e,t,n,o){if(!e||!t||!o)return;const s=c(`#${Fe.id.renderCanvas}`,Fe.var.configIf);try{const n=c(`#${Fe.id.shadow}`,o),s=0===Vn.fontShadow;return e.value=s?"OFF":Vn.fontShadow.toFixed(2),Wt(n,e,2),et(e,n,/^[0-8](\.[0-9]{1,2})?$/,2),t.classList.toggle(`${Fe.const.seed}.disp:none`,s),e.addEventListener("change",()=>t.classList.toggle(`${Fe.const.seed}.disp:none`,s)),n}catch(e){be(`${e.name} in GetFontShadow:`,e.message,Fe.array.exps.push(`[getFontShadow]: ${e}`))}finally{Yt(e,Vn.fontShadow,n),Yt(s,Vn.renderCanvas,n)}}(E,V,ne,Fe.var["fr-shadow"]),ye=/^(?:#[0-9A-F]{8}|currentcolor)$/i,Se={ffaceT:y,smoothT:k,fontScaleT:S,fixViewportT:he,strokeT:F,fixStrokeT:$e,lazyloadT:ve,fixShadowT:xe,shadowsT:E,canvasT:C,colorshowT:L,colorReg:ye,fontCssT:M,fontExT:D,colorPickerT:function(n,o,s,i){if(!n||!o)return Q();try{if(!e.FRColorPicker)return a("warn","FRColorPicker failed to load, inserted <INPUT> instead."),function(e,n,o){return e.value=n,e.style.cssText=`--fr-input-color:${n}`,e.addEventListener("change",function(){const e=this.value;this.value=o.test(e)?ao(e):n,this.style.cssText=`--fr-input-color:${o.test(e)?io(e):n}`}),t.Object.assign(Q(),{fromString:t=>e.style.cssText=`--fr-input-color:${e.value=t}`})}(n,s,i);const o=new e.FRColorPicker(`#${Fe.id.color}`,Fe.var.configIf,{alpha:!0,format:"hexa"}),r=o.fromString(s)&&o.toHEXAString();return o.onChange=()=>o.value=ao(o.toHEXAString()),me(`frColorPicker: %c${r}`,vt(r,$t(r.slice(1))>=165?"#121212":"#fcfcfc"))??o}catch(e){return be(`${e.name} in GetColorAndColorPicker:`,e.message)??{fromString:e=>n.style.cssText=`--fr-input-color:${n.value=e}`}}finally{Yt(n,s,o)}}(L,ne,Vn.shadowColor,ye)};await async function(e,t,n){if(!e||!t)return;const o=[Vn.fontFace,Gn,n];await Gt(...o),e.addEventListener("change",async()=>{if(c(`#${Fe.id.renderCanvas}`,Fe.var.configIf)?.click(),c(`#${Fe.id.rdCanvas}`,Fe.var.configIf)?.classList.toggle(`${Fe.const.seed}.vis:hidden`,!e.checked),await Gt(...o),e.checked&&!Vn.fontFace){const e=fe?"正在恢复之前设置的字体…":"Restore previous font…";t.setAttribute("placeholder",e),await I(220,{instance:!0}),c(`#${Fe.id.submit} .${Fe.class.submit}[v-Preview="true"]`,Fe.var.configIf)?.click()}})}(y,le,Un),u=yn,c(`#${Fe.const.seed}\\.fontoverride\\.def`,Fe.var.configIf)?.addEventListener("dblclick",async e=>{N(e,{preventDefault:!0});const t=o.stringify(u,null,4),n=fe?`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p">以下文本域可按预定格式填写字体重写的自定义数据。整体为数组类型，每个字体名称占一行，并使用半角双引号包括；如字体名称包含中文等双字节文本时，请在双引号内使用半角花括号包括。如您不了解该数据的含义，请勿修改，以免造成全局字体重写出错。<span class="${Fe.const.seed}.clr:crimson">(强烈建议您：按 <a href="${Fe.url.feedback}/267#discussion-5692372" target="_blank">作者提议</a> 填写此内容)</span></p><p><textarea id="${Fe.const.seed}.fontoverride.defarray">${t}</textarea></p><p id="${Fe.const.seed}.warning.chn">（请勿添加脚本字体表已存在的字体，如重复将自动删除）</p>`:`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p">Predefined format overall array type, one Fontname per line, and the use of half-width double quotes include; If the fontname contains double-byte text such as Chinese, please use half-width brackets within the double quotes include. <span class="${Fe.const.seed}.clr:crimson">(Suggestion: "<a href="${Fe.url.feedback}/267#discussion-5692372" target="_blank">Author's proposal</a>")</span></p><p><textarea id="${Fe.const.seed}.fontoverride.defarray">${t}</textarea></p><p id="${Fe.const.seed}.warning.en">(Duplicate font names with font library will be removed)</p>`,s=st?`<div id="${Fe.id.fi}">\n                    <span class="${Fe.const.seed}.cusmono">${fe?"修复当前站点 &lt;INPUT&gt; 的样式问题":"Fix &lt;INPUT&gt; Issue For Current Site"}</span>\n                    <input type="checkbox" id="${Fe.const.seed}.fixinput" class="${Fe.class.checkbox}" ${"true"===Z?.getItem(We)?"checked":""} />\n                    <label for="${Fe.const.seed}.fixinput"></label>\n                  </div>${n}`:n,[a,r,l]=fe?["确 定","取 消","自定义字体重写数据"]:["OK","Cancel","Customized Font-Rewrite Data"];let d=new Tt({trueButtonText:a,neutralButtonText:r,messageText:s,titleText:l});const[p,f]=["fixinput","fontoverride\\.defarray"].map(e=>c(`#${Fe.const.seed}\\.${e}`,Fe.var.dialogIf));if(bt(f),i(f),await d.respond()){const t=f.value.trim();try{const e=t?h(o.parse(t),e=>e&&"string"==typeof e):[];let n=await Et.get(Ke);n=Array.isArray(n)&&n.length>0?n:[];const s=n.filter(e=>"Microsoft YaHei"!==e.en).map(e=>e.en.startsWith("\\")?`{${e.ch}}`:e.en),a=gt.fontBase.replace(/'/g,"").split(","),i=(Fn||gt.monospacedFont).replace(/'/g,"").split(","),r=h(["Courier New","Courier","monospace",...a,...s,...i]),c=e.filter(e=>!r.includes(e)).sort();p&&Z?.setItem(We,p.checked),ue(je,c);const l=fe?`<p class="${Fe.const.seed}.clr:green">自定义字体重写数据已成功保存！</p><p>当前页面将在您确认后自动刷新。</p>`:`<p class="${Fe.const.seed}.clr:green">Font-rewrite Data saved successfully!</p><p>The page will refresh after confirmation.</p>`,[d,f]=fe?["确 定","自定义字体重写数据设置成功"]:["OK","Customized Font-rewrite Data Save"];let u=new Tt({trueButtonText:d,messageText:l,titleText:f});await u.respond()&&Kt({isReload:!0}),u=null}catch(e){const t=fe?`<p class="${Fe.const.seed}.clr:8b0000">自定义字体重写数据格式错误，请重新输入！</p>`:`<p class="${Fe.const.seed}.clr:8b0000">Font-rewrite data format error, please re-enter!</p>`,[n,o]=fe?["确 定","重写数据格式错误"]:["OK","Customized Font-Rewrite Data Error"];let s=new Tt({trueButtonText:n,messageText:t,titleText:o});if(await s.respond(e)){const e=new Event("dblclick",{bubbles:!0,cancelable:!1});c(`#${Fe.const.seed}\\.fontoverride\\.def`,Fe.var.configIf)?.dispatchEvent(e)}s=null}}d=null}),f=M,f?.addEventListener("dblclick",function(e){N(e,{preventDefault:!0}),this.classList.add(Fe.class.notreadonly),["readonly","title"].forEach(e=>this.removeAttribute(e))}),Xt(U,M,G),Xt(H,D,Y),function(e){e?.addEventListener("dblclick",async e=>{try{N(e,{preventDefault:!0});const[t,{monoSiteRules:n,monoFontList:o,monoFeature:a}]=await Promise.all([g(),A()]),[i,r,l]=[n.join("\r\n").trim(),o.trim(),a.trim()],d=fe?`<p class="${Fe.const.seed}.mono.notify">⑴ 以下文本域可设置需应用等宽字体的根域及元素选择器。<br/><span class="${Fe.const.seed}.clr:crimson">如果您不了解站点样式规则，请保持留空【<a href="${Fe.url.feedback}/74" target="_blank">查看推荐规则</a>】</span></p><p><textarea id="${Fe.const.seed}.monospaced.siterules" placeholder="每行只能允许一组规则，相同站点不同规则可重复添加。\r\n格式如：@网站域名##元素选择器1,元素选择器2,……\r\n例如：\r\n@github.com##[class~='blob-code'] *\r\n@github.com##.example,#abc,div:not(.test)\r\n@github.dev###test:not([class*='test'])">${i}\r\n</textarea></p><p class="${Fe.const.seed}.mono.notify">⑵ 以下可设置自定义英文等宽字体，请按示例格式填写。<br/><span class="${Fe.const.seed}.clr:crimson">请注意：monospace字体族已程序内置，无需重复添加。</span></p><p><input id="${Fe.const.seed}.monospaced.font" placeholder="例如：'Source Code Pro','Mono','Monaco'" value="${r}"></p><p class="${Fe.const.seed}.mono.notify">⑶ 以下设置 OpenType 字体 <a href="https://learn.microsoft.com/zh-cn/typography/opentype/spec/featurelist" target="_blank">font-feature-settings</a> 属性。<br/><span class="${Fe.const.seed}.clr:crimson">如果您设置的等宽字体非 OpenType 字体，请保持留空。</span></p><p><input id="${Fe.const.seed}.monospaced.feature" placeholder='例如："liga" 0,"tnum","zero"' value='${l}'></p>`:`<p class="${Fe.const.seed}.mono.notify">⑴ Set the root field and selector for monospaced font.<br/><span class="${Fe.const.seed}.clr:crimson">It is recommended that check out the <a href="${Fe.url.feedback}/74" target="_blank">Author's Proposal</a></span></p><p><textarea id="${Fe.const.seed}.monospaced.siterules" placeholder="Only One set of rules per line, different rules for the same site can be repeated. Such as:\r\n@github.com##[class~='blob-code'] *\r\n@github.com##.example,#abc,div:not(.test)\r\n@github.dev###test:not([class*='test'])">${i}\r\n</textarea></p><p class="${Fe.const.seed}.mono.notify">⑵ Set custom monospaced font according to example.<br/><span class="${Fe.const.seed}.clr:crimson">Note: monospace is built-in, do not add it repeatedly.</span></p><p><input id="${Fe.const.seed}.monospaced.font" placeholder="Such as: 'Source Code Pro','Mono','Monaco'" value="${r}"></p><p class="${Fe.const.seed}.mono.notify">⑶ Set OpenType font <a href="https://learn.microsoft.com/en-us/typography/opentype/spec/featurelist" target="_blank">font-feature-settings</a> property.<br/><span class="${Fe.const.seed}.clr:crimson">Leave blank if using custom font that is not OpenType.</span></p><p><input id="${Fe.const.seed}.monospaced.feature" placeholder='Such as: "liga" 0,"tnum","zero"' value='${l}'></p>`,p=fe?"设置自定义等宽字体":"Set Custom Monospaced Font",f=`<div id="${Fe.id.cm}">\n                    <span class="${Fe.const.seed}.cusmono">${fe?"开启自定义等宽字体（默认：关闭）":"Enable Custom Monospaced Font"}</span>\n                    <input type="checkbox" id="${Fe.id.iscusmono}" class="${Fe.class.checkbox}" ${t.isCustomMono?"checked":""} />\n                    <label for="${Fe.id.iscusmono}"></label>\n                </div>${d}`,[u,m]=fe?["保存数据","取 消"]:["Save","Cancel"];let b=new Tt({trueButtonText:u,neutralButtonText:m,messageText:f,titleText:p});const $=["siterules","font","feature"].map(e=>c(`#${Fe.const.seed}\\.monospaced\\.${e}`,Fe.var.dialogIf)),x=c(`#${Fe.id.iscusmono}`,Fe.var.dialogIf),v=(e,t,n)=>t.forEach(t=>(t.toggleAttribute("disabled",!e),t.classList.toggle(n,!e)));v(x.checked,$,Fe.class.readonly),x?.addEventListener("change",()=>v(x.checked,$,Fe.class.readonly));let[w,y,k]=$.map(e=>Le(e.value.trim()));bt(...$);const[S,T,F]=$;if(S.addEventListener("change",()=>w=s(S,!1,!0)),T.addEventListener("change",()=>y=s(T,!1,!0,/'(?:ui-)?monospace',?/gi)),F.addEventListener("change",()=>k=s(F,!0,!0,/[^\w",\- ]/g)),await b.respond()){const e=w.match(/@[\w\-.:]+##(?![^@]*##)[\w\-*.#:+>()~[\]=^$|,' ]+/g);if(w&&!e){z(w);const e=fe?`<p class="${Fe.const.seed}.clr:crimson">自定义根域及元素选择器有误，请重新输入。</p><p>注意：先前提交的信息已自动保存至剪切板中。</p>`:`<p class="${Fe.const.seed}.clr:crimson">Custom Root/Selectors data error, Please refill!</p><p>Note: Previous content saved to the clipboard.</p>`,[t,n]=fe?["确 定","自定义根域及元素选择器数据错误"]:["OK","Custom Root/Selectors Data Error"];let o=new Tt({trueButtonText:t,messageText:e,titleText:n});if(await o.respond()){const e=new Event("dblclick",{bubbles:!0,cancelable:!1});c(`#${Fe.id.mono}`,Fe.var.configIf)?.dispatchEvent(e)}return o=null}const n=y.match(/'@?[^'\uFF00-\uFFEF\u4E00-\u9FFF\u3040-\u309F\u30A0-\u30FF\uAC00-\uD7AF]+'/g);if(y&&!n){z(y);const e=fe?`<p class="${Fe.const.seed}.clr:crimson">您提交的自定义等宽字体数据有误，请重新输入。</p><p>注意：先前提交的信息已自动保存至剪切板中。</p>`:`<p class="${Fe.const.seed}.clr:crimson">Custom Monospaced Font Data error, Please refill!</p><p>Note: Previous content saved to the clipboard.</p>`,[t,n]=fe?["确 定","自定义等宽字体数据错误"]:["OK","Custom Monospaced Font Data Error"];let o=new Tt({trueButtonText:t,messageText:e,titleText:n});if(await o.respond()){const e=new Event("dblclick",{bubbles:!0,cancelable:!1});c(`#${Fe.id.mono}`,Fe.var.configIf)?.dispatchEvent(e)}return o=null}const o=!w||Array.isArray(e)&&e.length>0,s=!y||Array.isArray(n)&&n.length>0;if(o&&s){const o=h(n).join();w?ue(Ve,h(e)):se(Ve),y?ue(Ue,o):se(Ue),k?ue(He,k):se(He),t.isCustomMono=Boolean(c(`#${Fe.id.iscusmono}`,Fe.var.dialogIf).checked),ue(ze,t);const s=fe?`<p class="${Fe.const.seed}.clr:green">您提交的自定义等宽字体数据已保存成功！</p><p>当前页面将在您确认后自动刷新。</p><p class="${Fe.const.seed}.clr:ff7f50 ${Fe.const.seed}.fs:12p">注：格式错误的输入内容将被自动过滤。</p>`:`<p class="${Fe.const.seed}.clr:green">Custom Monospaced Data saved successfully!</p><p>The page will refresh after confirmation.</p><p class="${Fe.const.seed}.clr:ff7f50 ${Fe.const.seed}.fs:12p">Note: Incorrect content will be filtered.</p>`,[a,i]=fe?["确 定","自定义等宽字体数据保存"]:["OK","Custom Monospaced Data Save"];let r=new Tt({trueButtonText:a,messageText:s,titleText:i});await r.respond()&&Kt({isReload:!0}),r=null}}b=null}catch(e){be(`${e.name} in CustomMonospceFont:`,e.message)}})}(ee),function(e,t,n,{drawScale:o,drawStrock:s,drawShadow:a}){const{smoothT:i,ffaceT:r,fontScaleT:l,fixViewportT:d,strokeT:p,fixStrokeT:f,lazyloadT:u,fixShadowT:m,shadowsT:h,canvasT:b,colorPickerT:g,colorshowT:$,fontCssT:x,fontExT:v}=n;e?.addEventListener("click",async()=>{const e=fe?`<p>『重置/恢复』将当前设置初始化为 <span class="${Fe.const.seed}.clr:708090">程序默认的初始数据</span> 或 <span class="${Fe.const.seed}.clr:708090">上次正确保存的数据</span>。一般是在您配置错误或需使用新功能参数的情况下才进行重置参数的操作。</p><p class="${Fe.const.seed}.clr:green">重置：重置当前数据为程序初始值，手动保存生效。</p><p class="${Fe.const.seed}.clr:8b0000">恢复：替换为上次正确保存的数据，自动恢复预览。</p><p class="${Fe.const.seed}.clr:808080">取消：放弃重置操作。</p>`:`<p>『Reset/Restore』Initializes the current settings to <span class="${Fe.const.seed}.clr:708090">the program's default initial data</span> or <span class="${Fe.const.seed}.clr:708090">the last saved data</span>. The reset is usually done when configuration error or new feature is needed. </p><p class="${Fe.const.seed}.clr:green"><b>Reset:</b> Reset the current data to the initial value of the program, and save data manually.</p><p class="${Fe.const.seed}.clr:8b0000"><b>Restore:</b> Replace all with the last correctly saved data, and automatically restore preview. </p><p class="${Fe.const.seed}.clr:808080"><b>Cancel:</b> Abort the reset operation. </p>`,[n,w]=fe?["重 置","恢 复"]:["Reset","Restore"],[y,k]=fe?["取 消","参数重置确认"]:["Cancel","Confirm To Reset Settings"];let S=new Tt({trueButtonText:n,falseButtonText:w,neutralButtonText:y,messageText:e,titleText:k});const T=c(`#${Fe.id.shadowColor}`,Fe.var.configIf);await S.respond()?(i.checked!==mt.fontSmooth?i.click():me("<fontSmooth> NOT MODIFIED"),r.checked!==mt.fontFace?r.click():me("<fontFace> NOT MODIFIED"),Vn.fontSelect.split(",")[0]!==mt.fontSelect?t?.fresetList():t?.fdeleteList(),Nn&&(l.value=1===mt.fontSize?"OFF":mt.fontSize.toFixed(3),l.dispatchEvent(new Event("change")),Qe(o,Fe.var.curScale=mt.fontSize,3),zn&&(d.checked!==mt.fixViewport?d.click():me("<fixViewport> NOT MODIFIED"),c(`#${Fe.id.fviewport}`,Fe.var.configIf)?.classList.toggle(`${Fe.const.seed}.vis:hidden`,"OFF"===l.value))),p.value=0===mt.fontStroke?"OFF":mt.fontStroke.toFixed(3),p.dispatchEvent(new Event("change")),Qe(s,mt.fontStroke,3),lt&&(f.checked!==mt.fixStroke?f.click():me("<fixStroke> NOT MODIFIED"),u.checked!==mt.lazyload?u.click():me("<lazyload> NOT MODIFIED"),c(`#${Fe.id.fstroke}`,Fe.var.configIf)?.classList.toggle(`${Fe.const.seed}.vis:hidden`,"OFF"===p.value)),h.value=0===mt.fontShadow?"OFF":mt.fontShadow.toFixed(2),h.dispatchEvent(new Event("change")),Qe(a,mt.fontShadow,2),dt&&(m.checked!==mt.fixShadow?m.click():me("<fixShadow> NOT MODIFIED")),T?.classList.toggle(`${Fe.const.seed}.disp:none`,"OFF"===h.value),rt||(b.checked!==mt.renderCanvas?b.click():me("<canvas> NOT MODIFIED")),g.fromString(mt.shadowColor),$.dispatchEvent(new Event("change")),x.value=mt.fontCSS,x.dispatchEvent(new Event("input")),v.value=mt.fontEx,v.dispatchEvent(new Event("input")),Fe.var.fixStroke=mt.fixStroke,I(220)(Gt(r.checked,mt.fontSelect.replace(/'/g,""),Un)).then(()=>c(`#${Fe.id.submit} .${Fe.class.submit}[v-Preview="true"]`,Fe.var.configIf)).then(e=>{e?.click()})):(i.checked!==Vn.fontSmooth?i.click():me("<fontSmooth> NOT MODIFIED"),r.checked!==Vn.fontFace?r.click():me("<fontFace> NOT MODIFIED"),t?.fdeleteList(),Nn&&(l.value=1===Vn.fontSize?"OFF":Vn.fontSize.toFixed(3),l.dispatchEvent(new Event("change")),Qe(o,Vn.fontSize,3),Fe.array.scaleMatrix.push(Fe.var.curScale=Vn.fontSize),zn&&(d.checked!==Vn.fixViewport?d.click():me("<fixViewport> NOT MODIFIED"),c(`#${Fe.id.fviewport}`,Fe.var.configIf)?.classList.toggle(`${Fe.const.seed}.vis:hidden`,"OFF"===l.value))),p.value=0===Vn.fontStroke?"OFF":Vn.fontStroke.toFixed(3),p.dispatchEvent(new Event("change")),Qe(s,Vn.fontStroke,3),lt&&(f.checked!==Vn.fixStroke?f.click():me("<fixStroke> NOT MODIFIED"),u.checked!==Vn.lazyload?u.click():me("<lazyload> NOT MODIFIED"),c(`#${Fe.id.fstroke}`,Fe.var.configIf)?.classList.toggle(`${Fe.const.seed}.vis:hidden`,"OFF"===p.value)),h.value=0===Vn.fontShadow?"OFF":Vn.fontShadow.toFixed(2),h.dispatchEvent(new Event("change")),Qe(a,Vn.fontShadow,2),dt&&(m.checked!==Vn.fixShadow?m.click():me("<fixShadow> NOT MODIFIED")),T?.classList.toggle(`${Fe.const.seed}.disp:none`,"OFF"===h.value),rt||(b.checked!==Vn.renderCanvas?b.click():me("<canvas> NOT MODIFIED")),g.fromString(Vn.shadowColor),$.dispatchEvent(new Event("change")),x.value=Vn.fontCSS,x.dispatchEvent(new Event("input")),v.value=Vn.fontEx,v.dispatchEvent(new Event("input")),Fe.var.fixStroke=Vn.o.fixStroke,Gt(r.checked,Gn,Un).then(()=>tn("recover",vo,document,!0)),qe(Fe.var.preview,Fe.var.topStyle=Bo)||delete Fe.var.preview),S=null})}(te,$,Se,{drawScale:de,drawStrock:ge,drawShadow:we}),function(e,t,s){const{ffaceT:a,smoothT:i,fontScaleT:r,fixViewportT:l,strokeT:d,fixStrokeT:p,lazyloadT:f,shadowsT:u,fixShadowT:m,canvasT:h,colorshowT:b,colorReg:g,fontCssT:$,fontExT:x}=s;e?.addEventListener("click",async function(){const e=t?.fsearchList(Fe.id.fontName)??[],s=e.length>0?Qt(e):Vn.fontSelect,[w,y]=[a.checked,i.checked],k=r&&/^[0-2](\.[0-9]{1,3})?$/.test(r.value)?parseFloat(r.value):mt.fontSize,S=Ie(!Co&&Nn,k),T=zn&&1!==Number(S)&&l.checked,F=/^[0-1](\.[0-9]{1,3})?$/.test(d.value)?Number(d.value):"OFF"===d.value?0:mt.fontStroke,E=Fe.var.fixStroke=lt&&F&&p.checked,C=E&&f.checked,L=/^[0-8](\.[0-9]{1,2})?$/.test(u.value)?Number(u.value):"OFF"===u.value?0:mt.fontShadow,I=dt&&E&&L&&m.checked,[M,R,N,O]=[h?.checked,b.value,$.value,x.value],z=g.test(R)?io(R):mt.shadowColor,A=N?Le(N.replace(/["`]/g,"'")).replace(/[,]+/g,","):mt.fontCSS,D=O?Le(O.replace(/["`]/g,"'")).replace(/[,]+/g,","):"",B=!(w||y||L||F||1!==Number(S));if(Rn&&this.hasAttribute("v-Preview"))try{const e=1!==Number(S)?Vt(S):"",t=L>0&&L<=4?"text-shadow:var(--fr-font-shadow);":"",n=F>0&&F<=1?"-webkit-text-stroke:var(--fr-font-stroke);":"",o=`${n?F:0}px currentcolor`,a=Ut(L,z),i=y?qn:"",r=w?"font-family:var(--fr-font-family),var(--fr-font-basefont),var(--fr-font-emoji);":"",c=s?.replace(/["']/g,"").split(",")??[],l=c[1]??c[0]??"",d=w&&l?await _t(c,l,yn):"",p=D&&(t||n)?`${wn}:is(${D}){${t?"text-shadow:none!important;":""}${n?"-webkit-text-stroke:var(--fr-no-stroke)!important;":""}}`:"",f=D?Ht(D,w,Dn):"",u=E?xo(dt&&I?"text-shadow:var(--fr-fix-shadow)!important;":""):"",m=`${d}${e}${wn}::placeholder,${wn}:is(${A}${ko}){${r}}${wn}:is(${A}){${t}${n}${i}}${p}${f}${u}`,h=st&&w?Fe.var.style.firefox:"",b=`0 0 ${L}px ${z.toLowerCase().slice(0,7).concat("2b")}`,g=M?"--fr-render-shape:geometricPrecision;":"",$=`:root{--fr-font-basefont:${gt.fontBase};--fr-font-emoji:${gt.fontEmoji};${Hn}--fr-font-fontscale:${S};--fr-font-family:${s};--fr-font-shadow:${a};--fr-font-stroke:${o};--fr-no-stroke:0px transparent;--fr-fix-stroke:var(--fr-no-stroke);--fr-fix-shadow:${b};--fr-render-text:optimizeLegibility;${g}--fr-render-image:auto;${Mo}${Oo}${Io}${Ro}${No}}`,x='@charset "UTF-8";'+(B?"":`${$}${h}${m}`);qt({button:this,isRestore:!1}),Gt(w,l,Un).then(()=>tn("preview",u,document,!0)).then(()=>me(`frColorPicker<Preview>: %c${z}`,vt(z,$t(z.slice(1))>=165?"#121212":"#fcfcfc"))),qe(Rn,Fe.var.topStyle=x,!1)}catch(e){be(`${e.name} in ControlSubmitButton.Preview:`,e.message)}else{try{const e=fe?`<p class="${Fe.const.seed}.clr:green ${Fe.const.seed}.fw:700">保存到全局数据：</p><p>将当前设置保存为全局设置，默认使用全局参数。</p><p class="${Fe.const.seed}.clr:8b0000 ${Fe.const.seed}.fw:700">保存到当前网站数据：<span id="${Fe.const.seed}.sitedatalist">[<span>全部数据列表</span>]</span></p><p class="${Fe.const.seed}.mh:22p"><span title="保存到网站数据会自动覆盖之前的数据" id="${Fe.const.seed}.save.sitedata">为 ${ke} 保存独立的设置数据。</span>`:`<p class="${Fe.const.seed}.clr:green ${Fe.const.seed}.fw:700">Save to Global Data:</p><p>Save as global setting, using global by default. </p><p class="${Fe.const.seed}.clr:8b0000 ${Fe.const.seed}.fw:700">Save to Current Website Data: <span id="${Fe.const.seed}.sitedatalist">[<span> All Data List </span>]</span></p><p class="${Fe.const.seed}.mh:22p"><span title="Data saved to the website will automatically overwrite the previous data" id="${Fe.const.seed}.save.sitedata">Save to website data for ${ke}</span>`,[t,a]=fe?["保存到全局数据","保存到网站数据"]:["Global Save","Website Save"],[i,r]=fe?["取 消","保存设置数据"]:["Cancel","Save Settings Data"];let l=new Tt({trueButtonText:t,falseButtonText:a,neutralButtonText:i,messageText:e,titleText:r}),[d,p]=[await oe(Be)];try{p=d?[...o.parse(v(d))]:[]}catch(e){e&&(p=[])}const f=c(`#${Fe.const.seed}\\.sitedatalist`,Fe.var.dialogIf);f?.classList.add(p.length>0?`${Fe.const.seed}.disp:inline.block`:`${Fe.const.seed}.disp:none`),f?.addEventListener("click",()=>{Bt()});const u=pe(p),m=c(`#${Fe.const.seed}\\.save\\.sitedata`,Fe.var.dialogIf);if(~u&&m){const e=wt("yyyy-MM-dd HH:mm:ss",new Date(p[u].fontDate)),t=fe?`<p class="${Fe.const.seed}.save:p"><span class="${Fe.const.seed}.clr:indigo"><strong>上次保存：</strong>${e} </span><button id="${Fe.const.seed}.del.sitedata" title="删除数据后将刷新页面">删除当前网站数据</button></p>`:`<p class="${Fe.const.seed}.save:p"><span class="${Fe.const.seed}.clr:indigo"><strong>The last saved</strong>: ${e} </span><button id="${Fe.const.seed}.del.sitedata" title="The page will be refreshed after deleting the data">Delete Data</button></p>`;m.innerHTML=n.createHTML(t),c(`#${Fe.const.seed}\\.del\\.sitedata`,Fe.var.dialogIf)?.addEventListener("click",async()=>{~u&&p.splice(u,1),ue(Be,p);const e=fe?`<p class="${Fe.const.seed}.clr:8b0000">当前网站的个性化数据已成功删除！</p><p>当前页面将在您确认后自动刷新。</p>`:`<p class="${Fe.const.seed}.clr:8b0000">The current site data was deleted!</p><p>The page will refresh after confirmation.</p>`,[t,n]=fe?["感谢使用","个性化数据删除"]:["Thanks","Customized Data Deletion"];let o=new Tt({trueButtonText:t,messageText:e,titleText:n});await o.respond()&&Kt({isReload:!0}),o=null})}const h={fontSelect:Le(s),fontFace:Boolean(w),fontSmooth:Boolean(y),fontSize:Number(S),fixViewport:Boolean(T),fontStroke:Number(F),fixStroke:Boolean(E),lazyload:Boolean(C),fontShadow:Number(L),fixShadow:Boolean(I),renderCanvas:Boolean(M),shadowColor:Le(z),fontCSS:Le(A),fontEx:Le(D)};if(await l.respond())(Fe.var.successed=!0)&&ue(De,h),_n!==B&&(kn.globalDisable=!_n,ue(ze,kn));else{const e={domain:ke,fontDate:Date.now(),...h};d=await oe(Be);try{p=d?[...o.parse(v(d))]:[]}catch(e){e&&(p=[])}const t=pe(p);if(~t?p.splice(t,1,e):p.push(e),p.length<=In||~t)(Fe.var.successed=!0)&&ue(Be,p);else{const e=fe?`<p class="${Fe.const.seed}.clr:808080">您已经保存超过<span class="${Fe.const.seed}.clr:crimson ${Fe.const.seed}.fw:700 ${Fe.const.seed}.fst:ita ${Fe.const.seed}.fs:20p">${In} </span>个网站的个性化数据了，过多的数据会使脚本运行速度过慢，进而会影响您浏览网页的响应速度，建议您及时删除一些平时访问较少的站点设置，然后再进行新网站设置的数据保存。</p><p class="${Fe.const.seed}.clr:crimson">您确认要继续保存吗？</p>`:`<p class="${Fe.const.seed}.clr:808080">You have saved more than <span class="${Fe.const.seed}.clr:crimson ${Fe.const.seed}.fw:700 ${Fe.const.seed}.fst:nml ${Fe.const.seed}.fs:20p">${In}</span > Personalized data. Too much data will make script load slowly. It is recommended that you promptly delete some website configure data that you rarely visit. </p><p class="${Fe.const.seed}.clr:crimson">Are you sure you want to continue saving? </p>`,[t,n]=fe?["依然保存","管理列表"]:["Still Save","Manage"],[o,s]=fe?["我放弃","数据过多的提示"]:["Abort","Too Much Data"];let a=new Tt({trueButtonText:t,falseButtonText:n,neutralButtonText:o,messageText:e,titleText:s});await a.respond()?(Fe.var.successed=!0)&&ue(Be,p):delete Fe.var.successed&&await Bt(),a=null}}l=null}catch(e){delete Fe.var.successed&&be(`${e.name} in ControlSubmitButton.Save:`,e.message)}if(!Fe.var.successed)return;const e=fe?`<p class="${Fe.const.seed}.clr:green">您设置的字体渲染数据已成功保存！</p><p>当前页面将在您确认后自动刷新。</p>`:`<p class="${Fe.const.seed}.clr:green">Font Rendering data saved successfully!</p><p>The page will refresh after confirmation.</p>`,[t,a]=fe?["感谢使用","字体渲染数据保存"]:["Thanks","Font Rendering Data Save"];let i=new Tt({trueButtonText:t,messageText:e,titleText:a});await i.respond()&&Kt({isReload:delete Fe.var.successed}),i=null}})}(ne,$,Se),d=q,Mn&&d&&(d.classList.add(`${Fe.const.seed}.disp:inline.block`),d.addEventListener("click",async()=>{try{const e=fe?`<p class="${Fe.const.seed}.clr:green ${Fe.const.seed}.fw:700">备份到本地文件：</p><p>备份到本地，自动下载 backup.*.sqlitedb 文件。</p><p class="${Fe.const.seed}.clr:8b0000 ${Fe.const.seed}.fw:700">从本地文件还原：</p><p><span class="${Fe.const.seed}.clr:indigo ${Fe.const.seed}.cs:pointer" id="${Fe.id.tfiles}">🔎 [点击这里载入*.sqlitedb备份文件]</span><input accept=".sqlitedb" type="file" id="${Fe.id.files}"/></p>`:`<p class="${Fe.const.seed}.clr:green ${Fe.const.seed}.fw:700">Backup to local file:</p><p>Backup and download the backup.*.sqlitedb file.</p><p class="${Fe.const.seed}.clr:8b0000 ${Fe.const.seed}.fw:700">Restore from local file:</p><p><span class="${Fe.const.seed}.clr:indigo ${Fe.const.seed}.cs:pointer" id="${Fe.id.tfiles}">🔎 [Click here to load *.sqlitedb backup file]</span><input accept=".sqlitedb" type="file" id="${Fe.id.files}"/></p>`,[t,s]=fe?["备 份","还 原"]:["Backup","Restore"],[a,i]=fe?["取 消","备份与还原数据"]:["Cancel","Backup and Restore Data"];let r=new Tt({trueButtonText:t,falseButtonText:s,neutralButtonText:a,messageText:e,titleText:i});const[l,d]=[Fe.id.tfiles,Fe.id.files].map(e=>c(`#${e}`,Fe.var.dialogIf));if(l&&d&&(l.addEventListener("click",()=>{d.click()}),d.addEventListener("change",()=>{const e=d.files[0]?`<em class="${Fe.const.seed}.clr:indigo ${Fe.const.seed}.fs:11p ${Fe.const.seed}.wrap.break">${d.files[0].name}</em><br/><span class="${Fe.const.seed}.clr:crimson"> 🔎 [${fe?"重新选择":"Reselect"}]</span>`:`🔎 [${fe?"点击这里载入*.sqlitedb备份文件":"Click here to load *.sqlitedb backup file"}]`;l.innerHTML=n.createHTML(e)})),await r.respond()){const e=[De,Ae,Be,Pe,Ue,Ve,He,Ge,je,ze],t=await Promise.all(e.map(e=>oe(e))),[n,s,a,i,r,c,l,d,f,u]=t,m={db_R:St()?.keycode?.().concat(x(Fe.var.scriptName)),db_0:x(new Date),db_1:n,db_2:s,db_3:a||x(o.stringify([])),db_4:i||x(o.stringify([])),db_5:u,db_6:r||"",db_7:c||"",db_8:l||"",db_9:d||"",db_10:f||""},h=`FontRendering-backup-${Ze.toLowerCase()}-${wt("yyyy-MM-ddTHH-mm-ssZ",new Date)}.sqlitedb`;!function(e,t){const n=x(b(t)),o=URL.createObjectURL(new Blob([n],{type:"text/plain;charset=utf-8"}));p("a",{href:o,download:e}).click(),URL.revokeObjectURL(o)}(h,$n.encrypt(o.stringify(m)));const g=fe?`<p class="${Fe.const.seed}.clr:green">备份数据已归档，备份文件导出下载中……</p><p class="${Fe.const.seed}.clr:8b0000 ${Fe.const.seed}.fst:ita ${Fe.const.seed}.fs:12p ${Fe.const.seed}.wrap.break">${h}</p>`:`<p class="${Fe.const.seed}.clr:green">The data archived and being downloaded…</p><p class="${Fe.const.seed}.clr:8b0000 ${Fe.const.seed}.fst:ita ${Fe.const.seed}.fs:12p ${Fe.const.seed}.wrap.break">${h}</p>`,[$,v]=fe?["确 定","数据备份"]:["OK","Data Backup"];let w=new Tt({trueButtonText:$,messageText:g,titleText:v});await w.respond()&&(me(`Backup succeeded: ${h}`)??Kt()),w=null}else try{const e=d.files[0];me("loadBackupData:",e.name,e.size);let t=new FileReader;t.addEventListener("load",async function(){try{const e=v(String(this.result)),t=o.parse($n.decrypt(e)),n=Q();for(let e=1;e<=10;e++){const s=`db_${e}`;n[s]=t[s]?o.parse(v(t[s])):[3,4].includes(e)?[]:void 0}if(n.db_R=v(t.db_R),n.db_0=v(t.db_0),!(!isNaN(Date.parse(n.db_0))&&new Date(n.db_0)<new Date&&St()?.inspect?.(n.db_R)))throw new Error("Invalid Data Error");{(await ae()).forEach(e=>{se(e)}),ue(De,n.db_1),ue(Ae,n.db_2),ue(Be,n.db_3),ue(Pe,n.db_4),n.db_6&&ue(Ue,n.db_6),n.db_7&&ue(Ve,n.db_7),n.db_8&&ue(He,n.db_8),n.db_9&&ue(Ge,n.db_9),n.db_10&&ue(je,n.db_10),n.db_5?(n.db_5.curVersion=Fe.var.curVersion,n.db_5.rebuild=void 0,ue(ze,n.db_5)):me("no configure data");let e=fe?`<p class="${Fe.const.seed}.clr:green">本地备份数据已成功还原！</p>`:`<p class="${Fe.const.seed}.clr:green">Local backup data restored Successfully!</p>`;const t=fe?"正在努力拉取预定义渲染数据中，请稍后...":"Pulling predefined render data, please wait...";e+=`<p id="${Fe.const.seed}.pull.result" class="${Fe.const.seed}.clr:708090">${t}</p>`;const[o,s]=fe?["确 定","数据还原完毕"]:["OK","Data restoration complete"];let a=new Tt({trueButtonText:o,messageText:e,titleText:s});a.trueButton.className=a.trueButton.setAttribute("disabled","")??`${Fe.class.dbb} ${Fe.class.dbbn}`;const i=c(`#${Fe.const.seed}\\.pull\\.result`,Fe.var.dialogIf);i&&await At(i,a),a=null}}catch(e){be(`${e.name} in FileReader.load:`,e.message);const t=fe?`<p class="${Fe.const.seed}.clr:8b0000">数据校验错误，请选择正确的本地备份文件！</p>`:`<p class="${Fe.const.seed}.clr:8b0000">Data validation error, please recheck the file!</p>`,[n,o]=fe?["确 定","数据文件错误"]:["OK","Data File Error"];let s=new Tt({trueButtonText:n,messageText:t,titleText:o});await s.respond()&&c(`#${Fe.id.backup}`,Fe.var.configIf)?.click(),s=null}},!1),t.readAsText(e),t=null}catch(e){be(`${e.name} in FileReader.load: Backup file does not exist!`);const t=fe?`<p class="${Fe.const.seed}.clr:indigo">载入文件不存在，请选择要还原的备份文件！</p>`:`<p class="${Fe.const.seed}.clr:indigo">Load file not exist, please select one to restore!</p>`,[n,o]=fe?["确 定","没有文件载入"]:["OK","No File Loading"];let s=new Tt({trueButtonText:n,messageText:t,titleText:o});await s.respond()&&c(`#${Fe.id.backup}`,Fe.var.configIf)?.click(),s=null}r=null}catch(e){be(`${e.name} in ControlBackupButton:`,e.message)}})),ce?.addEventListener("click",Kt)}catch(e){be(`${e.name} in OperateConfigure:`,e.message,Fe.array.exps.push(`[operateConfigure]: ${e}`))}var d,f,u}(),I(100,{useCachedSetTimeout:!0}).then(Mt).then(e=>{return e.node?.classList.add(`${Fe.const.seed}.opac:1`),me("configure<errorCount>:",e.error.length)??(t=e.error,void(Array.isArray(t)&&0!==t.length&&I(600)(Kt()).then(async()=>{if(c("fr-dialogbox[fr-error]"))return;const e=t.map((e,t)=>`${t+1}. ${e}`).join("<br/>"),n=fe?`<p class="${Fe.const.seed}.clr:crimson ${Fe.const.seed}.fs:14p">脚本在运行时发生了重大异常或错误，若在『刷新页面』后依然报错，请通过『反馈问题』及时告知作者，感谢您的反馈！<br/><kbd id="${Fe.const.seed}.kbd">以下信息会自动保存至您的剪切板</kbd></p>`:`<p class="${Fe.const.seed}.clr:crimson ${Fe.const.seed}.fs:14p">The script is running with a major error, if it still report an error after refreshing, please let the author know, thanks!<br/><kbd id="${Fe.const.seed}.kbd">The following info is saved to your clipboard</kbd></p>`,a=fe?`<li>浏览器信息：${o.stringify(s)}　</li><li>脚本扩展信息：${te} v${ee}　</li>`:`<li><b>BrowserInfo:</b> ${o.stringify(s)}　</li><li><b>ScriptManager:</b> ${te} v${ee}　</li>`,i=fe?`<li>脚本版本信息：v${Fe.var.curVersion}　</li><li>当前访问域名：${ye}//${$e}<span hidden> ${we}</span>　</li>`:`<li><b>ScriptVersion:</b> v${Fe.var.curVersion}　</li><li><b>DomainName:</b> ${ye}//${$e}<span hidden> ${we}</span>　</li>`,r=fe?`<li>错误信息列表：　<span class="${Fe.const.seed}.disp:block ${Fe.const.seed}.clr:tan">${e}</span></li>`:`<li><b>ErrorsList:</b>　<span class="${Fe.const.seed}.disp:block ${Fe.const.seed}.clr:tan">${e}</span></li>`,l=`${n}<p><ul id="${Fe.const.seed}.report:author">${a}${i}${r}</ul></p>`,[d,p,f]=fe?["反馈问题","刷新页面","错误报告"]:["FeedBack","Reload","Error Report"];try{let e=new Tt({trueButtonText:d,falseButtonText:p,messageText:l,titleText:f});e.container.setAttribute("fr-error",!(Fe.array.exps.length=0));const t=(e,t,n)=>t?"\n":n?" ":"\n",n=(c(`#${Fe.const.seed}.report:author`,Fe.var.dialogIf)?.textContent.trim()??"").replace(/(\u3000)|(\u0020+)|((?:\r?\n)+)/g,t);await e.respond()?(z("```log\n"+n+"\n```"),ie(`${Fe.url.feedback}/new?assignees=F9y4ng&template=bug_report.md`,!1)):T(),e=null}catch(e){be(`${e.name} in ReportErrorToAuthor:`,e.message)}})));var t})}catch(e){be(`${e.name} in OpenSettings:`,e.message)}}function Mt(){const t=c(`#${Fe.id.container}`,Fe.var.configIf).getBoundingClientRect().height;return e.innerHeight<=t*(at||C({BLINK:128,GECKO:126,more:null})?1:Fe.var.curScale)+18&&l(`#${Fe.id.cSwitch},#${Fe.id.eSwitch}`,Fe.var.configIf).forEach(e=>{e.click()}),c(`.${Fe.class.title} span.${Fe.class.guide}`,Fe.var.configIf)?.addEventListener("click",()=>{ie(Fe.url.guideURI,!1)}),c(`#${Fe.id.render}`,Fe.var.configIf)?.addEventListener("dblclick",e=>N(e,{preventDefault:!0})||ie(`${Fe.url.feedback}/42`,!1)),c(`#${Fe.id.field} #${Fe.const.seed}\\.scriptname`,Fe.var.configIf)?.addEventListener("dblclick",function(e){N(e,{preventDefault:!0}),this.classList.add(`${Fe.const.seed}.usel:none`),Lt(Fe.url.guideURI,Fe.var.curVersion)}),{error:Fe.array.exps,node:c(`#${Fe.id.container}`,Fe.var.configIf)}}async function Rt(){const e=fe?`<p id="${Fe.const.seed}.exSite.add">${ke}</p><p class="${Fe.const.seed}.clr:8b0000">该域名下所有页面将被禁止字体渲染！</p><p>确定后当前页面将自动刷新，请确认是否排除？</p>`:`<p id="${Fe.const.seed}.exSite.add">${ke}</p><p class="${Fe.const.seed}.clr:8b0000">The fonts of all web pages under this domain name will be prohibited from rendering!</p><p>Please confirm to exclude?</p>`,[t,n]=fe?["确 定","自定义排除"]:["OK","Exclusion"],[o,s]=fe?["取 消","排除字体渲染"]:["Cancel","Exclude Font Rendering"];let a=new Tt({trueButtonText:t,falseButtonText:n,neutralButtonText:o,messageText:e,titleText:s});if(await a.respond()){const{exSite:e}=await D();e.push(ke)&&ue(Ae,h(e,e=>e&&"string"==typeof e).sort()),Kt({isReload:!0})}else zt();a=null}async function Nt(){const e=await g(),{isBackupFunction:n=!0,isPreview:o,isFontsize:s,isHotkey:a=!0,isFixViewport:i=!0,isCloseTip:r,globalDisable:d,maxPersonalSites:p=100}=e,f=fe?"高级核心功能设置":"Advanced Core Settings",u=fe?`<div class="${Fe.const.seed}.VIP" title="当您仅需要在特定域名渲染时，可使用此快捷功能关闭全局设置！"><u>⑩</u>仅在特定域名生效（全局禁用）</div><button id="${Fe.id.globaldisable}">关闭全局</button>`:`<div class="${Fe.const.seed}.VIP" title="To turn off global render when only need to render at specific domain name."><u>⑩</u>Disabled Global Rendering</div><button id="${Fe.id.globaldisable}">Disable</button>`,m=d?"":`<li id="${Fe.id.gc}">${u}</li>`,h=fe?`<div class="${Fe.const.seed}.VIP" title="养成定期备份的好习惯，保护自己的数据安全！"><u>①</u>本地备份功能（默认：开启）</div>`:`<div class="${Fe.const.seed}.VIP" title="Keep your data safe with regular backups!"><u>①</u>Local Backup (Default: ON)</div>`,b=fe?`<div class="${Fe.const.seed}.VIP" title="无需保存刷新页面，直接预览渲染效果！"><u>②</u>渲染预览功能（默认：关闭）</div>`:`<div class="${Fe.const.seed}.VIP" title="Preview the rendering directly without saving and refreshing the page."><u>②</u>Render Preview (Default: OFF)</div>`,$=fe?`<div class="${Fe.const.seed}.VIP" title="实验性功能：兼容大部分浏览器，但仍在Beta测试阶段！"><u>③</u>字体缩放功能（默认：关闭）</div>`:`<div class="${Fe.const.seed}.VIP" title="Experimental: Compatible with most browsers, but still in Beta."><u>③</u>Font Scaling (Default: OFF)</div>`,x=fe?`<div class="${Fe.const.seed}.VIP" title="实验性功能：跟随字体缩放开关，可单独关闭，使用方法查阅帮助文件！"><u>④</u>视口单位修正（默认：关闭）</div>`:`<div class="${Fe.const.seed}.VIP" title="Experimental: Follow the font scaling switch, can be turned off individually."><u>④</u>Fix Viewport (Default: OFF)</div>`,v=fe?`<div class="${Fe.const.seed}.VIP" title="如快捷键有冲突，请在此关闭它！"><u>⑤</u>键盘快捷键功能（默认：开启）</div>`:`<div class="${Fe.const.seed}.VIP" title="If there is a conflict in the shortcut, please close it."><u>⑤</u>Shortcut Tool (Default: ON)</div>`,w=fe?`<div class="${Fe.const.seed}.VIP" title="您将无法第一时间获得更新内容，错过重要提示！"><u>⑥</u>关闭更新提示功能（不推荐）</div>`:`<div class="${Fe.const.seed}.VIP" title="You won't get update or important tips, which we don't recommend."><u>⑥</u>Turn Off Update Prompts</div>`,y=fe?`<div class="${Fe.const.seed}.VIP" title="防止页面加载缓慢，不建议设置过高的数值！"><u>⑦</u>个性化设置总数（默认: 100）</div>`:`<div class="${Fe.const.seed}.VIP" title="Prevents slow loading, not recommended to set a higher value."><u>⑦</u>Customize Total (Defalut: 100)</div>`,k=fe?`<div class="${Fe.const.seed}.VIP" title="手动拉取预定义的站点渲染数据，减少一般情况下的渲染错误！"><u>⑧</u>预定义的渲染数据（实验功能）</div>`:`<div class="${Fe.const.seed}.VIP" title="Pull predefined special rendering data to reduce rendering errors!"><u>⑧</u>Pull Predefined Render Data</div>`,S=fe?`<div class="${Fe.const.seed}.VIP" title="安装新字体后，请先重启浏览器再重建全局缓存！"><u>⑨</u>字体列表全局缓存（时效: 30天）</div>`:`<div class="${Fe.const.seed}.VIP" title="After installing new fonts, restart browser before rebuilding the global cache."><u>⑨</u>FontList Cache (Expired: 30d)</div>`,T=fe?"如果您遇到错误或提建议，请及时向我反馈":"Feedback for any errors or suggestions",F=`<span>${f}</span><span class="${Fe.const.seed}.fs:14p">- Version ${Fe.var.curVersion} -</span>`,E=`<span class="${Fe.class.emoji}">🧡</span>`,L=`<ul class="${Fe.class.main}">\n              <li id="${Fe.id.bk}">\n                ${h}\n                <div class="${Fe.const.seed}.mg:0.pd:0">\n                  <input type="checkbox" id="${Fe.id.isbackup}" class="${Fe.class.checkbox}" ${n?"checked":""} />\n                  <label for="${Fe.id.isbackup}"></label>\n                </div>\n              </li>\n              <li id="${Fe.id.pv}">\n                ${b}\n                <div class="${Fe.const.seed}.mg:0.pd:0">\n                  <input type="checkbox" id="${Fe.id.ispreview}" class="${Fe.class.checkbox}" ${o?"checked":""} />\n                  <label for="${Fe.id.ispreview}"></label>\n                </div>\n              </li>\n              <li id="${Fe.id.fs}">\n                ${$}\n                <div class="${Fe.const.seed}.mg:0.pd:0">\n                  <input type="checkbox" id="${Fe.id.isfontsize}" class="${Fe.class.checkbox}" ${s?"checked":""} />\n                  <label for="${Fe.id.isfontsize}"></label>\n                </div>\n              </li>\n              <li id="${Fe.id.fvp}">\n                ${x}\n                <div class="${Fe.const.seed}.mg:0.pd:0">\n                  <input type="checkbox" id="${Fe.id.isfixviewport}" class="${Fe.class.checkbox}" ${i?"checked":""} />\n                  <label for="${Fe.id.isfixviewport}"></label>\n                </div>\n              </li>\n              <li id="${Fe.id.hk}">\n                ${v}\n                <div class="${Fe.const.seed}.mg:0.pd:0">\n                  <input type="checkbox" id="${Fe.id.ishotkey}" class="${Fe.class.checkbox}" ${a?"checked":""} />\n                  <label for="${Fe.id.ishotkey}"></label>\n                </div>\n              </li>\n              <li id="${Fe.id.ct}">\n                ${w}\n                <div class="${Fe.const.seed}.mg:0.pd:0">\n                  <input type="checkbox" id="${Fe.id.isclosetip}" class="${Fe.class.checkbox}" ${r?"checked":""} />\n                  <label for="${Fe.id.isclosetip}"></label>\n                </div>\n              </li>\n              <li id="${Fe.id.mps}">\n                ${y}\n                <div class="${Fe.const.seed}.mgr:5p ${Fe.const.seed}.pd:0">\n                  <input maxlength="4" id="${Fe.id.maxps}" placeholder="100" value="${p}" readonly />\n                </div>\n              </li>\n              <li id="${Fe.id.pdr}">\n                ${k}\n                <button id="${Fe.id.pdrr}">${fe?"重新拉取":"Repull"}</button>\n              </li>\n              <li id="${Fe.id.flc}">\n                ${S}\n                <button id="${Fe.id.flcid}">${fe?"重建缓存":"Rebuild"}</button>\n              </li>\n              ${m}\n            </ul>\n            <div id="${Fe.id.feedback}">${E}<span><b> ${T} </b></span>${E}</div>`,[I,R,N]=fe?["保存数据","脚本主页","取 消"]:["Save","Homepage","Cancel"];let O=new Tt({trueButtonText:I,falseButtonText:R,neutralButtonText:N,messageText:L,titleText:F});const z=`#${Fe.id.isbackup},#${Fe.id.ispreview},#${Fe.id.isfontsize},#${Fe.id.isfixviewport},#${Fe.id.ishotkey},#${Fe.id.isclosetip},#${Fe.id.maxps}`,A=e=>e.split(",").map((e,t)=>(t=c(e,Fe.var.dialogIf))&&("checkbox"===t.type?t.checked:t.value||100));let[D,B,P,V,U,H,j]=A(z);const G=c(`#${Fe.id.maxps}`,Fe.var.dialogIf);bt(G),G?.addEventListener("input",()=>G.value=G.value.replace(/[^0-9]/g,""));const K=c(`#${Fe.id.isclosetip}`,Fe.var.dialogIf);K?.addEventListener("click",function(){const e=fe?"我们强烈地不建议您关闭更新提示功能，那样您将不能及时获得更新内容和重要的功能提示，特殊情况下甚至会影响您的正常使用。双击字体渲染设置界面顶部的脚本名称（或访问Github主页），可查看历史更新内容。\r\n\r\n请确认是否“关闭更新提示功能”？":"We strongly do not recommend that you turn off the update prompt, as you will not be able to get updates and important prompts in time, and in special cases may even affect your normal use. Double-click the script-name at font rendering settings interface (or visit Github) to see the update history.\r\n𝐏𝐥𝐞𝐚𝐬𝐞 𝐜𝐨𝐧𝐟𝐢𝐫𝐦 𝐭𝐨 𝐜𝐥𝐨𝐬𝐞 𝐭𝐡𝐞 𝐮𝐩𝐝𝐚𝐭𝐞 𝐩𝐫𝐨𝐦𝐩𝐭?";this.checked&&(this.checked=Boolean(_(e)))});const W=c(`#${Fe.id.isfontsize}`,Fe.var.dialogIf),X=c(`#${Fe.id.isfixviewport}`,Fe.var.dialogIf);W?.addEventListener("click",function(){const e=fe?"由于 Firefox (版本 < 126) 或 Greasemonkey, Userscripts, Firemonkey, Orangemonkey, Stay 等小众浏览器扩展的兼容性问题，可能会对一些网站造成不可修复的样式错误、页面动作缺失等问题。\r\n\r\n强烈建议您：使用“浏览器缩放”替代 (快捷键：ctrl+-/ctrl++)":"Due to the compatibility of Firefox (version < 126) or niche browser extensions such as Greasemonkey, Userscripts, Firemonkey, Orangemonkey, Stay, etc., it can cause irreparable style errors, missing page actions and other issues on some websites. \r\n𝐑𝐞𝐜𝐨𝐦𝐦𝐞𝐧𝐝𝐞𝐝: use 'Browser Zoom' instead. \r\n𝐁𝐫𝐨𝐰𝐬𝐞𝐫 𝐒𝐡𝐨𝐫𝐭𝐜𝐮𝐭: ( Ctrl+- / Ctrl++ )",t=fe?"字体缩放功能将在您确认后开启，字体缩放后造成的视口单位偏移可通过“视口单位修正”功能解决，如介意禁用 CSP 权限，该功能可在此全局关闭，也可在字体渲染设置中单独关闭。":"'𝐅𝐨𝐧𝐭 𝐒𝐜𝐚𝐥𝐢𝐧𝐠' feature will be turned on after you confirm, viewport unit offset caused by font scaling could be solved by the '𝐅𝐢𝐱 𝐕𝐢𝐞𝐰𝐩𝐨𝐫𝐭' feature, which can be turned off globally here or individually in font rendering settings, If you mind disabling CSP.",n=fe?"\r\n\r\n请确认是否开启字体缩放功能？":"\r\n𝐏𝐥𝐞𝐚𝐬𝐞 𝐜𝐨𝐧𝐟𝐢𝐫𝐦 𝐭𝐨 𝐞𝐧𝐚𝐛𝐥𝐞 𝐅𝐨𝐧𝐭 𝐒𝐜𝐚𝐥𝐢𝐧𝐠?",o=(fe?"字体比例缩放（实验性功能）\r\n\r\n注意：":"𝐅𝐨𝐧𝐭 𝐒𝐜𝐚𝐥𝐢𝐧𝐠 (𝐞𝐱𝐩𝐞𝐫𝐢𝐦𝐞𝐧𝐭𝐚𝐥)\r\n𝐍𝐨𝐭𝐞: ").concat(C({GECKO:126,more:null})||rt?e:t,n);this.checked&&(this.checked=Boolean(_(o))),X&&(X.checked=this.checked)}),X?.addEventListener("click",()=>X.checked&&!W?.checked&&W?.click()),c(`#${Fe.id.globaldisable}`,Fe.var.dialogIf)?.addEventListener("click",async()=>{const t=fe?`<p class="${Fe.const.seed}.clr:8b0000">下一步操作将关闭默认的全局设置数据，您可以仅在指定的域名保存需要渲染的站点独享数据。请注意，全局数据禁用后，您需要重新配置并保存为全局数据才能启用默认全局渲染规则。</p><p>请确认您是否要禁用全局设置？</p>`:`<p class="${Fe.const.seed}.clr:8b0000">The next step will turn off the global setting data, and you can save only the site-specific data that needs to be rendered in specified domain name. Please note that after global data disabled, you need to reconfigure and save as global data to enable the global rendering rules.</p><p>Please confirm to disable global settings?</p>`,[n,o,s]=fe?["确 定","取 消","禁用全局设置数据"]:["OK","Cancel","Disable Global Settings"];let a=new Tt({trueButtonText:n,neutralButtonText:o,messageText:t,titleText:s});if(await a.respond()){const t={...mt,fontFace:!1,fontSmooth:!1,fontStroke:0,fixStroke:!1,fontShadow:0,renderCanvas:!1};ue(De,t),e.globalDisable=!0,ue(ze,e),Kt({isReload:!0})}a=null});const Y=M({fn:At,delay:500,once:!0});if(c(`#${Fe.id.pdrr}`,Fe.var.dialogIf)?.addEventListener("click",async()=>{const e=fe?"正在努力拉取预定义渲染数据中，请稍后...":"Pulling predefined render data, please wait...",t=`<p id="${Fe.const.seed}.pull.result" class="${Fe.const.seed}.clr:708090">${e}</p>`,[n,o]=fe?["确 定","拉取预定义渲染数据"]:["OK","Pull Predefined Render Data"];let s=new Tt({trueButtonText:n,messageText:t,titleText:o});s.trueButton.className=s.trueButton.setAttribute("disabled","")??`${Fe.class.dbb} ${Fe.class.dbbn}`;const a=c(`#${Fe.const.seed}\\.pull\\.result`,Fe.var.dialogIf);a&&Y(a,s),s=null}),c(`#${Fe.id.flcid}`,Fe.var.dialogIf)?.addEventListener("click",async()=>{const e=fe?"字体列表全局缓存已重建，当前页面即将刷新！":"Rebuilt Fontlist cache and refresh soon!",t=`<p class="${Fe.const.seed}.clr:b8860b ${Fe.const.seed}.tal:center ${Fe.const.seed}.cps">${e}</p><p class="${Fe.const.seed}.tal:center"><a class="${Fe.const.seed}.cpsa"><img src='${Fe.url.fontlistImg}' /></a></p>`,[n,o]=fe?["确 定","字体列表全局缓存已重建"]:["OK","Rebuilt Fontlist Cache"];let s=new Tt({trueButtonText:n,messageText:t,titleText:o});Et.remove(Ke),await s.respond()&&Kt({isReload:!0}),s=null}),c(`#${Fe.id.feedback}`,Fe.var.dialogIf)?.addEventListener("click",()=>{ie(Fe.url.feedback,!1)}),l(z,Fe.var.dialogIf).forEach(e=>e.addEventListener("change",()=>[D,B,P,V,U,H,j]=A(z))),await O.respond()){const n={isBackupFunction:D,isPreview:B,isFontsize:P,isFixViewport:V,isHotkey:U,isCloseTip:H,maxPersonalSites:j};ue(ze,t.Object.assign(e,n));const o=`<p class="${Fe.const.seed}.clr:b8860b">${fe?"高级核心功能参数已成功保存，当前页面即将刷新！":"Advanced Core Data was saved and refresh soon!"}</p>`,[s,a]=fe?["确 定","高级核心功能设置保存"]:["OK","Advanced Core Data Save"];let i=new Tt({trueButtonText:s,messageText:o,titleText:a});await i.respond()&&Kt({isReload:!0}),i=null}else ie(Fe.url.installURI,!1);O=null}async function Ot(){const e=fe?`<p class="${Fe.const.seed}.exclusion">${ke}</p><p class="${Fe.const.seed}.clr:green">该域名下所有页面将重新进行字体渲染！</p><p>确定后当前页面将自动刷新，请确认是否恢复？</p>`:`<p class="${Fe.const.seed}.exclusion">${ke}</p><p class="${Fe.const.seed}.clr:green">The fonts of all web pages under this domain name will be allowed from rendering!</p><p>Please confirm to re-rendering?</p>`,[t,n]=fe?["确 定","自定义排除"]:["OK","Exclusion"],[o,s]=fe?["取 消","恢复字体渲染"]:["Cancel","Allow Font Rendering"];let a=new Tt({trueButtonText:t,falseButtonText:n,neutralButtonText:o,messageText:e,titleText:s});if(await a.respond()){const{exSite:e,exSitesIndex:t}=await D(),n=e=>"string"==typeof e&&e.startsWith("*")&&new RegExp(`^[a-z0-9][-a-z0-9]{0,62}${e.slice(1).replace(/\./g,"\\.")}(\\:\\d{2,5})?$`),o=e.FindX(e=>(e=n(e))&&e.test($e));if(o){const e=fe?`<p class="${Fe.const.seed}.exclusion">${o}</p><p class="${Fe.const.seed}.clr:8b0000">该网站是被以上包含通配符的泛域名所排除渲染的。</p><p>『确定』将自动取消该泛域名下所有的排除项。</p><p>『管理』您将进入自定义排除站点列表手动处理。</p>`:`<p class="${Fe.const.seed}.exclusion">${o}</p><p class="${Fe.const.seed}.clr:8b0000">The site is excluded by Pan-domain name above.</p><p>『OK』Allow all under this Pan-domain name.</p><p>『Manage』Edit customized exclude-sites list.`,[t,n]=fe?["确 定","管 理"]:["OK","Manage"],[s,a]=fe?["取 消","恢复泛域名下的字体渲染"]:["Cancel","Allow Pan-domain name re-Rendering"];let i=new Tt({trueButtonText:t,falseButtonText:n,neutralButtonText:s,messageText:e,titleText:a});if(await i.respond()){const{exSite:e}=await D();ue(Ae,h(e,e=>e&&"string"==typeof e&&!e.endsWith(o.slice(1))).sort()),Kt({isReload:!0})}else zt();i=null}else~t&&e.splice(t,1)&&ue(Ae,h(e,e=>e&&"string"==typeof e).sort()),Kt({isReload:!0})}else zt();a=null}async function zt(){const{exSite:e}=await D(),[t,[o,s]]=[e,fe?["删除","恢复"]:["Del","Reset"]];let[a,i]=[t.length-1,""];for(let e=0;e<=a;e++){const n=Le(t[e]),s=String(e+1).padStart(2,"0");i+=`<li id="${Fe.const.seed}.vlist.item:${e}"><span>${s}. </span><span class="${Fe.const.seed}.domainlist" title="${n}">${n}</span>`,i+=`<span>[<a id="${Fe.const.seed}.vlist.item.link:${e}" class="${Fe.const.seed}.clr:8b0000" data-fr-domain="${n}">${o}</a>]</span></li>`}i=i||`<li id="${Fe.const.seed}.temp">---- ${fe?"暂时没有自定义排除站点":"No customized exclusion"} ----</li>`;const[r,l]=fe?["查 询","添 加"]:["Search","Add"],d=`${fe?`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p"><b class="${Fe.const.seed}.clr:8b0000">添加自定义排除站点</b>：在文本框中输入正确的域名，点击添加按钮，支持首位通配符的泛域名，如：*.example.com</p><p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p"><b class="${Fe.const.seed}.clr:8b0000">数据保存</b>：完成所有添加、删除操作后需点击保存按钮才会使数据保存生效，保存数据后不能撤回，请谨慎操作。</p>`:`<p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p"><b class="${Fe.const.seed}.clr:8b0000">Add</b>: Enter domain-name, click Add button. Support for Pan-domain name with wildcard, e.g. *.example.com</p><p class="${Fe.const.seed}.clr:555 ${Fe.const.seed}.fs:14p"><b class="${Fe.const.seed}.clr:8b0000">Save</b>: After adding or deleting, must click Save button to make the data effective. After saving, unable to retract!</p>`}<p class="${Fe.const.seed}.list:p"><input id="${Fe.const.seed}.sdata" type="search"><button id="${Fe.const.seed}.sdata:search">${r}</button><button id="${Fe.const.seed}.sdata:add">${l}</button></p><ul id="${Fe.const.seed}.vlist">${i}</ul>`,[f,u,m]=fe?["保存数据","取 消","自定义排除站点管理"]:["Save","Cancel","Manage Customized Exclusions"];let b=new Tt({trueButtonText:f,neutralButtonText:u,messageText:d,titleText:m});const[g,x,v,y]=["sdata","sdata\\:search","sdata\\:add","vlist"].map(e=>c(`#${Fe.const.seed}\\.${e}`,Fe.var.dialogIf));if(y&&g&&x&&v&&(g.addEventListener("keydown",e=>{"Enter"===e.key&&(N(e,{immediate:!1,preventDefault:!0}),x.focus(),x.click())}),bt(g),g.addEventListener("input",()=>{g.value=g.value.replace(/[^-a-z0-9.*:\][]|^https?:\/\//gi,"").toLowerCase()}),g.addEventListener("focus",()=>{g.removeAttribute("class")}),v.addEventListener("click",()=>{const s=g.value.trim().toLowerCase(),i=new RegExp("^(?=^.{3,255}$)(\\*\\.)?[a-z0-9][-a-z0-9]{0,62}(\\.[a-z0-9][-a-z0-9]{0,62})+(:[0-9]{1,5})?$|^(?![0-9])(?!-)(?!.*--)[A-Za-z0-9-]{2,62}[a-zA-Z0-9](:[0-9]{1,5})?$|^\\[(([0-9a-fA-F]{1,4}:){7}([0-9a-fA-F]{1,4}|:)|(([0-9a-fA-F]{1,4}:){0,5}([0-9a-fA-F]{1,4})?::([0-9a-fA-F]{1,4}:){0,5}([0-9a-fA-F]{1,4})?)|::([0-9a-fA-F]{1,4}:){0,6}([0-9a-fA-F]{1,4})?)\\](:[0-9]{1,5})?$"),r=s.replace(/:(80|443)$/,"");if(!i.test(r)||e.includes(r))return g.className=`${Fe.const.seed}.clr:ff0000`;R(`#${Fe.const.seed}\\.temp`,Fe.var.dialogIf),a++;const c=p("li",{id:`${Fe.const.seed}.vlist.item:${a}`,class:`${Fe.const.seed}.gradient.bg`}),l=Le(r);c.innerHTML=n.createHTML(`<span>${String(a+1).padStart(2,"0")}. </span><span class="${Fe.const.seed}.domainlist" title="${l}">${l}</span>`)+n.createHTML(`<span>[<a id="${Fe.const.seed}.vlist.item.link:${a}" class="${Fe.const.seed}.clr:8b0000" data-fr-domain="${l}">${o}</a>]</span>`),w(y,c),t.push(r),g.value="",y.scrollTop=y.scrollHeight}),x.addEventListener("click",()=>{Dt(g,y,"exsite","li>:nth-child(2)")})),y?.addEventListener("click",e=>{const n=e.target;if("a"!==$(n)||!n.id.startsWith(`${Fe.const.seed}.vlist.item.link:`))return;const a=Number(n.id.match(/\d+$/)?.[0]??-1),i=n.dataset.frDomain,r=n.parentNode.previousElementSibling.classList,c=void 0!==n.dataset.del;c?delete n.dataset.del&&!t.includes(i)&&t.push(i):t.RemoveX(i)&&(n.dataset.del=a),n.textContent=c?o:s,n.className=c?`${Fe.const.seed}.clr:8b0000`:`${Fe.const.seed}.clr:green`,r.toggle(`${Fe.const.seed}.list.reset`,!c)}),await b.respond()){ue(Ae,h(t,e=>e&&"string"==typeof e).sort());const e=fe?`<p class="${Fe.const.seed}.clr:green">自定义排除网站数据已成功保存！</p><p>页面将在您确认后自动刷新。</p>`:`<p class="${Fe.const.seed}.clr:green">Exclusion site data was successfully saved!</p><p>The page will refresh after confirmation.</p>`,[n,o]=fe?["感谢使用","自定义排除网站数据保存"]:["Thanks","Customized Exclusions Data Save"];let s=new Tt({trueButtonText:n,messageText:e,titleText:o});await s.respond()&&Kt({isReload:!0}),s=null}b=null}async function At(e,t){const n=fe?"预定义渲染数据成功更新，页面将自动刷新。":"The data update succeed, page will be refresh!",o=fe?"预定义渲染数据拉取失败，请在刷新后重新拉取。":"The data pull failed, please try to pull again!";await Re().then(async s=>{s&&ue(Oe,s),e.textContent=s?n:o,e.className=s?`${Fe.const.seed}.clr:green`:`${Fe.const.seed}.clr:8b0000`,t.trueButton.className=t.trueButton.removeAttribute("disabled")??`${Fe.class.dbb} ${s?Fe.class.dbbt:Fe.class.dbbf}`,await t.respond()&&Kt({isReload:!0})})}function Dt(t,n,o,s){const a=t?.value?.trim().replace(/([.*+?^${}()|[\]\\])/g,"\\$&");if(!a||!n)return;const[i,r]=[`${o}Keyword`,`${o}Search`];let[c,d,p,f]=[new RegExp(a,"i"),l(s,n),null];for(Fe.var[i]!==a&&(Fe.var[i]=a)&&(Fe.count[r]=0);!p;){if(f=d[Fe.count[r]].firstChild,p=c.exec(f.data),Fe.count[r]>=d.length-1){Fe.count[r]=0;break}Fe.count[r]++}if(p){const o=document.createRange();o.selectNodeContents(f);const s=e.getSelection?.();s?.removeAllRanges(),s?.addRange(o);const a=s?.anchorNode?.parentNode?.parentNode,i=Number(a?.id?.replace(`${Fe.const.seed}.vlist.item:`,""))||0,r=Number(a?.clientHeight)||0;n.scrollTop=i*r,t.removeAttribute("class")}else t.className=`${Fe.const.seed}.clr:ff8c00`}async function Bt(){let[e,t,n,s,a]=[Y([]),""];try{n=await oe(Be);try{s=n?[...o.parse(v(n))]:[]}catch(e){e&&(s=[])}const[i,r,l,d]=fe?["查 询","清 除","删除","恢复"]:["Search","Clear","Del","Reset"],p=`<p class="${Fe.const.seed}.list:p"><input id="${Fe.const.seed}.sdata" type="search"><button id="${Fe.const.seed}.sdata:search">${i}</button><button id="${Fe.const.seed}.sdata:clear">${r}</button></p>`,f=s.length>6?p:"";for(let e=0,n=s.length;e<n;e++){const n=Le(s[e].domain),o=String(e+1).padStart(2,"0"),a=new Date(s[e].fontDate),i=wt("yyyy-MM-dd",a);t+=`<li id="${Fe.const.seed}.vlist.item:${e}"><span>[<a id="${Fe.const.seed}.vlist.item.link:${e}" class="${Fe.const.seed}.clr:8b0000">${l}</a>]<span> ${o}.</span></span><span class="${Fe.const.seed}.customdomain" title="${n}">${n}</span><span class="${Fe.const.seed}.mg:05p" title="${a}">${i}</span></li>`}const u=fe?"网站个性化设置数据列表":"Customized Sites Data",m=fe?"请谨慎操作，保存后生效，已删除的数据将不可恢复！":"After saving, the deleted data will not be recoverable!",h=`<p class="${Fe.const.seed}.clr:8b0000 ${Fe.const.seed}.fs:14p ${Fe.const.seed}.indent:6p">${m}</p>${f}<ul id="${Fe.const.seed}.vlist">${t}</ul>`,[b,g]=fe?["确认操作，保存数据","取 消"]:["Save","Cancel"];let x=new Tt({trueButtonText:b,neutralButtonText:g,messageText:h,titleText:u});const[w,y,k,S]=["sdata","sdata\\:clear","sdata\\:search","vlist"].map(e=>c(`#${Fe.const.seed}\\.${e}`,Fe.var.dialogIf));if(S&&w&&y&&k&&(w.addEventListener("keydown",e=>{"Enter"===e.key&&(N(e,{immediate:!1,preventDefault:!0}),k.focus(),k.click())}),bt(w),w.addEventListener("focus",()=>{w.removeAttribute("class")}),w.addEventListener("input",()=>{w.value=w.value.replace(/[^-a-z0-9.]/gi,"").toLowerCase()}),y.addEventListener("click",()=>{w.value="",w.removeAttribute("class"),S.scrollTop=0,w.focus()}),k.addEventListener("click",()=>{Dt(w,S,"domain","li>:nth-child(2)")})),S?.addEventListener("click",t=>{const n=t.target;if("a"!==$(n)||!n.id.startsWith(`${Fe.const.seed}.vlist.item.link:`))return;const{classList:o}=n.parentNode.nextElementSibling,{classList:a}=n.parentNode.nextElementSibling.nextElementSibling,i=Number(n.id.match(/\d+$/)?.[0]??-1),r=void 0!==n.dataset.del;r?e.RemoveX(n.dataset.del)&&delete n.dataset.del:e.push(n.dataset.del=s[i].domain),n.textContent=r?l:d,n.className=r?`${Fe.const.seed}.clr:8b0000`:`${Fe.const.seed}.clr:green`,[o,a].forEach(e=>e.toggle(`${Fe.const.seed}.list.reset`,!r))}),await x.respond()){let t=!1;n=await oe(Be);try{s=n?[...o.parse(v(n))]:[]}catch(e){e&&(s=[])}for(let n=e.length-1;n>=0;n--)a=pe(s,e[n]),~a&&s.splice(a,1),e[n]===$e&&(t=!0);ue(Be,s);const i=t?fe?"当前网站数据有变动，页面将在您确认后自动刷新。":"Current site data is changed, then refresh soon!":fe?"提示：您可继续留在当前页面进行其他操作。":"Tip: You can continue with other operations.",r=`<p class="${Fe.const.seed}.clr:green">${fe?"网站个性化数据已成功保存！":"Customize data saved successfully!"}</p><p>${i}</p>`,[c,l]=fe?["感谢使用","个性化数据保存"]:["Thanks","Customize Data Save"];let d=new Tt({trueButtonText:c,messageText:r,titleText:l});await d.respond()&&t&&Kt({isReload:!0}),d=null}x=null}catch(e){be(`${e.name} in ManageDomainsList:`,e.message)}}function Pt(e,t){const[n,o]=["fr-scrollbar",e].map(e=>c(e,Fe.var.configIf));Fe.var[`sync_scroll_${e}`]||(Fe.var[`sync_scroll_${e}`]=e=>o&&(o.style.transform=`translateY(-${e.currentTarget.scrollTop}px)`)),n?.[t?"addEventListener":"removeEventListener"]("scroll",Fe.var[`sync_scroll_${e}`],!1),o.style.transform=t?`translateY(-${n?.scrollTop??0}px)`:delete Fe.var[`sync_scroll_${e}`]&&null}async function _t(e,t,n){const o=await async function(e){const t=await W();for(const n of t.values())if(n.en===e&&n.ps)return n.ps;return e}(t);return function(e){return Array.isArray(e)?e.reduce((e,t)=>{if("string"!=typeof t)return e;const n=t.match(/^{([^{}]+)}$/);return e.concat([n?O(n[1]):t])},[]):[]}(n).reduce((t,n)=>t.concat(e.includes(n)?"":`@font-face{font-family:"${n}";src:local("${o}");}`),"")}function Vt(e){const t=`${wn}body{transform:scale(var(--fr-font-fontscale));transform-origin:0 0;width:${100/e}%;height:${100/e}%}`,n=`@supports(zoom:100%){${wn}body{zoom:var(--fr-font-fontscale)!important}}`,o=C({GECKO:126,more:null})?t:n;return Se||C({BLINK:128,GECKO:138,more:null})?o:""}function Ut(e,t){return e<=0||e>4?"inherit":`0 0 ${e}px ${ao(t).toLowerCase()}`}function Ht(e,t,n,o){if(!n)return"";const s=["pre","code"].filter(t=>new RegExp(`\\b${t}\\b`,"i").test(e)).flatMap(e=>[e,`${e} *`]),a=["@github.com##textarea,.blob-num,.blob-num *,.blob-code,.blob-code *,.react-line-numbers *,.react-code-lines *",...Tn],i=/@([\w[\]\-.:]+)##((?![^@]+##)[\w\-*.#:+>()~[\]=^$|,' ]+)/,r=h([...s,".ace_editor *",".monaco-editor *",".cm-editor *",".CodeMirror *",".code",".code *",...a.reduce((e,t)=>{const[,n,o]=i.exec(t)||[];return $e.endsWith(n)&&e.push(...o.split(",")),e},[])]).join(),c=(t?"var(--fr-mono-fallback),var(--fr-font-family),":"ui-monospace,monospace,")+"var(--fr-font-emoji)",[l,d]=[at?"-webkit-user-select:text!important":"user-select:text!important",o?"":wn];return`${d}:is(${r}):not([class*='icon' i],[class*='symbols' i],md-icon){font-family:var(--fr-mono-font),${c}!important;text-shadow:var(--fr-mono-shadow)!important;-webkit-text-stroke:var(--fr-no-stroke)!important;font-feature-settings:var(--fr-mono-feature, unset)!important;${l}}${d}:is(${r})::selection{color:#fff!important;background:#fe7300ed!important;-webkit-text-stroke-width:0!important;text-shadow:1px 1px 1px #4c4c4ccc!important}`}function jt({overwrite:e=!1,shouldNotify:t=!0}={}){const{id:n,textContent:o}=S({primary:!0})??Q();if(!e&&n)return!0;const s=(o??Bo).replace(Fe.const.regexp,`#${document.documentElement.id}`),a=V({target:document.head,id:n??Fe.id.rndStyle,cssText:s,overwrite:Boolean(e)});return a&&t&&ge(`[INSERTSTYLE]${Te}[i:${Fe.id.rndStyle}]`),a}async function Gt(e,t,n){let o=Fe.var.reFontFace=n;if(e){Fe.var.reFontFace=fe?`未知字体名（请重新添加该自定义字体: ${t}）`:`Unknown (Re-Add Font: ${t})`,o=fe?"未知字体名":"Unknown";const e=await W();for(const n of e.values())if(n.en===t||O(n.ch)===t){o=t.includes("\\")?"":` (${n.en})`,Fe.var.reFontFace=n.ch+o,o=n.ch;break}}const s=c(`#${Fe.id.fontList} .${Fe.class.selectFontID} input`,Fe.var.configIf);s?.setAttribute("placeholder",`${fe?"当前字体：":"Current: "}${o}`),s?.addEventListener("mouseenter",()=>{s.setAttribute("placeholder",fe?"输入关键字可检索字体":"Enter some keywords")}),s?.addEventListener("mouseleave",()=>{s.setAttribute("placeholder",`${fe?"当前字体：":"Current: "}${o}`)})}function Kt({isReload:e}={}){Tt.closure()&&c(`#${Fe.id.container}`,Fe.var.configIf)?.classList.remove(`${Fe.const.seed}.opac:1`),I(500)(R("fr-colorpicker")).then(e=>e&&R("fr-configure")&&c(`dialog#${Fe.const.dialog}`)).then(E),Fe.array.values.clear(),e?T():Rn&&Zt()}function Wt(e,t,n,o=!1){e&&t&&e.addEventListener("input",()=>{const[s,a]=[Number(e.value),Number(e.value)===Number(o)],i=(e,t)=>e?.classList.toggle(`${Fe.const.seed}.${t}`,a);switch(Qe(e,s,n),t.value=a?"OFF":s.toFixed(n),t.dispatchEvent(new Event("change")),e.id){case Fe.id.shadow:return i(c(`#${Fe.id.shadowColor}`,Fe.var.configIf),"disp:none");case Fe.id.scale:return zn&&i(c(`#${Fe.id.fviewport}`,Fe.var.configIf),"vis:hidden");case Fe.id.stroke:return ot&&i(c(`#${Fe.id.fstroke}`,Fe.var.configIf),"vis:hidden")}})}function Xt(e,t,n){if(!e||!t||!n)return;const o=e.attributes["fr-button-switch"];e.addEventListener("click",()=>{const s="ON"===o.value;t.classList.toggle(`${Fe.const.seed}.disp:none`,s),e.textContent=s?"∨":"∧",n.classList.toggle(`${Fe.const.seed}.h:35p.mh:35p`,s),o.value=s?"OFF":"ON"})}function Yt(e,t,n,o=!1){if(!e||!n)return;const s=M({fn:Jt,delay:200}),a=["textarea","hidden"].includes(e.type)?"input":"change";e.addEventListener(a,()=>{const a="checkbox"===e.type?e.checked:e.value;s(a,t,e,n,o,Rn)})}function Jt(e,t,n,o,s,a){try{const i="string"==typeof e&&/^currentcolor$/i.test(e)?"#FFFFFFFF":e;(void 0!==n.dataset.frType?Number("OFF"===e?s:e):i)!==t?Fe.array.values.add(n.id):Fe.array.values.delete(n.id);const r=Fe.array.values.size>0;o.classList.toggle(Fe.class.anim,r),a&&(me("changed Element IDs:",Fe.array.values)||r?function(e){e.textContent=fe?"预览":"𝑷𝒓𝒗𝒘",e.title=fe?"预览渲染效果":"Preview Rendering",e.classList.add(`${Fe.const.seed}.prvw`),e.setAttribute("v-Preview","true")}(o):qt({button:o}))}catch(e){be(`${e.name} in SetEffectIntoSubmit:`,e.message)}}function Zt(){Fe.var.fixStroke=Vn.o.fixStroke,Fe.array.scaleMatrix.push(Fe.var.curScale=Vn.fontSize),Fe.var.preview&&tn("recover",vo,document,!0),qe(Fe.var.preview,Fe.var.topStyle=Bo)||delete Fe.var.preview}function qt({button:e,isRestore:t=!0}){e.textContent=fe?"保存":t?"Save":"𝑺𝒂𝒗𝒆",e.classList.remove(`${Fe.const.seed}.prvw`),["v-Preview","title"].forEach(t=>e.removeAttribute(t)),t&&Zt()}function Qt(e){if(!Array.isArray(e))return mt.fontSelect;const t=h(e,Boolean,e=>`'${e}'`);return t.length>0?t.join(","):mt.fontSelect}function en(e){return X(e).reduce((e,t)=>{const n=t.charCodeAt(0);return 12288===n?e+String.fromCharCode(n-12256):n>=65281&&n<=65374?e+String.fromCharCode(n-65248):e+t},"")}function tn(t,n,o=document,s=!1){try{let{elementSet:a,shadowSet:i}=d(`:not(${rs})`,o,e=>!bs.test(b(e.className)));i.forEach(e=>on(e,n,Fe.var.obsFontBold))??i.clear(),xs()&&(nn({elementSet:a,recheck:s})??me(`CorrectBold.Passive${Te}:`,{eventType:t??e.event?.type}))}catch(e){be(`${e.name} in CorrectBoldPassive:`,e)}}function nn({elementSet:e,recheck:t}){const n=new Set,o=Math.max(1e3*fs,e.size/2);rn(e.values(),o,e=>n.add({node:e,isbold:sn(e,t)}),()=>n.forEach(e=>an({checkedNode:e}))??n.clear())}function on(e,t,n){(function(e,t){const n=$(e.host);kt(e,uo+bo,`${n}-fix-selection`,!1),lt&&Do&&!q?.getItem(Fe.const.const.conflict)&&kt(e,t?`:host(${n}){--fr-fix-stroke:0px transparent;--fr-fix-shadow:${To}}${t}`:"",`${n}-fix-boldstroke`)})(e,t),xs()&&ln(e,n)}function sn(e,t){let n=ps.get(e);return(!n||n<600&&t)&&(n=u(e).fontWeight,ps.set(e,n)),n>=600}function an({checkedNode:e,uncheckedNode:t}){const n=e?.node??t,o=e?.isbold??sn(t),s=cn(n,!1);s!==o&&vs(s?gs.del:gs.add,n)}function rn(e,t,n,o,s=0){for(;s++<=t;){const{done:t,value:s}=e.next();if(t)return void o();n(s)}Ee.setTimeout(rn,0,e,t,n,o)}function cn(e,t){return e&&(e.matches($o)||t&&c($o,e))}function ln(e,t){xs()&&["mouseenter","mouseleave"].forEach(t=>e.addEventListener(t,dn,!0)),!ds.has(e)&&ds.add(e)&&t&&t.observe(e,cs)}function dn(e){const t=e.composedPath()[0]??e.target;if(!pn(t,[Node.ELEMENT_NODE]))return;const{transition:n,transitionDelay:o,transitionDuration:s}=u(t),a=(e,t)=>I(e)(t).then(e=>[e,...e.children].forEach(e=>fn(e,!1)&&an({uncheckedNode:e})));["all","none"].includes(n)?a(0,t):a(500*(parseFloat(o)||0+parseFloat(s)||0),t)}function pn(e,t=[Node.ELEMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE]){return e&&t.includes(e.nodeType)&&!ls.has($(e))&&!bs.test(b(e.className))}function fn(e,t=!0){return t&&l(`:not(${rs})`,e).forEach(e=>{ps.delete(e)}),ps.delete(e)||!ps.has(e)}function un(e){function t(){return Promise.all([n(),o()])}async function n(){const t=l(`link[rel~="stylesheet" i]:not([${Fe.const.const.vpu}])`).map(async t=>{const n=t.href||t.dataset.href||"about:blank";t.dataset.frProcessed="",await async function(t,n){try{const o=await s(t,n),a=o?await function(e,t){return e?async function(e){const n=X(e.matchAll(/@import (url\(([^)]+)\)|"([^"]+)")[ \w(),:]*;/g));if(0===n.length)return e;const o=await Promise.all(n.map(e=>(e=>{const n=new URL(e.replace(/[`'"]/g,""),t).href;return n?s(n,null):""})(e[2]??e[1])));return n.forEach((t,n)=>e=e.replace(t[0],o[n])),e}(e):Promise.resolve("")}(o,t):"";if(!/\/\*# (source|import)URL=/.test(a))return!n.dataset.frProcessed&&(n.dataset.frProcessed="ignore");const i={id:n.id||y(6),...d(n),type:"text/css","data-href":t,[Fe.const.const.vpu]:"link"},r=n.parentNode??document.head,c=re(r,"style",{...i,textContent:a});(e&&c&&r.contains(n)&&r.replaceChild(c,n)||c&&R(n))&&me("Fixed.viewport.Link:",{linkNode:c})}catch(e){be(`${e.name} in ApplyStyleToOriginLink${Te}:`,e.message)}}(n.replace(/^http:/,"https:"),t)});await Promise.all(t)}async function o(){const e=l(`style:not([${Fe.const.const.vpu}]):not(.darkreader)`).map(async e=>{if(Y(e.attributes,e=>e.name).SomeX(e=>/^(?:fr|gb)-css-[0-9a-f]{8}$/.test(e)))return;const t=e.textContent?.trim();e.dataset.frProcessed="",await async function(e,t){try{if(!t||!i.test(t))return!e.dataset.frProcessed&&(e.dataset.frProcessed="ignore");e.textContent=`/*# sourceURL= ${xe}#internal */\r\n`+a(t,i,Fe.var.curScale),e.id=e.id||y(6),me("Fixed.viewport.Style:",{styleNode:e})??(e.dataset.frProcessed="style")}catch(t){be(`${t.name} in ApplyStyleToOriginStyle:`,t.message)??(e.dataset.frProcessed="failed")}}(e,t)});await Promise.all(e)}async function s(e,t){try{const s=await fetch(e);if(!s.ok)throw new Error(`Network response was not ok. Status: ${s.status}`);const c=await s.text();return!c||t&&!i.test(c)?c||"":`/*# ${t?"sourceURL":"importURL"}=${e} */\r\n${n=a(c,i,Fe.var.curScale),o=e,n.replace(r,(e,t,n)=>{const s=n.replace(/[`'"]/g,""),a=new URL(s,o).href;return e.replace(s,a)})}`}catch(n){return be(`${n.name} in FetchLinkContent${Te}:`,{url:e,node:t,msg:n.message}),t?.setAttribute(Fe.const.const.vpu,"failed"),""}var n,o}function a(e,t,n){return e.replace(t,function(e,t,o){return String((t/n).toFixed(6))+o})}const i=/(\.?\d+(?:\.\d+)?)([dsl]?(?:v[wh]|vmin|vmax))\b(?![\\=/+_-])/g,r=/url\((?![`'"]?(?:([\w.-]+)?#\b|https?:\/\/|data:|\/\/|\/\B))([^)]+)\)/g,c=Do&&zn&&Vn.o.fixViewport&&1!==Fe.var.curScale,d=e=>X(e.attributes).reduce((e,{name:t,value:n})=>(!["href","rel"].includes(t)&&(e[t]=n),e),{});return c&&(xn.addFinalFn(t)??me(`correct.ViewportUnit${Te}:`,{eventType:"init"})),{withPermission:c,correctViewport:t}}function mn({withPermission:e,correctViewport:t}){if(!Se&&!Do)return;const n=M({fn:t,delay:10,immed:!1}),o=(e,t)=>"link"===t?e.getAttribute("rel")?.includes("stylesheet")&&e.getAttribute("href"):"style"===t?e.id!==Fe.id.rndStyle&&!e.classList?.contains("darkreader"):void 0,s=({type:t,target:s,addedNodes:a,oldValue:i})=>{if("childList"===t&&a.length)return((t,s)=>{if(t===document.documentElement)return F(t);if(e)for(const e of s)if(o(e,$(e)))return n()})(s,a);"attributes"===t&&s===document.documentElement&&((e,t)=>{const n=e.id||(e.id=Fe.const.root);t!==n&&(e=>{const t=(S({primary:!0})?.textContent??Bo).replace(Fe.const.regexp,`#${e}`);V({target:document.head,id:Fe.id.rndStyle,cssText:t,overwrite:!0})&&he(`%c[MO]${Te}[HTML.ID]: #${e}`,vt("#1e90ff"))})(n)})(s,i)},a=performance.now(),i=M({fn:(e,t)=>{if(1===e||void 0!==Fe.var.editor||performance.now()-a>5e3)return;const{elementSet:n}=d(`:not(${rs})`,document.body);for(const o of n)if(o.matches(t))return(Fe.var.editor=!0)&&U({cur:1,prev:e,props:Fe.array.props}),document.documentElement.style.setProperty("--fr-font-fontscale","1.0")},delay:50});(new Ce).startObserver({name:"Observe-element:html-style-link",callback:({mutations:e})=>{e.forEach(e=>{s(e)}),i(Fe.var.curScale,".CodeMirror,.cm-editor,.monaco-editor")},config:{childList:!0,subtree:!0,attributeOldValue:!0,attributeFilter:["id"]}}),tt.startObserver({name:"Insert-fr-style",callback:({mutations:e})=>e.forEach(e=>{(e=>{for(const t of e)if("style"===$(t)&&(t.id===Fe.id.rndStyle||t.hasAttribute(Fe.const.cssAttrName))&&!t.dataset.frRemoved)return jt({shouldNotify:!1})&&he(`%c[MO]${Te}[REINSERT]: style#${t.id}`,vt("#a52a2a"))})(e.removedNodes)}),config:{childList:!0}}).then(jt)}function hn(){rt&&"Userscripts"!==te||function(){if(Se)return e.top.addEventListener("message",e=>{if("𝐫𝐞𝐪𝐮𝐞𝐬𝐭"!==e.data?.fontRenderX?.command)return;const{condition:t,data:n=Fe.var.topStyle??Bo}=e.data.fontRenderX;"Loaded"===t&&Fe.array.iframe.add(e.source),e.source.postMessage({fontRenderX:{command:"𝐬𝐞𝐧𝐝",data:n,condition:t}},"*")});if(k(location.href))return;const t=()=>{e.top.postMessage({fontRenderX:{command:"𝐫𝐞𝐪𝐮𝐞𝐬𝐭",condition:"Loaded"}},"*")};"complete"!==document.readyState?e.addEventListener("DOMContentLoaded",t):t(),e.addEventListener("message",e=>{if(~Fe.var.domainIndex||"𝐬𝐞𝐧𝐝"!==e.data?.fontRenderX?.command)return;const t=document.documentElement.getBoundingClientRect();if(t.width<4&&t.height<4)return;const{data:n,condition:o}=e.data.fontRenderX,{css:s,id:a,style:i}=de(n,document.head);i!==s&&V({target:document.head,id:a,cssText:s,overwrite:!0})&&ge(`[ASYNCFRAMES][ACT:Message|${o}]`)})}();const t=({type:e,target:t,addedNodes:n,attributeName:o})=>{if("childList"!==e&&"attributes"!==e)return;const s=X(n).filter(e=>"iframe"===$(e));(s.length||o&&"iframe"===$(t)&&(t.src||t.srcdoc))&&Xe({condition:e,nodeArray:s.length?s:[t]})};Se&&nt.startObserver({name:"Observe-iframes-in-body",callback:({mutations:e})=>"complete"===document.readyState&&e.forEach(t),config:{childList:!0,subtree:!0,attributeFilter:["src","srcdoc","style"]}})}const{code:bn,callback:gn}=(()=>{const e=fe?"重新安装正版脚本 🔴":"Reinstall the genuine script 🔴";return{callback:t=>ce(`￰🔴 ${e}`,()=>{ie(t)})&&a("error",`${e} ${Fe.var.scriptName} ${t}`),code:v("JUU4JUFBJUIxSlZpWSVFNyU5MCU4OSVFNiU5RiU5MyVFNSVBRCVCQSVFOCU4MiVCQXAyTyVFNiU5MyU5MzAlRTglODUlOTF0JUU1JUIyJTgwJUU1JUFFJTlBJUU4JTg2JUJBZQ==")}})(),$n=new Ft(bn);if(!G||!St()?.inspect?.())return Se&&gn(Fe.url.installURI);const xn=new yt,vn=await Promise.all([Me(),(async()=>{const e="Arial,Helvetica,Helvetica Neue,Verdana,Georgia,Tahoma,Noto Sans,Open Sans,Segoe UI,Roboto,RobotoDraft,Ubuntu,SimSun,NSimSun,SimHei,FangSong,KaiTi,MingLiU,PMingLiU,PingFangSC-Regular,PingFangSC-Medium,PingFangSC-Semibold,PingFangHK-Regular,PingFangHK-Medium,Microsoft YaHei,SF Pro SC,HanHei SC,{宋体},{楷体},{仿宋},{黑体},{微软雅黑},{微軟正黑體}".split(",").sort();try{const t=await oe(je),n=t?o.parse(v(t)):e;if(Array.isArray(n)&&n.length>0)return n}catch(e){be(`${e.name} in FontOverrideDef.JSON.parse:`,e.message)}return ue(je,e),e})(),g(),D(),A(),(async()=>{try{const e=await oe(_e),t=e?o.parse(v(e)):Q();return{fontFeature:Le(t.feature),fontVariant:Le(t.variant)}}catch(e){return e&&{fontFeature:null,fontVariant:null}}})()]),[wn,yn,kn,{exSitesIndex:Sn},{monoSiteRules:Tn,monoFontList:Fn,monoFeature:En},{fontFeature:Cn,fontVariant:Ln}]=vn,{maxPersonalSites:In,isBackupFunction:Mn,isPreview:Rn,isFontsize:Nn,isHotkey:On,isFixViewport:zn,isCloseTip:An,isCustomMono:Dn,rebuild:Bn,curVersion:Pn,globalDisable:_n}=kn,Vn=await(async(e,n)=>{let s,a,i,r;const c={...mt,isEditorBlock:(l=gt.editorialSiteList,Y(l.split("|")).SomeX(e=>ve.endsWith(e)))};var l;try{const[l,d,p]=await Promise.all([Be,De,Oe].map(e=>oe(e)));l?(a=Y(o.parse(v(l))),i=pe(a),t.Object.assign(Fe.var,{domainCount:a.length,domainIndex:i}),s=~i?{...c,...a[i]}:null):ue(Be,[]),d?r={...c,...o.parse(v(d))}:ue(De,mt);const f=s||r||c,u={fontSelect:Le(f.fontSelect),fontFace:Boolean(f.fontFace),fontSmooth:Boolean(f.fontSmooth),fontSize:e&&!f.isEditorBlock?Number(f.fontSize):c.fontSize,fixViewport:e&&n&&!f.isEditorBlock&&Boolean(f.fixViewport),fontStroke:Number(f.fontStroke)||0,fixStroke:Boolean(lt&&f.fontStroke&&f.fixStroke),lazyload:Boolean(f.lazyload&&f.fixStroke),fontShadow:Number(f.fontShadow)||0,fixShadow:Boolean(dt&&f.fixStroke&&f.fontShadow&&f.fixShadow),renderCanvas:!rt&&f.fontFace&&Boolean(f.renderCanvas),shadowColor:Le(f.shadowColor)||c.shadowColor,fontCSS:Le(f.fontCSS)||c.fontCSS,fontEx:Le(f.fontEx)||"",isEditorBlock:f.isEditorBlock};return{o:await Ne(p,t.Object.assign({},u)),...u}}catch(e){return Fe.var.structureError=!0,be(`${e.name} in FontData.JSON.Parsing:`,e.message),c}})(Nn,zn),Un=fe?"网站默认字体":"Website Font",Hn=`${Cn?`--fr-font-feature:${Cn};`:""}${Ln?`--fr-font-variant:${Ln};`:""}`,jn=Vn.o.fontSelect?.replace(/["']/g,"").split(",")??[],Gn=jn[1]??jn[0]??"",[Kn,Wn]=[Boolean(Vn.o.fontFace),Boolean(Vn.o.fontSmooth)],Xn=Kn?"font-family:var(--fr-font-family),var(--fr-font-basefont),var(--fr-font-emoji);":"",Yn=Kn&&Gn?await _t(jn,Gn,yn):"",Jn=Ie(!~Sn&&Nn,parseFloat(Vn.o.fontSize)),Zn=1!==Number(Jn)?Vt(Jn):"",qn=`font-feature-settings:var(--fr-font-feature,unset);font-variant:var(--fr-font-variant,unset);text-rendering:var(--fr-render-text,unset);shape-rendering:var(--fr-render-shape,unset);image-rendering:var(--fr-render-image,unset);font-optical-sizing:auto;font-kerning:auto;${st&&ct?"-moz-osx-font-smoothing:grayscale;":""}${!it&&ct?"-webkit-font-smoothing:antialiased;":""}`,Qn=Wn?qn:"",[eo,to]=[parseFloat(Vn.o.fontStroke),parseFloat(Vn.o.fontShadow)],no=eo>0&&eo<=1?"-webkit-text-stroke:var(--fr-font-stroke);":"",oo=`${no?eo:0}px currentcolor`,so=String(Vn.o.shadowColor)||mt.shadowColor,ao=e=>/^(?:#F{8}|currentcolor)$/i.test(e)?"currentcolor":e.toUpperCase(),io=e=>/^currentcolor$/i.test(e)?"#FFFFFFFF":e,ro=to>0&&to<=4?"text-shadow:var(--fr-font-shadow);":"",co=Ut(to,so),lo=`${ro?"text-shadow:none!important;":""}${no?"-webkit-text-stroke:var(--fr-no-stroke, 0px transparent)!important;":""}`,[po,fo]=[String(Vn.o.fontCSS),String(Vn.o.fontEx)],uo=no?st?`:is(:not(${fo}))::-moz-selection{color:currentcolor!important;background:#1ebee34a!important;-webkit-text-fill-color:currentcolor!important;${lo}}`:`:is(:not(${fo}))::selection{color:#fff!important;background:#3367d1!important;-webkit-text-fill-color:#fff!important;${lo}}`:"",mo=fo&&(ro||no)?`${wn}:is(${fo}){${lo}}`:"",[ho,bo]=[!1,!0].map(e=>Ht(fo,Kn,Dn,e)),go=dt&&Vn.o.fixShadow?"text-shadow:var(--fr-fix-shadow)!important;":"",$o=`[${Fe.const.boldAttrName}],.${Fe.const.boldAttrName}`,xo=e=>`${$o}{font-synthesis:weight style!important;-webkit-text-stroke:var(--fr-fix-stroke)!important;${e??""}}`,vo=lt&&Vn.o.fixStroke?xo(go):"",wo=!(Kn||Wn||ro||no||1!==Number(Jn)),yo=e=>"true"===e||!e&&/;?\s*\w+_last(?:visi|ac)t=\d{10}(?:;|%)/.test(document.cookie)&&!Z?.setItem(We,!0),ko=yo(Z?.getItem(We))?":not(.nvhm,[class^='ico_'],[class^='comiis_'],[class^='notice_'],[class^='prompt_'])":"",So=`${Yn}${Zn}${Xn?`${wn}::placeholder,${wn}:is(${po}${ko}){${Xn}}`:""}${wn}:is(${po}){${ro}${no}${Qn}}${uo}${mo}${ho}${vo}`,To=`0 0 ${to}px ${so.toLowerCase().slice(0,7).concat("2b")}`,Fo=st&Kn&&yo(Z?.getItem(We))?Fe.var.style.firefox:"",[Eo,Co,Lo]=[Boolean(Dn),Boolean(Vn.o.isEditorBlock),CSS.supports("(color:color-mix(in srgb, tan, red))")],Io=Eo&&Lo?"--fr-mono-shadowcolor:color-mix(in display-p3, #4545461b 70%, currentcolor 20%);":"",Mo=Eo?`--fr-mono-font:${Fn||gt.monospacedFont};`:"",Ro=Eo?"--fr-mono-shadow:0 0 0 var(--fr-mono-shadowcolor, currentcolor);":"",No=Eo?`--fr-mono-feature:${En||gt.monospacedFeature};`:"",Oo=Eo?"--fr-mono-fallback:ui-monospace,'Courier New','Liberation Mono',Courier;":"",zo=Vn.o.renderCanvas?"--fr-render-shape:geometricPrecision;":"",Ao=`:root{--fr-font-basefont:${gt.fontBase};--fr-font-emoji:${gt.fontEmoji};${Hn}--fr-font-fontscale:${Jn};--fr-font-family:${Vn.o.fontSelect};--fr-font-shadow:${co};--fr-font-stroke:${oo};--fr-no-stroke:0px transparent;--fr-fix-stroke:var(--fr-no-stroke);--fr-fix-shadow:${To};--fr-render-text:optimizeLegibility;${zo}--fr-render-image:auto;${Mo}${Oo}${Io}${Ro}${No}}`,Do=!~Sn&&!wo,Bo='@charset "UTF-8";'+(Do?`${Ao}${Fo}${So}`:""),Po=Co?`disabled title="${fe?"已在特定/图文/编辑类网站禁用（请使用浏览器缩放替代）":"Disabled in specific/graphic/editorial website (Please use browser zoom instead)"}" `:"",_o=fe?'<label title="开启 Canvas 画布文本的字体渲染。如开启后 Canvas 文本渲染异常请关闭它。">渲染画布</label>':'<label title="Enable Canvas font rendering. Please turn it off if occurs canvas render error.">Canvas</label>',[Vo,Uo]=[Kn?"":`class="${Fe.const.seed}.vis:hidden"`,Vn.renderCanvas?"checked":""],Ho=`<span id="${Fe.id.rdCanvas}" ${Vo}>(${_o}<input type="checkbox" id="${Fe.id.renderCanvas}" ${Uo}/>)</span>`,jo=fe?'<label title="修正字体比例缩放后视口单位出现数据偏移的问题。如开启后页面排版出现异常请关闭它。">视口修正</label>':'<label title="Fixed viewport unit offset after font scaling. Please turn it off if occurs layout error.">Fix vpu</label>',Go=`<span id="${Fe.id.fviewport}">(${jo}<input type="checkbox" id="${Fe.id.fixViewport}" ${Vn.fixViewport?"checked":""}/>)</span>`,Ko=fe?`<span class="${Fe.const.seed}.mg:0.pd:0" title="双击编辑站点缩放修正设置数据" id="${Fe.const.seed}.fontscale.def">字体比例缩放</span>`:`<span class="${Fe.const.seed}.mg:0.pd:0" title="Double-click to edit the site scaling correction setting" id="${Fe.const.seed}.fontscale.def">Font Scaling</span>`,Wo=`<li id="${Fe.id.fontSize}">\n            <div class="${Fe.class.flex}">\n              ${Ko}${zn?Go:""}\n              <input id="${Fe.id.fontScale}" type="text" data-fr-type="number" maxlength="5" ${Po}/>\n            </div>\n            <div class="${Fe.class.range}" data-ticks-position="top" ${Po}></div>\n          </li>`,Xo=fe?'<label title="修正 Chromium 96.0 以上版本对粗体样式附加描边的渲染错误。默认开启，如出现严重卡顿请关闭之。">粗体修正</label>':'<label title="Fixed rendering issues of Chromium above 96.0 on bold with text-stroke. Default by ON, please turn it off if lagging.">Fix bold</label>',Yo=fe?"修正 Chromium 123.0 以上版本对粗体样式附加阴影效果的渲染错误，默认关闭。":"Fixed rendering issues of Chromium above 123.0 on bold with text-shadow.",Jo=fe?"延迟加载修正程序，默认关闭，请注意：仅在出现样式异常或修正冲突时开启。":"Lazy loading the fixer, Only turn it on when style loading error or conflict.",Zo=`<div id="${Fe.id.fshadow}.shadow.label" class="${Fe.const.seed}.fix.label">\n            <span>${fe?"附加阴影样式修正：":"Add Shadow Fix: "}</span>\n            <input type="checkbox" class="${Fe.class.checkbox}" id="${Fe.id.fixShadow}" ${Vn.fixShadow?"checked":""} ${Vn.fixStroke?"":"disabled"} />\n            <label for="${Fe.id.fixShadow}" ${Vn.fixStroke?"":`class="${Fe.const.seed}.ft:gs1"`}></label>\n          </div>\n          <div id="${Fe.id.fshadow}.shadow.text" class="${Fe.const.seed}.fix.text">${Yo}</div>`,qo=`<div class="${Fe.const.seed}.fix.label">\n            <span>${fe?"使用延迟加载修正：":"Use Lazyload Fix:"}</span>\n            <input type="checkbox" class="${Fe.class.checkbox}" id="${Fe.id.lazyload}" ${Vn.lazyload?"checked":""} ${Vn.fixStroke?"":"disabled"} />\n            <label for="${Fe.id.lazyload}" ${Vn.fixStroke?"":`class="${Fe.const.seed}.ft:gs1"`}></label>\n          </div>\n          <div class="${Fe.const.seed}.fix.text">${Jo}</div>`,Qo=`<span id="${Fe.id.fstroke}">\n            (${Xo}<input type="checkbox" id="${Fe.id.fixStroke}" ${Vn.fixStroke?"checked":""} />)\n            <div id="${Fe.id.fshadow}">${dt?Zo:""}${qo}</div>\n          </span>`,es=fe?`<span title="双击编辑自定义字体重写数据" id="${Fe.const.seed}.fontoverride.def">字体重写</span>（默认：开）`:`<span title="Double-click to edit custom font rewrite data"  id="${Fe.const.seed}.fontoverride.def">Font Rewrite (ON*)</span>`,ts=e.FRColorPicker?"RGB, RGBA, HEX, HEXA":"HEXA (#AABBCCDD)",ns=fe?`<p>阴影颜色可通过点击激活拾色器选择，也可自行填写，格式支持: <em class="${Fe.const.seed}.clr:cecece">${ts}.</em> 纯白色的所有格式表示自身颜色 <em class="${Fe.const.seed}.clr:cecece">currentcolor.</em></p><p><em class="${Fe.const.seed}.clr:8b0000">注意：输入数值会自动转化为HEXA格式，但数值保持一致性。错误格式会被替换为刚刚正确显示的数值。</em></p>`:`<p>Shadow colors can be selected by clicking color-block to activate the colorpicker, or custom filled in format that supports: <em class="${Fe.const.seed}.clr:cecece">${ts}.</em> "Pure white" in all formats resolves to its own color <em class="${Fe.const.seed}.clr:cecece">currentcolor</em></p><p><em class="${Fe.const.seed}.clr:8b0000">Note: The value is converted to HEXA. The incorrect value is replaced with the final correct value.</em></p>`,os=fe?`<p>默认为排除大多数网站常用的特殊CSS样式后需要渲染的页面元素。填写格式：<em class="${Fe.const.seed}.clr:cecece">:not(.fa)</em> 或 <em class="${Fe.const.seed}.clr:cecece">:not([class*="fa"])</em> 或 <em class="${Fe.const.seed}.clr:cecece">,div.className</em></p><p><em class="${Fe.const.seed}.clr:8b0000">该选项为重要参数，默认只读，双击解锁。请尽量不要修改，避免造成样式失效。若失效请重置。</em></p><p>如果文字或图标变为乱码或方块，请双击 <span class="${Fe.class.emoji}">🔔</span> 打开样式修复帮助页面。</p>`:`<p>Defaults to page elements that need to be rendered after excluding special CSS styles used on websites. Fill format: <em class="${Fe.const.seed}.clr:cecece">:not(.fa)</em> or <em class="${Fe.const.seed}.clr:cecece">:not([class*="fa"])</em></p><p><em class="${Fe.const.seed}.clr:8b0000">This option is an important parameter, read-only by default, double-click to unlock.</em></p><p>If part of text becomes garbled, Please double-click <span class="${Fe.class.emoji}">🔔</span> to open the style-fix help page.</p>`,ss=fe?`<p>该选项排除渲染字体描边、字体阴影效果，请将排除渲染的HTML标签用逗号分隔。具体规则请点击顶部旋转的帮助文件图标。</p><p><em class="${Fe.const.seed}.clr:8b0000">编辑该选项需要CSS知识，如需要排除复杂的样式或标签可通过这里进行添加，样式若混乱请重置。</em></p><p>双击 <span class="${Fe.class.emoji}">🔔</span> 可打开自定义等宽字体添加工具，设置您需要的等宽字体。</p><p><em class="${Fe.const.seed}.clr:8b0000">请注意：使用自定义等宽字体时，请谨慎删除该文本域中的重要代码：<br/>『 <em class="${Fe.const.seed}.clr:cecece">pre,pre *,code,code *</em> 』</em></p>`:`<p>This option excludes the rendering of font stroke, font shadow effects, please separate the excluded HTML tags with commas.</p><p><em class="${Fe.const.seed}.clr:8b0000">Knowledge of CSS is required to edit, If you need to exclude complex styles or tags you can add them here.</em></p><p>Double-click <span class="${Fe.class.emoji}">🔔</span> to open the Custom monospace Font Tool and set the isometric font you need.</p><p><em class="${Fe.const.seed}.clr:8b0000">Note: if using custom monospace fonts, Please be careful to delete important codes in this textarea:『 <em class="${Fe.const.seed}.clr:cecece">pre,pre *,code,code *</em> 』</em></p>`,as=fe?`双击查看更新历史：${Fe.var.scriptName}`:`Double-click to view the update history of ${Fe.var.scriptName} `,is=`<fr-container id="${Fe.id.container}">\n          <fr-scrollbar class="${Fe.const.seed}.dialog.scrollbar">\n            <fieldset id="${Fe.id.field}">\n              <legend class="${Fe.class.title}">\n                <span id="${Fe.const.seed}.scriptname" title='${as}v${Pn}' class="${Fe.const.seed}.clr:8b0000">${Fe.var.scriptName}</span>\n                <span class="${Fe.class.guide}">\n                  <span class="${Fe.class.rotation}" title="${fe?"单击查看脚本使用帮助文档":"Click to Open Usage Document"}" height="24" width="24">\n                    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="48px" height="48px" viewBox="0,0,255.99431,255.99431"><g transform="scale(0.5,0.5)"><path d="M504.1,256c0,-137 -111.1,-248.1 -248.1,-248.1c-137,0 -248.1,111.1 -248.1,248.1c0,137 111.1,248.1 248.1,248.1c137,0 248.1,-111.1 248.1,-248.1z" fill="#67a5df"/><path d="M146.1,181.5c0,-13.9 4.5,-28 13.4,-42.3c8.9,-14.3 22,-26.1 39.1,-35.5c17.1,-9.4 37.1,-14.1 60,-14.1c21.2,0 40,3.9 56.2,11.8c16.3,7.8 28.8,18.5 37.7,32c8.9,13.5 13.3,28.1 13.3,43.9c0,12.5 -2.5,23.4 -7.6,32.7c-5.1,9.4 -11.1,17.5 -18,24.3c-7,6.8 -19.4,18.3 -37.5,34.4c-5,4.5 -9,8.5 -12,12c-3,3.4 -5.2,6.6 -6.7,9.4c-1.5,2.9 -2.6,5.7 -3.4,8.6c-0.8,2.9 -2,7.9 -3.6,15.1c-2.8,15.2 -11.5,22.9 -26.1,22.9c-7.6,0 -14,-2.5 -19.2,-7.5c-5.2,-5 -7.8,-12.4 -7.8,-22.2c0,-12.3 1.9,-23 5.7,-32c3.8,-9 8.9,-16.9 15.2,-23.7c6.3,-6.8 14.8,-14.9 25.5,-24.3c9.4,-8.2 16.1,-14.4 20.3,-18.6c4.2,-4.2 7.7,-8.8 10.5,-14c2.9,-5.1 4.3,-10.7 4.3,-16.7c0,-11.7 -4.4,-21.6 -13.1,-29.7c-8.7,-8.1 -20,-12.1 -33.7,-12.1c-16.1,0 -28,4.1 -35.6,12.2c-7.6,8.1 -14.1,20.1 -19.3,35.9c-5,16.6 -14.4,24.8 -28.3,24.8c-8.2,0 -15.1,-2.9 -20.8,-8.7c-5.6,-5.6 -8.5,-11.8 -8.5,-18.6zM253.4,422.3c-8.9,0 -16.7,-2.9 -23.4,-8.7c-6.7,-5.8 -10,-13.9 -10,-24.3c0,-9.2 3.2,-17 9.7,-23.3c6.4,-6.3 14.4,-9.4 23.7,-9.4c9.2,0 17,3.2 23.3,9.4c6.3,6.3 9.4,14.1 9.4,23.3c0,10.3 -3.3,18.3 -9.9,24.2c-6.6,5.9 -14.2,8.8 -22.8,8.8z" fill="#fff"/></g></svg>\n                  </span>\n                </span>\n              </legend>\n              <ul class="${Fe.class.main}">\n                <li id="${Fe.id.fontList}">\n                  <div class="${Fe.class.fontList}"></div>\n                </li>\n                <li id="${Fe.id.fontFace}">\n                  <div class="${Fe.const.seed}.mg:0.pd:0">\n                    ${es}\n                  </div>\n                  <div class="${Fe.const.seed}.mg:0.pd:0 ${Fe.const.seed}.checkbox">\n                    <input type="checkbox" id="${Fe.id.fface}" class="${Fe.class.checkbox}" ${Vn.fontFace?"checked":""} />\n                    <label for="${Fe.id.fface}"></label>\n                  </div>\n                </li>\n                <li id="${Fe.id.fontSmooth}">\n                  <div class="${Fe.const.seed}.mg:0.pd:0">${fe?"字体平滑（默认：开）":"Font Smooth (ON*)"}</div>\n                  <div class="${Fe.const.seed}.mg:0.pd:0 ${Fe.const.seed}.checkbox">\n                    <input type="checkbox" id="${Fe.id.smooth}" class="${Fe.class.checkbox}" ${Vn.fontSmooth?"checked":""} />\n                    <label for="${Fe.id.smooth}"></label>\n                  </div>\n                </li>\n                ${Nn?Wo:""}\n                <li id="${Fe.id.fontStroke}">\n                  <div class="${Fe.class.flex}">\n                    <span class="${Fe.const.seed}.mg:0.pd:0">${fe?"字体描边尺寸":"Font Stroke"}</span>\n                    ${lt?Qo:""}\n                    <input id="${Fe.id.strokeSize}" type="text" data-fr-type="number" maxlength="5" />\n                  </div>\n                  <div class="${Fe.class.range}" data-ticks-position="top"></div>\n                </li>\n                <li id="${Fe.id.fontShadow}">\n                  <div class="${Fe.class.flex}">\n                    <span class="${Fe.const.seed}.mg:0.pd:0">${fe?"字体阴影尺寸":"Font Shadow"}</span>\n                    ${rt?"":Ho}\n                    <input id="${Fe.id.shadowSize}" type="text" data-fr-type="number" maxlength="4" />\n                  </div>\n                  <div class="${Fe.class.range}" data-ticks-position="top"></div>\n                </li>\n                <li id="${Fe.id.shadowColor}">\n                  <div class="${Fe.const.seed}.mg:0.pd:0">\n                    <span class="${Fe.const.seed}.mg:0-3p.pd:0">${fe?"阴影颜色":"SDColor"}</span>\n                    <span class="${Fe.class.tooltip}">\n                      <span class="${Fe.class.emoji}" title="${fe?"按住查看帮助":"Hold down for help"}">🔔</span>\n                      <span class="${Fe.class.tooltip} ${Fe.class.ps3} ${Fe.const.seed}.mgl:-5p">\n                        ${ns}\n                      </span>\n                    </span>\n                  </div>\n                  <div class="${Fe.class.frColorPicker}">\n                    <input title="${fe?"输入颜色代码":"Input color code"}" type="text" id="${Fe.id.color}" class="${Fe.const.seed}.input.color" />\n                  </div>\n                </li>\n                <li id="${Fe.id.fontCss}">\n                  <div class="${Fe.const.seed}.mgb:6p">${fe?"需要渲染的网页元素":"Rendered Elements"}\n                    <span id="${Fe.id.render}" class="${Fe.class.tooltip}">\n                      <span class="${Fe.class.emoji}" title="${fe?"按住查看帮助":"Hold down for help"}">🔔</span>\n                      <span class="${Fe.class.tooltip} ${Fe.class.ps4}">\n                      ${os}\n                      </span>\n                    </span>\n                    <div id="${Fe.id.cSwitch}" class="${Fe.class.switcher}" fr-button-switch="ON">∧</div>\n                  </div>\n                  <textarea placeholder="${fe?"请谨慎修改默认值，避免渲染失效。":"Modify defaults carefully to avoid font rendering failures."}"\n                    class="${Fe.class.readonly}" title="${fe?"重要参数，默认只读，双击解锁。":"Read-only by default, Double-click to unlock."}"\n                    id="${Fe.id.cssinclued}" readonly="readonly">${Vn.fontCSS}</textarea>\n                </li>\n                <li id="${Fe.id.fontEx}">\n                  <div class="${Fe.const.seed}.mgb:6p">${fe?"排除渲染的HTML标签":"Excluded HTML Labels"}\n                    <span id="${Fe.id.mono}" class="${Fe.class.tooltip}">\n                      <span class="${Fe.class.emoji}" title="${fe?"按住查看帮助":"Hold down for help"}">🔔</span>\n                      <span class="${Fe.class.tooltip} ${Fe.class.ps5}">\n                        ${ss}\n                      </span>\n                    </span>\n                    <div id="${Fe.id.eSwitch}" class="${Fe.class.switcher}" fr-button-switch="ON">∧</div>\n                  </div>\n                  <textarea placeholder="${fe?"排除渲染描边与阴影的HTML标签，如:":"Exclude HTML tags for render strokes and shadows, such as:"} input, em, div[id$='test']"\n                    id="${Fe.id.cssexclude}">${Vn.fontEx}</textarea>\n                </li>\n                <li id="${Fe.id.submit}">\n                  <button class="${Fe.class.reset}">${fe?"重置":"Reset"}</button>\n                  <button class="${Fe.class.cancel}">${fe?"取消":"Close"}</button>\n                  <button id="${Fe.id.backup}" title="${fe?"备份与恢复":"Backup & Restore"}">${fe?"备份":"ℬ"}</button>\n                  <button class="${Fe.class.submit}">${fe?"保存":"Save"}</button>\n                </li>\n              </ul>\n            </fieldset>\n          </fr-scrollbar>\n        </fr-container>`,rs="audio,base,br,canvas,embed,g,head,hr,html,iframe,img,link,math,meta,noscript,object,path,picture,script,style,svg,title,video",[cs,ls]=[{attributeOldValue:!0,childList:!0,subtree:!0},new Set(rs.split(","))],[ds,ps,fs]=[new Set,new WeakMap,Math.min(navigator.hardwareConcurrency||4,20)],[us,ms]=[Z,q].map(e=>Boolean(e?.getItem(Fe.const.const.conflict))),[hs,bs]=[{flag:us,counter:new Map,threshold:Math.min(20*fs,200),interval:100},/watermark/i],[gs,$s]=[(ws=Fe.const.boldAttrName,ys=!us,{add:e=>{hs.flag?(e=>{ys&&e.removeAttribute(ws),e.classList.add(ws)})(e):e.setAttribute(ws,"")},del:e=>{hs.flag?e.classList.remove(ws):e.removeAttribute(ws)}}),M({fn:tn,delay:50})],xs=()=>lt&&Do&&Fe.var.fixStroke&&!q?.getItem(Fe.const.const.conflict),vs=(t,...n)=>{Vn.o.lazyload?e[Fe.const.raf](t.bind(null,...n)):t(...n)};var ws,ys;!async function(n,i){var r,c;mn(un(n)),await async function(){function t(t){const{navigationType:n,type:o}=t??e.event??Q();$s(n??o,vo,document,!0)}function n(e){throw a("warn","[Warning]","Callback infinite loop occurred, suspending observer.",{"conflict.content":e??"SessionFlag"}),new Error("Found callback conflict! "+(Vn.lazyload?"Fix bold is disabled.":"Try a workaround to enable 'Use Lazyload Fix'."))}Fe.var.fixStroke=Vn.o.fixStroke,Fe.var.obsFontBold=await(new Ce).startObserver({name:"Correct-bold",callback:function({mutations:o,observer:s}){try{if(ms)return n();const t=new Set;s.disconnect(),o.forEach(o=>{if("childList"===o.type)return function({target:t,addedNodes:o,removedNodes:s},i){o.forEach(e=>{pn(e,[Node.ELEMENT_NODE])&&i.add(e)}),s.forEach(t=>(function(e,t){t instanceof MouseEvent&&"mousemove"===t.type||t instanceof MessageEvent||pn(e,[Node.ELEMENT_NODE])&&cn(e,!0)&&function(e,t){const o=hs.counter.get(e);if(!o)return hs.counter.set(e,{count:1,lastTime:t});if(t-o.lastTime>=hs.interval)!function(e,t){const{counter:n,interval:o}=e;n.forEach((e,s)=>t-e.lastTime>=o&&n.delete(s))}(hs,t);else if(++o.count>hs.threshold)return function(e){if(hs.flag)return hs.counter.clear(),q?.setItem(Fe.const.const.conflict,12388),n(e);a("warn","[Warning]","Potential infinite loop detected, switching to <class attribute> mode."),Z?.setItem(Fe.const.const.conflict,12339),hs.flag=!0}(e);o.lastTime=t}(e.outerHTML,performance.now())}(t,e.event),void function(e,t){pn(e)&&((t=e.shadowRoot)&&ds.delete(t),fn(e)&&t&&["mouseenter","mouseleave"].forEach(e=>{t.removeEventListener(e,dn,!0)}))}(t))),pn(t)&&i.add(t)}(o,t);xs()&&"attributes"===o.type&&function({target:e,attributeName:t,oldValue:n},o){const s=function({target:e,attributeName:t,oldValue:n,newValue:o=""}){if("style"===t){if(n=n.replace(/\s/g,""),(o=e.style?.cssText?.replace(/\s/g,"")??"")!==n&&function(e,t){const[n,o]=[h(t.split(";")),h(e.split(";"))],s=function(e,t){const[n,o]=[new Set(e),new Set(t)];return[...e.filter(e=>!o.has(e)),...t.filter(e=>!n.has(e))].join()}(n,o);return!/(?:font:|font-weight:)/i.test(s)}(o,n))return}else if("class"===t){if((o=e.className?.baseVal??e.className??"")!==n&&function(e,t,n){return b(t).includes(n)!==b(e).includes(n)}(o,n,Fe.const.boldAttrName))return}else{if(t===Fe.const.boldAttrName)return;o=e.getAttribute(t)??""}return{oldValue:n,newValue:o}}({target:e,attributeName:t,oldValue:n??""});s&&s.newValue!==s.oldValue&&fn(e)&&o.add(e)}(o,t)}),function(e,t){const n={pendingNodeSet:new Set,pendingShadowSet:new Set,size:e.size},o=Math.min(200*fs,n.size);n.size&&function(e,t,n,{pendingNodeSet:o,pendingShadowSet:s}){rn(e.values(),t,e=>{!function(e,t,n){const{elementSet:o,shadowSet:s}=d(`:not(${rs})`,e,e=>!bs.test(b(e.className)));o.forEach(e=>t.add(e)),s.forEach(e=>n.add(e))}(e,o,s)},()=>{xs()&&o.size&&nn({elementSet:o,recheck:"complete"===document.readyState}),s.forEach(e=>on(e,vo,n))??s.clear()})}(e,o,t,n)}(t,s),ds.forEach(e=>{s.observe(e,{attributeOldValue:!0,childList:!0,subtree:!0})})}catch(n){n.message.includes("callback conflict")&&function(n){n.disconnect(),e.navigation?e.navigation.removeEventListener("navigate",t):["pushState","replaceState"].forEach(n=>e.removeEventListener(n,t)),ds.forEach(e=>["mouseenter","mouseleave"].forEach(t=>e.removeEventListener(t,dn,!0))),delete Fe.var.obsFontBold&&ds.clear()}(s),be(`${n.name} in FixBoldProcess:`,n.message)}},config:cs}).then(e=>e.observer),ln(document,Fe.var.obsFontBold),xs()&&(xn.addFinalFn(tn,null,vo,document,!0),e.navigation?e.navigation.addEventListener("navigate",t):["pushState","replaceState"].forEach(n=>e.addEventListener(n,t)),me(`CorrectBold.Active${Te}:`,{eventType:"init"}))}(),Se&&(await async function(e){const n=await ae();if(!0===Fe.var.structureError||void 0!==Bn&&function(e,t){return e&&e.date===$n.decrypt(e.flag)?!t||t!==e.flag||(e.date!==$n.decrypt(t)?Fe.var.structureError=!0:void 0):Fe.var.structureError=!0}(e,Bn)){n.forEach(e=>(e!==ze||!0===Fe.var.structureError)&&se(e));const o=fe?"%c数据已重建\r\n%c脚本已开启更新后数据重建选项，所有数据已初始化，您可手动还原本地备份数据。如您的备份较为久远，强烈建议您重新设置参数，记得及时重新备份哟！":"%cData Reconstruct\r\n%cThe script turns on the option to rebuild data after upgrade, all data is initialized and you can restore the local backup manually. If your backups are older, it is recommended that you reconfigure the parameters, and remember to re-backup in time!",s=fe?"%c数据重置警告\r\n%c因检测到数据解析异常、或代码/存储数据被非法篡改，数据已全部初始化，请手动还原您本地备份数据！若反复提示此问题，请尝试重新安装脚本！":"%cData Reset Warning\r\n%cData has been initialized due to detect data parsing anomaly, or illegally tamper with code/data, please restore your local backup manually! If this appears repeatedly, please reinstall the script!";a(...!0!==Fe.var.structureError?["warn",`${o} (%s)`]:["error",`${s} (%s)`],"font-weight:700","font-weight:400",L()&&$n.encrypt(e.date)),ue(ze,t.Object.assign(kn,{...ht,rebuild:e.flag,curVersion:void 0,isCustomMono:!1,globalDisable:!1})),Fe.var.versionStatus=null,me("%c Reconstruct configuration data: true ",`background:${Fe.var.structureError?"#ff0000":"#4b0082"};color:#fffafa;font-style:italic`)}else if(void 0===Bn)kn.rebuild=e.flag,ue(ze,kn),me("%c"+(Pn?"configuration data has been restored!":"configuration data is null, building now!"),`color:${Pn?"#1e90ff":"#d8aa01"};font-style:italic`);else{const e=Pn===Fe.var.curVersion;me("%cConfigure Data Status: "+(e?"OK":"Updated"),`color:${e?"#008080":"#dc143c"};font-style:italic`)}return n.length}(G)&&(r=Fe.var.versionStatus)!==Fe.var.curVersion&&(kn.curVersion=Fe.var.curVersion,ue(ze,kn),Et.remove(Ke),Re().then(e=>e&&ue(Oe,e)),me(`Update.Version: %c${Fe.var.curVersion}`,"color:#dc143c;font-weight:600"),An&&null!==r||Lt(Fe.url.guideURI,r)),await Gt(Vn.fontFace,Gn,Un),(()=>{const e=fe?"全局字体渲染已禁用！如需开启请重新配置全局数据。":"Global font rendering is disabled! To enable it please reconfigure the global data.",t=fe?"%c%s\r\n%cINTRO.URL: %s\r\n%c▞ 脚本版本：%cV%s%c%s%c\r\n▞ 个性化设置：%c%s%c/%s（当前设置：%s）\r\n%c▞ 本地备份：%s　▚ 字体缩放：%s\r\n▞ 渲染预览：%s　▚ 等宽字体：%s\r\n▞ 应用远程渲染规则：%c%s\r\n%c▞ 渲染字体：%s\r\n▞ 字体平滑：%s　▚ 字体重写：%s\r\n▞ 字体描边：%s　▚ 字体阴影：%s":"%c%s\r\n%cINTRO.URL: %s\r\n%c▞ Script Version: %cV%s%c%s%c\r\n▞ Customize Total: %c%s%c/%s (current: %s)\r\n%c▞ Backups: %s　▚ Font Scaling: %s\r\n▞ Preview: %s　▚ Monospaced Font: %s\r\n▞ Apply Remote Rendering Rules：%c%s\r\n%c▞ Rendering Font: %s\r\n▞ Font Smooth: %s　▚ Font Rewrite: %s\r\n▞ Font Stroke: %s　▚ Font Shadow: %s",[n,o,s]=fe?["开","关","站点禁用"]:["ON","OFF","SITE BLOCKED"],i=["color:#dc143c;font:normal 700 16px/150% ui-monospace,monospace",Fe.var.scriptName,"color:#777;font:italic 400 10px/180% ui-monospace,monospace",Fe.url.introURL,"color:#708090;font-size:12px;line-height:180%","color:#708090;font:italic 600 14px/150% Candara,Times",Fe.var.curVersion,"color:#be0d1c;font:italic 400 11px/150% Candara,Times",it?"　(CHEAT-UA)":"","color:#4682b4;font-size:12px;line-height:180%",Fe.var.domainCount>In?"color:#dc143c":"color:#4682b4",Fe.var.domainCount,"color:#4682b4;font-size:12px;line-height:180%",In,~Fe.var.domainIndex?fe?"自定义":"Custom":fe?"全局":"Global","color:#4682b4;font-size:12px;line-height:180%",Mn?n:o,Nn?Co?`${o} (${s})`:`${n} (R ≈ ${Vn.fontSize.toFixed(3)})`:o,Rn?n:o,Dn?n:o,`color:${Fe.var.apply?"#4682b4":"#708090"};font-size:12px;line-height:180%`,fe?Fe.var.apply?"已匹配到站点规则":"未匹配到站点规则":Fe.var.apply?"MATCHED":"NOT MATCHED","color:#008080;font-size:12px;line-height:180%",Kn?Fe.var.reFontFace:fe?`已关闭（采用${Fe.var.reFontFace}）`:`OFF (using ${Fe.var.reFontFace})`,Vn.fontSmooth?n:o,Vn.fontFace?n:o,Vn.fontStroke?n:o,Vn.fontShadow?n:o],r=On&&!it?`(${ct?"Option":"Alt"}+X)`:"",c=fe?"已在排除渲染列表内，若要重新渲染，请在脚本菜单中开启重新渲染。":"is already in the excluded rendering list. To re-render, Please enable in the script menu.";_n&&wo?ne("shown-system-disabled",e,"#be0d1c"):~Sn?ne("shown-system-disabled",`${ke.toUpperCase()} ${c} ${r}`,"#aa56e7"):a("shown-system-info",t,...i)})(),(e=>{const t=C({BLINK:90,GECKO:84,WEBKIT:15.4}),n=`%c${Ze} Browser Compatible: ${t}%c\r\nOnly desktop browsers support full functionality for this script. (Version: Chrome>=90, Edge>=90, Firefox>=84, Opera>=78, Safari>=15.4)`,i=fe?"您的浏览器版本过低，脚本可能无法正常运行！":"Your browser version is too low, the script may not work properly!",r=[`${vt("#dc143c")};text-transform:uppercase`,"color:0;line-height:150%"],c=fe?"%c浏览器 UA 异常警告%c\r\n伪造 UserAgent 信息会造成部分脚本功能失效。如需使用全功能脚本，请恢复浏览器默认的 UserAgent 信息。":"%cBrowser UA Exception%c\r\nModifying UserAgent information will cause some script functions to become invalid. To use the full-featured script, please restore the browser's default UserAgent information.",l=[`${vt("#715100")};text-transform:uppercase`,"color:0;line-height:150%"];(s["cheat-ua"]=e)&&a("warn",c,...l),t||e||a("error",`%c${i}`,"color:#be0d1c;font:italic 700 18px ui-monospace,monospace"),he(`${n}%c\r\n${o.stringify(s)}`,...r,"color:#a9a9a9;font:italic 400 12px/150% ui-monospace,monospace")})(it),c=i,I(1e3,{useCachedSetTimeout:!0})(2e3).then(async e=>{const{status:t,time:n}=await function(e=1e3){if(void 0!==Fe.var.fontReady)return(Fe.var.fontReady=null)??{status:"done",time:NaN};const t=performance.now(),n=I(e,{useCachedSetTimeout:!0}).then(()=>({status:"timeout",time:e})),o=document.fonts.ready.then(()=>({status:"loaded",time:performance.now()-t}));return Fe.var.fontReady=Promise.race([n,o])}(e);me("isFontReady:",{status:t,delay:`${parseInt(n)}`})||c?le(c):me("%cNo Loading_Menu","color:#a9a9a9")}).then(()=>{~Sn?(ce(`￴🍀 ${fe?"重新渲染":"Re-rendering "} ${ke} ${On?"(X)":""}`,Ot)&&me("%cInstalling Include_Site_Menu","color:#808080"),ce(`￵🧡 ${fe?"向作者反馈错误或建议":"Feedback to Author "}${On?"(T)":""}`,()=>{ie(Fe.url.feedback,!1)})&&me("%cInstalling Feed_Back_Menu","color:#808080")):(ce(`￱🌓 ${fe?"字体渲染设置":"Font Rendering Settings "}${On?"(P)":""}`,It)&&me("%cInstalling Font_Set_Menu","color:#808080"),ce(`￲⛔ ${fe?"排除渲染":"Exclude "} ${ke} ${On?"(X)":""}`,Rt)&&me("%cInstalling Exclude_Site_Menu","color:#808080"),ce(`￳💎 ${fe?"高级核心功能设置":"Advanced Core Settings "}${On?"(G)":""}`,Nt)&&me("%cInstalling Parameter_Set_Menu","color:#808080"))}).then(()=>{On?function(){function e(e,t,n){N(n,{preventDefault:!0});const o=performance.now();o-Fe.count.clickTimer>t&&(Fe.count.clickTimer=o)&&e()}document.addEventListener("keydown",t=>{const n=(t.altKey||"Alt"===t.key||"AltRight"===t.code||"AltLeft"===t.code)&&!t.ctrlKey&&!t.shiftKey&&!t.metaKey;"KeyP"===t.code&&n?e(~Sn?Ot:It,1e3,t):"KeyX"===t.code&&n?e(~Sn?Ot:Rt,1e3,t):"KeyG"===t.code&&n?e(~Sn?Ot:Nt,1e3,t):"KeyT"===t.code&&n&&e(()=>{ie(Fe.url.feedback,!1)},1e4,t)})||me("%cInstalling Hotkey_Setting","color:#808080")}():me("%cNo Hotkey_Setting","color:#a9a9a9")})),async function(){if(Nn&&1!==Fe.var.curScale){try{const e=await j(),t=Y(Object.entries(e)).FindX(([e])=>ve.endsWith(e))?.[1];if(!t)throw new Error("No extra correction properties");const{Window:n,Element:o,HTMLElement:s}=t;Fe.array.props={window:h(n),element:h(o),html:h(s)}}catch(e){me(`correctFontScaleOffset${Te}:\r\n%c${e.message} for ${ve}`,"display:block;padding-left:18px;color:#808080")}U({cur:Fe.var.curScale,props:Fe.array.props})}}(),function(e){if(!Do||!Vn.o.renderCanvas||!Vn.o.fontFace)return;const n=/^((?:[a-z-]+\s)+|[0-9]+\s)?(\d*\.?\d+(?:px|em|pt|%|rem)\s)?(.+)$/i,o=`${Vn.o.fontSelect},${gt.fontBase}`;["fillText","strokeText"].forEach(s=>CanvasRenderingContext2D.prototype[s]=function(...a){this.frFontFace||!this.font||this.font.includes(e)||(this.font=(e=>{const t=e?.match(n);return t?`${t[1]??""} ${t[2]??""} ${o}`.trim():e})(this.font),"fillText"===s&&to>0&&!/(?:bold|[6789]00)\s/i.test(this.font)&&(Fe.var.fillText.apply(this,a),t.Object.assign(this,{shadowColor:ao(so),shadowBlur:to,shadowOffsetX:0,shadowOffsetY:0}))),Fe.var[s].apply(this,a)})}(Gn),Do&&xn.addFn(hn),xn.addFinalFn(Xe,{condition:"DOMLoaded"})}(((e,t)=>{const n=r(document.documentElement,"style",{id:"𝐜𝐬𝐩.𝐭𝐞𝐬𝐭",type:"text/css",textContent:"test { color: black }"});return t=n?.sheet?.cssRules.length>0,R(n)&&t})(0,null),(e=>{if(Se&&"() => {}"!==b(le))return ce(`￰🕒 ${e}`,T)})(fe?"正在载入脚本菜单，请稍候…":"Loading menus, please wait..."))}(0,async(e,t)=>{const n=await oe(ze);if(n){try{e=o.parse(v(n))}catch(t){(Fe.var.structureError=!0)&&(e=Q())&&be(`${t.name} in Config.JSON.parse:`,t.message)}t={...bt,...e}}else ue(ze,t=bt);return Fe.var.versionStatus=t.curVersion,t},async()=>{let[e,t,n]=await Promise.all([Ve,Ue,He].map(e=>oe(e)));try{e=e?[...o.parse(v(e))]:[]}catch(t){be(`${t.name} in Monospaced_siteRules.Array.parse:`,t.message)??(e=[])}try{t=t?Le(o.parse(v(t))):""}catch(e){be(`${e.name} in Monospaced_Fontlist.String.parse:`,e.message)??(t="")}try{n=n?Le(o.parse(v(n))):""}catch(e){be(`${e.name} in Monospaced_Feature.String.parse:`,e.message)??(n="")}return{monoSiteRules:e,monoFontList:t,monoFeature:n}},async e=>{const t=e=["127.0.0.1","localhost"];try{const n=await oe(Ae);n?e=o.parse(v(n)):ue(Ae,t)}catch(e){be(`${e.name} in ExSite.JSON.parse:`,e.message)??(Fe.var.structureError=!0)}return{exSite:Y(e),exSitesIndex:(n=e,Y(n.flatMap(e=>"string"!=typeof e?[]:e.startsWith("*")?new RegExp(`^[a-z0-9][-a-z0-9]{0,62}${e.slice(1).replace(/\./g,"\\.")}(\\:\\d{2,5})?$`):e)).FindIndeX(e=>e instanceof RegExp&&e.test($e)||e===$e))};var n},0,async()=>{const e={"www.ithome.com":{Element:["scrollHeight"]},"live.bilibili.com":{HTMLElement:["offsetHeight"]},".smzdm.com":{Element:["clientWidth"]}};try{const t=await oe(Ge);if(!t)return e;const n=o.parse(v(t));if("[object Object]"===J.call(n)&&Object.keys(n).length>0)return n}catch(e){be(`${e.name} in FontScaleDef.JSON.parse:`,e.message)}return ue(Ge,e),e})}(function(){const t={createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e};if(!e.trustedTypes?.createPolicy)return t;const n=e.trustedTypes.createPolicy.bind(e.trustedTypes),o=e.trustedTypes.defaultPolicy?.name??Y([{host:"bing.com",policy:"rwflyoutDefault"}]).FindX(e=>ve.endsWith(e.host))?.policy??"default",s=e.trustedTypes.defaultPolicy??n(o,t);return h([e,de]).forEach(e=>e.trustedTypes.createPolicy=(e,t)=>e===o?s:n(e,t)),s}(),t.JSON.parse?t.JSON:e.JSON.parse?e.JSON:JSON,q?.getItem(Fe.const.const.navinfo))}(e,t,a,{...r,...s,cS:s.mS.filter(isNaN)})}("undefined"!=typeof window?window:this,((e,t)=>{if("undefined"==typeof GM_addElement)return e;try{const{contentWindow:n}=t=GM_addElement("iframe",{id:"𝐬𝐚𝐟𝐞.𝐰𝐢𝐧𝐝𝐨𝐰",style:"display:none"});return e.wrappedJSObject||t?.remove(),n??e}catch(n){return n&&t?.remove(),e}})("undefined"!=typeof window?window:this,null),0,{method:Object.entries({RemoveX(e){for(let t=0;t<this.length;t++)if(this[t]===e)return this.splice(t,1)},SomeX(e,t=this){for(let n=0;n<this.length;n++)if(e.call(t,this[n],n,this))return!0},FindX(e,t=this){for(let n=0;n<this.length;n++)if(e.call(t,this[n],n,this))return this[n]},FindIndeX(e,t=this){for(let n=0;n<this.length;n++)if(e.call(t,this[n],n,this))return n;return-1}}),option:{writable:!1,configurable:!1,enumerable:!1}},((e,t=[..."Nc5𝙶Jo𝚊bR7𝙽𝚖4P𝚟CpvgY𝚄𝚏G𝚙𝚔Ue0𝚞V𝚍2𝙴𝚇DE3𝚠X𝚁QL𝚑𝚜kd𝚢𝚛F8s𝚎𝚓9𝚝𝙺hr𝚂zm𝚡yTul𝚘𝚌Z6a𝚗𝚐fAn𝚕𝙷𝚚jStMi𝚆𝚣𝚒𝙲1OWKB𝚅𝚋HwqxI"])=>{const n=t=>{try{return e.addEventListener("error",e=>("SecurityError"===e.error?.name||e.message?.includes("SecurityError"))&&e.preventDefault(),{once:!0}),e[t].setItem("__fr_storage_test__",!0),e[t].removeItem("__fr_storage_test__"),e[t]}catch(e){return e&&null}};return{oC:e.Object.create.bind(null,null),mS:t,eH:t=>{const n=e.history[t];return function(){return e.dispatchEvent(new CustomEvent(t,{detail:[...arguments]})),n.apply(this,arguments)}},lS:n("localStorage"),sS:n("sessionStorage")}})("undefined"!=typeof window?window:this));
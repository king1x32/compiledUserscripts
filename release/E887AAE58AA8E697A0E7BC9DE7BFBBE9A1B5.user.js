// ==UserScript==
// @name         AutoPager
// @version      6.6.66
// @author       X.I.U
// @match        *://*/*
// @connect      userscript.xiu2.xyz
// @connect      userscript.h233.eu.org
// @connect      bitbucket.org
// @connect      jsd.onmicrosoft.cn
// @connect      wget.la
// @connect      cdn.wget.la
// @connect      ghfast.top
// @connect      raw.ixnic.net
// @connect      ghproxy.cfd
// @connect      raw.github.site
// @connect      raw.github.store
// @connect      raw.dgithub.xyz
// @connect      ghproxy.net
// @connect      github.7boe.top
// @connect      github.starrlzy.cn
// @connect      cdn.jsdmirror.com
// @connect      js.cdn.haah.net
// @connect      gh.akass.cn
// @connect      raw.kkgithub.com
// @connect      gcore.jsdelivr.net
// @connect      fastly.jsdelivr.net
// @connect      jsd.proxy.aks.moe
// @connect      jsdelivr.pai233.top
// @connect      gh-proxy.com
// @connect      hk.gh-proxy.com
// @connect      www.xuexiniu.com
// @connect      bbs.xuexiniu.com
// @connect      weili.ooopic.com
// @connect      www.ykmh.com
// @icon         data:image/png;base64,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
// @grant        GM_xmlhttpRequest
// @grant        GM_registerMenuCommand
// @grant        GM_unregisterMenuCommand
// @grant        GM_openInTab
// @grant        GM_getValue
// @grant        GM_setValue
// @grant        GM_notification
// @grant        GM_info
// @grant        GM.info
// @grant        window.onurlchange
// @grant        unsafeWindow
// @sandbox      JavaScript
// @license      GPL-3.0 License
// @run-at       document-end
// @namespace    https://github.com/XIU2/UserScript
// @supportURL   https://github.com/XIU2/UserScript
// @homepageURL  https://github.com/XIU2/UserScript
// @exclude      https://*.taobao.com/*
// @exclude      https://*.tmall.com/*
// @exclude      https://*.1688.com/*
// @exclude      https://*.jd.com/*
// @exclude      https://*.vip.com/*
// @exclude      https://*.suning.com/*
// @exclude      https://*.aliexpress.com/*
// @exclude      https://*.paypal.com/*
// @exclude      https://*.iqiyi.com/*
// @exclude      https://*.youku.com/*
// @exclude      https://m.v.qq.com/*
// @exclude      https://v.qq.com/*
// @exclude      https://*.acfun.cn/*
// @exclude      https://t.bilibili.com/*
// @exclude      https://www.bilibili.com/*
// @exclude      https://live.bilibili.com/*
// @exclude      https://space.bilibili.com/*
// @exclude      https://manga.bilibili.com/*
// @exclude      https://member.bilibili.com/*
// @exclude      https://message.bilibili.com/*
// @exclude      https://*.youtube.com/*
// @exclude      https://*.youtube-nocookie.com/*
// @exclude      https://*.cnki.net/*
// @exclude      https://mail.qq.com/*
// @exclude      https://weread.qq.com/*
// @exclude      https://*.weread.qq.com/*
// @exclude      https://www.qidian.com/chapter/*
// @exclude      https://bz.zzzmh.cn/*
// @exclude      https://wallhaven.cc/*
// @exclude      https://chrome.zzzmh.cn/*
// @exclude      https://*.guazi.com/*
// @exclude      https://*.liepin.com/*
// @exclude      https://*.58.com/*
// @downloadURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/E887AAE58AA8E697A0E7BC9DE7BFBBE9A1B5.user.js
// @updateURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/E887AAE58AA8E697A0E7BC9DE7BFBBE9A1B5.meta.js
// ==/UserScript==
(function(){"use strict";function e(){if(Ee.length!=[])for(let e=0;e<Ee.length;e++)GM_unregisterMenuCommand(Ee[e]);for(let e=0;e<we.length;e++)if(we[e][3]=GM_getValue(we[e][0]),"menu_disable"===we[e][0]){if(oe("check"))return void(Ee[e]=GM_registerMenuCommand(`${we[e][2]}`,function(){oe("del")}));if(0===(ve=t()))return Ee[0]=GM_registerMenuCommand("❌ 当前网页暂不支持 [点击申请] (或无需翻页)",function(){GM_openInTab("https://github.com/XIU2/UserScript#xiu2userscript",{active:!0,insert:!0,setParent:!0}),GM_openInTab("https://greasyfork.org/zh-CN/scripts/419215/feedback",{active:!0,insert:!0,setParent:!0})}),Ee[1]=GM_registerMenuCommand("🔄 更新外置翻页规则 (定期自动)",function(){a(!0)}),void(Ee[2]=GM_registerMenuCommand("#️⃣ 自定义翻页规则",function(){ie()}));if(-1===ve)return;Ee[e]=GM_registerMenuCommand(`${we[e][1]}`,function(){oe("add")})}else"menu_rules"===we[e][0]?Ee[e]=GM_registerMenuCommand(`🔄 ${we[e][1]}`,function(){a(!0)}):"menu_customRules"===we[e][0]?Ee[e]=GM_registerMenuCommand(`#️⃣ ${we[e][1]}`,function(){ie()}):Ee[e]=GM_registerMenuCommand(`${we[e][3]?"✅":"❌"} ${we[e][1]}`,function(){ce(we[e][3],we[e][0],we[e][2])});Ee[Ee.length]=GM_registerMenuCommand("💬 反馈失效 / 申请支持",function(){GM_openInTab("https://github.com/XIU2/UserScript#xiu2userscript",{active:!0,insert:!0,setParent:!0}),GM_openInTab("https://greasyfork.org/zh-CN/scripts/419215/feedback",{active:!0,insert:!0,setParent:!0})})}function t(){o();let e=!1;e:for(let t in ke)if(!ke[t].ignore)if(Ae="function"==typeof ke[t].url?ke[t]:structuredClone(ke[t]),Array.isArray(ke[t].host)){for(let n of ke[t].host)if("string"==typeof n&&"/"===n.slice(0,1)&&(n=new RegExp(n.slice(1,n.length-1))),n instanceof RegExp&&n.test(location.hostname)||"string"==typeof n&&n===location.hostname){if(self!=top&&!ke[t].iframe)continue e;if(ke[t].url)if("function"==typeof ke[t].url)ke[t].url();else try{if("/"===ke[t].url.slice(0,1)){if(!0!==new RegExp(ke[t].url.slice(1,ke[t].url.length-1),"i").test(location.pathname+location.search)){!0===Se&&(e=!0);break}Te=ke[t]}else{if(!new Function("fun","rule",ke[t].url)(window.autoPage,Ae)){!0===Se&&(e=!0);break}Te=Ae}}catch(e){console.error('[自动无缝翻页] - 当前网页规则 "url" 匹配出错，请检查：\n',ke[t].url+"\n\n",e)}else Te=ke[t];e=!0;break e}}else if("string"==typeof ke[t].host&&"/"===ke[t].host.slice(0,1)&&(ke[t].host=new RegExp(ke[t].host.slice(1,ke[t].host.length-1))),void 0===ke[t].host||ke[t].host instanceof RegExp&&ke[t].host.test(location.hostname)||"string"==typeof ke[t].host&&ke[t].host===location.hostname){if(self!=top&&!ke[t].iframe)continue;if(ke[t].url)if("function"==typeof ke[t].url)ke[t].url();else try{if("/"===ke[t].url.slice(0,1)){if(!0!==new RegExp(ke[t].url.slice(1,ke[t].url.length-1),"i").test(location.pathname+location.search)){!0===Se&&(e=!0);continue}Te=ke[t]}else{if(!new Function("fun","rule",ke[t].url)(window.autoPage,Ae)){!0===Se&&(e=!0);continue}Te=Ae}}catch(e){console.error('[自动无缝翻页] - 当前网页规则 "url" 匹配出错，请检查：\n',ke[t].url+"\n\n",e)}else Te=ke[t];e=!0;break}if(Ae=void 0,e)return console.info("[自动无缝翻页] - 独立规则 网站"),1;if(self!=top)return-1;if("undefined"!=typeof discuz_uid||F('meta[name="author" i][content*="Discuz!" i], meta[name="generator" i][content*="Discuz!" i], body[id="nv_forum" i][class^="pg_" i][onkeydown*="27"], body[id="nv_search" i][onkeydown*="27"]')||O('id("ft")[contains(string(),"Discuz!")]'))return console.info("[自动无缝翻页] - <Discuz!> 论坛"),2;if("undefined"!=typeof flarum||F("#flarum-loading"))return console.info("[自动无缝翻页] - <Flarum> 论坛"),3;if("undefined"!=typeof phpbb||F("body#phpbb"))return console.info("[自动无缝翻页] - <phpBB> 论坛"),4;if("undefined"!=typeof xn&&O('//footer//a[contains(string(), "Xiuno")] | //link[contains(@href, "xiuno")] | //script[contains(@src, "xiuno")]'))return console.info("[自动无缝翻页] - <Xiuno> 论坛"),5;if("undefined"!=typeof XF)return console.info("[自动无缝翻页] - <XenForo> 论坛"),6;if("undefined"!=typeof MyBB)return console.info("[自动无缝翻页] - <MyBB> 论坛"),14;if(F('head meta[name="generator" i][content="nexusphp" i]')||O('id("footer")[contains(string(), "NexusPHP")]'))return console.info("[自动无缝翻页] - <NexusPHP> 论坛"),7;if(unsafeWindow.config&&(unsafeWindow.config.assetVersionEncoded&&-1!==unsafeWindow.config.assetVersionEncoded.indexOf("gitea")||unsafeWindow.config.customEmojis&&unsafeWindow.config.customEmojis.gitea))return console.info("[自动无缝翻页] - <Forgejo/Gitea> git 托管系统"),15;if(ue(_e)&&1===H('.load-more, .load_more, .loadmore, #load-more, #load_more, #loadmore, [id^="loadmore"], .show-more:not([data-gps-track]), .show_more, .ajax-more').length)return console.info("[自动无缝翻页] - 部分自带 自动无缝翻页 的网站 1"),8;if(ue(ye)&&1===W('//*[self::a or self::span or self::button or self::div][text()="加载更多"][not(@href) or @href="#" or starts-with(@href, "javascript")]').length)return console.info("[自动无缝翻页] - 部分自带 自动无缝翻页 的网站 2"),9;if(F('link[href*="/wp-content/" i], script[src*="/wp-content/" i], link[href*="/wp-includes/" i], script[src*="/wp-includes/" i], head>meta[name=generator][content*="WordPress" i]')){if(O('(//*[contains(@class, "post-page-numbers") and contains(@class, "current")])[last()]/following-sibling::a[1]')?(ke.wp_article_post.pager.nextL='(//*[contains(@class, "post-page-numbers") and contains(@class, "current")])[last()]/following-sibling::a[1]',ke.wp_article_post.pager.replaceE='//a[contains(@class,"post-page-numbers")]/..'):O('(//div[contains(@class,"fenye")])[last()]//a[string()="下一页"]')&&(ke.wp_article_post.pager.nextL='(//div[contains(@class,"fenye")])[last()]//a[string()="下一页"]',ke.wp_article_post.pager.replaceE=".fenye"),null!=ke.wp_article_post.pager.nextL)return 1==H("#entry-content>#content-innerText, .entry-content>#content-innerText").length?ke.wp_article_post.pager.pageE="#entry-content>#content-innerText, .entry-content>#content-innerText":H(".entry-content .single-content img").length>3?ke.wp_article_post.pager.pageE=".entry-content .single-content":1==H(".entry-content").length?ke.wp_article_post.pager.pageE=".entry-content>*:not(.wbp-cbm):not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer):not([class*=pagination])":1==H(".article-content").length?ke.wp_article_post.pager.pageE=".article-content>*:not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer):not([class*=pagination])":1==H("article").length&&(ke.wp_article_post.pager.pageE="article>*:not(.page-links):not(.post-links):not(.article-paging):not(.entry-pagination):not(.pagination):not(.fenye):not(.open-message):not(#social):not(.article-social):not(.single-cat-tag):not(.single-meta):not(#fontsize):not(.clear):not(.tg-m):not(.tg-site):not(footer):not([class*=pagination])"),null!=ke.wp_article_post.pager.pageE&&console.info("[自动无缝翻页] - 部分使用 WordPress 的网站 - 文章内"),11;if(F("a.next, a.next-page"))ke.wp_article.pager.nextL="a.next, a.next-page";else if(F('a[rel="next" i], a[aria-label="next" i], a[aria-label="下一个"].page-link, a[aria-label="Next Page" i], a[aria-label="下一页"], a[rel="下一页"], a[title="下一页"], a[aria-label="下一頁"], a[rel="下一頁"], a[title="下一頁"]'))ke.wp_article.pager.nextL='a[rel="next" i], a[aria-label="next" i], a[aria-label="下一个"].page-link, a[aria-label="Next Page" i], a[aria-label="下一页"], a[rel="下一页"], a[title="下一页"], a[aria-label="下一頁"], a[rel="下一頁"], a[title="下一頁"]';else if(F("li.next-page > a, li.next > a, li.pagination-next>a"))ke.wp_article.pager.nextL="li.next-page > a, li.next > a, li.pagination-next>a";else if(F("span.current+a"))ke.wp_article.pager.nextL="span.current+a";else if(F(".nav-previous a, a.nav-previous"))ke.wp_article.pager.nextL=".nav-previous a, a.nav-previous";else if(F(".pagination>.page-item.active+li.page-item>a"))ke.wp_article.pager.nextL=".pagination>.page-item.active+li.page-item>a";else{const e=F('#nav-below, nav.navigation, nav.paging-navigation, #pagination:not([class*="entry"]), .pagination:not([class*="entry"]), .wp-pagenavi, .pagenavi, nav[role="navigation"]');e&&O('//a[contains(text(), "下一页") or contains(text(), "下一頁") or contains(text(), ">") or contains(text(), "next") or contains(text(), "Next") or contains(text(), "NEXT")]',e)&&(ke.wp_article.pager.nextL='//*[self::ul or self::nav or self::div][@id="nav-below" or @id="pagination" or contains(@class, "navigation") or contains(@class, "pagination") or contains(@class, "pagenavi") or @role="navigation"]//a[contains(text(), "下一页") or contains(text(), "下一頁") or contains(text(), ">") or contains(text(), "next") or contains(text(), "Next") or contains(text(), "NEXT")]')}if(null!=ke.wp_article.pager.nextL){if(0!==ke.wp_article.pager.nextL.indexOf("//")&&(ke.wp_article.pager.replaceE+=","+ke.wp_article.pager.nextL),1==H("main").length&&(H("main .posts-wrapper.row>div>article").length>3?ke.wp_article.pager.pageE="main .posts-wrapper.row>div":W('//main//div[contains(@class,"row")]/div/article').length>3?ke.wp_article.pager.pageE='//main//div[contains(@class,"row")]/div/article/parent::div':H('main article[id^="post-"]').length>3?ke.wp_article.pager.pageE='main article[id^="post-"]':H("main article[class]").length>3?ke.wp_article.pager.pageE="main article[class]":H('main div[id^="post-"]').length>3?ke.wp_article.pager.pageE='main div[id^="post-"]':H("main .post").length>3&&(ke.wp_article.pager.pageE="main .post"),null!=ke.wp_article.pager.pageE))return console.info("[自动无缝翻页] - 部分使用 WordPress 的网站"),10;if(H(".posts-wrapper.row>div>article").length>3?ke.wp_article.pager.pageE=".posts-wrapper.row>div":W('//div[contains(@class,"row")]/div/article').length>3?ke.wp_article.pager.pageE='//div[contains(@class,"row")]/div/article':H('article[id^="post-"]').length>3?ke.wp_article.pager.pageE='article[id^="post-"]':H("article[class]").length>3?ke.wp_article.pager.pageE="article[class]":H('div[id^="post-"]').length>3?ke.wp_article.pager.pageE='div[id^="post-"]':H('ul[class*="post"]>li.item').length>3?ke.wp_article.pager.pageE='ul[class*="post"]>li.item':H(".post").length>3?ke.wp_article.pager.pageE=".post":H('.posts-row>posts[class*="post"]').length>3?ke.wp_article.pager.pageE='.posts-row>posts[class*="post"]':1==H("#posts, .posts").length?ke.wp_article.pager.pageE="#posts, .posts":1==H("#content .container>.row").length&&1==H("#content .container>.row+.nav-pagination").length&&(ke.wp_article.pager.pageE="#content .container>.row"),null!=ke.wp_article.pager.pageE)return console.info("[自动无缝翻页] - 部分使用 WordPress 的网站"),10}}else{if(F('meta[name="template" i][content="handsome" i]')&&F(".page-navigator"))return console.info("[自动无缝翻页] - 部分使用 Typecho 的网站 (handsome)"),12;if(F('meta[name="template" i][content="Mirages" i]')&&F(".page-navigator"))return console.info("[自动无缝翻页] - 部分使用 Typecho 的网站 (Mirages)"),13;if(F(".stui-page, .stui-page__item, #long-page, .myui-page, .myui-page__item"))return console.info("[自动无缝翻页] - 部分影视网站"),300;if(F("#page")&&F(".module-items,a.module-poster-item"))return console.info("[自动无缝翻页] - 部分影视网站 2"),301;if(F(".ArticleImageBox, .PictureList")&&F(".article_page")&&O('//div[contains(@class,"article_page")]//a[text()="下一页"]'))return console.info("[自动无缝翻页] - 部分美图网站 - 手机版"),302;if(F("meta[content^=SearXNG i], link[href*=SearXNG i], script[src*=SearXNG i]"))return console.info("[自动无缝翻页] - <SearXNG> 元搜索引擎"),303;if(F(".content > #content")&&O('//div[contains(@class,"page_chapter")]//a[text()="下一章"]'))return console.info("[自动无缝翻页] - <笔趣阁 1> 模板的小说网站"),200;if(F("#nr1, #chaptercontent, .Readarea, .ReadAjax_content")&&F("#pb_next, #linkNext"))return console.info("[自动无缝翻页] - <笔趣阁 1 - 手机版> 模板的小说网站"),201;if(F("#txt, .txt")&&F("#pb_next, .url_next")&&F(".chapter-control, .chapter-page-btn"))return console.info("[自动无缝翻页] - <笔趣阁 2> 模板的小说网站"),202;if((F('meta[name="description" i][content*="小说"], meta[name="description" i][content*="章节"], meta[name="description" i][content*="阅读"], meta[name="description" i][content*="小說"], meta[name="description" i][content*="章節"], meta[name="description" i][content*="閲讀"], meta[name="keywords" i][content*="笔趣"]')||-1!=location.hostname.indexOf("biqu")||null!=document.title.match(/笔趣阁|小说|小說|章/))&&O('//a[contains(text(), "下一章") or contains(text(), "下一页") or contains(text(), "下一节")]')){let e=['[id="chapter_content" i]','[class~="chapter_content" i]','[id="chaptercontent" i]','[class~="chaptercontent" i]','[class~="read_chapterdetail" i]','[id="booktext" i]','[class~="booktext" i]','[id="txtcontent" i]','[class~="txtcontent" i]','[id="textcontent" i]','[class~="textcontent" i]','[id="read-content" i]','[class~="read-content" i]','[id="txtnav" i]','[class~="txtnav" i]','[id="txt" i][class~="txt" i]','[id="contents" i]','[class~="contents" i]','[id="content" i]','[class~="content" i]','[id="contentbox" i]'];for(let t of e)if(1===H(t).length){ke.biquge3.pager.pageE=t,ke.biquge3.pager.insertP=[t,6],ke.biquge3.style=t+">.readinline, "+ke.biquge3.style;break}if(null!=ke.biquge3.pager.pageE)return console.info("[自动无缝翻页] - <笔趣阁 3> 模板的小说网站"),203}}return 0}function n(){if(1!=ve)switch(ve){case 2:s();break;case 3:ke.flarum.url();break;case 4:ke.phpbb.url();break;case 5:ke.xiuno.url();break;case 6:ke.xenforo.url();break;case 14:ke.mybb.url();break;case 7:ke.nexusphp.url();break;case 15:ke.forgejoGitea.url();break;case 8:ke.loadmore.url('.load-more, .load_more, .loadmore, #load-more, #load_more, #loadmore, [id^="loadmore"], .show-more, .show_more, .ajax-more');break;case 9:ke.loadmore.url('//*[self::a or self::span or self::button or self::div][text()="加载更多"][not(@href) or @href="#" or starts-with(@href, "javascript")]');break;case 10:ke.wp_article.url();break;case 11:Te=ke.wp_article_post;break;case 12:ke.typecho_handsome.url();break;case 13:ke.typecho_mirages.url();break;case 200:ke.biquge1.url();break;case 201:Te=ke.biquge1_m;break;case 202:ke.biquge2.url();break;case 203:Te=ke.biquge3;break;case 300:Te=ke.yingshi;break;case 301:Te=ke.yingshi2;break;case 302:Te=ke.meinvtu_m;break;case 303:document.cookie="infinite_scroll=1; expires=Thu, 18 Dec 2031 12:00:00 GMT; path=/",document.cookie="results_on_new_tab=1; expires=Thu, 18 Dec 2031 12:00:00 GMT; path=/"}}function o(){ke={loadmore:{ignore:!0,url:function(e){(Te=ke.loadmore).pager.nextL=e},pager:{type:2,isHidden:!0,interval:1e3}},wp_article:{ignore:!0,url:()=>{Q("/post/")||F("#comments, .comments-area, #disqus_thread")||(Te=ke.wp_article,setTimeout(()=>{-1!=z(Te.pager.pageE).style.cssText.indexOf("position: absolute")&&C(Te.pager.pageE+"{position: static !important; float: left !important; height: "+parseInt(1.1*F(Te.pager.pageE).offsetHeight)+"px !important;}")},1500))},style:"img[data-src], img[data-original] {opacity: 1 !important;}",blank:3,pager:{replaceE:'#nav-below, nav.navigation, nav.paging-navigation, #pagination:not([class*="entry"]), .pagination:not([class*="entry"]), .wp-pagenavi, .pagenavi, nav[role="navigation"], ul[class*="-pagination"]',forceHTTPS:!0,scrollD:3e3},function:{bF:T}},wp_article_post:{ignore:!0,pager:{type:3,scrollD:3e3},function:{bF:T}},typecho_handsome:{ignore:!0,url:()=>{F("nav:not([id=comment-navigation]) .page-navigator")&&(Te=ke.typecho_handsome)},blank:3,pager:{nextL:".page-navigator li.next>a",pageE:".blog-post, .post-list",replaceE:".page-navigator"}},typecho_mirages:{ignore:!0,url:()=>{H("#index>article, #archive>article").length>3&&F("li.next")&&(Te=ke.typecho_mirages)},blank:3,pager:{nextL:"li.next>a",pageE:"#index>article, #archive>article",scriptT:3,replaceE:".page-navigator"}},biquge1:{ignore:!0,url:()=>{Te=ke.biquge1,k(H(".content > #content"),[/<br>.{0,10}秒记住.+$/,""])},style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), #content > *:not(br):not(p), #content>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{nextL:'//div[@class="page_chapter"]//a[text()="下一章"]',pageE:".content > #content",insertP:[".content > #content",6],replaceE:".page_chapter"},function:{bF:k,bFp:[/<br>.{0,10}秒记住.+$/,""]}},biquge1_m:{ignore:!0,style:'img, .posterror, .show-app2, a[href*="posterror()"], [onclick*="location.href"], [style*="background"][style*="url("]:not(html):not(body), #nr1>*:not(br):not(p), #chaptercontent>*:not(br):not(p), .Readarea>*:not(br):not(p), .ReadAjax_content>*:not(br):not(p), #nr1>.readinline, #chaptercontent>.readinline, .Readarea>.readinline, .ReadAjax_content>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{nextL:"#pb_next, #linkNext",pageE:"#nr1, #chaptercontent, .Readarea, .ReadAjax_content",insertP:["#nr1, #chaptercontent, .Readarea, .ReadAjax_content",6],replaceE:'//a[@id="pb_next" or @id="linkNext"]/parent::*'}},biquge2:{ignore:!0,url:()=>{Te=Y()||null!=F(".chapter-page-btn")?ke.biquge2_m:ke.biquge2},style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), #txt > *:not(br):not(p), #txt>.readinline, .txt>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{type:6,nextL:"#pb_next, .url_next",pageE:"#txt, .txt",insertP:["#txt, .txt",6],replaceE:".chapter-control, .chapter-page-btn",loadTime:1500,scrollD:3500}},biquge2_m:{ignore:!0,style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), #txt > *:not(br):not(p), #txt>.readinline, .txt>.readinline {display: none !important;}',history:!0,retry:3e3,pager:{nextL:"#pb_next, .url_next",pageE:"#txt, .txt",insertP:["#txt, .txt",6],replaceE:".chapter-control, .chapter-page-btn"}},biquge3:{ignore:!0,style:'img, .posterror, a[href*="posterror()"], [style*="background"][style*="url("]:not(html):not(body), script+div[style="padding:15px;"], p[style*="font-weight:"] {display: none !important;}',history:!0,retry:3e3,pager:{nextL:"js; const a=[fun.getNextE('(//a[contains(text(), \"下一页\")])[last()]'),fun.getNextE('(//a[contains(text(), \"下一章\")])[last()]'),fun.getNextE('(//a[contains(text(), \"下一节\")])[last()]')];return a.find(i => i)",insertP6Br:!1,replaceE:'//a[contains(text(), "下一章") or contains(text(), "下一页") or contains(text(), "下一节")]/parent::*'},function:{bF:k,bFp:[/<br>.{0,10}秒记住.+$/,""]}},yingshi:{ignore:!0,style:"div.stui-page__all, div.myui-page__all {display: none !important;}",blank:3,pager:{nextL:".stui-page li.active+li>a, .stui-page__item li.active+li>a, #long-page .active+li>a, .myui-page .visible-xs+li>a",pageE:".stui-vodlist, .myui-vodlist>li, #content, #searchList",replaceE:".stui-page, .stui-page__item, #long-page, .myui-page, .myui-page__item"},function:{bF:T,bFp:[1,"[data-original]","data-original"]}},yingshi2:{ignore:!0,blank:3,style:".module-poster-item, .module-items>* {display: inline-block !important;}",pager:{nextL:'#page a[title="下一页"], a.page-next',pageE:".module-items>*, a.module-poster-item",replaceE:"#page"},function:{bF:T}},meinvtu_m:{ignore:!0,history:!0,blank:3,pager:{type:3,nextL:'//div[contains(@class,"article_page")]//a[text()="下一页"]',pageE:".ArticleImageBox, .PictureList",replaceE:".article_page",scrollD:500}},discuz_forum:{ignore:!0,pager:{type:2,nextL:"#autopbn",interval:800}},discuz_guide:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:'tbody[id^="normalthread_"],tbody[id^="stickthread_"]',replaceE:".pg, .pages",forceHTTPS:!0}},discuz_waterfall:{ignore:!0,style:".pgbtn",pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:"#waterfall > li, #waterfall > dl",replaceE:".pg, .pages",forceHTTPS:!0}},discuz_thread:{ignore:!0,thread:!0,style:".pgbtn, .viewthread:not(:first-of-type)>h1, .viewthread:not(:first-of-type)>ins, .viewthread:not(:first-of-type)>.headactions {display: none;}",pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:'#postlist > div[id^="post_"], form>.viewthread',replaceE:'//div[contains(@class,"pg") or contains(@class,"pages")][./a[contains(@class,"nxt") or contains(@class,"next") or contains(@class,"prev")][not(contains(@href,"javascript") or contains(@href,"commentmore"))]]',forceHTTPS:!0},function:{bF:T,bFp:[0,"img[file]","file"]}},discuz_search:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:"#threadlist > ul",replaceE:".pg, .pages",forceHTTPS:!0}},discuz_youspace:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:'form:not([action^="search.php?"]) tbody > tr:not(.th)',replaceE:".pg, .pages",forceHTTPS:!0}},discuz_collection:{ignore:!0,pager:{nextL:'a.nxt:not([href^="javascript"]) ,a.next:not([href^="javascript"])',pageE:"#ct .bm_c table > tbody",replaceE:".pg, .pages",forceHTTPS:!0}},discuz_archiver:{ignore:!0,pager:{nextL:'//div[@id="content"][last()]//div[@class="page"]/strong/following-sibling::a[1]',pageE:"#content"}},discuz_m:{ignore:!0,thread:!0,pager:{nextL:'//a[@class="nxt" or @class="next"] | //div[@class="page"]/a[text()="下一页" or contains(text(), ">")]',replaceE:".pg, .page",forceHTTPS:!0,scrollD:1e3}},discuz_m_forum:{ignore:!0,pager:{type:2,nextL:"a.loadmore",interval:500,scrollD:1e3}},flarum:{ignore:!0,url:()=>{Se=!0,Q("/d/")||(F(".DiscussionList-loadMore")?Te=ke.flarum:F("a.Button--primary")&&(Te=ke.flarum2))},pager:{type:2,nextL:".DiscussionList-loadMore > button",isHidden:!0}},flarum2:{ignore:!0,blank:4,pager:{type:6,nextL:"a.Button--primary+a:not(.disabled)",pageE:".DiscussionList-discussions>li",replaceE:".Orion-DiscussionListPagination"}},phpbb:{ignore:!0,url:()=>{Q("/viewforum.php")?Te=ke.phpbb:Q("/viewtopic.php")?Te=ke.phpbb_post:Q("/search.php")&&(Te=ke.phpbb_search)},pager:{nextL:'.pagination li.next a[rel="next"], .topic-actions .pagination strong~a',pageE:".forumbg:not(.announcement) ul.topiclist.topics > li",replaceE:".action-bar .pagination, .topic-actions .pagination"}},phpbb_post:{ignore:!0,thread:!0,pager:{nextL:'.pagination li.next a[rel="next"], .topic-actions .pagination strong~a',pageE:"div.post[id], div.post[id]+hr",replaceE:".action-bar .pagination, .topic-actions .pagination"}},phpbb_search:{ignore:!0,pager:{nextL:'.pagination li.next a[rel="next"], .topic-actions .pagination strong~a',pageE:"div.search.post",replaceE:".action-bar .pagination, .pagination"}},xenforo:{ignore:!0,url:()=>{Q(/\/(forums|f)\//)||F(ke.xenforo.pager.nextL)&&F(ke.xenforo.pager.pageE)?Te=ke.xenforo:Q(/\/(threads|t)\//)||F(ke.xenforo.pager.nextL)&&F(ke.xenforo_post.pager.pageE)?Te=ke.xenforo_post:(Q("/search/")||F(ke.xenforo.pager.nextL)&&F(ke.xenforo_search.pager.pageE))&&(Te=ke.xenforo_search)},blank:3,pager:{nextL:"a.pageNav-jump--next",pageE:".structItemContainer > div",replaceE:"nav.pageNavWrapper",scrollD:2500}},xenforo_post:{ignore:!0,thread:!0,pager:{nextL:"a.pageNav-jump--next",pageE:".block-body.js-replyNewMessageContainer > article",replaceE:"nav.pageNavWrapper",scrollD:2500}},xenforo_search:{ignore:!0,blank:3,pager:{nextL:"a.pageNav-jump--next",pageE:"ol.block-body > li",replaceE:"nav.pageNavWrapper",scrollD:2500}},mybb:{ignore:!0,url:()=>{0==location.pathname.toLowerCase().indexOf("/forum")||0==location.pathname.toLowerCase().indexOf("/search")||F(ke.mybb.pager.nextL)&&F(ke.mybb.pager.pageE)?Te=ke.mybb:(-1!==location.pathname.toLowerCase().indexOf("thread")||F(ke.mybb.pager.nextL)&&F(ke.mybb_post.pager.pageE))&&((Te=ke.mybb_post).pager=Object.assign({},ke.mybb.pager,ke.mybb_post.pager))},blank:3,pager:{nextL:"div:not([id=breadcrumb_multipage_popup])>a.pagination_next, div:not([id=breadcrumb_multipage_popup])>.pagination_current+a.pagination_page",pageE:"tr.inline_row",replaceE:".pagination",scrollD:2500}},mybb_post:{ignore:!0,thread:!0,pager:{pageE:"#posts>*",scrollD:2500}},xiuno:{ignore:!0,url:()=>{"/"==Ge||Q(/\/(index|forum)/)?Te=ke.xiuno:Q("/thread")&&(Te=ke.xiuno_post)},pager:{nextL:'//li[@class="page-item"]/a[text()="▶" or text()="»" or contains(text(),">") or contains(text(),"下一页")]',pageE:"ul.threadlist > li",replaceE:"ul.pagination"}},xiuno_post:{ignore:!0,thread:!0,pager:{nextL:'//li[@class="page-item"]/a[text()="▶" or text()="»" or contains(text(),">") or contains(text(),"下一页")]',pageE:"li.post[data-pid]:not(.newpost)",replaceE:"ul.pagination"}},forgejoGitea:{ignore:!0,url:()=>{(Q(/^\/explore\/.+/)||Q(/\/(issues|pulls|releases|tags)$/)||Q(/\/commits\/branch\/.+/)||F(".pagination>.active+.item")&&F(".flex-list>.flex-item"))&&(Te=ke.forgejoGitea)},pager:{nextL:".pagination>.active+.item",pageE:".flex-list>.flex-item, #issue-list>div, #release-list>li, tbody.tag-list>tr, tbody.commit-list>tr",replaceE:".pagination"}},nexusphp:{ignore:!0,url:()=>{"/torrents.php"==Ge||F("table.torrents")?Te=ke.nexusphp:"/subtitles.php"==Ge?(Te=ke.nexusphp).pager.pageE="#outer > table.main~table > tbody > tr:not(:first-of-type)":"/forums.php"==Ge&&Q("action=viewforum","s")?(Te=ke.nexusphp).pager.pageE="#outer > table.main+table > tbody > tr:not(:first-of-type):not(:last-of-type)":"/forums.php"==Ge&&Q("action=viewtopic","s")&&((Te=ke.nexusphp).thread=!0,Te.pager.pageE="td.text > div, td.text > div+table.main")},pager:{nextL:'//a[./b[contains(text(), "下一页") or contains(text(), ">>")]]',pageE:"table.torrents > tbody > tr:not(:first-of-type)",replaceE:'//p[@align][./font[@class="gray"]]'}},"必应搜索 + 手机版":{host:["www.bing.com","cn.bing.com","www4.bing.com","global.bing.com"],url:()=>{Se=!0,"/search"==Ge&&(Te=ke["必应搜索 + 手机版"],Y()&&(Te.blank=3,Te.pager.type=6,Te.pager.loadTime=1500,Te.pager.scrollD=3e3))},style:"#b_footer,.b_msg,#bnp_rich_div,.cn_related_search_upsell_container",history:!0,pager:{nextL:"a.sb_pagN,a.sb_halfnext,a.sb_fullnpl",pageE:"#b_results>li.b_algo",replaceE:"#b_results>.b_pag,#b_PagAboveFooter"},function:{bF:e=>(e.forEach(function(e){H("div.rms_iac[data-src]",e).forEach(function(e){e.outerHTML=`<img src="${e.dataset.src}" height="32" width="32" role="presentation" class="rms_img">`})}),e)}},nexusmods:{host:"www.nexusmods.com",url:()=>{Se=!0,Q(/\/(mods|users)\/\d+/)?Q("tab=posts","s")?Te=ke.nexusmods_posts:Q("tab=user+files","s")&&(Te=ke.nexusmods):"/"!==Ge&&F(".pagination a.page-selected")&&(Te=ke.nexusmods)},blank:1,history:!1,xRequestedWith:!0,pager:{nextL:c,pageE:"ul.tiles>li",replaceE:".pagination",scrollD:3500},function:{bF:p}},nexusmods_posts:{ignore:!0,history:!1,xRequestedWith:!0,pager:{nextL:c,pageE:"#comment-container>ol>li.comment:not(.comment-sticky)",replaceE:".pagination",scrollD:3500}},mangabz:{host:["mangabz.com","www.mangabz.com"],url:()=>{Q(/\/m\d+/)?(setTimeout(u,1500),Te=ke.mangabz):Q(/\/\d+bz\//)?F(".detail-list-form-more")&&F(".detail-list-form-more").click():(Q("/manga-list")||"/search"==Ge)&&(Te=ke.mangabz_list)},style:"body > .container > div:not([id]) {display: none !important;} .top-bar {opacity: 0.3 !important;} #cp_img > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;}",pager:{type:4,nextL:g,insertP:["#cp_img",3],insertE:d,replaceE:"p.top-title, body > .container > div:not([id])",interval:500}},mangabz_list:{ignore:!0,blank:4,pager:{nextL:'//div[contains(@class,"page-pagination")]//a[contains(text(), ">")]',pageE:"ul.mh-list > li",replaceE:".page-pagination",scrollD:800}},dm5:{host:"www.dm5.com",url:()=>{Q(/\/m\d+/)?(setTimeout(u,1500),Te=ke.dm5):Q("/manga-list")||"/search"==Ge||F(".box-body > ul.mh-list > li")?Te=ke.mangabz_list:F(".detail-more")&&F(".detail-more").click()},style:".view-paging > .container, .view-comment {display: none !important;} .rightToolBar {opacity: 0.3 !important;} #cp_img > img, #barChapter > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;} body {overflow: auto !important;}",pager:{type:4,nextL:m,insertP:["#barChapter,#cp_img",3],insertE:f,replaceE:".view-paging > .container, .rightToolBar",interval:500}},xmanhua:{host:["xmanhua.com","www.xmanhua.com","yymanhua.com","www.yymanhua.com"],url:()=>{Q(/\/m\d+/)?(setTimeout(u,1500),-1!=location.hostname.indexOf("xmanhua")?unsafeWindow.MH_PREFIX23="XMANHUA_":unsafeWindow.MH_PREFIX23="YYMANHUA_",Te=ke.xmanhua):Q(/\/\d+xm\//)?F(".detail-list-form-more")&&F(".detail-list-form-more").click():(Q("/manga-list")||"/search"==Ge)&&(Te=ke.xmanhua_list)},style:"a.reader-bottom-page {display: none !important;} .header, .reader-bottom {opacity: 0.3 !important;} #cp_img > img{display: block !important;margin: 0 auto !important; max-width: 99% !important; width: auto !important; height: auto !important;}",hiddenPN:!0,pager:{type:4,nextL:h,insertP:["#cp_img",3],insertE:x,replaceE:".reader-title, body > .container > div:not([id])",interval:500,scrollD:2500}},xmanhua_list:{ignore:!0,blank:4,pager:{nextL:'//div[@class="page-pagination"]//a[contains(text(), ">")]',pageE:"ul.mh-list > li",replaceE:".page-pagination",scrollD:1e3}}};let e=GM_getValue("menu_customRules",{}),t=GM_getValue("menu_rules",{});"[object Object]"!==Object.prototype.toString.call(e)&&(e={}),"[object Object]"!==Object.prototype.toString.call(t)&&(t={});let n=Object.keys(e),o=Object.keys(t);if(0===n.length)ke=Object.assign({},t,ke),Me=structuredClone(t);else{for(let a=0;a<n.length;a++)-1!=o.indexOf(n[a])&&(!0===e[n[a]].inherits&&(null!=e[n[a]].pager&&null!=t[n[a]].pager&&(e[n[a]].pager=Object.assign({},t[n[a]].pager,e[n[a]].pager)),e[n[a]]=Object.assign({},t[n[a]],e[n[a]])),delete t[n[a]]);ke=Object.assign({},e,t,ke),Me=Object.assign({},structuredClone(e),structuredClone(t))}pe()}function a(t=!1){function o(t=!1,o){void 0!==(o=t?be[Math.floor(Math.random()*be.length)]:xe[Math.floor(Math.random()*xe.length)])?GM_xmlhttpRequest({url:o,method:"GET",responseType:"json",overrideMimeType:"application/json; charset=utf-8",timeout:4e3,onload:function(a){try{200===a.status&&a.response&&"[object Object]"===Object.prototype.toString.call(a.response)&&Object.keys(a.response).length>100?(GM_setValue("menu_rules",a.response),GM_setValue("menu_ruleUpdateTime",parseInt(+new Date/1e3)),Te={SiteTypeID:0},Pe.now=1,e(),n(),GM_getValue("menu_thread")||Te.thread&&(Te={SiteTypeID:0},Pe.now=1),GM_getValue("menu_page_number")?se("add"):se("set"),null!=Te.blank&&setTimeout(V,1e3),Te.style&&C(Te.style),ae(),b(),t&&GM_notification({text:"✅ 已更新外置翻页规则！\n如果依然无法翻页，说明还不支持当前网页，点击此处提交申请~",timeout:5e3,onclick:function(){GM_openInTab("https://github.com/XIU2/UserScript#xiu2userscript",{active:!0,insert:!0,setParent:!0}),GM_openInTab("https://greasyfork.org/zh-CN/scripts/419215/feedback",{active:!0,insert:!0,setParent:!0})}})):(console.log("URL："+o,a),GM_notification({text:"❌ 为空！更新失败，请再试几次...\n如果依然更新失败，请联系作者解决...",timeout:5e3}),t?be.splice(be.indexOf(o),1):xe.splice(xe.indexOf(o),1))}catch(e){console.log("URL："+o,e),GM_notification({text:"❌ 报错！更新失败，请再试几次...\n如果依然更新失败，请联系作者解决...",timeout:5e3}),t?be.splice(be.indexOf(o),1):xe.splice(xe.indexOf(o),1)}},onerror:function(e){console.log("URL："+o,e),GM_notification({text:"❌ 错误！更新失败，请再试几次...\n如果依然更新失败，请联系作者解决...",timeout:5e3}),t?be.splice(be.indexOf(o),1):xe.splice(xe.indexOf(o),1)},ontimeout:function(e){console.log("URL："+o,e),GM_notification({text:"❌ 超时！更新失败，请再试几次...\n如果依然更新失败，请联系作者解决...",timeout:5e3}),t?be.splice(be.indexOf(o),1):xe.splice(xe.indexOf(o),1)}}):GM_notification({text:"❌ 所有更新地址均以试过，已无可用地址，请联系作者解决...",timeout:5e3})}"string"==typeof GM_getValue("menu_ruleUpdateTime","")&&(t=!0,"AdGuard"!=Ne?alert("请点击【确定】开始首次获取【外置翻页规则】（大概几秒\n\n在此期间请不要 操作/跳转/关闭 当前网页~\n\n如果不小心没获取成功也没事，可以去脚本菜单中手动【更新外置翻页规则】即可（浏览器右上角 Tampermonkey 扩展图标内的脚本菜单\n\n\n另外，想要【临时暂停翻页】请点击左下角悬浮的【页码】按钮\n\n如果每次打开网页都会看到该提示，说明你的 油猴脚本管理器与本脚本之间 存在兼容性问题，请更换其他试试！"):be=xe),t?(GM_notification({text:"🔄 更新外置翻页规则中，请勿操作网页...",timeout:5e3}),o(!0)):parseInt(+new Date/1e3)-GM_getValue("menu_ruleUpdateTime",0)>5184e3&&o()}function i(e){"m"==e?(F("a.loadmore")?Te=ke.discuz_m_forum:F(".threadlist")?(Te=ke.discuz_m).pager.pageE=".threadlist > ul > li":F('[id^="normalthread_"]')&&((Te=ke.discuz_m).pager.pageE='[id^="normalthread_"]:not(.ZDlist)'),0!==Te.SiteTypeID&&"keylol.com"===location.hostname&&(Te.history=!1,Se=!0)):F("#autopbn")?Te=ke.discuz_forum:F("#waterfall")?F("#pgbtn.pgbtn>a[href^=javascript]")||(Te=ke.discuz_waterfall,l()):Te=ke.discuz_guide}function r(){F('[id^="pid"]')?(Te=ke.discuz_m).pager.pageE='[id^="pid"], [id^="pid"]+div:not([id="post_new"])':F('[id^="post_"]')&&((Te=ke.discuz_m).pager.pageE='[id^="post_"]'),0!==Te.SiteTypeID&&"keylol.com"===location.hostname&&(Te.history=!1,Se=!0)}function s(){if(F('body[id="nv_forum"][class^="pg_"][onkeydown*="27"]'))switch(F('body[id="nv_forum"][class^="pg_"][onkeydown*="27"]').className){case"pg_forumdisplay":i();break;case"pg_viewthread":Te=ke.discuz_thread;break;case"pg_guide":Te=ke.discuz_guide;break;case"pg_collection":Te=ke.discuz_collection}0===Te.SiteTypeID&&(Q("search")||F('body[id="nv_search"][onkeydown*="27"]'))&&(Q("mobile=2","s")?((Te=ke.discuz_m).pager.pageE=".threadlist > ul > li",Se=!0):Te=ke.discuz_search),0===Te.SiteTypeID&&(Q(".html")&&(Q("/forum-")?O('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "手机版")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?i("m"):i():Q("/thread-")&&(O('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "手机版")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?r():Te=ke.discuz_thread)),Q("/archiver/")&&(Te=ke.discuz_archiver)),0===Te.SiteTypeID&&(Q("mod=forumdisplay","s")||Q("forumdisplay.php")?Q("mobile=2","s")||Q("mobile=yes","s")||O('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "手机版")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?i("m"):i():Q("mod=viewthread","s")||Q("viewthread.php")?Q("mobile=2","s")||O('//head/meta[@name="applicable-device" and @content="mobile"] | //head/title[contains(text(), "手机版")] | //head/link[contains(@href, "/mobile/")] | //head/script[contains(@src, "/mobile/")]')?r():Te=ke.discuz_thread:Q("mod=guide","s")?Te=ke.discuz_guide:Q("mod=space","s")&&Q("do=thread","s")?Te=ke.discuz_youspace:Q("mod=collection","s")?Te=ke.discuz_collection:F('#threadlist, tbody[id^="normalthread_"]')?i():F("#postlist, form>.viewthread")?Te=ke.discuz_thread:Y()&&(i("m"),0===Te.SiteTypeID&&r()))}function l(){let e=F("#waterfall > li:first-child");e&&e.style&&e.style.width?C(`#waterfall {height: auto !important; width: 100% !important;} #waterfall > li {width: ${e.style.width} !important; float: left !important; position: inherit !important; left: auto !important; top: auto !important;}`):(e=H("#waterfall > dl"),e&&e.length>5&&C("#waterfall > dl {display: unset !important;}"))}function c(){if(F(".nexus-ui-blocker")||!F(".pagination a.page-selected"))return;let e;if(e=Q("/news")?RH_NewsTabContent:Q("/users/")&&Q("tab=user+files","s")?RH_UserModsTab:Q("/mods/")&&Q("tab=posts","s")?RH_CommentContainer:RH_ModList,!e)return;let t=JSON.stringify(e.out_items).replace(/{|}|"/g,""),n=O('//div[contains(@class, "pagination")][1]//a[contains(@class, "page-selected")]/../following-sibling::li[1]/a');if(n&&n.innerText){if(n=n.innerText,t.indexOf("page:")>-1?t=t.replace(/page:\d+/,`page:${n}`):t+=`,page:${n}`,!Q(/\/(mods|users)\/\d+/)){let n=e.out_items.categories,o=e.out_items.tags_yes,a=e.out_items.search,i="";if(n&&n!=[]){if(e.out_items.categories instanceof Array)for(let e=0;e<n.length;e++)i+=`categories[]:${n[e]},`;else for(let t in e.out_items.categories)i+=`categories[${t}]:${e.out_items.categories[t]},`;t.indexOf("categories:")>-1&&(t=t.replace("categories:",i))}if(i="",o&&o!=[]){if(e.out_items.tags_yes instanceof Array)for(let e=0;e<o.length;e++)i+=`tags_yes[]:${o[e]},`;else for(let t in e.out_items.tags_yes)i+=`tags_yes[${t}]:${e.out_items.tags_yes[t]},`;t.indexOf("tags_yes:")>-1&&(t=t.replace("tags_yes:",i))}if(i="",a&&0!=a.length){for(let t in e.out_items.search)i+=`search[${t}]:${e.out_items.search[t]},`;t.indexOf("search:")>-1&&(t=t.replace("search:",i))}i=""}return`https://www.nexusmods.com${e.uri}?RH_${e.id}=${t}`}return""}function p(e){return e.forEach(function(e){let t=e.querySelector(".mod-tile-left");if(t){let e=t.querySelector(".downloadcount > span.flex-label");e&&GlobalModStats[t.dataset.gameId]&&GlobalModStats[t.dataset.gameId][t.dataset.modId]&&(e.textContent=shortFormat(parseInt(GlobalModStats[t.dataset.gameId][t.dataset.modId].total)))}}),e}function u(){F("#showimage")&&F("#showimage").removeAttribute("oncontextmenu"),F("#cp_img")&&F("#cp_img").removeAttribute("oncontextmenu"),F("#barChapter")&&F("#barChapter").removeAttribute("oncontextmenu"),F("#cp_image")&&(F("#cp_image").removeAttribute("oncontextmenu"),F("#cp_image").removeAttribute("style"),F("#cp_image").removeAttribute("id"))}function g(){var e,t="";if(MANGABZ_PAGE===MANGABZ_IMAGE_COUNT)M('//a[./img[contains(@src, "icon_xiayizhang")]]')&&y(Te.pageUrl);else{if(e||(e=""),(t=location.origin+location.pathname+"chapterimage.ashx"+`?cid=${MANGABZ_CID}&page=${MANGABZ_PAGE+1}&key=${e}&_cid=${MANGABZ_CID}&_mid=${MANGABZ_MID}&_dt=${MANGABZ_VIEWSIGN_DT}&_sign=${MANGABZ_VIEWSIGN}`)===Te.pageUrl)return;Te.pageUrl=t,y(Te.pageUrl,"text","GET","","Next")}}function d(e,t){if(e)if("Next"===t){let t=eval(e),n="";for(let e of t)n+=`<img src="${e}">`;n&&(z(Te.pager.insertP[0]).insertAdjacentHTML(de(Te.pager.insertP[1]),n),MANGABZ_PAGE+=t.length,D(e,document.title,location.origin+MANGABZ_CURL.substring(0,MANGABZ_CURL.length-1)+"-p"+MANGABZ_PAGE+"/"))}else j("html:not([dir]) > head > script:not([src])",e),D(e),le(),R(e),MANGABZ_PAGE=0,g()}function m(){var e,t="";if(DM5_PAGE===DM5_IMAGE_COUNT)M('//div[@class="view-paging"]//a[text()="下一章"]')&&y(Te.pageUrl);else{if(e||(e=""),(t=location.origin+location.pathname+"chapterfun.ashx"+`?cid=${DM5_CID}&page=${DM5_PAGE+1}&key=${e}&language=1&gtk=6&_cid=${DM5_CID}&_mid=${DM5_MID}&_dt=${DM5_VIEWSIGN_DT}&_sign=${DM5_VIEWSIGN}`)===Te.pageUrl)return;Te.pageUrl=t,y(Te.pageUrl,"text","GET","","Next")}}function f(e,t){if(e)if("Next"===t){let t=eval(e),n="";for(let e of t)n+=`<img src="${e}">`;n&&(z(Te.pager.insertP[0]).insertAdjacentHTML(de(Te.pager.insertP[1]),n),DM5_PAGE+=t.length,D(e,document.title,location.origin+DM5_CURL.substring(0,DM5_CURL.length-1)+"-p"+DM5_PAGE+"/"))}else j("html:not([dir])>head>script:not([src])",e),D(e),le(),R(e),DM5_PAGE=0,m()}function h(){var e,t="";if(unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]===unsafeWindow[unsafeWindow.MH_PREFIX23+"IMAGE_COUNT"])M('//a[./img[contains(@src, "reader-bottom-right-2.png")]]')&&y(Te.pageUrl);else{if(e||(e=""),(t=location.origin+location.pathname+"chapterimage.ashx"+`?cid=${unsafeWindow[unsafeWindow.MH_PREFIX23+"CID"]}&page=${unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]+1}&key=${e}&_cid=${unsafeWindow[unsafeWindow.MH_PREFIX23+"_CID"]}&_mid=${unsafeWindow[unsafeWindow.MH_PREFIX23+"MID"]}&_dt=${unsafeWindow[unsafeWindow.MH_PREFIX23+"VIEWSIGN_DT"]}&_sign=${unsafeWindow[unsafeWindow.MH_PREFIX23+"VIEWSIGN"]}`)===Te.pageUrl)return;Te.pageUrl=t,y(Te.pageUrl,"text","GET","","Next")}}function x(e,t){if(e)if("Next"===t){let t=eval(e),n="";for(let e of t)n+=`<img src="${e}">`;n&&(z(Te.pager.insertP[0]).insertAdjacentHTML(de(Te.pager.insertP[1]),n),unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]+=t.length,D(e,document.title,location.origin+unsafeWindow[unsafeWindow.MH_PREFIX23+"CURL"].substring(0,unsafeWindow[unsafeWindow.MH_PREFIX23+"CURL"].length-1)+"-p"+unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]+"/"))}else j("html:not([dir]) > head > script:not([src])",e),D(e),le(),R(e),unsafeWindow[unsafeWindow.MH_PREFIX23+"PAGE"]=0,h()}function b(){function e(){Te.pager.interval&&(Le=!1,setTimeout(function(){Le=!0},Te.pager.interval))}0!==Te.SiteTypeID&&Te.pager&&(void 0===Te.pager.type&&(Te.pager.type=1),void 0===Te.pager.scrollD&&(Te.pager.scrollD=2e3),void 0===Te.pager.interval&&(Te.pager.interval=500),Te.pageUrl="",fe(function(t){if("down"!=t||!Le||0==Te.SiteTypeID)return;if(5==Te.pager.type&&self!=top&&0==window.top.document.xiu_pausePage)return;let n=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,o=window.innerHeight||document.documentElement.clientHeight,a=Te.pager.scrollD;if(3===Te.pager.type)Te.pager.scrollE||(Te.pager.replaceE?Te.pager.scrollE=Te.pager.replaceE:Te.pager.scrollE=Te.pager.nextL),z(Te.pager.scrollE).offsetTop-(n+o)<=a&&(e(),U(_));else if(document.documentElement.scrollHeight<=o+n+a)if(1===Te.pager.type)e(),U(_);else if(2===Te.pager.type){let t=z(Te.pager.nextL);if(!t)return;if(Te.pager.isHidden&&J(t))return;Te.pager.nextText?t.innerText===Te.pager.nextText&&(t.click(),le()):Te.pager.nextTextOf?t.innerText.indexOf(Te.pager.nextTextOf)>-1&&(t.click(),le()):Te.pager.nextHTML?t.innerHTML===Te.pager.nextHTML&&(t.click(),le()):(e(),t.click(),le())}else 4===Te.pager.type?(e(),"function"==typeof Te.pager.nextL?Te.pager.nextL():M(Te.pager.nextL)&&y(Te.pageUrl)):5===Te.pager.type?U(w):6===Te.pager.type&&U(E)}))}function _(e){if(Te.gmxhr)GM_xmlhttpRequest({url:e,method:"GET",overrideMimeType:"text/html; charset="+(document.characterSet||document.charset||document.inputEncoding),headers:{"x-requested-with":!0===Te.xRequestedWith?"XMLHttpRequest":null,Referer:!0===Te.noReferer?null:location.href,Accept:"text/html,application/xhtml+xml,application/xml"},timeout:5e3,onload:function(t){try{v(q(t.responseText))}catch(n){console.error("[自动无缝翻页] - 处理获取到的下一页内容时出现问题，请检查！\n",n,"\nURL："+e,"\n最终 URL："+t.finalUrl,"\n返回状态："+t.statusText,"\n返回内容："+t.responseText)}},onerror:function(t){console.log("URL："+e,t),GM_notification({text:"❌ 获取下一页失败...",timeout:5e3})},ontimeout:function(t){setTimeout(function(){Te.pageUrl=""},3e3),console.log("URL："+e,t),GM_notification({text:"❌ 获取下一页超时，可 3 秒后再次滚动网页重试（或尝试刷新网页）...",timeout:5e3})}});else{const t=new XMLHttpRequest;t.open("GET",e,!0),t.overrideMimeType("text/html; charset="+(document.characterSet||document.charset||document.inputEncoding)),!0===Te.xRequestedWith&&t.setRequestHeader("x-requested-with","XMLHttpRequest"),t.setRequestHeader("Accept","text/html,application/xhtml+xml,application/xml"),t.timeout=5e3,t.onload=function(){try{v(q(t.responseText))}catch(n){console.error("[自动无缝翻页] - 处理获取到的下一页内容时出现问题，请检查！\n",n,"\nURL："+e,"\n最终 URL："+t.responseURL,"\n返回状态："+t.statusText,"\n返回内容："+t.responseText)}},t.onerror=function(){console.log("URL："+e,t.statusText),GM_notification({text:"❌ 获取下一页失败...",timeout:5e3})},t.ontimeout=function(){setTimeout(function(){Te.pageUrl=""},3e3),console.log("URL："+e,t.statusText),GM_notification({text:"❌ 获取下一页超时，可 3 秒后再次滚动网页重试（或尝试刷新网页）...",timeout:5e3})},t.send()}}function y(e,t="",n="GET",o="",a){let i,r;switch(t){case"json":r="application/json",i="application/json; charset="+(document.characterSet||document.charset||document.inputEncoding);break;case"text":r="text/plain",i="text/plain; charset="+(document.characterSet||document.charset||document.inputEncoding);break;default:r="text/html,application/xhtml+xml,application/xml",i="text/html; charset="+(document.characterSet||document.charset||document.inputEncoding)}GM_xmlhttpRequest({url:e,method:n,data:o,responseType:t,overrideMimeType:i,headers:{Referer:!0===Te.noReferer?null:location.href,"Content-Type":"POST"===n?"application/x-www-form-urlencoded":"",Accept:r},timeout:5e3,onload:function(e){try{switch(t){case"json":Te.pager.insertE(e.response,a);break;case"text":Te.pager.insertE(e.responseText,a);break;default:Te.pager.insertE(q(e.responseText),a)}}catch(e){console.log(e)}},onerror:function(t){setTimeout(function(){Te.pageUrl=""},3e3),console.log("URL："+e,t),GM_notification({text:"❌ 获取下一页失败，可 3 秒后再次滚动网页重试（或尝试刷新网页）...",timeout:5e3})},ontimeout:function(t){setTimeout(function(){Te.pageUrl=""},3e3),console.log("URL："+e,t),GM_notification({text:"❌ 获取下一页超时，可 3 秒后再次滚动网页重试（或尝试刷新网页）...",timeout:5e3})}})}function w(e){if(0==Te.SiteTypeID)return;Te.SiteTypeID=0;let t=document.createElement("iframe");t.id="Autopage_iframe",t.src=e.replace(/#.+$/,""),document.documentElement.appendChild(document.createElement("style")).textContent="iframe#Autopage_iframe {position: absolute !important; width: 100% !important; height: 100% !important; border: none !important;}";var n=document.documentElement.scrollTop||document.body.scrollTop;window.addEventListener("scroll",function(){let e=document.documentElement.scrollTop||document.body.scrollTop,o=document.documentElement.clientHeight||document.body.clientHeight,a=document.documentElement.scrollHeight||document.body.scrollHeight,i=document.documentElement.scrollTop||document.body.scrollTop,r=i-n;if(0==r)return!1;if(n=i,r>0&&e+o+10>=a&&!F("#Autopage_iframe-scroll")){let e=document.createElement("style");e.id="Autopage_iframe-scroll",e.textContent="html::-webkit-scrollbar, body::-webkit-scrollbar {width: 0 !important;height: 0 !important;} html, body {scrollbar-width: none !important;}",Te.pager.style&&(e.textContent+=Te.pager.style),document.documentElement.appendChild(e),t.contentWindow.document.querySelectorAll("#Autopage_iframe-scroll-hidden")&&t.contentWindow.document.querySelectorAll("#Autopage_iframe-scroll-hidden").forEach(e=>{e.remove()}),t.focus(),t.contentWindow.document.body&&(t.contentWindow.document.body.focus(),t.contentWindow.document.body.click())}else if(r<0&&e+o+10<=a&&F("#Autopage_iframe-scroll")&&(F("#Autopage_iframe-scroll").remove(),!t.contentWindow.document.getElementById("Autopage_iframe-scroll-hidden"))){let e=document.createElement("style");e.id="Autopage_iframe-scroll-hidden",e.textContent="html, body {overflow: hidden !important;}",t.contentWindow.document.documentElement.appendChild(e)}},!1),t.onload=function(){if(!F("#Autopage_iframe-scroll")&&!t.contentWindow.document.getElementById("Autopage_iframe-scroll-hidden")){let e=document.createElement("style");e.id="Autopage_iframe-scroll-hidden",e.textContent="html, body {overflow: hidden !important;}",t.contentWindow.document.documentElement.appendChild(e)}void 0===Te.history?GM_getValue("menu_history",!0)&&D(t.contentWindow.document,t.contentWindow.document.title):Te.history&&D(t.contentWindow.document,t.contentWindow.document.title),Te.hiddenPN||F("#Autopage_number",window.top.document)&&le()},"www.cocomanga.com"==location.hostname?document.body.appendChild(t):document.documentElement.appendChild(t)}function E(e){if(!Le)return;Le=!1;let t=document.getElementById("Autopage_iframe");t||(t=document.createElement("iframe"),t.id="Autopage_iframe",t.src=e.replace(/#.+$/,""),document.documentElement.appendChild(document.createElement("style")).textContent="iframe#Autopage_iframe {position: absolute !important; top: -9999px !important; left: -9999px !important; width: 100% !important; height: 100% !important; border: none !important; z-index: -999 !important;}"),t.onload=function(){Te.pager.loadTime||(Te.pager.loadTime=300);let e=0,n=setInterval(function(){let o=(t.contentWindow.document.documentElement.scrollHeight||t.contentWindow.document.body.scrollHeight)/10;t.contentWindow.scrollTo(0,999999),t.contentWindow.scrollTo(0,o*e),10==++e&&(clearInterval(n),v(t.contentWindow.document),Le=!0)},Te.pager.loadTime/10)},document.getElementById("Autopage_iframe")?t.src=e.replace(/#.+$/,""):document.documentElement.appendChild(t)}function v(e){Te.pager.insertP||(Te.pager.insertP=[Te.pager.pageE,5]);let t,n=X(Te.pager.pageE,e,e);if(t=5===Te.pager.insertP[1]?me(X(Te.pager.insertP[0])):z(Te.pager.insertP[0]),n.length>0&&t){Te.function&&Te.function.bF&&(n=Te.function.bFp?"string"==typeof Te.function.bF?new Function("pageE","bFp","fun",Te.function.bF)(n,Te.function.bFp,window.autoPage):Te.function.bF(n,Te.function.bFp):"string"==typeof Te.function.bF?new Function("pageE","fun",Te.function.bF)(n,window.autoPage):Te.function.bF(n)),4!==Te.blank&&5!==Te.blank&&6!==Te.blank||(n=V(n));let o=de(Te.pager.insertP[1]);if(6===Te.pager.insertP[1]){let a="";if(!1===Te.pager.insertP6Br){if(!0===unsafeWindow.insertP6Br)a+="<br/><br/>";else if(void 0===unsafeWindow.insertP6Br&&X("br",z(Te.pager.pageE)).length>10){function i(e){const t=Array.from(e.childNodes).filter(e=>e.nodeType===Node.ELEMENT_NODE||e.nodeType===Node.TEXT_NODE&&""!==e.textContent.trim()),n=t[t.length-1];return"BR"===n.tagName||!("P"!==n.tagName||!n.classList.contains("readinline"))&&"BR"===t[t.length-2].tagName}i(z(Te.pager.pageE))?unsafeWindow.insertP6Br=!1:(unsafeWindow.insertP6Br=!0,a+="<br/><br/>")}}else Te.pager.insertP6Br&&(a+="<br/><br/>");n.forEach(function(e){a+=e.innerHTML}),t.insertAdjacentHTML(o,a)}else 2!==Te.pager.insertP[1]&&4!==Te.pager.insertP[1]&&5!==Te.pager.insertP[1]||n.reverse(),n.forEach(function(e){t.insertAdjacentElement(o,e)});if(le(),void 0===Te.history?GM_getValue("menu_history",!0)&&D(e):Te.history&&D(e),""!==Te.pager.replaceE&&R(e),Te.pager.scriptT||0==Te.pager.scriptT)switch(Te.pager.scriptT){case 0:j("script",e);break;case 1:j("script:not([src])",e);break;case 2:2!==Te.pager.insertP[1]&&4!==Te.pager.insertP[1]&&5!==Te.pager.insertP[1]||n.reverse(),j(null,n);break;case 3:2!==Te.pager.insertP[1]&&4!==Te.pager.insertP[1]&&5!==Te.pager.insertP[1]||n.reverse(),j("script:not([src])",n)}Te.function&&Te.function.aF&&(Te.function.aFp?"string"==typeof Te.function.aF?new Function("aFp","fun",Te.function.aF)(Te.function.aFp,window.autoPage):Te.function.aF(Te.function.aFp):"string"==typeof Te.function.aF?new Function("fun",Te.function.aF)(window.autoPage):Te.function.aF())}else console.log(Te.pager.pageE,n,Te.pager.insertP,t,e),Te.retry?(console.warn("[自动无缝翻页] 获取主体元素失败，"+Te.retry+"毫秒 后可向下翻网页来触发脚本尝试重新获取..."),setTimeout(function(){Te.pageUrl=""},Te.retry)):console.error("[自动无缝翻页] 获取主体元素失败...")}function T(e,t=[0,"img[data-original], img[data-src]","data-original"]){return void 0===t[2]&&(t[2]="data-original"),e.forEach(function(e){0==t[0]?"IMG"===e.tagName?e.getAttribute(t[2])?e.src=e.getAttribute(t[2]):e.dataset.src&&(e.src=e.dataset.src):e.querySelectorAll(t[1]).forEach(function(e){e.getAttribute(t[2])?e.src=e.getAttribute(t[2]):e.dataset.src&&(e.src=e.dataset.src)}):1==t[0]&&("IMG"===e.tagName?e.getAttribute(t[2])?e.style.backgroundImage='url("'+e.getAttribute(t[2])+'")':e.dataset.src&&(e.style.backgroundImage='url("'+e.dataset.src+'")'):e.querySelectorAll(t[1]).forEach(function(e){e.getAttribute(t[2])?e.style.backgroundImage='url("'+e.getAttribute(t[2])+'")':e.dataset.src&&(e.style.backgroundImage='url("'+e.dataset.src+'")')}))}),e}function k(e,t){return e.forEach(function(e){e.innerHTML=e.innerHTML.replace(t[0],t[1])}),e}function M(e){e||(e=Te.pager.nextL);let t=z(e);if(t&&1===t.nodeType&&t.href&&"http"===t.href.slice(0,4)&&"#"!==t.getAttribute("href").slice(0,1)){if(t.href==Te.pageUrl)return!1;if(Te.pager.forceHTTPS&&"https:"===location.protocol){if(t.href.replace(/^http:/,"https:")===Te.pageUrl)return!1;Te.pageUrl=t.href.replace(/^http:/,"https:")}else Te.pageUrl=t.href;return!0}return!1}function A(e){if(!e){if("string"!=typeof Te.pager.nextL||null!==Te.pager.nextL.match(/^js;/i))return"";e=Te.pager.nextL}let t=z(e);return t&&1===t.nodeType&&t.href&&"http"===t.href.slice(0,4)&&"#"!==t.getAttribute("href").slice(0,1)&&t.href!=Te.pageUrl?Te.pager.forceHTTPS&&"https:"===location.protocol?t.href.replace(/^http:/,"https:")===Te.pageUrl?"":t.href.replace(/^http:/,"https:"):t.href:""}function L(e,t,n){let o=z(e),a="";return o&&o.textContent&&(o=o.textContent.replaceAll(" ",""),a=location.search?Q(t,"s")?location.search.replace(n,t+o):location.search+"&"+t+o:"?"+t+o,a=location.origin+location.pathname+a),a}function P(e,t,n){let o="";return e?("number"==typeof e&&(e=e.toString()),o=location.search?Q(t,"s")?location.search.replace(n,t+e):location.search+"&"+t+e:"?"+t+e,location.origin+location.pathname+o):o}function S(e,t,n,o=""){let a=z(e),i="";return a&&a.textContent&&(a=a.textContent.replaceAll(" ",""),i=location.pathname&&Q(t)?location.pathname.replace(t,n+a+o):location.pathname+n+a+o,i=location.origin+i+location.search),i}function I(e,t,n,o="",a="2",i){let r=e.exec(location.pathname);if(r){if(r=r.length>1?String(parseInt(r[1])+1):String(parseInt(r[0])+1),i&&parseInt(r)>parseInt(i))return""}else if(r=a,i&&parseInt(r)>parseInt(i))return"";let s="";return s=location.pathname&&Q(t)?location.pathname.replace(t,n+r+o):location.pathname+n+r+o,s=location.origin+s+location.search,s}function G(e,t,n=location.pathname,o="2",a){let i=ne(e.replace("=",""));if(i){if(i=String(parseInt(i)+1),a&&parseInt(i)>parseInt(a))return""}else if(i=o,a&&parseInt(i)>parseInt(a))return"";let r="";return r=location.search?Q(e,"s")?location.search.replace(t,e+i):location.search+"&"+e+i:"?"+e+i,r=location.origin+n+r,r}function N(e){let t=z(e),n="";return t&&(t.querySelectorAll("input[name]").forEach(function(e){n+=e.name+"="+e.value+"&"}),n=encodeURI(n.replace(/&$/,"")),t.action&&n)?t.action+"?"+n:""}function U(e){if(Te.pager.nextL)if("function"==typeof Te.pager.nextL){let t=Te.pager.nextL();if(!t||t===Te.pageUrl||"http"!==t.slice(0,4))return;Te.pageUrl=t,e(Te.pageUrl)}else if(0===Te.pager.nextL.search(/^js;/i))try{let t=new Function("fun",Te.pager.nextL.slice(3))(window.autoPage);if(!t||t===Te.pageUrl||"http"!==t.slice(0,4))return;Te.pageUrl=t,e(Te.pageUrl)}catch(e){console.error('[自动无缝翻页] - 当前网页规则 "nextL" 内 JS 代码有误，请检查：\n',Te.pager.nextL+"\n\n",e)}else M()&&e(Te.pageUrl)}function R(e,t=Te.pager.replaceE,n=Te.pager.replaceE){let o,a;if(void 0===Te.pager.replaceE&&Te.pager.nextL&&0!==Te.pager.nextL.search(/^js;/i)){let i=z(Te.pager.nextL);i.nextElementSibling&&i.nextElementSibling.tagName===i.tagName||i.previousElementSibling&&i.previousElementSibling.tagName===i.tagName?"/"===Te.pager.nextL.slice(0,1)||"./"===Te.pager.nextL.slice(0,2)||"(/"===Te.pager.nextL.slice(0,2)||"id("===Te.pager.nextL.slice(0,3)?t=n=Te.pager.nextL+"/..":(o=$(Te.pager.nextL),a=$(Te.pager.nextL,e,e)):t=n=Te.pager.nextL}if(!o&&!a&&t&&n&&(o=X(t),a=X(n,e,e)),o&&a&&0!=o.length&&0!=a.length&&o.length===a.length){for(let e=0;e<o.length;e++)o[e].outerHTML=a[e].outerHTML;return!0}return void 0!==Te.pager.replaceE&&console.log(e,o,a),!1}function D(e,t,n){Te.pageUrl&&"[object History]"===window.top.history.toString()&&(t=t||(e.querySelector("title")?e.querySelector("title").textContent:window.top.document.title),n=n||Te.pageUrl,window.top.document.Autopage_nowUrl=Te.pageUrl,-1===n.indexOf(window.top.location.protocol)&&(n=n.replace(/^https?:/,window.top.location.protocol)),window.top.history.pushState("Autopage_history",t,n),window.top.document.title=t)}function j(e,t=document,n=document.body){let o=t;e&&(t instanceof Array?(o=[],t.forEach(function(t){o=o.concat(X(e,t,t))})):o=X(e,t,t)),o.forEach(function(e){"SCRIPT"===e.tagName&&(e.src?n.appendChild(document.createElement("script")).src=e.src:n.appendChild(document.createElement("script")).textContent=e.textContent)})}function C(e){-1===e.indexOf("{")&&(e+="{display: none !important;}"),document.documentElement.appendChild(document.createElement("style")).textContent=e}function F(e,t=document){return t.querySelector(e)}function H(e,t=document){return[].slice.call(t.querySelectorAll(e))}function O(e,t,n=document){t=t||n;try{const o=n.evaluate(e,t,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null);return o.singleNodeValue&&1===o.singleNodeValue.nodeType&&o.singleNodeValue}catch(t){throw new Error(`无效 Xpath: ${e}`)}}function W(e,t,n=document){t=t||n;const o=[];try{const a=n.evaluate(e,t,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);for(let e=0;e<a.snapshotLength;e++){const t=a.snapshotItem(e);1===t.nodeType&&o.push(t)}}catch(t){throw new Error(`无效 Xpath: ${e}`)}return o}function z(e,t,n=document){if(e)return t=t||n,"/"===e.slice(0,1)||"./"===e.slice(0,2)||"(/"===e.slice(0,2)||"id("===e.slice(0,3)?O(e,t,n):F(e,t)}function X(e,t,n=document){return e?(t=t||n,"/"===e.slice(0,1)||"./"===e.slice(0,2)||"(/"===e.slice(0,2)||"id("===e.slice(0,3)?W(e,t,n):H(e,t)):[]}function $(e,t,n=document){const o=[];return X(e,t=t||n,n).forEach(e=>{const t=e.parentElement;o.includes(t)||o.push(t)}),o}function q(e){var t,n,o,a,i,r,s,l;if(e){if("HTML"!==document.documentElement.nodeName)return(new DOMParser).parseFromString(e,"application/xhtml+xml");try{t=(new DOMParser).parseFromString(e,"text/html")}catch(e){}if(t)return t;if(document.implementation.createHTMLDocument)t=document.implementation.createHTMLDocument("ADocument");else try{(t=document.cloneNode(!1)).appendChild(t.importNode(document.documentElement,!1)),t.documentElement.appendChild(t.createElement("head")),t.documentElement.appendChild(t.createElement("body"))}catch(e){}if(t){for(o=(n=document.createRange()).createContextualFragment(e),n.selectNodeContents(document.body),t.body.appendChild(o),i={TITLE:!0,META:!0,LINK:!0,STYLE:!0,BASE:!0},l=(s=(r=t.body).childNodes).length-1;l>=0;l--)i[(a=s[l]).nodeName]&&r.removeChild(a);return t}}else console.error("没有找到要转成 DOM 的字符串",e)}function B(e){window.open(e)}function V(e){if(1===Te.blank)document.head.appendChild(document.createElement("base")).target="_blank";else{if(5===Te.blank||6===Te.blank)return e||(e=X(Te.pager.pageE)),e.forEach(function(e){H('a[href]:not([target="_blank"]):not([href^="#"]):not([href^="javascript:"])',e).forEach(function(e){if("http"==e.href.slice(0,4)){const t=e.cloneNode(!0);t.target="_blank",6===Te.blank&&t.addEventListener("click",function(e){e.stopPropagation()}),e.insertAdjacentElement("afterend",t),e.remove()}})}),e;if(4===Te.blank)return e||(e=X(Te.pager.pageE)),e.forEach(function(e){H('a[href]:not([target="_blank"]):not([onclick]):not([href^="#"]):not([href^="javascript:"])',e).forEach(function(e){"http"==e.href.slice(0,4)&&(e.target="_blank")})}),e;{let t;if(2===Te.blank)t=document.body;else if(3===Te.blank){let o=me(X(Te.pager.pageE));o&&null!=o.parentElement&&(t=o.parentElement)}if(!t)return;function n(e,t){e.href&&"_blank"!=e.target&&!e.getAttribute("onclick")&&"http"==e.href.slice(0,4)&&"#"!=e.getAttribute("href").slice(0,1)&&(t.stopPropagation(),t.preventDefault(),GM_openInTab(e.href,{active:!0,insert:!0,setParent:!0}))}t.addEventListener("click",function(e){if("A"===e.target.tagName)n(e.target,e);else{let t=e.path||e.composedPath();for(let o=1;o<t.length-4;o++)if("A"===t[o].tagName){n(t[o],e);break}}})}}}function Z(e,t=0,n=-1){setTimeout(()=>{X(e).forEach(function(e){const t=e.cloneNode(!0);0!=n&&1!=n||null!=t.getAttribute("onclick")&&t.removeAttribute("onclick"),0!=n&&2!=n||t.addEventListener("click",function(e){e.stopPropagation()}),e.insertAdjacentElement("afterend",t),e.remove()},t)})}function J(e){return null===e.offsetParent}function Y(){return/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|MicroMessenger|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i.test(navigator.userAgent)||window.screen.width<500&&window.screen.height<800}function K(){Se=!0}function Q(e,t="p",n=!0){switch(t){case"h":t=location.href;break;case"p":t=location.pathname;break;case"s":t=location.search}if(e instanceof RegExp){if(e.test(t))return!0}else if(n&&(e=e.toLowerCase(),t=t.toLowerCase()),-1!=t.indexOf(e))return!0;return!1}function ee(e){return document.title.indexOf(e)>-1}function te(e){if(!e){if(!Ae.pager)return!1;if(void 0===Ae.pager.type||1===Ae.pager.type||3===Ae.pager.type||6===Ae.pager.type)"string"==typeof Ae.pager.nextL&&null===Ae.pager.nextL.match(/^js;/i)&&(e="n"),Ae.pager.pageE&&(e=e?"n,p":"p");else if(2===Ae.pager.type||5===Ae.pager.type)"string"==typeof Ae.pager.nextL&&null===Ae.pager.nextL.match(/^js;/i)&&(e="n");else if(4===Ae.pager.type)return!1;if(!e)return!1}const t=e.split(",");for(let e=0;e<t.length;e++)switch(t[e]){case"n":if(!z(Ae.pager.nextL))return!1;break;case"p":if(!z(Ae.pager.pageE))return!1;break;case"i":if(!z(Ae.pager.insertP[0]))return!1;break;case"r":if(!z(Ae.pager.replaceE))return!1}return!0}function ne(e){var t,n;let o=window.location.search.substring(1).split("&");for(t=0;t<o.length;t++)if((n=o[t].split("="))[0]==e)return n[1];return""}function oe(e){function t(){return-1!=GM_getValue("menu_disable").indexOf(location.hostname)}switch(e){case"check":return t();case"add":!function(){if(t())return;let e=GM_getValue("menu_disable");e.push(location.hostname),GM_setValue("menu_disable",e),location.reload()}();break;case"del":!function(){if(!t())return;let e=GM_getValue("menu_disable"),n=e.indexOf(location.hostname);e.splice(n,1),GM_setValue("menu_disable",e),location.reload()}()}}function ae(){GM_getValue("menu_pause_page")&&0!==Te.SiteTypeID&&(Te.pager&&5==Te.pager.type&&(window.top.document.xiu_pausePage=Le),document.body.addEventListener("dblclick",function(){Le?GM_notification({text:"❌ 已暂停本页 [自动无缝翻页]\n    （再次双击可恢复）",timeout:2e3}):GM_notification({text:"✅ 已恢复本页 [自动无缝翻页]\n    （再次双击可暂停）",timeout:2e3}),document.querySelector("#Autopage_number")?document.querySelector("#Autopage_number").shadowRoot.querySelector("#Autopage_number_button").click():(Le=!Le,Te.pager&&5==Te.pager.type&&(window.top.document.xiu_pausePage=Le))}))}function ie(){if(F("#Autopage_customRules"))return;let e=re(GM_getValue("menu_customRules",{}));"{}"==e&&(e="{\n    \n}"),document.documentElement.insertAdjacentHTML("beforeend",'<div id="Autopage_customRules" style="display: initial !important;position: fixed !important;z-index: 9999999 !important;"></div>');let t=F("#Autopage_customRules").attachShadow({mode:"open"});t.innerHTML='<style>* {font-family: system-ui !important;}</style><div style="left: 0; right: 0; top: 0; bottom: 0; width: 100%; height: 100%; margin: auto; padding: 25px 10px 10px 10px; position: fixed; opacity: 0.95; z-index: 9999999; background-color: #eee; color: #222; font-size: 14px; overflow: scroll; text-align: left;-webkit-touch-callout: text !important;-webkit-user-select: text !important;-khtml-user-select: text !important;-moz-user-select: text !important;-ms-user-select: text !important;user-select: text !important;">\n<h3 style="font-size: 22px;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"><strong># 自定义翻页规则（优先级最高，会覆盖同名的外置翻页规则）-【将规则插入默认的 <code>{ }</code> 中间】</strong></h3>\n<details><summary style="cursor: pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"><kbd><strong>「 点击展开 查看规则示例 」（为了避免需要的时候还要找，我干脆把常用规则都一股脑塞进去了）</strong></kbd></summary>\n<ul style="list-style: disc; margin-left: 35px;">\n<li>翻页规则为 JSON 格式，因此大家需要多少<strong>了解一点 JSON 的基本格式</strong>（主要就是末尾逗号、转义、双引号等）。</li>\n<li>具体的翻页规则说明、示例，为了方便更新及补充，我都写到 <strong><a href="https://github.com/XIU2/UserScript/issues/176" target="_blank">Github Issues</a></strong> 里面了。</li>\n<li>脚本会自动格式化规则，因此<strong>无需手动缩进、换行</strong>，只需把规则<strong>插入默认的 { } 中间</strong>即可。</li>\n</ul>\n<pre class="notranslate" style="white-space: pre-wrap;user-select: auto;">\n// 下面示例是把所有规则都塞进去了，但实际上大部分都用不上，大多数网站只需要像第一个 "aaa" 这样的规则（下方 示例一 中 url、replaceE、scrollD 均可按需省略）：\n\n// "aaa"       是规则名，唯一，因为 自定义翻页规则 优先级最高，所以会覆盖同名的 外置翻页规则\n// "host"      是域名，支持正则表达式（如 示例四），也可以像这样 示例三 那样写多个域名或正则表达式（当然也可以混用），如果省略，则默认匹配所有域名（会对所有域名匹配 url 规则判断，可以当成一个简单的外置/自定义通用规则的方案）\n// "url"       是用来控制哪些网站中页面适用该规则，省略后代表该规则应用于全站（如果不知道写什么，那么就写 return fun.isPager() 这样脚本会默认自动匹配当前网站下存在 nextL 及 pageE 元素的网页，大部分网站是没问题的，如果改为匹配 replaceE 或者其他组合，那么请去上面的 Github Issues 里的 内置函数 中查看具体使用方法；另外，url 规则中可通过操作 rule 这个对象变量来修改当前网页实际应用的规则，如 rule.pager.pageE=\'#a\' 具体示例也见 Github Issues 里）\n\n// "nextL"     是用来指定含有下一页地址的元素选择器（CSS 或 XPath 都行，一般都是 &lt;a&gt; 元素）\n// "pageE"     是指定要从下一页获取的元素选择器（也就是网页主体内容），并将其插入当前网页中同样元素的末尾\n// "replaceE"  用于将当前网页中的页码元素替换为下一页的页码元素选择器（这样才能无限翻页下去），省略后将会自动判断是替换 nextL 元素自身还是 nextL 元素的父元素（当 nextL 元素后面或前面有其自身 &lt;a&gt; 元素的相邻兄弟元素时脚本会替换其父元素，反之没有相邻兄弟元素则替换其自身，仅限模式1/3/6，且 "js;" 开头的 nextL 规则除外），值为空 "" 时则完全不替换\n// "scrollD"   是用来指定触发翻页的滚动条与底部之间的距离，当滚动条底部距离网页底部之间的距离等于或小于该值时，将触发翻页，因此值越大就越早触发翻页，访问速度慢的网站需要调大，可省略(记得移除上一行末尾逗号)，省略后默认 2000\n\n// "inherits"  是继承标识，当你只需要对某个外置规则中 增删改 部分规则内容时（比如只是修改域名），那么就可以像下面第二个 "aaa" 规则一样写一个同名规则，规则内只需要有要修改的 host 内容，以及 inherits 标识，这样脚本就会将这个自定义翻页规则中的 host 覆盖掉外置翻页规则中的 host，而该翻页规则内的其他规则内容则不变。即更灵活了，无需每次为了修改部分规则而去复制全部规则了，也不用担心我后续更新这个外置规则后，你还需要再次复制一遍来修改。。。\n\n{\n    "aaa": {\n        "host": "aaaa",\n        "url": "return fun.isPager()",\n        "pager": {\n            "nextL": "xxxx",\n            "pageE": "xxxx",\n            "replaceE": "xxxx",\n            "scrollD": 2000\n        }\n    },\n    "aaa": {\n        "host": "cccc",\n        "inherits": true\n    },\n    "bbb": {\n        "host": ["bbb1.com", "bbb2.com"],\n        "url": "/^\\\\/s$/",\n        "style": ".aaaa {xxx: xxx}（如果只是为了单纯屏蔽隐藏某些元素，那么这里只需要写 CSS 选择器即可，脚本会自动在末尾加上 {display: none !important;} 的）",\n        "blank": 3,\n        "hiddenPN": true,\n        "history": false,\n        "thread": true,\n        "iframe": true,\n        "pager": {\n            "type": 1,\n            "nextL": "id(\'page\')//a[contains(text(),\'下一页\')] || id(\'page2\')//a[text()=\'下一页\']",\n            "pageE": "aaa",\n            "insertP": [".bbb",3],\n            "replaceE": ".page",\n            "scriptT": 1,\n            "forceHTTPS": true,\n            "interval": 500,\n            "scrollD": 2000\n        },\n        "function": {\n            "bF": "return fun.src_bF(pageE, [0,\'img[data-src]\',\'data-src\'])",\n            "bFp": "关于上面这个解决图片懒加载的 bF，如果你要选择的图片是 img[data-original] 或 img[data-src]，那么是可以直接省略为：return fun.src_bF(pageE)",\n            "aF": "document.body.appendChild(document.createElement(\'script\')).textContent = \'xxx\'"\n        }\n    },\n    "这里也可以用中文": {\n        "host": "/\\\\.ccc\\\\.com/",\n        "url": "fun.isUrlC(); return (fun.lp() == \'/\' || fun.indexOF(\'/s\') || fun.isMobile())",\n        "pager": {\n            "type": 2,\n            "nextL": "#autopbn",\n            "nextText": "下一页",\n            "nextTextOf": "下一页",\n            "isHidden": true,\n            "interval": 1000,\n            "scrollD": 2000\n        }\n    }\n}\n</pre></details>\n<details><summary style="cursor: pointer;overflow: hidden;text-overflow: ellipsis;white-space: nowrap;"><kbd><strong>「 点击展开 查看所有规则 」（可按 Ctrl+F 搜索规则，脚本内置的通用规则因格式限制无法列出）</strong></kbd></summary>\n<pre id="Autopage_customRules_all" class="notranslate" style="overflow-y: scroll; overflow-x: hidden; height: 500px; word-break: break-all; white-space: pre-wrap;user-select: auto;"> </pre></details>\n\n<textarea id="Autopage_customRules_textarea" style="min-width:95%; min-height:70%; display: block; margin: 10px 0 10px 0; white-space:pre; overflow:scroll; resize: revert; text-transform: initial;" placeholder="留空等于默认的 {}，请把规则插入 {} 之间"></textarea>\n<button id="Autopage_customRules_save" style="margin-right: 20px;">保存并刷新</button><button id="Autopage_customRules_cancel">取消修改</button>\n</div>',document.documentElement.style.overflow=document.body.style.overflow="hidden",F("#Autopage_customRules_textarea",t).textContent=e,F("#Autopage_customRules_all",t).textContent=re(Me),F("#Autopage_customRules_save",t).onclick=function(){let n=F("#Autopage_customRules_textarea",t);e=n.value,e||(e="{}");try{e=JSON.parse(e),GM_setValue("menu_customRules",e),location.reload()}catch(t){const o=t.message.match(/at position (\d+)/),a=parseInt(o[1]);console.error("自定义规则存在格式错误：\n"+t.message+"\n错误位置为该区域中间：\n------\n"+e.slice(a<30?0:a-30,a+29)+'\n------\n\n常见格式错误：\n1. 逗号：每组 { } 中的最后一个值末尾不能加逗号\n2. 转义：如果正则表达式中含有转义符 \\ 那就要对其再次转义为 \\\\\n3. 引号：规则中冒号左右的内容都需要加上双引号，如果内容中含有双引号则需要对双引号转义（即 \\" 这样），或改为单引号'),window.alert("自定义规则存在格式错误：\n"+t.message+"\n错误位置为该区域中间：\n------\n"+e.slice(a<30?0:a-30,a+29)+'\n------\n点击【确定】后脚本会为你定位并选中编辑框中格式错误的文本（部分格式错误定位可能不太精确，但错误一定是在选中文本的附近，如果是选中了行首的空格，则说明格式错误来自上一行末尾逗号）\n\n常见格式错误：\n1. 逗号：每组 { } 中的最后一个值末尾不能加逗号\n2. 转义：如果正则表达式中含有转义符 \\ 那就要对其再次转义为 \\\\\n3. 引号：规则中冒号左右的内容都需要加上双引号，如果内容中含有双引号则需要对双引号转义（即 \\" 这样），或改为单引号'),n.selectionStart=a-1,n.selectionEnd=a,n.focus()}},F("#Autopage_customRules_cancel",t).onclick=function(){document.documentElement.style.overflow=document.body.style.overflow="",F("#Autopage_customRules").remove()}}function re(e){return JSON.stringify(e,null,4).replace(/(: \[)([\s\S]*?)(\],?\n)/g,(e,t,n,o)=>t+n.replace(/\n/g,"").replace(/\s{4}/g,"")+o)}function se(e){function t(){Object.defineProperty(Pe,"now",{set:function(e){this._now=e,n&&(n.textContent=e)}})}if(0===Te.SiteTypeID||Te.hiddenPN||Te.pager&&5==Te.pager.type&&self!=top)return void(F("#Autopage_number")&&F("#Autopage_number").shadowRoot&&(F("#Autopage_number_button",F("#Autopage_number").shadowRoot).style.display="none"));let n;switch(F("#Autopage_number")&&F("#Autopage_number").shadowRoot&&(n=F("#Autopage_number_button",F("#Autopage_number").shadowRoot)),e){case"add":!function(){if(n)return void("none"===n.style.display&&(n.style.display="flex"));let e=`<div id="Autopage_number_button" title="1. 此为【当前页码】（仅指脚本翻了多少页，并非实际页码，该页码可在脚本菜单中关闭）&#10;&#10;2. 鼠标【左键】点击此处可【临时暂停翻页】（再次点击可恢复）&#10;&#10;3. 鼠标【右键】点击此处可【回到顶部】">${Pe._now}</div>`;document.documentElement.insertAdjacentHTML("beforeend",'<div id="Autopage_number" style="display: flex !important;position: fixed !important;z-index: 9999998 !important;"></div>');let o=F("#Autopage_number").attachShadow({mode:"open"});o.innerHTML="<style>#Autopage_number_button {top: calc(75vh);left: 0;width: 32px;height: 32px;padding: 6px;display: flex;position: fixed;opacity: 0.3;transition: .2s;z-index: 9999998;cursor: pointer;user-select: none;flex-direction: column;align-items: center;justify-content: center;box-sizing: content-box;border-radius: 0 50% 50% 0;transform-origin: center;transform: translateX(-8px);background-color: #eee;-webkit-tap-highlight-color: transparent;box-shadow: 1px 1px 3px 0px #aaa;color: #000;font-size: medium;font-family: system-ui;} @media (any-hover: none) {#Autopage_number_button:active {opacity: 0.8;transform: translateX(0);}}@media (any-hover: hover) {#Autopage_number_button:hover {opacity: 0.8;transform: translateX(0);}}</style>"+e,Te.pager&&5==Te.pager.type&&(window.top.document.xiu_pausePage=Le),n=F("#Autopage_number_button",o),n.onclick=function(e){return Le?(this.style.color="#FF5722",this.style.fontStyle="italic"):this.style="",Le=!Le,Te.pager&&5==Te.pager.type&&(window.top.document.xiu_pausePage=Le),e.preventDefault(),e.stopPropagation(),!1},n.oncontextmenu=function(e){return window.scrollTo(0,0),e.preventDefault(),e.stopPropagation(),!1},t()}();break;case"del":n&&(n.style.display="none");break;case"set":t()}}function le(e=1){Pe.now=Pe._now+e}function ce(t,n){!0===t?GM_setValue(n,!1):GM_setValue(n,!0),"menu_page_number"===n?(se(!0===t?"del":"add"),e(),0!==Te.SiteTypeID&&Te.pager&&(void 0===Te.pager.type&&(Te.pager.type=1),void 0===Te.pager.scrollD&&(Te.pager.scrollD=2e3),void 0===Te.pager.interval&&(Te.pager.interval=500))):location.reload()}function pe(){let e=0;for(let t in ke)ke[t].SiteTypeID=++e}function ue(e){for(let t=0;t<e.length;t++)if(-1!=location.hostname.indexOf(e[t]))return!1;return!0}function ge(e){if(!e)return"";let t=document.cookie.split(";");e+="=";for(let n=0;n<t.length;n++){let o=t[n].trim();if(0==o.indexOf(e))return o.substring(e.length,o.length)}return""}function de(e){switch(e){case 1:return"beforebegin";case 2:return"afterbegin";case 3:case 6:return"beforeend";case 4:case 5:return"afterend"}}function me(e){if(0===e.length)return;let t=e.pop();return"SCRIPT"===t.tagName||"STYLE"===t.tagName||"LINK"===t.tagName?me(e):t}function fe(e){var t=document.documentElement.scrollTop||document.body.scrollTop,n=e||function(){};setTimeout(function(){let e=document.documentElement.scrollTop||window.pageYOffset||document.body.scrollTop,o=window.innerHeight||document.documentElement.clientHeight;0===e&&document.documentElement.scrollHeight===o&&C(`html, body {min-height: ${document.documentElement.scrollHeight+10}px;}`),window.addEventListener("scroll",function(e){var o=document.documentElement.scrollTop||document.body.scrollTop,a=o-t;if(0==a)return!1;n(a>0?"down":"up",e),t=o},!1)},1e3)}function he(){var e;history.pushState=(e=history.pushState,function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("urlchange")),t}),history.replaceState=(e=>function(){var t=e.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("urlchange")),t})(history.replaceState),window.addEventListener("popstate",()=>{window.dispatchEvent(new Event("urlchange"))})}let xe=["https://github.7boe.top/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://github.starrlzy.cn/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://cdn.jsdmirror.com/gh/XIU2/UserScript/other/Autopage/rules.json","https://js.cdn.haah.net/gh/XIU2/UserScript/other/Autopage/rules.json","https://gh.akass.cn/XIU2/UserScript/master/other/Autopage/rules.json","https://raw.kkgithub.com/XIU2/UserScript/master/other/Autopage/rules.json","https://fastly.jsdelivr.net/gh/XIU2/UserScript/other/Autopage/rules.json","https://gh-proxy.com/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://hk.gh-proxy.com/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json"];const be=["https://userscript.h233.eu.org/other/Autopage/rules.json","https://userscript.xiu2.xyz/other/Autopage/rules.json","https://bitbucket.org/xiu2/userscript/raw/master/other/Autopage/rules.json","https://jsd.onmicrosoft.cn/gh/XIU2/UserScript/other/Autopage/rules.json","https://wget.la/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://cdn.wget.la/gh/XIU2/UserScript/other/Autopage/rules.json","https://ghfast.top/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://ghproxy.cfd/https://raw.githubusercontent.com/XIU2/UserScript/master/other/Autopage/rules.json","https://raw.dgithub.xyz/XIU2/UserScript/master/other/Autopage/rules.json"],_e=[".smzdm.com","stackoverflow.com"],ye=[".steampowered.com",".zcool.com.cn"];var we=[["menu_disable","✅ 已启用 (点击对当前网站禁用)","❌ 已禁用 (点击对当前网站启用)",[]],["menu_thread","帖子内自动翻页 (社区类网站)","帖子内自动翻页 (社区类网站)",!0],["menu_page_number","显示当前页码及点击暂停翻页","显示当前页码及点击暂停翻页",!0],["menu_pause_page","左键双击网页空白处暂停翻页","左键双击网页空白处暂停翻页",!1],["menu_history","添加历史记录+修改地址/标题","添加历史记录+修改地址/标题",!0],["menu_rules","更新外置翻页规则 (定期自动)","更新外置翻页规则 (定期自动)",{}],["menu_customRules","自定义翻页规则","自定义翻页规则",{}]],Ee=[],ve=0,Te={SiteTypeID:0},ke,Me,Ae,Le=!0,Pe={now:1,_now:1},Se=!1,Ie="",Ge=location.pathname,Ne;xe.push(...be),window.autoPage={lp:()=>location.pathname,indexOF:Q,isMobile:Y,isUrlC:K,isPager:te,isTitle:ee,blank:V,getAll:X,getOne:z,getAllXpath:W,getXpath:O,getAllCSS:H,getCSS:F,getNextE:A,getNextEP:L,getNextSP:P,getNextEPN:S,getNextUPN:I,getNextUP:G,getNextF:N,getSearch:ne,getCookie:ge,insStyle:C,insScript:j,cleanuEvent:Z,src_bF:T,xs_bF:k,pageNumIncrement:le},Ne="undefined"!=typeof GM_info?GM_info.scriptHandler:"undefined"!=typeof GM&&void 0!==GM.info?GM.info.scriptHandler:"";for(let e=0;e<we.length;e++)null==GM_getValue(we[e][0])&&GM_setValue(we[e][0],we[e][3]);"function"!=typeof GM_openInTab&&(GM_openInTab=B),"function"!=typeof window.structuredClone&&(window.structuredClone=function(e){return JSON.parse(JSON.stringify(e))}),a(),e(),Ee.length<4||(n(),GM_getValue("menu_thread")||Te.thread&&(Te={SiteTypeID:0},Pe.now=1),GM_getValue("menu_page_number")?se("add"):se("set"),ae(),null!=Te.blank&&setTimeout(V,1e3),Se&&(Ie=location.href,void 0===window.onurlchange&&he(),1===ve?window.addEventListener("urlchange",function(){Ge=location.pathname,!1===Te.history||window.top.document.Autopage_nowUrl!==location.href?Ie!=location.href&&(Te.pager&&5==Te.pager.type&&(self!=top?window.top.location.href=location.href:F("iframe#Autopage_iframe")&&F("iframe#Autopage_iframe").remove(),Le=!0),Ie=location.href,Te={SiteTypeID:0},Pe.now=1,e(),null!=Te.blank&&setTimeout(V,1e3),Te.style&&C(Te.style),GM_getValue("menu_thread")||Te.thread&&(Te={SiteTypeID:0},Pe.now=1),GM_getValue("menu_page_number")?se("add"):se("set"),ae(),b()):Ie=location.href}):2===ve?window.addEventListener("urlchange",function(){Ge=location.pathname,Ie!=location.href&&setTimeout(function(){Ie=location.href,Te={SiteTypeID:0},Pe.now=1,s(),GM_getValue("menu_thread")||Te.thread&&(Te={SiteTypeID:0},Pe.now=1),Te.style&&C(Te.style),GM_getValue("menu_page_number")?se("add"):se("set"),ae(),b()},500)}):3===ve&&window.addEventListener("urlchange",function(){Ge=location.pathname,Ie!=location.href&&(Ie=location.href,Te={SiteTypeID:0},Pe.now=1,ke.flarum.url(),Te.style&&C(Te.style),GM_getValue("menu_page_number")?se("add"):se("set"),ae(),b())})),Te.style&&C(Te.style),b())})();
// ==UserScript==
// @name         音视频增强脚本：无极调速|倍速快学|快乐刷剧|视频下载|画面截图等「适用大部分网站」
// @name:en      Audio and Video Enhancement Script: Supports infinite speed adjustment, video downloading, and more.
// @namespace    https://github.com/xxxily/h5player
// @homepage     https://github.com/xxxily/h5player
// @version      4.3.4
// @author       ankvps
// @icon         data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAADAFBMVEUAAAAZo+IiqNkXlMx+xs+Kw947ueyq5fAomMlTude76OnJ5uo6o8BrvuB0u9SIzNdFo8sjpcIom7IurODa698PjcBW0uxAoMocp90xjsR+v9zS2c3j6+UznbP5//uYtK3/7dNHn9DL9PbM9vYDqe0Cq+sDqO0Ipu0Cqu8Eqe8CqeYGpvAMpuMArun/////+//7//////0Dp+v/+P8ArPUHqOr/+/P/+/cBrPDs////+PsCquj//voBqfP4/f/3//4Brvj1//cJqOX8/P4Bqvfw//8ArfsBrub//Pv+/vICp/cBrPMAr//5/vcDpf8KpekGqd0Bqv/y//oNp90BqfsFq+ALpOABp/L8//v//+jy//L0//8LptgCrez/9vYBsO4BoOL///YGpfYPoPYBm+YBofEAnuoBleEBruEAsuoHpfrl//8CrdsBousHquMNot0EjdoNnNn0+/8BnPUMpO7/++0Qo+cBm9wYoOA+tNAFltAAovf5/u/A7/8CrvL//+4Amu2c1OMCldcBn8gBnvwAlehxvcoBotoFqtICntL/9P3T9fAAtP8BlvFmvszd//sBs/QJpPIUnu0CseQAtPm+6fCj1uZLq9PR+/z+9u0BpuGx8/3s+vvS8vu89Pem5fcFjPRz0eoaoNgElMLa+Psfsu+y5OgEkcwQnv8Bl/zi+frG7/lHxu+J1OgAtuH//Nx1ytg6sNgDh8O68P7G+/uy6PKV2vA+t+kDsdf++OUjmd8AuOwtuOJkxdotodX6+P3p//eB3fde1+1ixe2k8Pem2fAVl+cZruRavdxwu9oGq8dMu+tc0uAiltXQ6vdMxtxAu9xSt9UboM6+/P4AvPn/7/Vxv+cQn76W5/p/ye2P5ecPlN4XrNen1dUnq8z/7/4Gi+gpqtw9n9Auqeuz0OdfteRHt8UDhbSj3+iLxuM7nuEiutFarLnt7/oTpfO+19mJucYelsEHnq0amPXp+udfoOd54OHN7N0Eus+u9+/N2PGexO8omu4fxL8ZpaEAzOwL7fbjAAAAJHRSTlMAzsj+hQSzWf6dcCf8fVE4n/36vRP149vMupcJBOnihEkHl8Lv/rxjAAAdpElEQVR42ryWW2jTUBiAq9bpNqfzfr8np0nXiRwSKJRAqCGDtjYpSdeXjo4uXTtZb3RMWaHU1aHiRMV5YWq9TlGmIAw3mIo3vItXRJz6oCiIIKgvgj54UvG2qe3ysO+hTR7Of76c85///LrBTFs0T6dbXFpSotcXFxVNHa0ya5QmZuUGTy0qKtbrS0pKF6vBp+nyMXfBknFl5TPHj2k51hJHRKNRqTqHaRhU55CiCBQDhRozfmZ52bilC+blFZg4o+vqgJJOOl0OWTBAiAGAWYyasKhjMQAFrt3hTKaVgatdMybmmX5S+flYuoJiGVnmPB7S42EoBIFrgkBD7YwHwXA852G5ivrY+fJJun8zds6ETG1dpFEURa8kea0EYU6ZEQRAYMQwwACCMOcg7BYJRUNBG611tZkJc8b+8/Nnx8IdPsldFXK7RTQmYkEYjVYjXaEJGg01WhARFEx0uyNVbqmmoz42e9I/dn++yLucdJ/PoS4dAo9YVUwmwaAJAWWjVQW32yk7RbEOXx/tdMni/Il/y/450zf2pzg/qKRkjkXwvJnGMIgCNRlwTaCBBgMEGG3meRbByVQl8Msd/Znpc+YO2f6FcbY5Lp5qoJxNJkGgaQzHGY5iGJvf7yerqiqHTVUViYbaGIbi7DiOQVoQTE1OquGUGG9m4wsHJ0LZIchAmsZxsgLQKIUg+njyB5hGyB+o0QBaClBB4jgNSQYeKhu0/9NZgsYIkgQAx1ASDwJoAhsEiosDQJIEAe389D/yoHRKRiCxEYQUMlNKf0uA2Rv7o4IZGzHM4Wj/xtm/0kAfkzvc9AguAUm7t9pi+p8FaHLAxZ3CR1IAP8W5ApN/FKTiTIfT34ADbMQAeIPf2ZEp1unU23HcmFofTVLEsE7WzydtBgRF0jW1Y8blTsCMYF11X6XTgxcy/5+HU6sA7nFW9kl1sRnqSSjpClhFH9VkKCR3JFEF3VVR9NTY2OiVoCYFQxPlc1vru0rUHdjMbAg5ZBNNFCCASuX3iiIIOCq2VREjpkWAoE2yI7TBs1ndg7Ig5XWznIDlF6Dtrl84EOhP0wKgD+BYt8gFy1ARKm+jRDfFCiBf5qL9Jm02G2f7fscwqM9BT9qSAAgsEmDbisfqps1MeJAAT4O8+QcBZs21m2qDI0mmalNzczPUtAeAZlnRyyVmTtON++C0eUUkAPOtGpoKWnDUInV2dkZC7k6jkYaoaU0BOHwBSPOU6LU5x5fqSsa4ZEmi+PzSkMBJl9qrhusVJRyuDwSSsos3E0hCAzwlSbILVQJ9i4Pzein+v6ce3dMoRcOKElwdXXPtbHd3d29376s1A8GgUh8mzIAgQK4sqD9EwQJeztGiRwLtOQH872UPRYQ4MrCTitJmPntj7ZVsz+5NOY7szp65cX9rfVvAbEaGqH8BOISAKcgA5ynvd4HiVpYyRlDbSA6Z3RKhDUQqRdneN9fWtmzovfhw98M9Zy5eur5L5fXlgxev9GzZvef6g9agUlOT9ISMqxyPGh5U2wsoaWrLa6TY1mJdUdzAoBfIkUPLFbRsD0WaZAff2Xr+ZM+W7M77N+Obk55wOsCvW5dIJJKdL94833HhxJne1tWWdjnqxbayNc9MTAECHIzgFEO3FiEBwJgtVmyoALDJqe2N3jXNSrD3Yja79n48EQgfOJ5QVsfSfFJZHQwkk+mgUnv6ZLbnya24mKozfZ58p66dFcgCBDCrxcwY4kW6qVHImI1WMEQAgIb+ijq/L3T45ZcT2bs3b24MJ9LpT1977z1+2226dfDx9d6ubWklEYDrvbf29+x/89HSHh//oMLF0FiBAiSMTtWNRgIpJGAbmgONGwiXKxC9fST75sPAgQNt6z/fPblj35G9K5Y9nLxz+fKVe/ftP3nuXWbgQCIRv3/0xNO+zetkX2hNIb0daQNIwAOrkUA1Zv/GiZ19NXHFcQDv8tIHX9qn/gGEJATvzBDIZCaTjTAkg1kkgiGJhAQhIAFKQcAlLLI0rAJFWhYREMsWIWxio1QsLijFrZXaVi1udSvWU1tta9dLkdba5YR+z0lOZuaemU9+d+7cmYEVYEPAMxG+efzgQPnd0+7J6W6rvfCr/f2VBAZsRo8XGfn6Bsj2em0Ak+65fWaquv14+fT2060fBIVH6qajxb4A2KEBnGD/tS8sAkID/wHAStEGPBgk7t+17ohKuPReCwEABhCb0WhBjq55C1XNWkgEwKCNg1+WJ5aUvnj58PuvVwenirg+AOLZgRDg9xTg77NKyHlDxmX54IPmkurVe/NijE24mUaB2UHzkaPpY7SZjygkKEpk4tlMY8dUWu/WW/P32i5Zs3gsXwAb/wQIgyFgYwr3qVmHZ4gV8bTTDx7PPSz/9eCVh11SCm9qwumdFEbUmGb5La9clmooIDXLNVIplW0BYNd2uza8e0Xl6KF22UqxgQuff4TC/wCkbAwM5cg4EPDqWhaHE6Jjw+vYk8OL2OL69Dfjz0+/8t3o3fbIlcUdForSKBQoqqBwldzkbMJ3vXIZMAIVKo1hJAoEMTscQPDJpS0RubtHdq4oSlkzELpeVrsph/MfUztbF8IRsgJffe55+Azvx2OzlH5LgHR21EDZN9q4X767tyY3P+lQFwbMZhQeBwGYBNGoJCZj3qZtIEagAihAHWakQkU7aAAqb3ZG9l5p+/bulemynJ6q87s3Cf8V4KdksXnw1U/g8889HxgQwPkDAAPHRz5bdDDtVMNHV4fXlI2fBojJyAhwBMGwmL8CUBRDaZQkcZsNt5Cg78yWQntZV+shV936Dcoccb6/jwDRAmDlHwBdvXJ95MCFx/euu17rPDsK5ixej7EAV6lUVAyq+CsAmlQkSdkYpml2DtAzxcm5rzfsyukNT/7wgHpH0L8DVi4AWP8EgEmOToksG5x42H6+7GwfguCzOAYWgtmYZwEAg6UBAP4ACG6ZI2aK38x6ubKtNE50IDQ82FcA668VqE1ftyPri8PbreqM8VFkVkADx9Gx/ttuGgj+DqC8AkCPtvWPtbXQZAVJz7i0xfOgo9yQYmgO4fwPAPzekfNa8trW+w9+tb7kBqSAkh7dn1ME3zSebMXkCuTZClgoR8fVixcvWn9+RGOzFTVnS4O779BDVnVKebT4fwBgxCm6zkd5p1LrixuQOQ0hHessSoyPirAOv9RCxzwDwDDgODFclLU1wtDduTeTbKL6hrKCbz1uLROtt7OWWQEe98ntojrjbeKMvbe9H0zM4uhnndVh0bEydRVveFMehmjwRQD6BJB58lZ0VWRY8rs9Wd0zhNFL7YuvKr3W1/FgoCSLtSwAiwXbw6uR//qwi4+7iqvaHwLgzFa0Xs1V56xTyuBTCC/jiJnSkAo5AwGYSgDHBIK2DZcfrM1nRae+2WOf/qzAI0A7ErRXOvpWfK/dujxAfb1SxPIziMXHrUd2/rylZOo7Fd/ocbx/JTG1LCC2VhYWz3alu21ShQUHeQe2YSSjl1QgxN6iOGVq6ur4lNc2VCWdkMLLsvftEu26yh+37JCFLAugVIoggCsOTig/OtZpTZikVPxso+NIaURzOttPyOHVsTnWYzazQhCzAAAkY5LwwZ4pa35+9Op0g3atsirh2h4MR7Hb1qju91o3ha1a3jAUwcBpgROc+8VHX2YkXGrE4J9liHO5VVxDHY+t023kqZPuULREoMHyTi0A9BBQOWUIC+cGpnPCQoPU4kNugCtQ+Qelrx/f1VHKWd5JGKILYUGA0N/V8ENxu30S0xASC5l5wlUVro3g5QQGsoLVhdtstASXUk8DEiO1KbpQVlxIsDrxeiuwMGawL7e6enDkeNAyARv9/eJgJ9jHHdu39NaOFggIumIOfVRcq42UcXXp0clxEYkNDJ1JSSn3h0sAx3huZImWF7pyg9AgyxiqAXiBkzSd7c0ab/wiicPhBvkOYNdxhbGigLSkjtELudV7MaNAYuZXgH0XXCmyWiG8Qx+oT7pOGPUSFazAEgCRdnTnbE3hBijjwsS5w59KAcYYLdhYb4Ku5VhGGnzR7zuAZ4Dzc1xAQkLLo6JEVxvGxCAoggDp4C123Ab/ulUbBoqH2zCvQqEyY3m7lwBo44phmZglUrIiVt1a0QcQlYbRYI2byhOPVB6ywztb3wFcsTAuNlZX+k7je1lZX+5E+AoEowkplnluOFlZ1xNZ5Rq+g2o8JILQ4HeAEwIUeqzhpaL8HbWrwtQZX7sxFR8lcLkZ3V5eOLXz48SgIA7XDw4tXwHwJio06UjlNW3aTAw6MaFR0YSEBHsm123JuFJaOvU+imi8JJ+fuTgMcamCj+gp0DJe7nLlJiXtbwGUAEFpXE5gl9elhbqP2eHjO9y5v4/nQOwG3vq6+gs3jpZHBbVhcr3JhihgJoC0oePEiZN3WgFOolKyYmKCGjl+A1OQcDOCqDDguD147szM/XtgoT2iEFAocK8Jb37U8GG+zJUq7qkL4PoMiEi+4O7PKPnmNIUrSI1JDmMyOSlUSkupAq/HY6KNRtrpaVm3TWoyOuV6ubOpqUkFZwSCphjYdKG9APYSsb+k9I2+IXH466mreuqUfr4DVn/eeKS69/pOBpYadzILcWbjfAw104cP650FNq8XdXpGdl/GCrxGW4ym4Ntv4WFRGMbJLEYjQUjwcW/7w75zaerA1GAtV7mMCrjOuvdHJX6gNwoy4X6epGKOr5DSBE1LSMRiUeDMyIEbGGXBMdgDkKWXTExMVJBL0ddosm39WSVfuU/aowJTZVrhMgBRq8+4x2WcSafHSejRzMXQExaLAKcolQLJJBQSx2HQohsz05kSgqAlC+cBwoeRZEoWm8v1GqPxs+bw/JZtCVvXQkBssj/X5wo0z7ivGnL7GY9NotLIl6KXyzUxKn4FKacZp8Pk2bV7m9nkNOn1epMAhnE6YT8sBfZYk3HfGkNASxcEJMu0omUA4l2TDacKM45hDAAILngSSorGUBSGISoBlp0Nsj2t1+5jBUavzSbILliM0ylYioXPr6BOXy1M2tdl3ZqjDF8WIMI12XUqy/6JmWhsJMzE06GJhTgIosZBjfx0DK6g4dJS4MJSHDU1DvSjdwqTjjU0J0JAjy6a6zMgyjXTtVstHp+fHxqCn81P8vZChmA2w1Xjm+fH1e+c3Xzz5uant/+xMH9z6O35zbFR9iVAjm+A3zg196cmriiO/8Av/aF/RkhCK/sgJCFhkyUkCyRkEUIohJiXBlEDkgZCFJBABIQUBEFUFAQMICJUREGtgijSQrH4FqUWbdXasWOl73b6mJ6NBnVQB3oGZpbZsHzYe+6953y/N48VyiQhvIGEwqn5ionJ+YrtgZjcvhAVFcMV85fUl4crKirgp9fEfMUkfJkSSoaWDwBJCACFGbcQsraWRPTk89A/C7iAHpAikWP140wvQuqx5wGfCVxhCDSK+j2dNSWtjebC5Q6BiknCVNcQoaRsMjEvEGgg4lCjWG7UHX78AIkzimH+iXmLgtA4xMTh5FxrK5OE65achGyTH+Di9EiGp4+pboVGYSCIZyG3KOVOp77oyJaRB3iR0wlbs0C4OHBek7sxJ3ft4LgVAJY8DVl+gL2XWu4XlrS7jzgRlA7MbU0gZDKRUmlLh72AWQeKKJGGZm6//J0uS0MB4DtzIedYqVWVzyxEywDQplxumVLlTsl0AgyVUvrnIV0IR5xclO7et2kXRtK0wyGVv7gTuMCgn8Xbczd0MkvxB0tfitksPwBsRhll9zssBDxoIXgvwuuFWnnLJw8QnljMe21gIKYgvYcKL9fuzlZ/kBXv34yWPAvWzTT2ZZbVb0Fw7AUAL0AhFkMSSot0xwBADOkoh1uB+wtBix1Y85lD1v6ekRAA8G/HSwdomCm9UFBWPg4AoEf4A9ZgsrlZA624hqY1SprJgWQmB2SUSE9rNCSOaeA+aIYafxQ5Ndj0nUOur6aDigFgyQUJC4x7MB+svVCSlVykUYdYKqLS3E1ChGwdO3Gi9/wg6FLGU6Mix1li34FdGA2VD0hkTULs2rleuD/UgwiNZ+WkKF3mQL+qZJmmx60gf/FDllqSQSdpCOZml3fW9ufWfD+KSlE5KSUEArxn8qAHjAnPj6UkYTxSK4Ja/RgA+EUqDBcig3MF1sxM18FvBhHICoRUyuS87ZVhnVCUsgJF6dIBONbyfd95wlytuCCOKUhwbM+VR9sMXEVMXsGjYZvw1CiFevGXAMjBHwdYqh2S+L2+mQsIwkNxpwA57C/LD2Rzl9We+9UBNqf8fM+72+71UqcEci9IX7Zhn2l9Q11MkmqHx3cO14moOPGLN4Aj10YGTArwjsLrTvvm9kBfQAi8lvbcT/OOzXpSl6cPwOmjiDAWx3rHVlHVxt/vTpeKBUJsMMhcbTrZIAHHkOs606OjSHEAQMgAnD8YawrXqtjBMer4gX4Mt9BitPb7spqjtZfMy5NoDFy/TMllF4wzzekYTlNpSgvVbk9KMp3Meg/k24ji6Ea3Xm6UBwBgQ3KcqFq33sDhrNi4IUGdubsZV8qk+Gzijra+/TmRIcsFYA6eBBe7dl+7Yn8/+Rihodxu28PMhKTIrKyN0eAbR7lKQaAQwm74iX8IAOCjrxNTQt9bmb8xsb47qeabFlypQZ6cyP7w/vExl+F/ARhMZs+tQZ85+zyRphe4mx+WKwzRYWGMeMDSZvYBgED2MsBnkbGhYRx+cOimvOqMkWnIXXy2POFg+/6r2RIu1y9Aw4MXPLjnANzXA3A40KGb8s1Ttm8PJiU/xdEmJzlWXlwZmqCKMJkiJAklswyABlqzwBA0d4Zx2eAjx9dVrrue+nUHcQP55euyQynH233c1fAf+f/wyyYkMPDfkITA5/+FGEXQ0z8rE9p2yxBjE3LOs7ahIX8FnxUCVtn93wnZM5EqMAuwh/a6neFr6vNXzSSrN/RqnELkZolh4NytmY/VeZWJsaB95W/KU0fFc8HzTQmNYYGOr5Dwo1+3EnKee1VadcG7tefLD93rR4gmrOOxqy4yJTpEkrojzz5mQdP9Mp0fgMBgFgwOZF2P2vBzfuKB4tx7rWk6YrwtwbcdfI6qmsiTscx5sujkaEU8N5g5mReh5kbzJVoFf0XsYoAFuf694p2em81zf0gGuhBnEdJa5VJUV6vVO/mP5q4hPFr8CgBODT/Kqk5KUFertQPzRBEx/UXo3qAO5EnjlSBX3c7C7jU7DKcbDuTAiTyJKiEmcm90WLxCsjL6LQDsk6s2qMunf//3uvXHP/Emi348qIodHqPKHHh3P0mAUPkqAKxUjw6WFGqjCu3zRTr3njM1WTPjiBdHsMHeersVDuYVR0WuSo4OSdUmJGUU5Kxkh8SHcPhvBmCHnL7ziVZ9NH3eXO2aa8FhUBsvXb364aaR/g6EYLTiVwFgrZz95p0vvtjUOaQ8orNNZWt9/fCenDfEmGj65tWtJ2Pju1ebisMVKtXqDPtEb3YqN5jPeZtcz44xXF1RvW0SvZlabd+8H29Kxxwfde0aPC5ChAJM/ioAgot5CNYz3dXV2Jymc9f21pS5rkjRs6O/OJ00JOn+i99v9XyaEROlkGS7fFfbO8bKFfGRG8O4bwYIZnXH/1H5Q53rL95UzWrP5sOIRShQ4vBKEVQsTFsMALUx4yXgOh1RO5VbZj/agXrTRmvTlRalzgKe3tDEHfNa2C0L3pm4YNNPZCZJNiaywwMAiywbAKj/4XTKpqgo+y7qqGe1/c4FqE4FQqZEjkOxxQAE7i/XGciWM9Yy+9we3ChHoSygUFomNHpBydt3q+92++2h4zYSIycz1cWJq9iK2MiAZbPYtKpc0R2+Ll9t+ump5WhN9dqgUhyRSuMETmcaqQ/I9fVQkDwDkNHwcvTQrCBdI2tjPJtbEMHoKO/uXUrkdYikZ5kGV2ghEAjmETgA1FVWhsQsACyy7dhcOHwbH7py9fWsf59iY9brewcePsERSkMTaBotRElNUZOFse3iGN8Uj6ObnErSJkKabnv2Zg9s7rAc0aWnG2/cAAmLpuWo2GixFJ1yKgkcqosmAT68LWlN/cbYiBB+wLZbbFxCmoa9zw3maLcN9Olv+06a2h7P2hCe1xinkYlRCoxL9M9/v2IkMgSTi420wGgk6O921ySZfcM88JYtuAU6egGINRb0LHxIDlYjbSHAd5IjyKVKbXc3tyE2YFy+zboN3lBSdVH04J1t1YXmM602oUBIUShPatN70QurSkUOFKpWHBGRMAyDE2ZVlOedXVRj37lzt8eP14owXOkkUBgbCkPvelFgZVpMDBmuVHSvMcQGB6zbt5nXfIU6xXel48mvn58uK6+6PNThN69RWnkD3XegFKR0p9vC2Gmirks5Jdoy3+4W0eTM1sy2e18euNx+zYYT3rswYKMy+VmvFzRditKTKDK8latKDQ19f8G8fot9z43OMaw3//2g57d/tnp+bqvpHO7qoXDQgp3IFsgBsNHdBNXze/+ZNW2ZHxZ8NtvR+tieGmHOySizerbOTQzaUK9XoAMxT+SAuUDKaItQDAAGiWE9P2/Bvn/zAQZWxH/N21uIElEYwHGIIgqCeo8eYpw82nXIMmxKwrS0Wg3NFy3LHE2cCtxy03KtVVRM1lt02+2+mV0Wo9tmFG3FGlZ0ZdOI6ELRFvRSD0EFfTNGVGZNWdanIANyHOGAB/z9e3ru3JkYSF/fEel7YHJmdm0ovDy7fv+OSNu07cOeT2lri+w/0nvK0ZK2ZqKJs5H23rRLrrFLHLgdpFzYfe3pzoNjJ2w9vWrt+fnjZi1ubl4Fm2X81bAXW7ZMlGABA0ms6FedcGC8JfNky0OFwt5cacft0tFQEPl9pkBP/uXmp4d1p65cefFkNeV0UpSFuJ+93f7ufUDdacjlyDvGBp5xkZGw7Gr5cK8V/tdbOHn69Lmzm5snwU7Y/iiIiGSnKAGEQwCGBAhHVcSCE6mNr68V3oYSmUDThUvHL+1+RNHBaMZCmFZSKdoXjTo9nsBDavnh4vFD3efS/jljQoY9TbKN4m0SnlilV2qShZajJ9vHwzaZOXfy1AlgDU7mXMZ4o61TZC4jFhwQS1XGgyPd/dUJvVcqW+SlN4Qvn2htPXHk2eMej9Li8xECyhe1LL+1uW/nltZNpdxKT6zT0bBEGothOVGMj9OjkERiPuC0uh5d3f9m8Vhm2p7f2OteJDcndPDvPsN4VHpQNACZZGQFZGKHNISSUv88eUxhEiPTBveD3p3rtkQOFbtLfb3ZbLbUXbwEqOpY32O3dSku13aFRtnlqZQoJ/JiQtABEkXitV2jN4XvrrnYXSyeLN1wu7cZvXCuEShEjSQDmUiATIwlk1ahXIhEQNwJAsFhXcynl1otM55lj5xo37ePlVz7Nq3P3hxG+6w0ZBAEHNuZ4xaBiTGcMZc4IHEjj+CLhTQF+0RvoSgaefkMDMNh2TLl2uju/2PMhtgzGgYvsKAKUUsJ2uVqynd05PMd+dUrXCYJj8ZVYv4Xb/7yDAxfCq5V8Kkg0gj4Ep+WhTfwPmM24HxKAwfOh/gEISDnaOb5/f6M3+NxZvx+LahOPsbJ88EtVOF8XEEjQgAqiYYEM+Z4Y/zVq0TiVSP8onDwjAjhwOy+Axr9ABqBdJIGtVT6U9KJE4iUhEDyqnXJpM2WtKmDDkdXF6uLf64h4fHVNdyATq1nSOeAQQEZF9QKA9tKkWRai2WfRqFIJjH0m6h1os4w0Td0AMt64QY4sV6e0Gz/dmpgvUGpdQgLm1UOjrAZQ/G4EOEiGMhQCCQUxuMI+23Y3KUKDGRpNzVDx5F28xQwNmZ0OpuNuahCBLjRbl/HYBa3rzSPLuP2ug2L2xewuP0XeT/6drCaef/wfxs4gC0fziYeynonHsovEg+IXJSx+kYuEl1Mu7L/15kPXc/Mp6GJyXz+n9CJSb3kKoJfv9SLD6lXZeyG6hS7ARjH9wz533I/JnhsOZPSxv968CjznglD8Pj95FP7V5JPOPLCfE4+5ZB8/pvo1QbR6yI2euWY/QpUYpgas1/mSsCsZqjIfquEz1aqHD4r9aQUNqGqxvBZT8JqeqVWS8qlQsoK4TP39FveAAwHry39hicCIqmpSL+5xu8r/kz8ni7H7yNHVOz++ub/wyvz/49yHLNaugaoEAAAAABJRU5ErkJggg==
// @match        *://*/*
// @exclude      *://yiyan.baidu.com/*
// @exclude      *://*.bing.com/search*
// @grant        unsafeWindow
// @grant        GM_addStyle
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_deleteValue
// @grant        GM_listValues
// @grant        GM_addValueChangeListener
// @grant        GM_removeValueChangeListener
// @grant        GM_registerMenuCommand
// @grant        GM_unregisterMenuCommand
// @grant        GM_getTab
// @grant        GM_saveTab
// @grant        GM_getTabs
// @grant        GM_openInTab
// @grant        GM_setClipboard
// @run-at       document-start
// @license      GPL
// ==/UserScript==
function e(e,t,o){function n(e,t){const o=i.querySelectorAll(e);for(let e=0;e<o.length;e++){const n=o[e];n._MutationReadyList_=n._MutationReadyList_||[],n._MutationReadyList_.includes(t)||(n._MutationReadyList_.push(t),t.call(n,n))}}const r=window,i=o||r.document.documentElement;if(!i)return!1;const s=r.MutationObserver||r.WebKitMutationObserver,a=i._MutationListeners||[];(Array.isArray(e)?e:[e]).forEach(e=>function(e,t){a.push({selector:e,fn:t}),i._MutationListeners&&i._MutationObserver||(i._MutationListeners=a,i._MutationObserver=new s(()=>{for(let e=0;e<i._MutationListeners.length;e++){const t=i._MutationListeners[e];n(t.selector,t.fn)}}),i._MutationObserver.observe(i,{childList:!0,subtree:!0})),n(e,t)}(e,t))}
/*!
 * @name         object.js
 * @description  对象操作的相关方法
 * @version      0.0.1
 * @author       Blaze
 * @date         21/03/2019 23:10
 * @github       https://github.com/xxxily
 */
function t(e){var o,n={};if("object"!=typeof e)return e;for(o in"[object Array]"===Object.prototype.toString.call(e)&&(n=[]),"[object Null]"===Object.prototype.toString.call(e)&&(n=null),e)n[o]="object"==typeof e[o]?t(e[o]):e[o];return n}function o(e,t,o){function n(e){return"[object Object]"===Object.prototype.toString.call(e)}function r(e){return"[object Array]"===Object.prototype.toString.call(e)}return n(e)&&n(t)?function e(t,i){return function(e,t){for(var o in t=t||function(){},e)Object.hasOwnProperty.call(e,o)&&t(o,e[o])}(i,function(s){const a=t[s],l=i[s];void 0===a?t[s]=l:n(a)&&n(l)?t[s]=e(a,l):o&&r(a)&&r(l)?t[s]=a.concat(l):t[s]=l}),t}(e,t):e}function n(e,t){const o=(t=t||"").split(".");let n=e;for(let e=0;e<o.length&&n;e++)n=n[o[e]];return n}function r(e,t,o){if(!e||!t||"string"!=typeof t)return!1;let n=e;const r=t.split(".");for(let e=0;e<r.length&&n;e++){if(e===r.length-1)return n[r[e]]=o,Number.isNaN(o)?Number.isNaN(n[r[e]]):n[r[e]]===o;n=n[r[e]]}return!1}function i(e,t){setTimeout(function(){const t=document.querySelector(e);t&&(t.style.opacity=0)},t||5e3)}function s(e,t){let o=e.parentNode;for(;o;){const n=t(o,e);if(o=o.parentNode,n)break}}function a(e){const t=e.getAttribute&&"true"===e.getAttribute("contenteditable"),o=/INPUT|TEXTAREA|SELECT|LABEL/.test(e.nodeName);return t||o}function l(e){if(!e||null===e.offsetParent)return!0;if("hidden"===e.style.visibility||"none"===e.style.display)return!0;const{top:t,right:o,bottom:n,left:r,width:i,height:s}=e.getBoundingClientRect();return 0===t&&0===o&&0===n&&0===r&&0===i&&0===s}function c(){return window!==window.top}function u(){let e=!0;try{(window.top.localStorage||window.top.location.href)&&(e=!1)}catch(t){e=!0}return e}function d(e){const t=e.keyCode,o=e.key.toLowerCase();return J.keyCodeList.includes(t)||J.keyList.includes(o)}async function p(){return new Promise(function(e){function t(){window._pageWindow=this,o.forEach(e=>{window.removeEventListener(e,t,!0)}),e(window._pageWindow)}if(window._pageWindow)return e(window._pageWindow);try{const t=function(e){if(window.unsafeWindow)return window.unsafeWindow;if(document._win_)return document._win_;try{return(e=e||window.__rawFunction__||Function.prototype.constructor)('return (function(){}.constructor("var getPageWindowSync=1; return this")());')()}catch(e){console.error("getPageWindowSync error",e);const t=document.head||document.querySelector("head"),o=document.createElement("script");return o.appendChild(document.createTextNode("document._win_ = window")),t.appendChild(o),document._win_}}();if(t&&t.document&&t.XMLHttpRequest)return window._pageWindow=t,e(t),t}catch(e){}const o=["load","mousemove","scroll","get-page-window-event"];o.forEach(e=>{window.addEventListener(e,t,!0)}),window.dispatchEvent(new window.Event("get-page-window-event"))})}function h(e,t,o){const n=Date.now(),r=`h5player_openTab_${e}`;let i=0;if(window.GM_getValue&&window.GM_setValue){if(i=window.GM_getValue(r,0),i&&n-i<1e3)return;window.GM_setValue(r,n)}else{if(i=sessionStorage.getItem(r),i&&n-parseInt(i)<1e3)return;sessionStorage.setItem(r,n.toString())}if(o){const t=
/*!
 * @name         url.js
 * @description  用于对url进行解析的相关方法
 * @version      0.0.1
 * @author       Blaze
 * @date         27/03/2019 15:52
 * @github       https://github.com/xxxily
 */
function(e){var t=document.createElement("a");return t.href=e||window.location.href,{source:e,protocol:t.protocol.replace(":",""),host:t.hostname,port:t.port,origin:t.origin,search:t.search,query:t.search,file:(t.pathname.match(/\/([^/?#]+)$/i)||["",""])[1],hash:t.hash.replace("#",""),path:t.pathname.replace(/^([^/])/,"/$1"),relative:(t.href.match(/tps?:\/\/[^/]+(.+)/)||["",""])[1],params:function(){var e,o,n,r,i,s,a,l={},c=[],u=t.search.replace(/^\?/,"").split("&");for(e=0;e<u.length;e++)""!==(o=u[e])&&o.indexOf("=")&&c.push(o);for(n=0;n<c.length;n++)i=(r=c[n]).indexOf("="),s=r.substring(0,i),a=r.substring(i+1),s?l[s]=a:l[a]=null;return l}()}}(e);t.params.referer||(t.params.referer=encodeURIComponent(window.location.href),e=function(e){var t,o=function(e){var t,o,n,r=[];if("[object Object]"===!Object.prototype.toString.call(e))return"";for(t in e)if(Object.hasOwnProperty.call(e,t)){if(o=e[t],n=Object.prototype.toString.call(o),""===o||"[object Undefined]"===n)continue;null===o?r.push(t):"[object Array]"===n?r.push(t+"="+o.join(",")):(o=(JSON.stringify(o)||""+o).replace(/(^"|"$)/g,""),r.push(t+"="+o))}return r.join("&")}(e.params)||"";return o&&(o="?"+o),t=e.hash?"#"+e.hash:"",e.origin+e.path+o+t}(t))}if(window.GM_openInTab)window.GM_openInTab(e,t||{active:!0,insert:!0,setParent:!0});else{const t=document.createElement("a");t.href=e,t.target="_blank",t.rel="noopener noreferrer",t.style.display="inline-block",t.style.width="1px",t.style.height="1px",t.style.opcity=0,document.body.appendChild(t),t.click(),setTimeout(()=>{document.body.removeChild(t)},300)}}function g(e){return"number"==typeof e&&e<0&&(e=Math.abs(e)),e}function m(e){return"number"==typeof e&&e>0&&(e=-e),e}function f(e){return e&&(e instanceof HTMLMediaElement||e.HTMLMediaElement||e.HTMLVideoElement||e.HTMLAudioElement)}function b(e){return e&&(e instanceof HTMLVideoElement||e.HTMLVideoElement)}function y(e){return e&&(e instanceof HTMLAudioElement||e.HTMLAudioElement)}
/*!
 * configManager parse localStorage error * @name         configManager.ts
 * @description  配置统一管理脚本
 * @version      0.0.1
 * @author       xxxily
 * @date         2023/03/06 14:29
 * @github       https://github.com/xxxily
 */function w(){return window.localStorage&&window.localStorage.getItem instanceof Function&&window.localStorage.setItem instanceof Function}function v(){return window.GM_setValue&&window.GM_getValue&&window.GM_deleteValue&&window.GM_listValues instanceof Function}function k(e){return o(te,e)}
/*!
 * @name      monkeyMsg.js
 * @version   0.0.1
 * @author    Blaze
 * @date      2019/9/21 14:22
 */
function S(e,t){if((t=t||1)>3)return{};const o={};if("object"==typeof e)for(const n in e){const r=e[n],i=typeof r;"number"===i||"string"===i||"boolean"===i?Object.defineProperty(o,n,{value:r,writable:!0,configurable:!0,enumerable:!0}):"object"===i&&Object.prototype.propertyIsEnumerable.call(e,n)?o[n]=S(r,t+1):"array"===i&&(o[n]=r)}return o}function _(e,t,o){if(o&&e&&e instanceof Element&&"string"==typeof t&&t.indexOf("on")>=0&&(o.configurable=!0),e instanceof HTMLVideoElement&&["playbackRate","currentTime","volume","muted"].includes(t))try{U.log(`禁止对${t}进行锁定`),o.configurable=!0,t+="_hack"}catch(e){U.error(`禁止锁定${t}失败！`,e)}return[e,t,o]}function E(e,t,o,n,r){return U.error(`${o} error:`,r.error),"SKIP-ERROR"}function C(){const e=["https://h5player.anzz.site/zh/","https://h5player.anzz.top"];return we()?e[0]:e[1]}function P(e){if("string"!=typeof e||!0===e.startsWith("http"))return!1;e.startsWith("/")||(e="/"+e);const t=we(),o=t?"https://h5player.anzz.site":"https://h5player.anzz.top";let n=o+e;t&&!e.startsWith("/zh")&&(n=o+"/zh"+e),h(n)}function x(){return ke}function T(){be.build(x)}function A(e,t){e=(e=Array.isArray(e)?e:[e]).filter(e=>e.title&&!e.disabled),ke=t?e.concat(ke):ke.concat(e),T()}function M(e){return"[object Object]"===Object.prototype.toString.call(e)}function L(e){return Array.isArray(e)?e:void 0===e?[]:[e]}function $(e){return["ctrl","controlleft","controlright","shift","shiftleft","shiftright","alt","altleft","altright","meta","metaleft","metaright","capsLock"].includes(e.toLowerCase())}
/**
 * @license Copyright 2017 - Chris West - MIT Licensed
 * Prototype to easily set the volume (actual and perceived), loudness,
 * decibels, and gain value.
 * https://cwestblog.com/2017/08/22/web-audio-api-controlling-audio-video-loudness/
 */
function R(e){this._context=new(window.AudioContext||window.webkitAudioContext),this._source=this._context.createMediaElementSource(this._element=e),this._source.connect(this._gain=this._context.createGain()),this._gain.connect(this._context.destination)}function D(e,t){const o=document.createElement("a");o.href=e,o.target="_blank",o.download=t,o.click()}async function I(){try{if(function(){const e=document.title.includes("Just a moment")||document.title.includes("Cloudflare")||document.title.includes("challenge"),t=!!document.querySelector('meta[http-equiv="refresh"]'),o=!!document.querySelector('meta[name="robots"][content*="noindex"]'),n=!!document.querySelector('.main-wrapper[role="main"]'),r=!!document.querySelector("#challenge-error-text"),i=!(!document.body||!document.body.classList)&&document.body.classList.contains("no-js"),s=document.styleSheets.length>0&&(document.documentElement.innerHTML.includes("background-image: url(data:image/svg+xml;base64,")||document.documentElement.innerHTML.includes("challenge")),a=t||o,l=n||r||i;return e&&a||e&&l||l&&n+r+(i?1:0)>=2&&a||s&&(e||a||l)}())return console.warn("当前处于cloudflare的人机验证页面，暂停h5player的运行",location.href),!1}catch(e){U.error(e)}const t=Y.get("enable"),o=Y.get("blacklist.urls")||[],n=Y.get("blacklist.domains")||[],r=o.includes(location.href)||n.includes(location.host);r&&console.warn(`[h5player][config][blacklist][${location.href}] \n当前页面已被加入黑名单，不执行h5player增强脚本的相关逻辑，如有需要开启，请在配置里的blacklist移除对应的地址`);try{t&&!r&&(V.init(function(){Oe.init()}),Y.get("enhance.allowExperimentFeatures")&&Y.get("download.enable")&&(Se.init(),U.warn(`[experimentFeatures][warning] ${ie.t("experimentFeaturesWarning")}`),U.warn("[experimentFeatures][mediaSource][activated]")),fe.before(Object,"defineProperty",function(e){const t=e[2];_(e[0],e[1],t).forEach((t,o)=>{e[o]=t})}),fe.before(Object,"defineProperties",function(e){const t=e[1],o=e[0];o&&o instanceof Element&&Object.keys(t).forEach(n=>{const r=t[n],i=_(o,n,r);e[0]=i[0],delete t[n],t[i[1]]=i[2]})}),fe.error(Object,"defineProperty",E),fe.error(Object,"defineProperties",E),function(){if(!window._hasHackAttachShadow_)try{window._shadowDomList_=[],window.Element.prototype._attachShadow=window.Element.prototype.attachShadow,window.Element.prototype.attachShadow=function(){const e=arguments,t=e[0]&&"closed"===e[0].mode;e[0]&&e[0].mode&&(e[0].mode="open");const o=this._attachShadow.apply(this,e);window._shadowDomList_.push(o),o._shadowHost=this;const n=new window.CustomEvent("addShadowRoot",{shadowRoot:o,detail:{shadowRoot:o,message:"addShadowRoot",time:new Date},bubbles:!0,cancelable:!0});return document.dispatchEvent(n),t&&Object.defineProperty(this,"shadowRoot",{get:()=>null}),o},window._hasHackAttachShadow_=!0}catch(e){console.error("hackAttachShadow error by h5player plug-in",e)}}
/*!
 * @name         original.js
 * @description  存储部分重要的原生函数，防止被外部污染，此逻辑应尽可能前置，否则存储的将是污染后的函数
 * @version      0.0.1
 * @author       xxxily
 * @date         2022/10/16 10:32
 * @github       https://github.com/xxxily
 */(),function(){if(HTMLMediaElement.prototype._rawAddEventListener_)return!1;HTMLMediaElement.prototype._rawAddEventListener_=HTMLMediaElement.prototype.addEventListener,HTMLMediaElement.prototype._rawRemoveEventListener_=HTMLMediaElement.prototype.removeEventListener,HTMLMediaElement.prototype.addEventListener=new Proxy(HTMLMediaElement.prototype.addEventListener,{apply(e,t,o){const n=o[0],r=o[1];return r instanceof Function&&"ratechange"===n&&(o[1]=new Proxy(r,{apply(e,t,o){if(t&&t.playbackRate&&"ratechange"===n){if(t._hasBlockRatechangeEvent_)return!0;const i=t.playbackRate,s=Date.now(),a=e.apply(t,o),l=i!==t.playbackRate||Date.now()-s>1e3,c=t._setPlaybackRate_&&t._setPlaybackRate_.value!==t.playbackRate;return l||c?(U.info(`[execVideoEvent][${n}]检测到可能存在阻止调速的行为，已禁止${n}事件的执行`,r),t._hasBlockRatechangeEvent_=!0,!0):a}try{return e.apply(t,o)}catch(e){U.error(`[proxyPlayerEvent][${n}]`,r,e)}}})),e.apply(t,o)}})}())}catch(e){console.error("h5player hack error",e)}if(T(),!t||r)return U.warn(`[config][disable][${location.host}] 当前网站已禁用脚本，如要启用脚本，请在菜单里开启`),!1;try{Oe.init(!0),De.forEach(t=>{e(t,function(){Oe.init()})}),document.addEventListener("addShadowRoot",function(t){const o=t.detail.shadowRoot;De.forEach(t=>{e(t,function(){Oe.init()},o)})}),ue.init(),c()?U.log("h5Player init suc, in iframe:"):U.log("h5Player init suc"),u()&&U.log("当前处于跨域受限的iframe中，h5Player部分功能可能无法正常开启",window.location.href),Y.get("mouse.enable")&&function(){const e=Oe,t=Y.get("mouse.longPressTime")||600;let o=null,n=!1,r=!1,i=1;document.addEventListener("mousedown",function(s){const a=e.player();if(!(a&&a instanceof HTMLVideoElement))return;if(r=a.paused,!function(e,t,o){if(!o||!o.getBoundingClientRect)return!1;const n=o.getBoundingClientRect();return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}(s.clientX,s.clientY,a))return;const l=a.getBoundingClientRect();s.clientY>l.bottom-80||0===s.button&&(o=setTimeout(()=>{n=!0,i=e.getPlaybackRate(),e.unLockPlaybackRate(),e.setPlaybackRate(3),e.lockPlaybackRate(800),s.preventDefault(),s.stopPropagation()},t))},!0),document.addEventListener("mouseup",function(t){o&&clearTimeout(o),n&&(n=!1,t.preventDefault(),t.stopPropagation(),r?e.mediaPlusApi.lockPlay(600):e.mediaPlusApi.lockPause(600),e.unLockPlaybackRate(),e.setPlaybackRate(i),e.lockPlaybackRate(800))},!0)}()}catch(e){U.error("h5Player init fail",e)}!1!==Y.get("ui.enable")?window.customElements&&document.adoptedStyleSheets?(Oe.UI=function(e){var t=function(){function t(e,t){if(!Array.isArray(e)||!e.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==Lt?Lt.createHTML(t):t}function o(e,t,n=e,r){if(t===Jt)return t;let i=void 0!==r?n._$Co?.[r]:n._$Cl;const s=Ut(t)?void 0:t._$litDirective$;return i?.constructor!==s&&(i?._$AO?.(!1),void 0===s?i=void 0:(i=new s(e),i._$AT(e,n,r)),void 0!==r?(n._$Co??=[])[r]=i:n._$Cl=i),void 0!==i&&(t=o(e,i._$AS(e,t.values),i,r)),t}function n(e){return(t,o)=>"object"==typeof o?ho(e,t,o):((e,t,o)=>{const n=t.hasOwnProperty(o);return t.constructor.createProperty(o,n?{...e,wrapped:!0}:e),n?Object.getOwnPropertyDescriptor(t,o):void 0})(e,t,o)}
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
function r(e,t){return(o,n,r)=>{const i=t=>t.renderRoot?.querySelector(e)??null;if(t){const{get:e,set:t}="object"==typeof n?o:r??(()=>{const e=Symbol();return{get(){return this[e]},set(t){this[e]=t}}})();return go(o,n,{get(){let o=e.call(this);return void 0===o&&(o=i(this),(null!==o||this.hasUpdated)&&t.call(this,o)),o}})}return go(o,n,{get(){return i(this)}})}}function i(e,t,o){return fo(e,mo(t,o))}function s(e,t){return"function"==typeof e?e(t):e}function a(e){return e.split("-")[0]}function l(e){return e.split("-")[1]}function c(e){return"x"===e?"y":"x"}function u(e){return"y"===e?"height":"width"}function d(e){return["top","bottom"].includes(a(e))?"y":"x"}function p(e){return c(d(e))}function h(e){return e.replace(/start|end/g,e=>ko[e])}function g(e){return e.replace(/left|right|bottom|top/g,e=>vo[e])}function m(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function f(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function b(e,t,o){let{reference:n,floating:r}=e;const i=d(t),s=p(t),c=u(s),h=a(t),g="y"===i,m=n.x+n.width/2-r.width/2,f=n.y+n.height/2-r.height/2,b=n[c]/2-r[c]/2;let y;switch(h){case"top":y={x:m,y:n.y-r.height};break;case"bottom":y={x:m,y:n.y+n.height};break;case"right":y={x:n.x+n.width,y:f};break;case"left":y={x:n.x-r.width,y:f};break;default:y={x:n.x,y:n.y}}switch(l(t)){case"start":y[s]-=b*(o&&g?-1:1);break;case"end":y[s]+=b*(o&&g?-1:1)}return y}async function y(e,t){var o;void 0===t&&(t={});const{x:n,y:r,platform:i,rects:a,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:p="floating",altBoundary:h=!1,padding:g=0}=s(t,e),b=m(g),y=l[h?"floating"===p?"reference":"floating":p],w=f(await i.getClippingRect({element:null==(o=await(null==i.isElement?void 0:i.isElement(y)))||o?y:y.contextElement||await(null==i.getDocumentElement?void 0:i.getDocumentElement(l.floating)),boundary:u,rootBoundary:d,strategy:c})),v="floating"===p?{...a.floating,x:n,y:r}:a.reference,k=await(null==i.getOffsetParent?void 0:i.getOffsetParent(l.floating)),S=await(null==i.isElement?void 0:i.isElement(k))&&await(null==i.getScale?void 0:i.getScale(k))||{x:1,y:1},_=f(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({rect:v,offsetParent:k,strategy:c}):v);return{top:(w.top-_.top+b.top)/S.y,bottom:(_.bottom-w.bottom+b.bottom)/S.y,left:(w.left-_.left+b.left)/S.x,right:(_.right-w.right+b.right)/S.x}}function w(e){return S(e)?(e.nodeName||"").toLowerCase():"#document"}function v(t){var o;return(null==t||null==(o=t.ownerDocument)?void 0:o.defaultView)||e}function k(t){var o;return null==(o=(S(t)?t.ownerDocument:t.document)||e.document)?void 0:o.documentElement}function S(e){return e instanceof Node||e instanceof v(e).Node}function _(e){return e instanceof Element||e instanceof v(e).Element}function E(e){return e instanceof HTMLElement||e instanceof v(e).HTMLElement}function C(e){return"undefined"!=typeof ShadowRoot&&(e instanceof ShadowRoot||e instanceof v(e).ShadowRoot)}function P(e){const{overflow:t,overflowX:o,overflowY:n,display:r}=L(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+o)&&!["inline","contents"].includes(r)}function x(e){return["table","td","th"].includes(w(e))}function T(e){const t=A(),o=L(e);return"none"!==o.transform||"none"!==o.perspective||!!o.containerType&&"normal"!==o.containerType||!t&&!!o.backdropFilter&&"none"!==o.backdropFilter||!t&&!!o.filter&&"none"!==o.filter||["transform","perspective","filter"].some(e=>(o.willChange||"").includes(e))||["paint","layout","strict","content"].some(e=>(o.contain||"").includes(e))}function A(){return!("undefined"==typeof CSS||!CSS.supports)&&CSS.supports("-webkit-backdrop-filter","none")}function M(e){return["html","body","#document"].includes(w(e))}function L(e){return v(e).getComputedStyle(e)}function $(e){return _(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function R(e){if("html"===w(e))return e;const t=e.assignedSlot||e.parentNode||C(e)&&e.host||k(e);return C(t)?t.host:t}function D(e){const t=R(e);return M(t)?e.ownerDocument?e.ownerDocument.body:e.body:E(t)&&P(t)?t:D(t)}function I(e,t,o){var n;void 0===t&&(t=[]),void 0===o&&(o=!0);const r=D(e),i=r===(null==(n=e.ownerDocument)?void 0:n.body),s=v(r);return i?t.concat(s,s.visualViewport||[],P(r)?r:[],s.frameElement&&o?I(s.frameElement):[]):t.concat(r,I(r,[],o))}function O(e){const t=L(e);let o=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const r=E(e),i=r?e.offsetWidth:o,s=r?e.offsetHeight:n,a=bo(o)!==i||bo(n)!==s;return a&&(o=i,n=s),{width:o,height:n,$:a}}function H(e){return _(e)?e:e.contextElement}function U(e){const t=H(e);if(!E(t))return wo(1);const o=t.getBoundingClientRect(),{width:n,height:r,$:i}=O(t);let s=(i?bo(o.width):o.width)/n,a=(i?bo(o.height):o.height)/r;return s&&Number.isFinite(s)||(s=1),a&&Number.isFinite(a)||(a=1),{x:s,y:a}}function F(e){const t=v(e);return A()&&t.visualViewport?{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}:So}function z(e,t,o,n){void 0===t&&(t=!1),void 0===o&&(o=!1);const r=e.getBoundingClientRect(),i=H(e);let s=wo(1);t&&(n?_(n)&&(s=U(n)):s=U(e));const a=function(e,t,o){return void 0===t&&(t=!1),!(!o||t&&o!==v(e))&&t}(i,o,n)?F(i):wo(0);let l=(r.left+a.x)/s.x,c=(r.top+a.y)/s.y,u=r.width/s.x,d=r.height/s.y;if(i){const e=v(i),t=n&&_(n)?v(n):n;let o=e.frameElement;for(;o&&n&&t!==e;){const e=U(o),t=o.getBoundingClientRect(),n=L(o),r=t.left+(o.clientLeft+parseFloat(n.paddingLeft))*e.x,i=t.top+(o.clientTop+parseFloat(n.paddingTop))*e.y;l*=e.x,c*=e.y,u*=e.x,d*=e.y,l+=r,c+=i,o=v(o).frameElement}}return f({width:u,height:d,x:l,y:c})}function B(e){return z(k(e)).left+$(e).scrollLeft}function G(e,t,o){let n;if("viewport"===t)n=function(e,t){const o=v(e),n=k(e),r=o.visualViewport;let i=n.clientWidth,s=n.clientHeight,a=0,l=0;if(r){i=r.width,s=r.height;const e=A();(!e||e&&"fixed"===t)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:i,height:s,x:a,y:l}}(e,o);else if("document"===t)n=function(e){const t=k(e),o=$(e),n=e.ownerDocument.body,r=fo(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=fo(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let s=-o.scrollLeft+B(e);const a=-o.scrollTop;return"rtl"===L(n).direction&&(s+=fo(t.clientWidth,n.clientWidth)-r),{width:r,height:i,x:s,y:a}}(k(e));else if(_(t))n=function(e,t){const o=z(e,!0,"fixed"===t),n=o.top+e.clientTop,r=o.left+e.clientLeft,i=E(e)?U(e):wo(1);return{width:e.clientWidth*i.x,height:e.clientHeight*i.y,x:r*i.x,y:n*i.y}}(t,o);else{const o=F(e);n={...t,x:t.x-o.x,y:t.y-o.y}}return f(n)}function N(e,t){const o=R(e);return!(o===t||!_(o)||M(o))&&("fixed"===L(o).position||N(o,t))}function j(e,t){const o=t.get(e);if(o)return o;let n=I(e,[],!1).filter(e=>_(e)&&"body"!==w(e)),r=null;const i="fixed"===L(e).position;let s=i?R(e):e;for(;_(s)&&!M(s);){const t=L(s),o=T(s);o||"fixed"!==t.position||(r=null),(i?!o&&!r:!o&&"static"===t.position&&r&&["absolute","fixed"].includes(r.position)||P(s)&&!o&&N(e,s))?n=n.filter(e=>e!==s):r=t,s=R(s)}return t.set(e,n),n}function V(e,t,o){const n=E(t),r=k(t),i="fixed"===o,s=z(e,!0,i,t);let a={scrollLeft:0,scrollTop:0};const l=wo(0);if(n||!n&&!i)if(("body"!==w(t)||P(r))&&(a=$(t)),n){const e=z(t,!0,i,t);l.x=e.x+t.clientLeft,l.y=e.y+t.clientTop}else r&&(l.x=B(r));return{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function q(e,t){return E(e)&&"fixed"!==L(e).position?t?t(e):e.offsetParent:null}function W(e,t){const o=v(e);if(!E(e))return o;let n=q(e,t);for(;n&&x(n)&&"static"===L(n).position;)n=q(n,t);return n&&("html"===w(n)||"body"===w(n)&&"static"===L(n).position&&!T(n))?o:n||function(e){let t=R(e);for(;E(t)&&!M(t);){if(T(t))return t;t=R(t)}return null}(e)||o}function K(e){return function(e){for(let t=e;t;t=J(t))if(t instanceof Element&&"none"===getComputedStyle(t).display)return null;for(let t=J(e);t;t=J(t)){if(!(t instanceof Element))continue;const e=getComputedStyle(t);if("contents"!==e.display){if("static"!==e.position||"none"!==e.filter)return t;if("BODY"===t.tagName)return t}}return null}(e)}function J(e){return e.assignedSlot?e.assignedSlot:e.parentNode instanceof ShadowRoot?e.parentNode.host:e.parentNode}function X(t){var o,n;const r=function(t){const o=[];return function n(r){if(r instanceof Element){if(r.hasAttribute("inert"))return;!o.includes(r)&&function(t){const o=t.tagName.toLowerCase();return"-1"!==t.getAttribute("tabindex")&&!t.hasAttribute("disabled")&&!("input"===o&&"radio"===t.getAttribute("type")&&!t.hasAttribute("checked"))&&(n=t,!!Boolean(n.offsetParent||n.offsetWidth||n.offsetHeight||n.getClientRects().length)&&"hidden"!==e.getComputedStyle(t).visibility&&(!("audio"!==o&&"video"!==o||!t.hasAttribute("controls"))||!!t.hasAttribute("tabindex")||!(!t.hasAttribute("contenteditable")||"false"===t.getAttribute("contenteditable"))||["button","input","select","textarea","a","audio","video","summary"].includes(o)));var n}(r)&&o.push(r),r instanceof HTMLSlotElement&&(e=>{var o;return(null==(o=e.getRootNode({composed:!0}))?void 0:o.host)!==t})(r)&&r.assignedElements({flatten:!0}).forEach(e=>{n(e)}),null!==r.shadowRoot&&"open"===r.shadowRoot.mode&&n(r.shadowRoot)}[...r.children].forEach(e=>n(e))}(t),o.sort((e,t)=>{const o=Number(e.getAttribute("tabindex"))||0;return(Number(t.getAttribute("tabindex"))||0)-o})}(t);return{start:null!=(o=r[0])?o:null,end:null!=(n=r[r.length-1])?n:null}}function Y(e,t){return"rtl"===t.toLowerCase()?{keyframes:e.rtlKeyframes||e.keyframes,options:e.options}:e}function Z(e,t){Ie.set(e,function(e){return null!=e?e:{keyframes:[],options:{duration:0}}}(t))}function Q(e,t,o){const n=Oe.get(e);if(null==n?void 0:n[t])return Y(n[t],o.dir);const r=Ie.get(t);return r?Y(r,o.dir):{keyframes:[],options:{duration:0}}}function ee(e,t){return new Promise(o=>{e.addEventListener(t,function n(r){r.target===e&&(e.removeEventListener(t,n),o())})})}function te(t,o,n){return new Promise(r=>{if((null==n?void 0:n.duration)===1/0)throw new Error("Promise-based animations must be finite.");const i=t.animate(o,Me(Ae({},n),{duration:e.matchMedia("(prefers-reduced-motion: reduce)").matches?0:n.duration}));i.addEventListener("cancel",r,{once:!0}),i.addEventListener("finish",r,{once:!0})})}function oe(e){return Promise.all(e.getAnimations().map(e=>new Promise(t=>{const o=requestAnimationFrame(t);e.addEventListener("cancel",()=>o,{once:!0}),e.addEventListener("finish",()=>o,{once:!0}),e.cancel()})))}function ne(...e){e.map(e=>{const t=e.$code.toLowerCase();Mo.has(t)?Mo.set(t,Object.assign(Object.assign({},Mo.get(t)),e)):Mo.set(t,e),Lo||(Lo=e)}),re()}function re(){$o=document.documentElement.dir||"ltr",Ro=document.documentElement.lang||navigator.language,[...To.keys()].map(e=>{"function"==typeof e.requestUpdate&&e.requestUpdate()})}function ie(e,t){const o=Ae({waitUntilFirstUpdate:!1},t);return(t,n)=>{const{update:r}=t,i=Array.isArray(e)?e:[e];t.update=function(e){i.forEach(t=>{const r=t;if(e.has(r)){const t=e.get(r),i=this[r];t!==i&&(o.waitUntilFirstUpdate&&!this.hasUpdated||this[n](t,i))}}),r.call(this,e)}}}function se(e){void 0!==this._$AN?(Oo(this),this._$AM=e,Ho(this)):this._$AM=e}function ae(e,t=!1,o=0){const n=this._$AH,r=this._$AN;if(void 0!==r&&0!==r.size)if(t)if(Array.isArray(n))for(let e=o;e<n.length;e++)Io(n[e],!1),Oo(n[e]);else null!=n&&(Io(n,!1),Oo(n));else Io(this,e)}function le(e){We=e}function ce(e){return Je.find(t=>t.name===e)}function ue(e,t){const o=t.offsetWidth<500;return e.map(e=>(e.dropdownMenu&&(e.dropdownMenu=ue(e.dropdownMenu,t)),{...e,iconOnly:o}))}function de(e,t=!0){const o=e.map(e=>{if(e.disabled)return"";const t=e.lang||e.language||e.languages;if(t&&!No.isMatchCurLang(t))return"";const o=(e.title instanceof Function?e.title():e.title)||"",n=(e.desc instanceof Function?e.desc():e.desc)||"",r=e.id||Math.random().toString(36).substr(2);return e.subMenu?`\n        <sl-menu-item class="h5p-menu-action" value="${r}" title="${n||o}" data-action="${e.action||""}" data-args='${JSON.stringify(e.args||null)}'>\n          ${o}\n          <sl-menu slot="submenu">\n            ${de(e.subMenu,!1)}\n          </sl-menu>\n        </sl-menu-item>\n      `:e.divider?"<sl-divider></sl-divider>":`<sl-menu-item class="h5p-menu-action" value="${r}" title="${n||o}" data-action="${e.action||""}" data-args='${JSON.stringify(e.args||null)}' data-url="${e.url||""}">\n        ${o}\n      </sl-menu-item>\n      `}).join("");return t?`<sl-menu>${o}</sl-menu>`:o}function pe(e){return`\n  <div class="h5p-action-mod">\n      ${e.map(e=>{if(e.disabled)return"";const t=e.lang||e.language||e.languages;if(t&&!No.isMatchCurLang(t))return"";const o=(e.title instanceof Function?e.title():e.title)||"",n=(e.desc instanceof Function?e.desc():e.desc)||"",r=e.icon?`<sl-icon src="${e.icon}"></sl-icon>`:"",i=e.iconOnly&&r?"":`<span class="h5p-desc">${o}</span>`;return e.dropdownMenu?`\n            <sl-dropdown distance="6">\n              <span slot="trigger" class="h5p-action-btn" title="${n||o}" data-title="${o}" data-action="${e.action||""}">\n                ${r}\n                ${i}\n              </span>\n              ${de(e.dropdownMenu)}\n            </sl-dropdown>\n          `:`\n            <span class="h5p-action-btn h5p-menu-action" title="${n||o}" data-title="${o}" data-action="${e.action||""}" data-args='${JSON.stringify(e.args||null)}'>\n              ${r}\n              ${i}\n            </span>\n          `}).join("")} \n  </div>\n  `}function he(e=Ko||[]){return pe(e)}function ge(e){if(!Wo||!qo.getGlobalStorage("ui.mod.recommend.enable"))return"";if(e.offsetWidth<500)return"";let t=qo.getGlobalStorage("recommendList")||Jo;t=t.filter(e=>!e.disabled);const o=No.language()||"",n=o.replace("-",""),r=o.replace("-","_"),i=o.split("-")[0];return t=t.filter(e=>{const t=e.lang||e.language||e.languages;return!t||No.isMatchCurLang(t)}),t.length?(t.length>5&&(t=t.sort(()=>Math.random()-.5).slice(0,5)),t=t.sort((e,t)=>(t.priority||0)-(e.priority||0)),`<div class="h5p-recommend-mod" >${t.map(e=>{let t=e.title||"",s=e.desc||"",a=e.url||"";if(e.i18n){const l=e.i18n[`${o}`]||e.i18n[`${n}`]||e.i18n[`${r}`]||e.i18n[`${i}`];l&&(t=l.title||t,s=l.desc||s,a=l.url||a)}return`<a class="h5p-recommend-item" href="${a}" title="${s}" target="_blank">${t}</a>`}).join("")}</div>`):""}function me(e,t){if(!t&&(!e||e.__h5pRecommendModRegistered__))return;let o=0;e.__stopToggle__=!1;const n=()=>{if(e.__stopToggle__)return;const t=e.querySelectorAll(".h5p-recommend-item");t.forEach((e,t)=>{t===o?e.classList.add("h5p-recommend-item__active"):e.classList.remove("h5p-recommend-item__active")}),o=(o+1)%t.length};n(),clearInterval(e.__h5pRecommendModInterval__),e.__h5pRecommendModInterval__=setInterval(n,3e3),t||(e.addEventListener("mouseenter",()=>{e.__stopToggle__=!0}),e.addEventListener("mouseleave",()=>{e.__stopToggle__=!1})),e.__h5pRecommendModRegistered__=!0}function fe(e){const t=document.querySelector(`#${e}`);t&&t.remove(),delete on[e]}function be(e){if(!e)return!1;const t=e.getAttribute("data-popup-wrap-id");t&&fe(t)}function ye(){Object.keys(on).forEach(e=>{const t=on[e];Qo(t)&&fe(e)})}var we,ve,ke,Se,_e,Ee,Ce,Pe,xe,Te,Ae,Me,Le,$e,Re,De,Ie,Oe,He,Ue,Fe,ze,Be,Ge,Ne,je,Ve,qe,We,Ke,Je,Xe,Ye,Ze,Qe,et,tt,ot,nt,rt,it,st;const at=new CSSStyleSheet;at.replaceSync(':root,\n:host,\n.sl-theme-light {\n  color-scheme: light;\n\n  --sl-color-gray-50: hsl(0 0% 97.5%);\n  --sl-color-gray-100: hsl(240 4.8% 95.9%);\n  --sl-color-gray-200: hsl(240 5.9% 90%);\n  --sl-color-gray-300: hsl(240 4.9% 83.9%);\n  --sl-color-gray-400: hsl(240 5% 64.9%);\n  --sl-color-gray-500: hsl(240 3.8% 46.1%);\n  --sl-color-gray-600: hsl(240 5.2% 33.9%);\n  --sl-color-gray-700: hsl(240 5.3% 26.1%);\n  --sl-color-gray-800: hsl(240 3.7% 15.9%);\n  --sl-color-gray-900: hsl(240 5.9% 10%);\n  --sl-color-gray-950: hsl(240 7.3% 8%);\n\n  --sl-color-red-50: hsl(0 85.7% 97.3%);\n  --sl-color-red-100: hsl(0 93.3% 94.1%);\n  --sl-color-red-200: hsl(0 96.3% 89.4%);\n  --sl-color-red-300: hsl(0 93.5% 81.8%);\n  --sl-color-red-400: hsl(0 90.6% 70.8%);\n  --sl-color-red-500: hsl(0 84.2% 60.2%);\n  --sl-color-red-600: hsl(0 72.2% 50.6%);\n  --sl-color-red-700: hsl(0 73.7% 41.8%);\n  --sl-color-red-800: hsl(0 70% 35.3%);\n  --sl-color-red-900: hsl(0 62.8% 30.6%);\n  --sl-color-red-950: hsl(0 60% 19.6%);\n\n  --sl-color-orange-50: hsl(33.3 100% 96.5%);\n  --sl-color-orange-100: hsl(34.3 100% 91.8%);\n  --sl-color-orange-200: hsl(32.1 97.7% 83.1%);\n  --sl-color-orange-300: hsl(30.7 97.2% 72.4%);\n  --sl-color-orange-400: hsl(27 96% 61%);\n  --sl-color-orange-500: hsl(24.6 95% 53.1%);\n  --sl-color-orange-600: hsl(20.5 90.2% 48.2%);\n  --sl-color-orange-700: hsl(17.5 88.3% 40.4%);\n  --sl-color-orange-800: hsl(15 79.1% 33.7%);\n  --sl-color-orange-900: hsl(15.3 74.6% 27.8%);\n  --sl-color-orange-950: hsl(15.2 69.1% 19%);\n\n  --sl-color-amber-50: hsl(48 100% 96.1%);\n  --sl-color-amber-100: hsl(48 96.5% 88.8%);\n  --sl-color-amber-200: hsl(48 96.6% 76.7%);\n  --sl-color-amber-300: hsl(45.9 96.7% 64.5%);\n  --sl-color-amber-400: hsl(43.3 96.4% 56.3%);\n  --sl-color-amber-500: hsl(37.7 92.1% 50.2%);\n  --sl-color-amber-600: hsl(32.1 94.6% 43.7%);\n  --sl-color-amber-700: hsl(26 90.5% 37.1%);\n  --sl-color-amber-800: hsl(22.7 82.5% 31.4%);\n  --sl-color-amber-900: hsl(21.7 77.8% 26.5%);\n  --sl-color-amber-950: hsl(22.9 74.1% 16.7%);\n\n  --sl-color-yellow-50: hsl(54.5 91.7% 95.3%);\n  --sl-color-yellow-100: hsl(54.9 96.7% 88%);\n  --sl-color-yellow-200: hsl(52.8 98.3% 76.9%);\n  --sl-color-yellow-300: hsl(50.4 97.8% 63.5%);\n  --sl-color-yellow-400: hsl(47.9 95.8% 53.1%);\n  --sl-color-yellow-500: hsl(45.4 93.4% 47.5%);\n  --sl-color-yellow-600: hsl(40.6 96.1% 40.4%);\n  --sl-color-yellow-700: hsl(35.5 91.7% 32.9%);\n  --sl-color-yellow-800: hsl(31.8 81% 28.8%);\n  --sl-color-yellow-900: hsl(28.4 72.5% 25.7%);\n  --sl-color-yellow-950: hsl(33.1 69% 13.9%);\n\n  --sl-color-lime-50: hsl(78.3 92% 95.1%);\n  --sl-color-lime-100: hsl(79.6 89.1% 89.2%);\n  --sl-color-lime-200: hsl(80.9 88.5% 79.6%);\n  --sl-color-lime-300: hsl(82 84.5% 67.1%);\n  --sl-color-lime-400: hsl(82.7 78% 55.5%);\n  --sl-color-lime-500: hsl(83.7 80.5% 44.3%);\n  --sl-color-lime-600: hsl(84.8 85.2% 34.5%);\n  --sl-color-lime-700: hsl(85.9 78.4% 27.3%);\n  --sl-color-lime-800: hsl(86.3 69% 22.7%);\n  --sl-color-lime-900: hsl(87.6 61.2% 20.2%);\n  --sl-color-lime-950: hsl(86.5 60.6% 13.9%);\n\n  --sl-color-green-50: hsl(138.5 76.5% 96.7%);\n  --sl-color-green-100: hsl(140.6 84.2% 92.5%);\n  --sl-color-green-200: hsl(141 78.9% 85.1%);\n  --sl-color-green-300: hsl(141.7 76.6% 73.1%);\n  --sl-color-green-400: hsl(141.9 69.2% 58%);\n  --sl-color-green-500: hsl(142.1 70.6% 45.3%);\n  --sl-color-green-600: hsl(142.1 76.2% 36.3%);\n  --sl-color-green-700: hsl(142.4 71.8% 29.2%);\n  --sl-color-green-800: hsl(142.8 64.2% 24.1%);\n  --sl-color-green-900: hsl(143.8 61.2% 20.2%);\n  --sl-color-green-950: hsl(144.3 60.7% 12%);\n\n  --sl-color-emerald-50: hsl(151.8 81% 95.9%);\n  --sl-color-emerald-100: hsl(149.3 80.4% 90%);\n  --sl-color-emerald-200: hsl(152.4 76% 80.4%);\n  --sl-color-emerald-300: hsl(156.2 71.6% 66.9%);\n  --sl-color-emerald-400: hsl(158.1 64.4% 51.6%);\n  --sl-color-emerald-500: hsl(160.1 84.1% 39.4%);\n  --sl-color-emerald-600: hsl(161.4 93.5% 30.4%);\n  --sl-color-emerald-700: hsl(162.9 93.5% 24.3%);\n  --sl-color-emerald-800: hsl(163.1 88.1% 19.8%);\n  --sl-color-emerald-900: hsl(164.2 85.7% 16.5%);\n  --sl-color-emerald-950: hsl(164.3 87.5% 9.4%);\n\n  --sl-color-teal-50: hsl(166.2 76.5% 96.7%);\n  --sl-color-teal-100: hsl(167.2 85.5% 89.2%);\n  --sl-color-teal-200: hsl(168.4 83.8% 78.2%);\n  --sl-color-teal-300: hsl(170.6 76.9% 64.3%);\n  --sl-color-teal-400: hsl(172.5 66% 50.4%);\n  --sl-color-teal-500: hsl(173.4 80.4% 40%);\n  --sl-color-teal-600: hsl(174.7 83.9% 31.6%);\n  --sl-color-teal-700: hsl(175.3 77.4% 26.1%);\n  --sl-color-teal-800: hsl(176.1 69.4% 21.8%);\n  --sl-color-teal-900: hsl(175.9 60.8% 19%);\n  --sl-color-teal-950: hsl(176.5 58.6% 11.4%);\n\n  --sl-color-cyan-50: hsl(183.2 100% 96.3%);\n  --sl-color-cyan-100: hsl(185.1 95.9% 90.4%);\n  --sl-color-cyan-200: hsl(186.2 93.5% 81.8%);\n  --sl-color-cyan-300: hsl(187 92.4% 69%);\n  --sl-color-cyan-400: hsl(187.9 85.7% 53.3%);\n  --sl-color-cyan-500: hsl(188.7 94.5% 42.7%);\n  --sl-color-cyan-600: hsl(191.6 91.4% 36.5%);\n  --sl-color-cyan-700: hsl(192.9 82.3% 31%);\n  --sl-color-cyan-800: hsl(194.4 69.6% 27.1%);\n  --sl-color-cyan-900: hsl(196.4 63.6% 23.7%);\n  --sl-color-cyan-950: hsl(196.8 61% 16.1%);\n\n  --sl-color-sky-50: hsl(204 100% 97.1%);\n  --sl-color-sky-100: hsl(204 93.8% 93.7%);\n  --sl-color-sky-200: hsl(200.6 94.4% 86.1%);\n  --sl-color-sky-300: hsl(199.4 95.5% 73.9%);\n  --sl-color-sky-400: hsl(198.4 93.2% 59.6%);\n  --sl-color-sky-500: hsl(198.6 88.7% 48.4%);\n  --sl-color-sky-600: hsl(200.4 98% 39.4%);\n  --sl-color-sky-700: hsl(201.3 96.3% 32.2%);\n  --sl-color-sky-800: hsl(201 90% 27.5%);\n  --sl-color-sky-900: hsl(202 80.3% 23.9%);\n  --sl-color-sky-950: hsl(202.3 73.8% 16.5%);\n\n  --sl-color-blue-50: hsl(213.8 100% 96.9%);\n  --sl-color-blue-100: hsl(214.3 94.6% 92.7%);\n  --sl-color-blue-200: hsl(213.3 96.9% 87.3%);\n  --sl-color-blue-300: hsl(211.7 96.4% 78.4%);\n  --sl-color-blue-400: hsl(213.1 93.9% 67.8%);\n  --sl-color-blue-500: hsl(217.2 91.2% 59.8%);\n  --sl-color-blue-600: hsl(221.2 83.2% 53.3%);\n  --sl-color-blue-700: hsl(224.3 76.3% 48%);\n  --sl-color-blue-800: hsl(225.9 70.7% 40.2%);\n  --sl-color-blue-900: hsl(224.4 64.3% 32.9%);\n  --sl-color-blue-950: hsl(226.2 55.3% 18.4%);\n\n  --sl-color-indigo-50: hsl(225.9 100% 96.7%);\n  --sl-color-indigo-100: hsl(226.5 100% 93.9%);\n  --sl-color-indigo-200: hsl(228 96.5% 88.8%);\n  --sl-color-indigo-300: hsl(229.7 93.5% 81.8%);\n  --sl-color-indigo-400: hsl(234.5 89.5% 73.9%);\n  --sl-color-indigo-500: hsl(238.7 83.5% 66.7%);\n  --sl-color-indigo-600: hsl(243.4 75.4% 58.6%);\n  --sl-color-indigo-700: hsl(244.5 57.9% 50.6%);\n  --sl-color-indigo-800: hsl(243.7 54.5% 41.4%);\n  --sl-color-indigo-900: hsl(242.2 47.4% 34.3%);\n  --sl-color-indigo-950: hsl(243.5 43.6% 22.9%);\n\n  --sl-color-violet-50: hsl(250 100% 97.6%);\n  --sl-color-violet-100: hsl(251.4 91.3% 95.5%);\n  --sl-color-violet-200: hsl(250.5 95.2% 91.8%);\n  --sl-color-violet-300: hsl(252.5 94.7% 85.1%);\n  --sl-color-violet-400: hsl(255.1 91.7% 76.3%);\n  --sl-color-violet-500: hsl(258.3 89.5% 66.3%);\n  --sl-color-violet-600: hsl(262.1 83.3% 57.8%);\n  --sl-color-violet-700: hsl(263.4 70% 50.4%);\n  --sl-color-violet-800: hsl(263.4 69.3% 42.2%);\n  --sl-color-violet-900: hsl(263.5 67.4% 34.9%);\n  --sl-color-violet-950: hsl(265.1 61.5% 21.4%);\n\n  --sl-color-purple-50: hsl(270 100% 98%);\n  --sl-color-purple-100: hsl(268.7 100% 95.5%);\n  --sl-color-purple-200: hsl(268.6 100% 91.8%);\n  --sl-color-purple-300: hsl(269.2 97.4% 85.1%);\n  --sl-color-purple-400: hsl(270 95.2% 75.3%);\n  --sl-color-purple-500: hsl(270.7 91% 65.1%);\n  --sl-color-purple-600: hsl(271.5 81.3% 55.9%);\n  --sl-color-purple-700: hsl(272.1 71.7% 47.1%);\n  --sl-color-purple-800: hsl(272.9 67.2% 39.4%);\n  --sl-color-purple-900: hsl(273.6 65.6% 32%);\n  --sl-color-purple-950: hsl(276 59.5% 16.5%);\n\n  --sl-color-fuchsia-50: hsl(289.1 100% 97.8%);\n  --sl-color-fuchsia-100: hsl(287 100% 95.5%);\n  --sl-color-fuchsia-200: hsl(288.3 95.8% 90.6%);\n  --sl-color-fuchsia-300: hsl(291.1 93.1% 82.9%);\n  --sl-color-fuchsia-400: hsl(292 91.4% 72.5%);\n  --sl-color-fuchsia-500: hsl(292.2 84.1% 60.6%);\n  --sl-color-fuchsia-600: hsl(293.4 69.5% 48.8%);\n  --sl-color-fuchsia-700: hsl(294.7 72.4% 39.8%);\n  --sl-color-fuchsia-800: hsl(295.4 70.2% 32.9%);\n  --sl-color-fuchsia-900: hsl(296.7 63.6% 28%);\n  --sl-color-fuchsia-950: hsl(297.1 56.8% 14.5%);\n\n  --sl-color-pink-50: hsl(327.3 73.3% 97.1%);\n  --sl-color-pink-100: hsl(325.7 77.8% 94.7%);\n  --sl-color-pink-200: hsl(325.9 84.6% 89.8%);\n  --sl-color-pink-300: hsl(327.4 87.1% 81.8%);\n  --sl-color-pink-400: hsl(328.6 85.5% 70.2%);\n  --sl-color-pink-500: hsl(330.4 81.2% 60.4%);\n  --sl-color-pink-600: hsl(333.3 71.4% 50.6%);\n  --sl-color-pink-700: hsl(335.1 77.6% 42%);\n  --sl-color-pink-800: hsl(335.8 74.4% 35.3%);\n  --sl-color-pink-900: hsl(335.9 69% 30.4%);\n  --sl-color-pink-950: hsl(336.2 65.4% 15.9%);\n\n  --sl-color-rose-50: hsl(355.7 100% 97.3%);\n  --sl-color-rose-100: hsl(355.6 100% 94.7%);\n  --sl-color-rose-200: hsl(352.7 96.1% 90%);\n  --sl-color-rose-300: hsl(352.6 95.7% 81.8%);\n  --sl-color-rose-400: hsl(351.3 94.5% 71.4%);\n  --sl-color-rose-500: hsl(349.7 89.2% 60.2%);\n  --sl-color-rose-600: hsl(346.8 77.2% 49.8%);\n  --sl-color-rose-700: hsl(345.3 82.7% 40.8%);\n  --sl-color-rose-800: hsl(343.4 79.7% 34.7%);\n  --sl-color-rose-900: hsl(341.5 75.5% 30.4%);\n  --sl-color-rose-950: hsl(341.3 70.1% 17.1%);\n\n  --sl-color-primary-50: var(--sl-color-sky-50);\n  --sl-color-primary-100: var(--sl-color-sky-100);\n  --sl-color-primary-200: var(--sl-color-sky-200);\n  --sl-color-primary-300: var(--sl-color-sky-300);\n  --sl-color-primary-400: var(--sl-color-sky-400);\n  --sl-color-primary-500: var(--sl-color-sky-500);\n  --sl-color-primary-600: var(--sl-color-sky-600);\n  --sl-color-primary-700: var(--sl-color-sky-700);\n  --sl-color-primary-800: var(--sl-color-sky-800);\n  --sl-color-primary-900: var(--sl-color-sky-900);\n  --sl-color-primary-950: var(--sl-color-sky-950);\n\n  --sl-color-success-50: var(--sl-color-green-50);\n  --sl-color-success-100: var(--sl-color-green-100);\n  --sl-color-success-200: var(--sl-color-green-200);\n  --sl-color-success-300: var(--sl-color-green-300);\n  --sl-color-success-400: var(--sl-color-green-400);\n  --sl-color-success-500: var(--sl-color-green-500);\n  --sl-color-success-600: var(--sl-color-green-600);\n  --sl-color-success-700: var(--sl-color-green-700);\n  --sl-color-success-800: var(--sl-color-green-800);\n  --sl-color-success-900: var(--sl-color-green-900);\n  --sl-color-success-950: var(--sl-color-green-950);\n\n  --sl-color-warning-50: var(--sl-color-amber-50);\n  --sl-color-warning-100: var(--sl-color-amber-100);\n  --sl-color-warning-200: var(--sl-color-amber-200);\n  --sl-color-warning-300: var(--sl-color-amber-300);\n  --sl-color-warning-400: var(--sl-color-amber-400);\n  --sl-color-warning-500: var(--sl-color-amber-500);\n  --sl-color-warning-600: var(--sl-color-amber-600);\n  --sl-color-warning-700: var(--sl-color-amber-700);\n  --sl-color-warning-800: var(--sl-color-amber-800);\n  --sl-color-warning-900: var(--sl-color-amber-900);\n  --sl-color-warning-950: var(--sl-color-amber-950);\n\n  --sl-color-danger-50: var(--sl-color-red-50);\n  --sl-color-danger-100: var(--sl-color-red-100);\n  --sl-color-danger-200: var(--sl-color-red-200);\n  --sl-color-danger-300: var(--sl-color-red-300);\n  --sl-color-danger-400: var(--sl-color-red-400);\n  --sl-color-danger-500: var(--sl-color-red-500);\n  --sl-color-danger-600: var(--sl-color-red-600);\n  --sl-color-danger-700: var(--sl-color-red-700);\n  --sl-color-danger-800: var(--sl-color-red-800);\n  --sl-color-danger-900: var(--sl-color-red-900);\n  --sl-color-danger-950: var(--sl-color-red-950);\n\n  --sl-color-neutral-50: var(--sl-color-gray-50);\n  --sl-color-neutral-100: var(--sl-color-gray-100);\n  --sl-color-neutral-200: var(--sl-color-gray-200);\n  --sl-color-neutral-300: var(--sl-color-gray-300);\n  --sl-color-neutral-400: var(--sl-color-gray-400);\n  --sl-color-neutral-500: var(--sl-color-gray-500);\n  --sl-color-neutral-600: var(--sl-color-gray-600);\n  --sl-color-neutral-700: var(--sl-color-gray-700);\n  --sl-color-neutral-800: var(--sl-color-gray-800);\n  --sl-color-neutral-900: var(--sl-color-gray-900);\n  --sl-color-neutral-950: var(--sl-color-gray-950);\n\n  --sl-color-neutral-0: hsl(0, 0%, 100%);\n  --sl-color-neutral-1000: hsl(0, 0%, 0%);\n\n  --sl-border-radius-small: 0.1875rem;\n  --sl-border-radius-medium: 0.25rem;\n  --sl-border-radius-large: 0.5rem;\n  --sl-border-radius-x-large: 1rem;\n\n  --sl-border-radius-circle: 50%;\n  --sl-border-radius-pill: 9999px;\n\n  --sl-shadow-x-small: 0 1px 2px hsl(240 3.8% 46.1% / 6%);\n  --sl-shadow-small: 0 1px 2px hsl(240 3.8% 46.1% / 12%);\n  --sl-shadow-medium: 0 2px 4px hsl(240 3.8% 46.1% / 12%);\n  --sl-shadow-large: 0 2px 8px hsl(240 3.8% 46.1% / 12%);\n  --sl-shadow-x-large: 0 4px 16px hsl(240 3.8% 46.1% / 12%);\n\n  --sl-spacing-3x-small: 0.125rem;\n  --sl-spacing-2x-small: 0.25rem;\n  --sl-spacing-x-small: 0.5rem;\n  --sl-spacing-small: 0.75rem;\n  --sl-spacing-medium: 1rem;\n  --sl-spacing-large: 1.25rem;\n  --sl-spacing-x-large: 1.75rem;\n  --sl-spacing-2x-large: 2.25rem;\n  --sl-spacing-3x-large: 3rem;\n  --sl-spacing-4x-large: 4.5rem;\n\n  --sl-transition-x-slow: 1000ms;\n  --sl-transition-slow: 500ms;\n  --sl-transition-medium: 250ms;\n  --sl-transition-fast: 150ms;\n  --sl-transition-x-fast: 50ms;\n\n  --sl-font-mono: SFMono-Regular, Consolas, "Liberation Mono", Menlo, monospace;\n  --sl-font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,\n    Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",\n    "Segoe UI Symbol";\n  --sl-font-serif: Georgia, "Times New Roman", serif;\n\n  --sl-font-size-2x-small: 0.625rem;\n  --sl-font-size-x-small: 0.75rem;\n  --sl-font-size-small: 0.875rem;\n  --sl-font-size-medium: 1rem;\n  --sl-font-size-large: 1.25rem;\n  --sl-font-size-x-large: 1.5rem;\n  --sl-font-size-2x-large: 2.25rem;\n  --sl-font-size-3x-large: 3rem;\n  --sl-font-size-4x-large: 4.5rem;\n\n  --sl-font-weight-light: 300;\n  --sl-font-weight-normal: 400;\n  --sl-font-weight-semibold: 500;\n  --sl-font-weight-bold: 700;\n\n  --sl-letter-spacing-denser: -0.03em;\n  --sl-letter-spacing-dense: -0.015em;\n  --sl-letter-spacing-normal: normal;\n  --sl-letter-spacing-loose: 0.075em;\n  --sl-letter-spacing-looser: 0.15em;\n\n  --sl-line-height-denser: 1;\n  --sl-line-height-dense: 1.4;\n  --sl-line-height-normal: 1.8;\n  --sl-line-height-loose: 2.2;\n  --sl-line-height-looser: 2.6;\n\n  --sl-focus-ring-color: var(--sl-color-primary-600);\n  --sl-focus-ring-style: solid;\n  --sl-focus-ring-width: 3px;\n  --sl-focus-ring: var(--sl-focus-ring-style) var(--sl-focus-ring-width)\n    var(--sl-focus-ring-color);\n  --sl-focus-ring-offset: 1px;\n\n  --sl-button-font-size-small: var(--sl-font-size-x-small);\n  --sl-button-font-size-medium: var(--sl-font-size-small);\n  --sl-button-font-size-large: var(--sl-font-size-medium);\n\n  --sl-input-height-small: 1.875rem;\n  --sl-input-height-medium: 2.5rem;\n  --sl-input-height-large: 3.125rem;\n\n  --sl-input-background-color: var(--sl-color-neutral-0);\n  --sl-input-background-color-hover: var(--sl-input-background-color);\n  --sl-input-background-color-focus: var(--sl-input-background-color);\n  --sl-input-background-color-disabled: var(--sl-color-neutral-100);\n  --sl-input-border-color: var(--sl-color-neutral-300);\n  --sl-input-border-color-hover: var(--sl-color-neutral-400);\n  --sl-input-border-color-focus: var(--sl-color-primary-500);\n  --sl-input-border-color-disabled: var(--sl-color-neutral-300);\n  --sl-input-border-width: 1px;\n  --sl-input-required-content: "*";\n  --sl-input-required-content-offset: -2px;\n  --sl-input-required-content-color: var(--sl-input-label-color);\n\n  --sl-input-border-radius-small: var(--sl-border-radius-medium);\n  --sl-input-border-radius-medium: var(--sl-border-radius-medium);\n  --sl-input-border-radius-large: var(--sl-border-radius-medium);\n\n  --sl-input-font-family: var(--sl-font-sans);\n  --sl-input-font-weight: var(--sl-font-weight-normal);\n  --sl-input-font-size-small: var(--sl-font-size-small);\n  --sl-input-font-size-medium: var(--sl-font-size-medium);\n  --sl-input-font-size-large: var(--sl-font-size-large);\n  --sl-input-letter-spacing: var(--sl-letter-spacing-normal);\n\n  --sl-input-color: var(--sl-color-neutral-700);\n  --sl-input-color-hover: var(--sl-color-neutral-700);\n  --sl-input-color-focus: var(--sl-color-neutral-700);\n  --sl-input-color-disabled: var(--sl-color-neutral-900);\n  --sl-input-icon-color: var(--sl-color-neutral-500);\n  --sl-input-icon-color-hover: var(--sl-color-neutral-600);\n  --sl-input-icon-color-focus: var(--sl-color-neutral-600);\n  --sl-input-placeholder-color: var(--sl-color-neutral-500);\n  --sl-input-placeholder-color-disabled: var(--sl-color-neutral-600);\n  --sl-input-spacing-small: var(--sl-spacing-small);\n  --sl-input-spacing-medium: var(--sl-spacing-medium);\n  --sl-input-spacing-large: var(--sl-spacing-large);\n\n  --sl-input-focus-ring-color: hsl(198.6 88.7% 48.4% / 40%);\n  --sl-input-focus-ring-offset: 0;\n\n  --sl-input-filled-background-color: var(--sl-color-neutral-100);\n  --sl-input-filled-background-color-hover: var(--sl-color-neutral-100);\n  --sl-input-filled-background-color-focus: var(--sl-color-neutral-100);\n  --sl-input-filled-background-color-disabled: var(--sl-color-neutral-100);\n  --sl-input-filled-color: var(--sl-color-neutral-800);\n  --sl-input-filled-color-hover: var(--sl-color-neutral-800);\n  --sl-input-filled-color-focus: var(--sl-color-neutral-700);\n  --sl-input-filled-color-disabled: var(--sl-color-neutral-800);\n\n  --sl-input-label-font-size-small: var(--sl-font-size-small);\n  --sl-input-label-font-size-medium: var(--sl-font-size-medium);\n  --sl-input-label-font-size-large: var(--sl-font-size-large);\n  --sl-input-label-color: inherit;\n\n  --sl-input-help-text-font-size-small: var(--sl-font-size-x-small);\n  --sl-input-help-text-font-size-medium: var(--sl-font-size-small);\n  --sl-input-help-text-font-size-large: var(--sl-font-size-medium);\n  --sl-input-help-text-color: var(--sl-color-neutral-500);\n\n  --sl-toggle-size-small: 0.875rem;\n  --sl-toggle-size-medium: 1.125rem;\n  --sl-toggle-size-large: 1.375rem;\n\n  --sl-overlay-background-color: hsl(240 3.8% 46.1% / 33%);\n\n  --sl-panel-background-color: var(--sl-color-neutral-0);\n  --sl-panel-border-color: var(--sl-color-neutral-200);\n  --sl-panel-border-width: 1px;\n\n  --sl-tooltip-border-radius: var(--sl-border-radius-medium);\n  --sl-tooltip-background-color: var(--sl-color-neutral-800);\n  --sl-tooltip-color: var(--sl-color-neutral-0);\n  --sl-tooltip-font-family: var(--sl-font-sans);\n  --sl-tooltip-font-weight: var(--sl-font-weight-normal);\n  --sl-tooltip-font-size: var(--sl-font-size-small);\n  --sl-tooltip-line-height: var(--sl-line-height-dense);\n  --sl-tooltip-padding: var(--sl-spacing-2x-small) var(--sl-spacing-x-small);\n  --sl-tooltip-arrow-size: 6px;\n\n  --sl-z-index-drawer: 999700;\n  --sl-z-index-dialog: 999800;\n  --sl-z-index-dropdown: 999900;\n  --sl-z-index-toast: 999950;\n  --sl-z-index-tooltip: 9991000;\n}\n\n.sl-scroll-lock {\n  padding-right: var(--sl-scroll-lock-size) !important;\n  overflow: hidden !important;\n}\n\n.sl-toast-stack {\n  position: fixed;\n  top: 0;\n  inset-inline-end: 0;\n  z-index: var(--sl-z-index-toast);\n  width: 28rem;\n  max-width: 100%;\n  max-height: 100%;\n  overflow: auto;\n}\n\n.sl-toast-stack sl-alert {\n  margin: var(--sl-spacing-medium);\n}\n\n.sl-toast-stack sl-alert::part(base) {\n  box-shadow: var(--sl-shadow-large);\n}\n\nsl-drawer::part(base) {\n  color: var(--sl-color-neutral-800) !important;\n}\n\n.h5player-popup-wrap {\n  position: relative;\n  z-index: 99999999;\n  opacity: 0;\n}\n\n.h5player-popup-wrap sl-popup {\n  position: relative;\n}\n\n.h5player-popup-wrap .h5player-popup-content {\n  background-color: rgba(0, 0, 0, 0.9);\n  color: #fff;\n  font-size: 16px;\n  min-width: 220px;\n  height: 48px;\n  line-height: 48px;\n  display: flex;\n  padding: 0 16px;\n  border-radius: 6px 6px 0 0;\n  border-bottom: 2px solid rgba(255, 255, 255, 0.2);\n\n  /* 灰色向下的过度阴影 */\n  box-shadow: 0 6px 14px rgba(0, 0, 0, 0.7);\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n@keyframes text-lumos {\n  0%,100%{ color:#fff; }\n\t50%{ color:#ccc; }\n}\n\n.h5player-popup-content .h5p-logo-mod {\n  white-space: nowrap;\n  font-weight: 500;\n  text-shadow: 0px 0px 2px #666, 0 0 30px #666;\n  animation: text-lumos 5s infinite;\n}\n\n.h5player-popup-content .h5p-menu-wrap {}\n\n.h5player-popup-content .h5p-action-mod {\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n\n.h5player-popup-content .h5p-action-btn {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-size: 14px;\n  padding: 0 8px;\n  cursor: pointer;\n  white-space: nowrap;\n}\n\n.h5player-popup-content .h5p-action-btn:hover {\n  background-color: rgba(255, 255, 255, 0.2);\n}\n\n.h5player-popup-content .h5p-action-btn sl-icon {\n  padding: 0 4px;\n}\n\n/* 激活态 */\n.h5player-popup-active {\n  opacity: 0.8;\n  transition: opacity 0.2s;\n}\n\n.h5player-popup-content a, .h5player-popup-content a:visited{\n  color: #fff;\n  cursor: pointer;\n  text-decoration: none;\n}\n\n.h5player-popup-wrap:hover, .h5player-popup-full-active {\n  opacity: 1 !important;\n  transition: opacity 0.2s;\n}\n\n.h5player-popup-wrap:hover .h5player-popup-content, .h5player-popup-full-active .h5player-popup-content {\n  border-bottom: 2px solid rgba(255, 255, 255, 0.6);\n}\n\n.h5player-popup-content .h5p-action-mod sl-menu {\n  background-color: rgba(0, 0, 0, 0.9);\n  color: #fff;\n  border-radius: 4px;\n  padding: 5px 0;\n}\n\n.h5player-popup-content .h5p-action-mod sl-menu-item::part(base) {\n  /* background-color: rgba(0, 0, 0, 0.9); */\n  color: #fff;\n  font-size: 14px;\n  padding: 2px 0;\n}\n\n.h5player-popup-content .h5p-action-mod sl-menu-item::part(base):hover {\n  background-color: var(--sl-color-primary-500);\n  color: #fff;\n}\n\n.h5player-popup-content .h5p-recommend-wrap {\n  flex-grow: 1;\n  box-sizing: border-box;\n  margin: 0 20px;\n  text-align: center;\n  font-size: 14px;\n  overflow: hidden;\n  white-space: nowrap;\n\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n  position: relative;\n}\n\n@keyframes text-marquee {\n  0% { transform: translateX(0); }\n  100% { transform: translateX(-100%); }\n}\n\n.h5player-popup-content .h5p-recommend-mod {\n  display: inline-block;\n  word-break: keep-all;\n  white-space: nowrap;\n  /* 无限循环滚动的动画效果 */\n  /* padding-left: 100%; */\n  /* animation: text-marquee 15s linear infinite; */\n}\n.h5player-popup-content .h5p-recommend-item {\n  word-break: keep-all;\n  white-space: nowrap;\n\n  position: absolute;\n  top: 0;\n  right: 0;\n  pointer-events: none;\n  opacity: 0;\n  transition: opacity 0.4s;\n}\n\n.h5player-popup-content .h5p-recommend-item__active {\n  opacity: 1;\n  z-index: 99;\n  pointer-events: auto;\n}\n\n.h5player-popup-content .h5p-recommend-wrap>div {\n  opacity: 0.5;\n}\n.h5player-popup-content .h5p-recommend-wrap>div:hover{\n  opacity: 1;\n}\n.h5player-popup-content .h5p-recommend-wrap>div:hover .h5p-recommend-mod {\n  animation-play-state: paused;\n}');
/**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const lt=globalThis,ct=lt.ShadowRoot&&(void 0===lt.ShadyCSS||lt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,ut=Symbol(),dt=new WeakMap;let pt=class{constructor(e,t,o){if(this._$cssResult$=!0,o!==ut)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o;const t=this.t;if(ct&&void 0===e){const o=void 0!==t&&1===t.length;o&&(e=dt.get(t)),void 0===e&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),o&&dt.set(t,e))}return e}toString(){return this.cssText}};const ht=(e,...t)=>{const o=1===e.length?e[0]:t.reduce((t,o,n)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw Error("Value passed to 'css' function must be a 'css' function result: "+e+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(o)+e[n+1],e[0]);return new pt(o,e,ut)},gt=ct?e=>e:e=>e instanceof CSSStyleSheet?(e=>{let t="";for(const o of e.cssRules)t+=o.cssText;return(e=>new pt("string"==typeof e?e:e+"",void 0,ut))(t)})(e):e,{is:mt,defineProperty:ft,getOwnPropertyDescriptor:bt,getOwnPropertyNames:yt,getOwnPropertySymbols:wt,getPrototypeOf:vt}=Object,kt=globalThis,St=kt.trustedTypes,_t=St?St.emptyScript:"",Et=kt.reactiveElementPolyfillSupport,Ct={toAttribute(e,t){switch(t){case Boolean:e=e?_t:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let o=e;switch(t){case Boolean:o=null!==e;break;case Number:o=null===e?null:Number(e);break;case Object:case Array:try{o=JSON.parse(e)}catch(e){o=null}}return o}},Pt=(e,t)=>!mt(e,t),xt={attribute:!0,type:String,converter:Ct,reflect:!1,hasChanged:Pt};
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */Symbol.metadata??=Symbol("metadata"),kt.litPropertyMetadata??=new WeakMap;class Tt extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=xt){if(t.state&&(t.attribute=!1),this._$Ei(),this.elementProperties.set(e,t),!t.noAccessor){const o=Symbol(),n=this.getPropertyDescriptor(e,o,t);void 0!==n&&ft(this.prototype,e,n)}}static getPropertyDescriptor(e,t,o){const{get:n,set:r}=bt(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};return{get(){return n?.call(this)},set(t){const i=n?.call(this);r.call(this,t),this.requestUpdate(e,i,o)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??xt}static _$Ei(){if(this.hasOwnProperty("elementProperties"))return;const e=vt(this);e.finalize(),void 0!==e.l&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty("finalized"))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty("properties")){const e=this.properties,t=[...yt(e),...wt(e)];for(const o of t)this.createProperty(o,e[o])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,o]of t)this.elementProperties.set(e,o)}this._$Eh=new Map;for(const[e,t]of this.elementProperties){const o=this._$Eu(e,t);void 0!==o&&this._$Eh.set(o,e)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const o=new Set(e.flat(1/0).reverse());for(const e of o)t.unshift(gt(e))}else void 0!==e&&t.push(gt(e));return t}static _$Eu(e,t){const o=t.attribute;return!1===o?void 0:"string"==typeof o?o:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$Eg=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$ES(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$E_??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$E_?.delete(e)}_$ES(){const e=new Map,t=this.constructor.elementProperties;for(const o of t.keys())this.hasOwnProperty(o)&&(e.set(o,this[o]),delete this[o]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(ct)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const o of t){const t=document.createElement("style"),n=lt.litNonce;void 0!==n&&t.setAttribute("nonce",n),t.textContent=o.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$E_?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$E_?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,o){this._$AK(e,o)}_$EO(e,t){const o=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,o);if(void 0!==n&&!0===o.reflect){const r=(void 0!==o.converter?.toAttribute?o.converter:Ct).toAttribute(t,o.type);this._$Em=e,null==r?this.removeAttribute(n):this.setAttribute(n,r),this._$Em=null}}_$AK(e,t){const o=this.constructor,n=o._$Eh.get(e);if(void 0!==n&&this._$Em!==n){const e=o.getPropertyOptions(n),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:Ct;this._$Em=n,this[n]=r.fromAttribute(t,e.type),this._$Em=null}}requestUpdate(e,t,o){if(void 0!==e){if(o??=this.constructor.getPropertyOptions(e),!(o.hasChanged??Pt)(this[e],t))return;this.C(e,t,o)}!1===this.isUpdatePending&&(this._$Eg=this._$EP())}C(e,t,o){this._$AL.has(e)||this._$AL.set(e,t),!0===o.reflect&&this._$Em!==e&&(this._$ET??=new Set).add(e)}async _$EP(){this.isUpdatePending=!0;try{await this._$Eg}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[e,t]of this._$Ep)this[e]=t;this._$Ep=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,o]of e)!0!==o.wrapped||this._$AL.has(t)||void 0===this[t]||this.C(t,this[t],o)}let e=!1;const t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$E_?.forEach(e=>e.hostUpdate?.()),this.update(t)):this._$Ej()}catch(t){throw e=!1,this._$Ej(),t}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$E_?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$Ej(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$Eg}shouldUpdate(e){return!0}update(e){this._$ET&&=this._$ET.forEach(e=>this._$EO(e,this[e])),this._$Ej()}updated(e){}firstUpdated(e){}}Tt.elementStyles=[],Tt.shadowRootOptions={mode:"open"},Tt.elementProperties=new Map,Tt.finalized=new Map,Et?.({ReactiveElement:Tt}),(kt.reactiveElementVersions??=[]).push("2.0.3");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const At=globalThis,Mt=At.trustedTypes,Lt=Mt?Mt.createPolicy("lit-html",{createHTML:e=>e}):void 0,$t="$lit$",Rt=`lit$${(Math.random()+"").slice(9)}$`,Dt="?"+Rt,It=`<${Dt}>`,Ot=document,Ht=()=>Ot.createComment(""),Ut=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Ft=Array.isArray,zt="[ \t\n\f\r]",Bt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Gt=/-->/g,Nt=/>/g,jt=RegExp(`>|${zt}(?:([^\\s"'>=/]+)(${zt}*=${zt}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Vt=/'/g,qt=/"/g,Wt=/^(?:script|style|textarea|title)$/i,Kt=(e,...t)=>({_$litType$:1,strings:e,values:t}),Jt=Symbol.for("lit-noChange"),Xt=Symbol.for("lit-nothing"),Yt=new WeakMap,Zt=Ot.createTreeWalker(Ot,129),Qt=(e,o)=>{const n=e.length-1,r=[];let i,s=2===o?"<svg>":"",a=Bt;for(let t=0;t<n;t++){const o=e[t];let n,l,c=-1,u=0;for(;u<o.length&&(a.lastIndex=u,l=a.exec(o),null!==l);)u=a.lastIndex,a===Bt?"!--"===l[1]?a=Gt:void 0!==l[1]?a=Nt:void 0!==l[2]?(Wt.test(l[2])&&(i=RegExp("</"+l[2],"g")),a=jt):void 0!==l[3]&&(a=jt):a===jt?">"===l[0]?(a=i??Bt,c=-1):void 0===l[1]?c=-2:(c=a.lastIndex-l[2].length,n=l[1],a=void 0===l[3]?jt:'"'===l[3]?qt:Vt):a===qt||a===Vt?a=jt:a===Gt||a===Nt?a=Bt:(a=jt,i=void 0);const d=a===jt&&e[t+1].startsWith("/>")?" ":"";s+=a===Bt?o+It:c>=0?(r.push(n),o.slice(0,c)+$t+o.slice(c)+Rt+d):o+Rt+(-2===c?t:d)}return[t(e,s+(e[n]||"<?>")+(2===o?"</svg>":"")),r]};class eo{constructor({strings:e,_$litType$:t},o){let n;this.parts=[];let r=0,i=0;const s=e.length-1,a=this.parts,[l,c]=Qt(e,t);if(this.el=eo.createElement(l,o),Zt.currentNode=this.el.content,2===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(n=Zt.nextNode())&&a.length<s;){if(1===n.nodeType){if(n.hasAttributes())for(const e of n.getAttributeNames())if(e.endsWith($t)){const t=c[i++],o=n.getAttribute(e).split(Rt),s=/([.?@])?(.*)/.exec(t);a.push({type:1,index:r,name:s[2],strings:o,ctor:"."===s[1]?ro:"?"===s[1]?io:"@"===s[1]?so:no}),n.removeAttribute(e)}else e.startsWith(Rt)&&(a.push({type:6,index:r}),n.removeAttribute(e));if(Wt.test(n.tagName)){const e=n.textContent.split(Rt),t=e.length-1;if(t>0){n.textContent=Mt?Mt.emptyScript:"";for(let o=0;o<t;o++)n.append(e[o],Ht()),Zt.nextNode(),a.push({type:2,index:++r});n.append(e[t],Ht())}}}else if(8===n.nodeType)if(n.data===Dt)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=n.data.indexOf(Rt,e+1));)a.push({type:7,index:r}),e+=Rt.length-1}r++}}static createElement(e,t){const o=Ot.createElement("template");return o.innerHTML=e,o}}class to{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:t},parts:o}=this._$AD,n=(e?.creationScope??Ot).importNode(t,!0);Zt.currentNode=n;let r=Zt.nextNode(),i=0,s=0,a=o[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new oo(r,r.nextSibling,this,e):1===a.type?t=new a.ctor(r,a.name,a.strings,this,e):6===a.type&&(t=new ao(r,this,e)),this._$AV.push(t),a=o[++s]}i!==a?.index&&(r=Zt.nextNode(),i++)}return Zt.currentNode=Ot,n}p(e){let t=0;for(const o of this._$AV)void 0!==o&&(void 0!==o.strings?(o._$AI(e,o,t),t+=o.strings.length-2):o._$AI(e[t])),t++}}class oo{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,o,n){this.type=2,this._$AH=Xt,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=o,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const t=this._$AM;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=o(this,e,t),Ut(e)?e===Xt||null==e||""===e?(this._$AH!==Xt&&this._$AR(),this._$AH=Xt):e!==this._$AH&&e!==Jt&&this._(e):void 0!==e._$litType$?this.g(e):void 0!==e.nodeType?this.$(e):(e=>Ft(e)||"function"==typeof e?.[Symbol.iterator])(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Xt&&Ut(this._$AH)?this._$AA.nextSibling.data=e:this.$(Ot.createTextNode(e)),this._$AH=e}g(e){const{values:o,_$litType$:n}=e,r="number"==typeof n?this._$AC(e):(void 0===n.el&&(n.el=eo.createElement(t(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===r)this._$AH.p(o);else{const e=new to(r,this),t=e.u(this.options);e.p(o),this.$(t),this._$AH=e}}_$AC(e){let t=Yt.get(e.strings);return void 0===t&&Yt.set(e.strings,t=new eo(e)),t}T(e){Ft(this._$AH)||(this._$AH=[],this._$AR());const t=this._$AH;let o,n=0;for(const r of e)n===t.length?t.push(o=new oo(this.k(Ht()),this.k(Ht()),this,this.options)):o=t[n],o._$AI(r),n++;n<t.length&&(this._$AR(o&&o._$AB.nextSibling,n),t.length=n)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e&&e!==this._$AB;){const t=e.nextSibling;e.remove(),e=t}}setConnected(e){void 0===this._$AM&&(this._$Cv=e,this._$AP?.(e))}}class no{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,o,n,r){this.type=1,this._$AH=Xt,this._$AN=void 0,this.element=e,this.name=t,this._$AM=n,this.options=r,o.length>2||""!==o[0]||""!==o[1]?(this._$AH=Array(o.length-1).fill(new String),this.strings=o):this._$AH=Xt}_$AI(e,t=this,n,r){const i=this.strings;let s=!1;if(void 0===i)e=o(this,e,t,0),s=!Ut(e)||e!==this._$AH&&e!==Jt,s&&(this._$AH=e);else{const r=e;let a,l;for(e=i[0],a=0;a<i.length-1;a++)l=o(this,r[n+a],t,a),l===Jt&&(l=this._$AH[a]),s||=!Ut(l)||l!==this._$AH[a],l===Xt?e=Xt:e!==Xt&&(e+=(l??"")+i[a+1]),this._$AH[a]=l}s&&!r&&this.O(e)}O(e){e===Xt?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class ro extends no{constructor(){super(...arguments),this.type=3}O(e){this.element[this.name]=e===Xt?void 0:e}}class io extends no{constructor(){super(...arguments),this.type=4}O(e){this.element.toggleAttribute(this.name,!!e&&e!==Xt)}}class so extends no{constructor(e,t,o,n,r){super(e,t,o,n,r),this.type=5}_$AI(e,t=this){if((e=o(this,e,t,0)??Xt)===Jt)return;const n=this._$AH,r=e===Xt&&n!==Xt||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,i=e!==Xt&&(n===Xt||r);r&&this.element.removeEventListener(this.name,this,n),i&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}}class ao{constructor(e,t,o){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=o}get _$AU(){return this._$AM._$AU}_$AI(e){o(this,e)}}const lo=At.litHtmlPolyfillSupport;lo?.(eo,oo),(At.litHtmlVersions??=[]).push("3.1.1");
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
let co=class extends Tt{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=((e,t,o)=>{const n=o?.renderBefore??t;let r=n._$litPart$;if(void 0===r){const e=o?.renderBefore??null;n._$litPart$=r=new oo(t.insertBefore(Ht(),e),e,void 0,o??{})}return r._$AI(e),r})(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Jt}};co._$litElement$=!0,co.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:co});const uo=globalThis.litElementPolyfillSupport;uo?.({LitElement:co}),(globalThis.litElementVersions??=[]).push("4.0.3"),ve=ht`
  ${we=ht`
  :host {
    box-sizing: border-box;
  }

  :host *,
  :host *::before,
  :host *::after {
    box-sizing: inherit;
  }

  [hidden] {
    display: none !important;
  }
`}

  :host {
    --arrow-color: var(--sl-color-neutral-1000);
    --arrow-size: 6px;

    /*
     * These properties are computed to account for the arrow's dimensions after being rotated 45º. The constant
     * 0.7071 is derived from sin(45), which is the diagonal size of the arrow's container after rotating.
     */
    --arrow-size-diagonal: calc(var(--arrow-size) * 0.7071);
    --arrow-padding-offset: calc(var(--arrow-size-diagonal) - var(--arrow-size));

    display: contents;
  }

  .popup {
    position: absolute;
    isolation: isolate;
    max-width: var(--auto-size-available-width, none);
    max-height: var(--auto-size-available-height, none);
  }

  .popup--fixed {
    position: fixed;
  }

  .popup:not(.popup--active) {
    display: none;
  }

  .popup__arrow {
    position: absolute;
    width: calc(var(--arrow-size-diagonal) * 2);
    height: calc(var(--arrow-size-diagonal) * 2);
    rotate: 45deg;
    background: var(--arrow-color);
    z-index: -1;
  }
`,ke=Object.defineProperty,Se=Object.defineProperties,_e=Object.getOwnPropertyDescriptor,Ee=Object.getOwnPropertyDescriptors,Ce=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Te=(e,t,o)=>t in e?ke(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,Ae=(e,t)=>{var o;for(o in t||(t={}))Pe.call(t,o)&&Te(e,o,t[o]);if(Ce)for(o of Ce(t))xe.call(t,o)&&Te(e,o,t[o]);return e},Me=(e,t)=>Se(e,Ee(t)),Le=(e,t,o,n)=>{var r,i,s=n>1?void 0:n?_e(t,o):t;for(r=e.length-1;r>=0;r--)(i=e[r])&&(s=(n?i(t,o,s):i(s))||s);return n&&s&&ke(t,o,s),s};
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */
const po={attribute:!0,type:String,converter:Ct,reflect:!1,hasChanged:Pt},ho=(e=po,t,o)=>{const{kind:n,metadata:r}=o;let i=globalThis.litPropertyMetadata.get(r);if(void 0===i&&globalThis.litPropertyMetadata.set(r,i=new Map),i.set(o.name,e),"accessor"===n){const{name:n}=o;return{set(o){const r=t.get.call(this);t.set.call(this,o),this.requestUpdate(n,r,e)},init(t){return void 0!==t&&this.C(n,void 0,e),t}}}if("setter"===n){const{name:n}=o;return function(o){const r=this[n];t.call(this,o),this.requestUpdate(n,r,e)}}throw Error("Unsupported decorator location: "+n)},go=(e,t,o)=>(o.configurable=!0,o.enumerable=!0,Reflect.decorate&&"object"!=typeof t&&Object.defineProperty(e,t,o),o);($e=class extends co{constructor(){super(),Object.entries(this.constructor.dependencies).forEach(([e,t])=>{this.constructor.define(e,t)})}emit(e,t){const o=new CustomEvent(e,Ae({bubbles:!0,cancelable:!1,composed:!0,detail:{}},t));return this.dispatchEvent(o),o}static define(e,t=this,o={}){const n=customElements.get(e);if(!n)return void customElements.define(e,class extends t{},o);let r=" (unknown version)",i=r;"version"in t&&t.version&&(r=" v"+t.version),"version"in n&&n.version&&(i=" v"+n.version),r&&i&&r===i||console.warn(`Attempted to register <${e}>${r}, but <${e}>${i} has already been registered.`)}}).version="2.12.0",$e.dependencies={},Le([n()],$e.prototype,"dir",2),Le([n()],$e.prototype,"lang",2);const mo=Math.min,fo=Math.max,bo=Math.round,yo=Math.floor,wo=e=>({x:e,y:e}),vo={left:"right",right:"left",bottom:"top",top:"bottom"},ko={start:"end",end:"start"},So=wo(0),_o={convertOffsetParentRelativeRectToViewportRelativeRect:function(e){let{rect:t,offsetParent:o,strategy:n}=e;const r=E(o),i=k(o);if(o===i)return t;let s={scrollLeft:0,scrollTop:0},a=wo(1);const l=wo(0);if((r||!r&&"fixed"!==n)&&(("body"!==w(o)||P(i))&&(s=$(o)),E(o))){const e=z(o);a=U(o),l.x=e.x+o.clientLeft,l.y=e.y+o.clientTop}return{width:t.width*a.x,height:t.height*a.y,x:t.x*a.x-s.scrollLeft*a.x+l.x,y:t.y*a.y-s.scrollTop*a.y+l.y}},getDocumentElement:k,getClippingRect:function(e){let{element:t,boundary:o,rootBoundary:n,strategy:r}=e;const i=[..."clippingAncestors"===o?j(t,this._c):[].concat(o),n],s=i[0],a=i.reduce((e,o)=>{const n=G(t,o,r);return e.top=fo(n.top,e.top),e.right=mo(n.right,e.right),e.bottom=mo(n.bottom,e.bottom),e.left=fo(n.left,e.left),e},G(t,s,r));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}},getOffsetParent:W,getElementRects:async function(e){let{reference:t,floating:o,strategy:n}=e;const r=this.getOffsetParent||W,i=this.getDimensions;return{reference:V(t,await r(o),n),floating:{x:0,y:0,...await i(o)}}},getClientRects:function(e){return Array.from(e.getClientRects())},getDimensions:function(e){const{width:t,height:o}=O(e);return{width:t,height:o}},getScale:U,isElement:_,isRTL:function(e){return"rtl"===L(e).direction}},Eo=function(e){return void 0===e&&(e={}),{name:"size",options:e,async fn(t){const{placement:o,rects:n,platform:r,elements:i}=t,{apply:c=()=>{},...u}=s(e,t),p=await y(t,u),h=a(o),g=l(o),m="y"===d(o),{width:f,height:b}=n.floating;let w,v;"top"===h||"bottom"===h?(w=h,v=g===(await(null==r.isRTL?void 0:r.isRTL(i.floating))?"start":"end")?"left":"right"):(v=h,w="end"===g?"top":"bottom");const k=b-p[w],S=f-p[v],_=!t.middlewareData.shift;let E=k,C=S;if(m){const e=f-p.left-p.right;C=g||_?mo(S,e):e}else{const e=b-p.top-p.bottom;E=g||_?mo(k,e):e}if(_&&!g){const e=fo(p.left,0),t=fo(p.right,0),o=fo(p.top,0),n=fo(p.bottom,0);m?C=f-2*(0!==e||0!==t?e+t:fo(p.left,p.right)):E=b-2*(0!==o||0!==n?o+n:fo(p.top,p.bottom))}await c({...t,availableWidth:C,availableHeight:E});const P=await r.getDimensions(i.floating);return f!==P.width||b!==P.height?{reset:{rects:!0}}:{}}}},Co=e=>(...t)=>({_$litDirective$:e,values:t});class Po{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,o){this._$Ct=e,this._$AM=t,this._$Ci=o}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}}
/**
   * @license
   * Copyright 2018 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */const xo=Co(class extends Po{constructor(e){if(super(e),1!==e.type||"class"!==e.name||e.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(e){return" "+Object.keys(e).filter(t=>e[t]).join(" ")+" "}update(e,[t]){if(void 0===this.it){this.it=new Set,void 0!==e.strings&&(this.st=new Set(e.strings.join(" ").split(/\s/).filter(e=>""!==e)));for(const e in t)t[e]&&!this.st?.has(e)&&this.it.add(e);return this.render(t)}const o=e.element.classList;for(const e of this.it)e in t||(o.remove(e),this.it.delete(e));for(const e in t){const n=!!t[e];n===this.it.has(e)||this.st?.has(e)||(n?(o.add(e),this.it.add(e)):(o.remove(e),this.it.delete(e)))}return Jt}});Re=class extends $e{constructor(){super(...arguments),this.active=!1,this.placement="top",this.strategy="absolute",this.distance=0,this.skidding=0,this.arrow=!1,this.arrowPlacement="anchor",this.arrowPadding=10,this.flip=!1,this.flipFallbackPlacements="",this.flipFallbackStrategy="best-fit",this.flipPadding=0,this.shift=!1,this.shiftPadding=0,this.autoSizePadding=0}async connectedCallback(){super.connectedCallback(),await this.updateComplete,this.start()}disconnectedCallback(){super.disconnectedCallback(),this.stop()}async updated(e){super.updated(e),e.has("active")&&(this.active?this.start():this.stop()),e.has("anchor")&&this.handleAnchorChange(),this.active&&(await this.updateComplete,this.reposition())}async handleAnchorChange(){if(await this.stop(),this.anchor&&"string"==typeof this.anchor){const e=this.getRootNode();this.anchorEl=e.getElementById(this.anchor)}else this.anchor instanceof Element||null!==(e=this.anchor)&&"object"==typeof e&&"getBoundingClientRect"in e?this.anchorEl=this.anchor:this.anchorEl=this.querySelector('[slot="anchor"]');var e;this.anchorEl instanceof HTMLSlotElement&&(this.anchorEl=this.anchorEl.assignedElements({flatten:!0})[0]),this.anchorEl&&this.start()}start(){this.anchorEl&&(this.cleanup=function(e,t,o,n){void 0===n&&(n={});const{ancestorScroll:r=!0,ancestorResize:i=!0,elementResize:s="function"==typeof ResizeObserver,layoutShift:a="function"==typeof IntersectionObserver,animationFrame:l=!1}=n,c=H(e),u=r||i?[...c?I(c):[],...I(t)]:[];u.forEach(e=>{r&&e.addEventListener("scroll",o,{passive:!0}),i&&e.addEventListener("resize",o)});const d=c&&a?function(e,t){function o(){clearTimeout(n),r&&r.disconnect(),r=null}let n,r=null;const i=k(e);return function s(a,l){function c(e){const t=e[0].intersectionRatio;if(t!==l){if(!m)return s();t?s(!1,t):n=setTimeout(()=>{s(!1,1e-7)},100)}m=!1}void 0===a&&(a=!1),void 0===l&&(l=1),o();const{left:u,top:d,width:p,height:h}=e.getBoundingClientRect();if(a||t(),!p||!h)return;const g={rootMargin:-yo(d)+"px "+-yo(i.clientWidth-(u+p))+"px "+-yo(i.clientHeight-(d+h))+"px "+-yo(u)+"px",threshold:fo(0,mo(1,l))||1};let m=!0;try{r=new IntersectionObserver(c,{...g,root:i.ownerDocument})}catch(e){r=new IntersectionObserver(c,g)}r.observe(e)}(!0),o}(c,o):null;let p,h=-1,g=null;s&&(g=new ResizeObserver(e=>{let[n]=e;n&&n.target===c&&g&&(g.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{g&&g.observe(t)})),o()}),c&&!l&&g.observe(c),g.observe(t));let m=l?z(e):null;return l&&function t(){const n=z(e);!m||n.x===m.x&&n.y===m.y&&n.width===m.width&&n.height===m.height||o(),m=n,p=requestAnimationFrame(t)}(),o(),()=>{u.forEach(e=>{r&&e.removeEventListener("scroll",o),i&&e.removeEventListener("resize",o)}),d&&d(),g&&g.disconnect(),g=null,l&&cancelAnimationFrame(p)}}(this.anchorEl,this.popup,()=>{this.reposition()}))}async stop(){return new Promise(e=>{this.cleanup?(this.cleanup(),this.cleanup=void 0,this.removeAttribute("data-current-placement"),this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height"),requestAnimationFrame(()=>e())):e()})}reposition(){if(!this.active||!this.anchorEl)return;const e=[(t={mainAxis:this.distance,crossAxis:this.skidding},void 0===t&&(t=0),{name:"offset",options:t,async fn(e){var o,n;const{x:r,y:i,placement:c,middlewareData:u}=e,p=await async function(e,t){const{placement:o,platform:n,elements:r}=e,i=await(null==n.isRTL?void 0:n.isRTL(r.floating)),c=a(o),u=l(o),p="y"===d(o),h=["left","top"].includes(c)?-1:1,g=i&&p?-1:1,m=s(t,e);let{mainAxis:f,crossAxis:b,alignmentAxis:y}="number"==typeof m?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...m};return u&&"number"==typeof y&&(b="end"===u?-1*y:y),p?{x:b*g,y:f*h}:{x:f*h,y:b*g}}(e,t);return c===(null==(o=u.offset)?void 0:o.placement)&&null!=(n=u.arrow)&&n.alignmentOffset?{}:{x:r+p.x,y:i+p.y,data:{...p,placement:c}}}})];var t;this.sync?e.push(Eo({apply:({rects:e})=>{const t="width"===this.sync||"both"===this.sync,o="height"===this.sync||"both"===this.sync;this.popup.style.width=t?`${e.reference.width}px`:"",this.popup.style.height=o?`${e.reference.height}px`:""}})):(this.popup.style.width="",this.popup.style.height=""),this.flip&&e.push(function(e){return void 0===e&&(e={}),{name:"flip",options:e,async fn(t){var o,n,r,i,c;const{placement:d,middlewareData:m,rects:f,initialPlacement:b,platform:w,elements:v}=t,{mainAxis:k=!0,crossAxis:S=!0,fallbackPlacements:_,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:C="none",flipAlignment:P=!0,...x}=s(e,t);if(null!=(o=m.arrow)&&o.alignmentOffset)return{};const T=a(d),A=a(b)===b,M=await(null==w.isRTL?void 0:w.isRTL(v.floating)),L=_||(A||!P?[g(b)]:function(e){const t=g(e);return[h(e),t,h(t)]}(b));_||"none"===C||L.push(...function(e,t,o,n){const r=l(e);let i=function(e,t,o){const n=["left","right"],r=["right","left"],i=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return o?t?r:n:t?n:r;case"left":case"right":return t?i:s;default:return[]}}(a(e),"start"===o,n);return r&&(i=i.map(e=>e+"-"+r),t&&(i=i.concat(i.map(h)))),i}(b,P,C,M));const $=[b,...L],R=await y(t,x),D=[];let I=(null==(n=m.flip)?void 0:n.overflows)||[];if(k&&D.push(R[T]),S){const e=function(e,t,o){void 0===o&&(o=!1);const n=l(e),r=p(e),i=u(r);let s="x"===r?n===(o?"end":"start")?"right":"left":"start"===n?"bottom":"top";return t.reference[i]>t.floating[i]&&(s=g(s)),[s,g(s)]}(d,f,M);D.push(R[e[0]],R[e[1]])}if(I=[...I,{placement:d,overflows:D}],!D.every(e=>e<=0)){const e=((null==(r=m.flip)?void 0:r.index)||0)+1,t=$[e];if(t)return{data:{index:e,overflows:I},reset:{placement:t}};let o=null==(i=I.filter(e=>e.overflows[0]<=0).sort((e,t)=>e.overflows[1]-t.overflows[1])[0])?void 0:i.placement;if(!o)switch(E){case"bestFit":{const e=null==(c=I.map(e=>[e.placement,e.overflows.filter(e=>e>0).reduce((e,t)=>e+t,0)]).sort((e,t)=>e[1]-t[1])[0])?void 0:c[0];e&&(o=e);break}case"initialPlacement":o=b}if(d!==o)return{reset:{placement:o}}}return{}}}}({boundary:this.flipBoundary,fallbackPlacements:this.flipFallbackPlacements,fallbackStrategy:"best-fit"===this.flipFallbackStrategy?"bestFit":"initialPlacement",padding:this.flipPadding})),this.shift&&e.push(function(e){return void 0===e&&(e={}),{name:"shift",options:e,async fn(t){const{x:o,y:n,placement:r}=t,{mainAxis:l=!0,crossAxis:u=!1,limiter:p={fn:e=>{let{x:t,y:o}=e;return{x:t,y:o}}},...h}=s(e,t),g={x:o,y:n},m=await y(t,h),f=d(a(r)),b=c(f);let w=g[b],v=g[f];if(l){const e="y"===b?"bottom":"right";w=i(w+m["y"===b?"top":"left"],w,w-m[e])}if(u){const e="y"===f?"bottom":"right";v=i(v+m["y"===f?"top":"left"],v,v-m[e])}const k=p.fn({...t,[b]:w,[f]:v});return{...k,data:{x:k.x-o,y:k.y-n}}}}}({boundary:this.shiftBoundary,padding:this.shiftPadding})),this.autoSize?e.push(Eo({boundary:this.autoSizeBoundary,padding:this.autoSizePadding,apply:({availableWidth:e,availableHeight:t})=>{"vertical"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-height",`${t}px`):this.style.removeProperty("--auto-size-available-height"),"horizontal"===this.autoSize||"both"===this.autoSize?this.style.setProperty("--auto-size-available-width",`${e}px`):this.style.removeProperty("--auto-size-available-width")}})):(this.style.removeProperty("--auto-size-available-width"),this.style.removeProperty("--auto-size-available-height")),this.arrow&&e.push((e=>({name:"arrow",options:e,async fn(t){const{x:o,y:n,placement:r,rects:a,platform:c,elements:d,middlewareData:h}=t,{element:g,padding:f=0}=s(e,t)||{};if(null==g)return{};const b=m(f),y={x:o,y:n},w=p(r),v=u(w),k=await c.getDimensions(g),S="y"===w,_=S?"top":"left",E=S?"bottom":"right",C=S?"clientHeight":"clientWidth",P=a.reference[v]+a.reference[w]-y[w]-a.floating[v],x=y[w]-a.reference[w],T=await(null==c.getOffsetParent?void 0:c.getOffsetParent(g));let A=T?T[C]:0;A&&await(null==c.isElement?void 0:c.isElement(T))||(A=d.floating[C]||a.floating[v]);const M=P/2-x/2,L=A/2-k[v]/2-1,$=mo(b[_],L),R=mo(b[E],L),D=$,I=A-k[v]-R,O=A/2-k[v]/2+M,H=i(D,O,I),U=!h.arrow&&null!=l(r)&&O!=H&&a.reference[v]/2-(O<D?$:R)-k[v]/2<0,F=U?O<D?O-D:O-I:0;return{[w]:y[w]+F,data:{[w]:H,centerOffset:O-H-F,...U&&{alignmentOffset:F}},reset:U}}}))({element:this.arrowEl,padding:this.arrowPadding}));const o="absolute"===this.strategy?e=>_o.getOffsetParent(e,K):_o.getOffsetParent;((e,t,o)=>{const n=new Map,r={platform:_o,...o},i={...r.platform,_c:n};return(async(e,t,o)=>{const{placement:n="bottom",strategy:r="absolute",middleware:i=[],platform:s}=o,a=i.filter(Boolean),l=await(null==s.isRTL?void 0:s.isRTL(t));let c=await s.getElementRects({reference:e,floating:t,strategy:r}),{x:u,y:d}=b(c,n,l),p=n,h={},g=0;for(let o=0;o<a.length;o++){const{name:i,fn:m}=a[o],{x:f,y:y,data:w,reset:v}=await m({x:u,y:d,initialPlacement:n,placement:p,strategy:r,middlewareData:h,rects:c,platform:s,elements:{reference:e,floating:t}});u=null!=f?f:u,d=null!=y?y:d,h={...h,[i]:{...h[i],...w}},v&&g<=50&&(g++,"object"==typeof v&&(v.placement&&(p=v.placement),v.rects&&(c=!0===v.rects?await s.getElementRects({reference:e,floating:t,strategy:r}):v.rects),({x:u,y:d}=b(c,p,l))),o=-1)}return{x:u,y:d,placement:p,strategy:r,middlewareData:h}})(e,t,{...r,platform:i})})(this.anchorEl,this.popup,{placement:this.placement,middleware:e,strategy:this.strategy,platform:Me(Ae({},_o),{getOffsetParent:o})}).then(({x:e,y:t,middlewareData:o,placement:n})=>{const r="rtl"===getComputedStyle(this).direction,i={top:"bottom",right:"left",bottom:"top",left:"right"}[n.split("-")[0]];if(this.setAttribute("data-current-placement",n),Object.assign(this.popup.style,{left:`${e}px`,top:`${t}px`}),this.arrow){const e=o.arrow.x,t=o.arrow.y;let n="",s="",a="",l="";if("start"===this.arrowPlacement){const o="number"==typeof e?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";n="number"==typeof t?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"",s=r?o:"",l=r?"":o}else if("end"===this.arrowPlacement){const o="number"==typeof e?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:"";s=r?"":o,l=r?o:"",a="number"==typeof t?`calc(${this.arrowPadding}px - var(--arrow-padding-offset))`:""}else"center"===this.arrowPlacement?(l="number"==typeof e?"calc(50% - var(--arrow-size-diagonal))":"",n="number"==typeof t?"calc(50% - var(--arrow-size-diagonal))":""):(l="number"==typeof e?`${e}px`:"",n="number"==typeof t?`${t}px`:"");Object.assign(this.arrowEl.style,{top:n,right:s,bottom:a,left:l,[i]:"calc(var(--arrow-size-diagonal) * -1)"})}}),this.emit("sl-reposition")}render(){return Kt`
      <slot name="anchor" @slotchange=${this.handleAnchorChange}></slot>

      <div
        part="popup"
        class=${xo({popup:!0,"popup--active":this.active,"popup--fixed":"fixed"===this.strategy,"popup--has-arrow":this.arrow})}
      >
        <slot></slot>
        ${this.arrow?Kt`<div part="arrow" class="popup__arrow" role="presentation"></div>`:""}
      </div>
    `}},Re.styles=ve,Le([r(".popup")],Re.prototype,"popup",2),Le([r(".popup__arrow")],Re.prototype,"arrowEl",2),Le([n()],Re.prototype,"anchor",2),Le([n({type:Boolean,reflect:!0})],Re.prototype,"active",2),Le([n({reflect:!0})],Re.prototype,"placement",2),Le([n({reflect:!0})],Re.prototype,"strategy",2),Le([n({type:Number})],Re.prototype,"distance",2),Le([n({type:Number})],Re.prototype,"skidding",2),Le([n({type:Boolean})],Re.prototype,"arrow",2),Le([n({attribute:"arrow-placement"})],Re.prototype,"arrowPlacement",2),Le([n({attribute:"arrow-padding",type:Number})],Re.prototype,"arrowPadding",2),Le([n({type:Boolean})],Re.prototype,"flip",2),Le([n({attribute:"flip-fallback-placements",converter:{fromAttribute:e=>e.split(" ").map(e=>e.trim()).filter(e=>""!==e),toAttribute:e=>e.join(" ")}})],Re.prototype,"flipFallbackPlacements",2),Le([n({attribute:"flip-fallback-strategy"})],Re.prototype,"flipFallbackStrategy",2),Le([n({type:Object})],Re.prototype,"flipBoundary",2),Le([n({attribute:"flip-padding",type:Number})],Re.prototype,"flipPadding",2),Le([n({type:Boolean})],Re.prototype,"shift",2),Le([n({type:Object})],Re.prototype,"shiftBoundary",2),Le([n({attribute:"shift-padding",type:Number})],Re.prototype,"shiftPadding",2),Le([n({attribute:"auto-size"})],Re.prototype,"autoSize",2),Le([n()],Re.prototype,"sync",2),Le([n({type:Object})],Re.prototype,"autoSizeBoundary",2),Le([n({attribute:"auto-size-padding",type:Number})],Re.prototype,"autoSizePadding",2),Re.define("sl-popup"),De=ht`
  ${we}

  :host {
    display: inline-block;
  }

  .dropdown::part(popup) {
    z-index: var(--sl-z-index-dropdown);
  }

  .dropdown[data-current-placement^='top']::part(popup) {
    transform-origin: bottom;
  }

  .dropdown[data-current-placement^='bottom']::part(popup) {
    transform-origin: top;
  }

  .dropdown[data-current-placement^='left']::part(popup) {
    transform-origin: right;
  }

  .dropdown[data-current-placement^='right']::part(popup) {
    transform-origin: left;
  }

  .dropdown__trigger {
    display: block;
  }

  .dropdown__panel {
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    box-shadow: var(--sl-shadow-large);
    border-radius: var(--sl-border-radius-medium);
    pointer-events: none;
  }

  .dropdown--open .dropdown__panel {
    display: block;
    pointer-events: all;
  }

  /* When users slot a menu, make sure it conforms to the popup's auto-size */
  ::slotted(sl-menu) {
    max-width: var(--auto-size-available-width) !important;
    max-height: var(--auto-size-available-height) !important;
  }
`,Ie=new Map,Oe=new WeakMap;const To=new Set,Ao=new MutationObserver(re),Mo=new Map;let Lo,$o=document.documentElement.dir||"ltr",Ro=document.documentElement.lang||navigator.language;Ao.observe(document.documentElement,{attributes:!0,attributeFilter:["dir","lang"]});let Do=class{constructor(e){this.host=e,this.host.addController(this)}hostConnected(){To.add(this.host)}hostDisconnected(){To.delete(this.host)}dir(){return`${this.host.dir||$o}`.toLowerCase()}lang(){return`${this.host.lang||Ro}`.toLowerCase()}getTranslationData(e){var t,o;const n=new Intl.Locale(e.replace(/_/g,"-")),r=null==n?void 0:n.language.toLowerCase(),i=null!==(o=null===(t=null==n?void 0:n.region)||void 0===t?void 0:t.toLowerCase())&&void 0!==o?o:"";return{locale:n,language:r,region:i,primary:Mo.get(`${r}-${i}`),secondary:Mo.get(r)}}exists(e,t){var o;const{primary:n,secondary:r}=this.getTranslationData(null!==(o=t.lang)&&void 0!==o?o:this.lang());return t=Object.assign({includeFallback:!1},t),!!(n&&n[e]||r&&r[e]||t.includeFallback&&Lo&&Lo[e])}term(e,...t){const{primary:o,secondary:n}=this.getTranslationData(this.lang());let r;if(o&&o[e])r=o[e];else if(n&&n[e])r=n[e];else{if(!Lo||!Lo[e])return console.error(`No translation found for: ${String(e)}`),String(e);r=Lo[e]}return"function"==typeof r?r(...t):r}date(e,t){return e=new Date(e),new Intl.DateTimeFormat(this.lang(),t).format(e)}number(e,t){return e=Number(e),isNaN(e)?"":new Intl.NumberFormat(this.lang(),t).format(e)}relativeTime(e,t,o){return new Intl.RelativeTimeFormat(this.lang(),o).format(e,t)}};ne(He={$code:"en",$name:"English",$dir:"ltr",carousel:"Carousel",clearEntry:"Clear entry",close:"Close",copied:"Copied",copy:"Copy",currentValue:"Current value",error:"Error",goToSlide:(e,t)=>`Go to slide ${e} of ${t}`,hidePassword:"Hide password",loading:"Loading",nextSlide:"Next slide",numOptionsSelected:e=>0===e?"No options selected":1===e?"1 option selected":`${e} options selected`,previousSlide:"Previous slide",progress:"Progress",remove:"Remove",resize:"Resize",scrollToEnd:"Scroll to end",scrollToStart:"Scroll to start",selectAColorFromTheScreen:"Select a color from the screen",showPassword:"Show password",slideNum:e=>`Slide ${e}`,toggleColorFormat:"Toggle color format"}),Ue=He,Fe=class extends Do{},ne(Ue),ze=class extends $e{constructor(){super(...arguments),this.localize=new Fe(this),this.open=!1,this.placement="bottom-start",this.disabled=!1,this.stayOpenOnSelect=!1,this.distance=0,this.skidding=0,this.hoist=!1,this.handleKeyDown=e=>{this.open&&"Escape"===e.key&&(e.stopPropagation(),this.hide(),this.focusOnTrigger())},this.handleDocumentKeyDown=e=>{var t;if("Escape"===e.key&&this.open)return e.stopPropagation(),this.focusOnTrigger(),void this.hide();if("Tab"===e.key){if(this.open&&"sl-menu-item"===(null==(t=document.activeElement)?void 0:t.tagName.toLowerCase()))return e.preventDefault(),this.hide(),void this.focusOnTrigger();setTimeout(()=>{var e,t,o;const n=(null==(e=this.containingElement)?void 0:e.getRootNode())instanceof ShadowRoot?null==(o=null==(t=document.activeElement)?void 0:t.shadowRoot)?void 0:o.activeElement:document.activeElement;this.containingElement&&(null==n?void 0:n.closest(this.containingElement.tagName.toLowerCase()))===this.containingElement||this.hide()})}},this.handleDocumentMouseDown=e=>{const t=e.composedPath();this.containingElement&&!t.includes(this.containingElement)&&this.hide()},this.handlePanelSelect=e=>{const t=e.target;this.stayOpenOnSelect||"sl-menu"!==t.tagName.toLowerCase()||(this.hide(),this.focusOnTrigger())}}connectedCallback(){super.connectedCallback(),this.containingElement||(this.containingElement=this)}firstUpdated(){this.panel.hidden=!this.open,this.open&&(this.addOpenListeners(),this.popup.active=!0)}disconnectedCallback(){super.disconnectedCallback(),this.removeOpenListeners(),this.hide()}focusOnTrigger(){const e=this.trigger.assignedElements({flatten:!0})[0];"function"==typeof(null==e?void 0:e.focus)&&e.focus()}getMenu(){return this.panel.assignedElements({flatten:!0}).find(e=>"sl-menu"===e.tagName.toLowerCase())}handleTriggerClick(){this.open?this.hide():(this.show(),this.focusOnTrigger())}async handleTriggerKeyDown(e){if([" ","Enter"].includes(e.key))return e.preventDefault(),void this.handleTriggerClick();const t=this.getMenu();if(t){const o=t.getAllItems(),n=o[0],r=o[o.length-1];["ArrowDown","ArrowUp","Home","End"].includes(e.key)&&(e.preventDefault(),this.open||(this.show(),await this.updateComplete),o.length>0&&this.updateComplete.then(()=>{"ArrowDown"!==e.key&&"Home"!==e.key||(t.setCurrentItem(n),n.focus()),"ArrowUp"!==e.key&&"End"!==e.key||(t.setCurrentItem(r),r.focus())}))}}handleTriggerKeyUp(e){" "===e.key&&e.preventDefault()}handleTriggerSlotChange(){this.updateAccessibleTrigger()}updateAccessibleTrigger(){const e=this.trigger.assignedElements({flatten:!0}).find(e=>X(e).start);let t;if(e){switch(e.tagName.toLowerCase()){case"sl-button":case"sl-icon-button":t=e.button;break;default:t=e}t.setAttribute("aria-haspopup","true"),t.setAttribute("aria-expanded",this.open?"true":"false")}}async show(){if(!this.open)return this.open=!0,ee(this,"sl-after-show")}async hide(){if(this.open)return this.open=!1,ee(this,"sl-after-hide")}reposition(){this.popup.reposition()}addOpenListeners(){this.panel.addEventListener("sl-select",this.handlePanelSelect),this.panel.addEventListener("keydown",this.handleKeyDown),document.addEventListener("keydown",this.handleDocumentKeyDown),document.addEventListener("mousedown",this.handleDocumentMouseDown)}removeOpenListeners(){this.panel&&(this.panel.removeEventListener("sl-select",this.handlePanelSelect),this.panel.removeEventListener("keydown",this.handleKeyDown)),document.removeEventListener("keydown",this.handleDocumentKeyDown),document.removeEventListener("mousedown",this.handleDocumentMouseDown)}async handleOpenChange(){if(this.disabled)this.open=!1;else if(this.updateAccessibleTrigger(),this.open){this.emit("sl-show"),this.addOpenListeners(),await oe(this),this.panel.hidden=!1,this.popup.active=!0;const{keyframes:e,options:t}=Q(this,"dropdown.show",{dir:this.localize.dir()});await te(this.popup.popup,e,t),this.emit("sl-after-show")}else{this.emit("sl-hide"),this.removeOpenListeners(),await oe(this);const{keyframes:e,options:t}=Q(this,"dropdown.hide",{dir:this.localize.dir()});await te(this.popup.popup,e,t),this.panel.hidden=!0,this.popup.active=!1,this.emit("sl-after-hide")}}render(){return Kt`
      <sl-popup
        part="base"
        id="dropdown"
        placement=${this.placement}
        distance=${this.distance}
        skidding=${this.skidding}
        strategy=${this.hoist?"fixed":"absolute"}
        flip
        shift
        auto-size="vertical"
        auto-size-padding="10"
        class=${xo({dropdown:!0,"dropdown--open":this.open})}
      >
        <slot
          name="trigger"
          slot="anchor"
          part="trigger"
          class="dropdown__trigger"
          @click=${this.handleTriggerClick}
          @keydown=${this.handleTriggerKeyDown}
          @keyup=${this.handleTriggerKeyUp}
          @slotchange=${this.handleTriggerSlotChange}
        ></slot>

        <div aria-hidden=${this.open?"false":"true"} aria-labelledby="dropdown">
          <slot part="panel" class="dropdown__panel"></slot>
        </div>
      </sl-popup>
    `}},ze.styles=De,ze.dependencies={"sl-popup":Re},Le([r(".dropdown")],ze.prototype,"popup",2),Le([r(".dropdown__trigger")],ze.prototype,"trigger",2),Le([r(".dropdown__panel")],ze.prototype,"panel",2),Le([n({type:Boolean,reflect:!0})],ze.prototype,"open",2),Le([n({reflect:!0})],ze.prototype,"placement",2),Le([n({type:Boolean,reflect:!0})],ze.prototype,"disabled",2),Le([n({attribute:"stay-open-on-select",type:Boolean,reflect:!0})],ze.prototype,"stayOpenOnSelect",2),Le([n({attribute:!1})],ze.prototype,"containingElement",2),Le([n({type:Number})],ze.prototype,"distance",2),Le([n({type:Number})],ze.prototype,"skidding",2),Le([n({type:Boolean})],ze.prototype,"hoist",2),Le([ie("open",{waitUntilFirstUpdate:!0})],ze.prototype,"handleOpenChange",1),Z("dropdown.show",{keyframes:[{opacity:0,scale:.9},{opacity:1,scale:1}],options:{duration:100,easing:"ease"}}),Z("dropdown.hide",{keyframes:[{opacity:1,scale:1},{opacity:0,scale:.9}],options:{duration:100,easing:"ease"}}),ze.define("sl-dropdown"),Be=ht`
  ${we}

  :host {
    display: block;
    position: relative;
    background: var(--sl-panel-background-color);
    border: solid var(--sl-panel-border-width) var(--sl-panel-border-color);
    border-radius: var(--sl-border-radius-medium);
    padding: var(--sl-spacing-x-small) 0;
    overflow: auto;
    overscroll-behavior: none;
  }

  ::slotted(sl-divider) {
    --spacing: var(--sl-spacing-x-small);
  }
`,Ge=class extends $e{connectedCallback(){super.connectedCallback(),this.setAttribute("role","menu")}handleClick(e){const t=["menuitem","menuitemcheckbox"],o=e.composedPath().find(e=>{var o;return t.includes((null==(o=null==e?void 0:e.getAttribute)?void 0:o.call(e,"role"))||"")});if(!o)return;const n=o;"checkbox"===n.type&&(n.checked=!n.checked),this.emit("sl-select",{detail:{item:n}})}handleKeyDown(e){if("Enter"===e.key||" "===e.key){const t=this.getCurrentItem();e.preventDefault(),e.stopPropagation(),null==t||t.click()}else if(["ArrowDown","ArrowUp","Home","End"].includes(e.key)){const t=this.getAllItems(),o=this.getCurrentItem();let n=o?t.indexOf(o):0;t.length>0&&(e.preventDefault(),e.stopPropagation(),"ArrowDown"===e.key?n++:"ArrowUp"===e.key?n--:"Home"===e.key?n=0:"End"===e.key&&(n=t.length-1),n<0&&(n=t.length-1),n>t.length-1&&(n=0),this.setCurrentItem(t[n]),t[n].focus())}}handleMouseDown(e){const t=e.target;this.isMenuItem(t)&&this.setCurrentItem(t)}handleSlotChange(){const e=this.getAllItems();e.length>0&&this.setCurrentItem(e[0])}isMenuItem(e){var t;return"sl-menu-item"===e.tagName.toLowerCase()||["menuitem","menuitemcheckbox","menuitemradio"].includes(null!=(t=e.getAttribute("role"))?t:"")}getAllItems(){return[...this.defaultSlot.assignedElements({flatten:!0})].filter(e=>!(e.inert||!this.isMenuItem(e)))}getCurrentItem(){return this.getAllItems().find(e=>"0"===e.getAttribute("tabindex"))}setCurrentItem(e){this.getAllItems().forEach(t=>{t.setAttribute("tabindex",t===e?"0":"-1")})}render(){return Kt`
      <slot
        @slotchange=${this.handleSlotChange}
        @click=${this.handleClick}
        @keydown=${this.handleKeyDown}
        @mousedown=${this.handleMouseDown}
      ></slot>
    `}},Ge.styles=Be,Le([r("slot")],Ge.prototype,"defaultSlot",2),Ge.define("sl-menu"),Ne=ht`
  ${we}

  :host {
    --submenu-offset: -2px;

    /* Private */
    --safe-triangle-cursor-x: 0;
    --safe-triangle-cursor-y: 0;
    --safe-triangle-submenu-start-x: 0;
    --safe-triangle-submenu-start-y: 0;
    --safe-triangle-submenu-end-x: 0;
    --safe-triangle-submenu-end-y: 0;

    display: block;
  }

  :host([inert]) {
    display: none;
  }

  .menu-item {
    position: relative;
    display: flex;
    align-items: stretch;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-medium);
    font-weight: var(--sl-font-weight-normal);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-700);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-2x-small);
    transition: var(--sl-transition-fast) fill;
    user-select: none;
    -webkit-user-select: none;
    white-space: nowrap;
    cursor: pointer;
  }

  .menu-item.menu-item--disabled {
    outline: none;
    opacity: 0.5;
    cursor: not-allowed;
  }

  .menu-item .menu-item__label {
    flex: 1 1 auto;
    display: inline-block;
    text-overflow: ellipsis;
    overflow: hidden;
  }

  .menu-item .menu-item__prefix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__prefix::slotted(*) {
    margin-inline-end: var(--sl-spacing-x-small);
  }

  .menu-item .menu-item__suffix {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
  }

  .menu-item .menu-item__suffix::slotted(*) {
    margin-inline-start: var(--sl-spacing-x-small);
  }

  /* Safe triangle */
  .menu-item--submenu-expanded::after {
    content: '';
    position: fixed;
    z-index: calc(var(--sl-z-index-dropdown) - 1);
    top: 0;
    right: 0;
    bottom: 0;
    left: 0;
    clip-path: polygon(
      var(--safe-triangle-cursor-x) var(--safe-triangle-cursor-y),
      var(--safe-triangle-submenu-start-x) var(--safe-triangle-submenu-start-y),
      var(--safe-triangle-submenu-end-x) var(--safe-triangle-submenu-end-y)
    );
  }

  :host(:focus-visible) {
    outline: none;
  }

  :host(:hover:not([aria-disabled='true'], :focus-visible)) .menu-item,
  .menu-item--submenu-expanded {
    background-color: var(--sl-color-neutral-100);
    color: var(--sl-color-neutral-1000);
  }

  :host(:focus-visible) .menu-item {
    outline: none;
    background-color: var(--sl-color-primary-600);
    color: var(--sl-color-neutral-0);
    opacity: 1;
  }

  .menu-item .menu-item__check,
  .menu-item .menu-item__chevron {
    flex: 0 0 auto;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 1.5em;
    visibility: hidden;
  }

  .menu-item--checked .menu-item__check,
  .menu-item--has-submenu .menu-item__chevron {
    visibility: visible;
  }

  /* Add elevation and z-index to submenus */
  sl-popup::part(popup) {
    box-shadow: var(--sl-shadow-large);
    z-index: var(--sl-z-index-dropdown);
    margin-left: var(--submenu-offset);
  }

  .menu-item--rtl sl-popup::part(popup) {
    margin-left: calc(-1 * var(--submenu-offset));
  }

  @media (forced-colors: active) {
    :host(:hover:not([aria-disabled='true'])) .menu-item,
    :host(:focus-visible) .menu-item {
      outline: dashed 1px SelectedItem;
      outline-offset: -1px;
    }
  }
`
/**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */;const Io=(e,t)=>{const o=e._$AN;if(void 0===o)return!1;for(const e of o)e._$AO?.(t,!1),Io(e,t);return!0},Oo=e=>{let t,o;do{if(void 0===(t=e._$AM))break;o=t._$AN,o.delete(e),e=t}while(0===o?.size)},Ho=e=>{for(let t;t=e._$AM;e=t){let o=t._$AN;if(void 0===o)t._$AN=o=new Set;else if(o.has(e))break;o.add(e),Uo(t)}},Uo=e=>{2==e.type&&(e._$AP??=ae,e._$AQ??=se)};
/**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */class Fo extends Po{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,o){super._$AT(e,t,o),Ho(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(Io(this,e),Oo(this))}setValue(e){if((()=>void 0===this._$Ct.strings)())this._$Ct._$AI(e,this);else{const t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}}
/**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   */class zo{}const Bo=new WeakMap,Go=Co(class extends Fo{render(e){return Xt}update(e,[t]){const o=t!==this.G;return o&&void 0!==this.G&&this.ot(void 0),(o||this.rt!==this.lt)&&(this.G=t,this.ct=e.options?.host,this.ot(this.lt=e.element)),Xt}ot(e){if("function"==typeof this.G){const t=this.ct??globalThis;let o=Bo.get(t);void 0===o&&(o=new WeakMap,Bo.set(t,o)),void 0!==o.get(this.G)&&this.G.call(this.ct,void 0),o.set(this.G,e),void 0!==e&&this.G.call(this.ct,e)}else this.G.value=e}get rt(){return"function"==typeof this.G?Bo.get(this.ct??globalThis)?.get(this.G):this.G?.value}disconnected(){this.rt===this.lt&&this.ot(void 0)}reconnected(){this.ot(this.lt)}});je=class{constructor(e,t,o){this.popupRef=new zo,this.enableSubmenuTimer=-1,this.isConnected=!1,this.isPopupConnected=!1,this.skidding=0,this.submenuOpenDelay=100,this.handleMouseMove=e=>{this.host.style.setProperty("--safe-triangle-cursor-x",`${e.clientX}px`),this.host.style.setProperty("--safe-triangle-cursor-y",`${e.clientY}px`)},this.handleMouseOver=()=>{this.hasSlotController.test("submenu")&&this.enableSubmenu()},this.handleKeyDown=e=>{switch(e.key){case"Escape":case"Tab":this.disableSubmenu();break;case"ArrowLeft":e.target!==this.host&&(e.preventDefault(),e.stopPropagation(),this.host.focus(),this.disableSubmenu());break;case"ArrowRight":case"Enter":case" ":this.handleSubmenuEntry(e)}},this.handleClick=e=>{var t;e.target===this.host?(e.preventDefault(),e.stopPropagation()):e.target instanceof Element&&("sl-menu-item"===e.target.tagName||(null==(t=e.target.role)?void 0:t.startsWith("menuitem")))&&this.disableSubmenu()},this.handleFocusOut=e=>{e.relatedTarget&&e.relatedTarget instanceof Element&&this.host.contains(e.relatedTarget)||this.disableSubmenu()},this.handlePopupMouseover=e=>{e.stopPropagation()},this.handlePopupReposition=()=>{const e=this.host.renderRoot.querySelector("slot[name='submenu']"),t=null==e?void 0:e.assignedElements({flatten:!0}).filter(e=>"sl-menu"===e.localName)[0],o="rtl"===this.localize.dir();if(!t)return;const{left:n,top:r,width:i,height:s}=t.getBoundingClientRect();this.host.style.setProperty("--safe-triangle-submenu-start-x",`${o?n+i:n}px`),this.host.style.setProperty("--safe-triangle-submenu-start-y",`${r}px`),this.host.style.setProperty("--safe-triangle-submenu-end-x",`${o?n+i:n}px`),this.host.style.setProperty("--safe-triangle-submenu-end-y",`${r+s}px`)},(this.host=e).addController(this),this.hasSlotController=t,this.localize=o}hostConnected(){this.hasSlotController.test("submenu")&&!this.host.disabled&&this.addListeners()}hostDisconnected(){this.removeListeners()}hostUpdated(){this.hasSlotController.test("submenu")&&!this.host.disabled?(this.addListeners(),this.updateSkidding()):this.removeListeners()}addListeners(){this.isConnected||(this.host.addEventListener("mousemove",this.handleMouseMove),this.host.addEventListener("mouseover",this.handleMouseOver),this.host.addEventListener("keydown",this.handleKeyDown),this.host.addEventListener("click",this.handleClick),this.host.addEventListener("focusout",this.handleFocusOut),this.isConnected=!0),this.isPopupConnected||this.popupRef.value&&(this.popupRef.value.addEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.addEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!0)}removeListeners(){this.isConnected&&(this.host.removeEventListener("mousemove",this.handleMouseMove),this.host.removeEventListener("mouseover",this.handleMouseOver),this.host.removeEventListener("keydown",this.handleKeyDown),this.host.removeEventListener("click",this.handleClick),this.host.removeEventListener("focusout",this.handleFocusOut),this.isConnected=!1),this.isPopupConnected&&this.popupRef.value&&(this.popupRef.value.removeEventListener("mouseover",this.handlePopupMouseover),this.popupRef.value.removeEventListener("sl-reposition",this.handlePopupReposition),this.isPopupConnected=!1)}handleSubmenuEntry(e){const t=this.host.renderRoot.querySelector("slot[name='submenu']");if(!t)return void console.error("Cannot activate a submenu if no corresponding menuitem can be found.",this);let o=null;for(const e of t.assignedElements())if(o=e.querySelectorAll("sl-menu-item, [role^='menuitem']"),0!==o.length)break;if(o&&0!==o.length){o[0].setAttribute("tabindex","0");for(let e=1;e!==o.length;++e)o[e].setAttribute("tabindex","-1");this.popupRef.value&&(e.preventDefault(),e.stopPropagation(),this.popupRef.value.active?o[0]instanceof HTMLElement&&o[0].focus():(this.enableSubmenu(!1),this.host.updateComplete.then(()=>{o[0]instanceof HTMLElement&&o[0].focus()}),this.host.requestUpdate()))}}setSubmenuState(e){this.popupRef.value&&this.popupRef.value.active!==e&&(this.popupRef.value.active=e,this.host.requestUpdate())}enableSubmenu(t=!0){t?this.enableSubmenuTimer=e.setTimeout(()=>{this.setSubmenuState(!0)},this.submenuOpenDelay):this.setSubmenuState(!0)}disableSubmenu(){clearTimeout(this.enableSubmenuTimer),this.setSubmenuState(!1)}updateSkidding(){var e;if(!(null==(e=this.host.parentElement)?void 0:e.computedStyleMap))return;const t=this.host.parentElement.computedStyleMap(),o=["padding-top","border-top-width","margin-top"].reduce((e,o)=>{var n;const r=null!=(n=t.get(o))?n:new CSSUnitValue(0,"px");return e-(r instanceof CSSUnitValue?r:new CSSUnitValue(0,"px")).to("px").value},0);this.skidding=o}isExpanded(){return!!this.popupRef.value&&this.popupRef.value.active}renderSubmenu(){const e="ltr"===this.localize.dir();return this.isConnected?Kt`
      <sl-popup
        ${Go(this.popupRef)}
        placement=${e?"right-start":"left-start"}
        anchor="anchor"
        flip
        flip-fallback-strategy="best-fit"
        skidding="${this.skidding}"
        strategy="fixed"
      >
        <slot name="submenu"></slot>
      </sl-popup>
    `:Kt` <slot name="submenu" hidden></slot> `}},Ve=class{constructor(e,...t){this.slotNames=[],this.handleSlotChange=e=>{const t=e.target;(this.slotNames.includes("[default]")&&!t.name||t.name&&this.slotNames.includes(t.name))&&this.host.requestUpdate()},(this.host=e).addController(this),this.slotNames=t}hasDefaultSlot(){return[...this.host.childNodes].some(e=>{if(e.nodeType===e.TEXT_NODE&&""!==e.textContent.trim())return!0;if(e.nodeType===e.ELEMENT_NODE){const t=e;if("sl-visually-hidden"===t.tagName.toLowerCase())return!1;if(!t.hasAttribute("slot"))return!0}return!1})}hasNamedSlot(e){return null!==this.host.querySelector(`:scope > [slot="${e}"]`)}test(e){return"[default]"===e?this.hasDefaultSlot():this.hasNamedSlot(e)}hostConnected(){this.host.shadowRoot.addEventListener("slotchange",this.handleSlotChange)}hostDisconnected(){this.host.shadowRoot.removeEventListener("slotchange",this.handleSlotChange)}},qe=ht`
  ${we}

  :host {
    display: inline-block;
    width: 1em;
    height: 1em;
    box-sizing: content-box !important;
  }

  svg {
    display: block;
    height: 100%;
    width: 100%;
  }
`,We="",Ke={caret:'\n    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">\n      <polyline points="6 9 12 15 18 9"></polyline>\n    </svg>\n  ',check:'\n    <svg part="checked-icon" class="checkbox__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n        <g stroke="currentColor">\n          <g transform="translate(3.428571, 3.428571)">\n            <path d="M0,5.71428571 L3.42857143,9.14285714"></path>\n            <path d="M9.14285714,0 L3.42857143,9.14285714"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  ',"chevron-down":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-down" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',"chevron-left":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-left" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>\n    </svg>\n  ',"chevron-right":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-chevron-right" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708z"/>\n    </svg>\n  ',copy:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-copy" viewBox="0 0 16 16">\n      <path fill-rule="evenodd" d="M4 2a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V2Zm2-1a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H6ZM2 5a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1h1v1a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h1v1H2Z"/>\n    </svg>\n  ',eye:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye" viewBox="0 0 16 16">\n      <path d="M16 8s-3-5.5-8-5.5S0 8 0 8s3 5.5 8 5.5S16 8 16 8zM1.173 8a13.133 13.133 0 0 1 1.66-2.043C4.12 4.668 5.88 3.5 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.133 13.133 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755C11.879 11.332 10.119 12.5 8 12.5c-2.12 0-3.879-1.168-5.168-2.457A13.134 13.134 0 0 1 1.172 8z"/>\n      <path d="M8 5.5a2.5 2.5 0 1 0 0 5 2.5 2.5 0 0 0 0-5zM4.5 8a3.5 3.5 0 1 1 7 0 3.5 3.5 0 0 1-7 0z"/>\n    </svg>\n  ',"eye-slash":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eye-slash" viewBox="0 0 16 16">\n      <path d="M13.359 11.238C15.06 9.72 16 8 16 8s-3-5.5-8-5.5a7.028 7.028 0 0 0-2.79.588l.77.771A5.944 5.944 0 0 1 8 3.5c2.12 0 3.879 1.168 5.168 2.457A13.134 13.134 0 0 1 14.828 8c-.058.087-.122.183-.195.288-.335.48-.83 1.12-1.465 1.755-.165.165-.337.328-.517.486l.708.709z"/>\n      <path d="M11.297 9.176a3.5 3.5 0 0 0-4.474-4.474l.823.823a2.5 2.5 0 0 1 2.829 2.829l.822.822zm-2.943 1.299.822.822a3.5 3.5 0 0 1-4.474-4.474l.823.823a2.5 2.5 0 0 0 2.829 2.829z"/>\n      <path d="M3.35 5.47c-.18.16-.353.322-.518.487A13.134 13.134 0 0 0 1.172 8l.195.288c.335.48.83 1.12 1.465 1.755C4.121 11.332 5.881 12.5 8 12.5c.716 0 1.39-.133 2.02-.36l.77.772A7.029 7.029 0 0 1 8 13.5C3 13.5 0 8 0 8s.939-1.721 2.641-3.238l.708.709zm10.296 8.884-12-12 .708-.708 12 12-.708.708z"/>\n    </svg>\n  ',eyedropper:'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-eyedropper" viewBox="0 0 16 16">\n      <path d="M13.354.646a1.207 1.207 0 0 0-1.708 0L8.5 3.793l-.646-.647a.5.5 0 1 0-.708.708L8.293 5l-7.147 7.146A.5.5 0 0 0 1 12.5v1.793l-.854.853a.5.5 0 1 0 .708.707L1.707 15H3.5a.5.5 0 0 0 .354-.146L11 7.707l1.146 1.147a.5.5 0 0 0 .708-.708l-.647-.646 3.147-3.146a1.207 1.207 0 0 0 0-1.708l-2-2zM2 12.707l7-7L10.293 7l-7 7H2v-1.293z"></path>\n    </svg>\n  ',"grip-vertical":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-grip-vertical" viewBox="0 0 16 16">\n      <path d="M7 2a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 5a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zM7 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm-3 3a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm3 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0z"></path>\n    </svg>\n  ',indeterminate:'\n    <svg part="indeterminate-icon" class="checkbox__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" stroke-linecap="round">\n        <g stroke="currentColor" stroke-width="2">\n          <g transform="translate(2.285714, 6.857143)">\n            <path d="M10.2857143,1.14285714 L1.14285714,1.14285714"></path>\n          </g>\n        </g>\n      </g>\n    </svg>\n  ',"person-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-person-fill" viewBox="0 0 16 16">\n      <path d="M3 14s-1 0-1-1 1-4 6-4 6 3 6 4-1 1-1 1H3zm5-6a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"/>\n    </svg>\n  ',"play-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">\n      <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"></path>\n    </svg>\n  ',"pause-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">\n      <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"></path>\n    </svg>\n  ',radio:'\n    <svg part="checked-icon" class="radio__icon" viewBox="0 0 16 16">\n      <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">\n        <g fill="currentColor">\n          <circle cx="8" cy="8" r="3.42857143"></circle>\n        </g>\n      </g>\n    </svg>\n  ',"star-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">\n      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>\n    </svg>\n  ',"x-lg":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">\n      <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8 2.146 2.854Z"/>\n    </svg>\n  ',"x-circle-fill":'\n    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-x-circle-fill" viewBox="0 0 16 16">\n      <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"></path>\n    </svg>\n  '},Je=[{name:"default",resolver:e=>function(e=""){if(!We){const e=[...document.getElementsByTagName("script")],t=e.find(e=>e.hasAttribute("data-shoelace"));if(t)le(t.getAttribute("data-shoelace"));else{const t=e.find(e=>/shoelace(\.min)?\.js($|\?)/.test(e.src)||/shoelace-autoloader(\.min)?\.js($|\?)/.test(e.src));let o="";t&&(o=t.getAttribute("src")),le(o.split("/").slice(0,-1).join("/"))}}return We.replace(/\/$/,"")+(e?`/${e.replace(/^\//,"")}`:"")}(`assets/icons/${e}.svg`)},{name:"system",resolver:e=>e in Ke?`data:image/svg+xml,${encodeURIComponent(Ke[e])}`:""}],Xe=[],Ye=Symbol(),Ze=Symbol(),et=new Map,tt=class extends $e{constructor(){super(...arguments),this.initialRender=!1,this.svg=null,this.label="",this.library="default"}async resolveIcon(e,t){var o;let n;if(null==t?void 0:t.spriteSheet)return Kt`<svg part="svg">
        <use part="use" href="${e}"></use>
      </svg>`;try{if(n=await fetch(e,{mode:"cors"}),!n.ok)return 410===n.status?Ye:Ze}catch(e){return Ze}try{const e=document.createElement("div");e.innerHTML=await n.text();const t=e.firstElementChild;if("svg"!==(null==(o=null==t?void 0:t.tagName)?void 0:o.toLowerCase()))return Ye;Qe||(Qe=new DOMParser);const r=Qe.parseFromString(t.outerHTML,"text/html").body.querySelector("svg");return r?(r.part.add("svg"),document.adoptNode(r)):Ye}catch(e){return Ye}}connectedCallback(){super.connectedCallback(),Xe.push(this)}firstUpdated(){this.initialRender=!0,this.setIcon()}disconnectedCallback(){var e;super.disconnectedCallback(),e=this,Xe=Xe.filter(t=>t!==e)}getIconSource(){const e=ce(this.library);return this.name&&e?{url:e.resolver(this.name),fromLibrary:!0}:{url:this.src,fromLibrary:!1}}handleLabelChange(){"string"==typeof this.label&&this.label.length>0?(this.setAttribute("role","img"),this.setAttribute("aria-label",this.label),this.removeAttribute("aria-hidden")):(this.removeAttribute("role"),this.removeAttribute("aria-label"),this.setAttribute("aria-hidden","true"))}async setIcon(){var e;const{url:t,fromLibrary:o}=this.getIconSource(),n=o?ce(this.library):void 0;if(!t)return void(this.svg=null);let r=et.get(t);if(r||(r=this.resolveIcon(t,n),et.set(t,r)),!this.initialRender)return;const i=await r;if(i===Ze&&et.delete(t),t===this.getIconSource().url)if((e=>void 0!==e?._$litType$)(i))this.svg=i;else switch(i){case Ze:case Ye:this.svg=null,this.emit("sl-error");break;default:this.svg=i.cloneNode(!0),null==(e=null==n?void 0:n.mutator)||e.call(n,this.svg),this.emit("sl-load")}}render(){return this.svg}},tt.styles=qe,Le([n({state:!0,attribute:!1})],tt.prototype,"svg",2),Le([n({reflect:!0})],tt.prototype,"name",2),Le([n()],tt.prototype,"src",2),Le([n()],tt.prototype,"label",2),Le([n({reflect:!0})],tt.prototype,"library",2),Le([ie("label")],tt.prototype,"handleLabelChange",1),Le([ie(["name","src","library"])],tt.prototype,"setIcon",1),ot=class extends $e{constructor(){super(...arguments),this.type="normal",this.checked=!1,this.value="",this.disabled=!1,this.localize=new Fe(this),this.hasSlotController=new Ve(this,"submenu"),this.submenuController=new je(this,this.hasSlotController,this.localize),this.handleHostClick=e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())},this.handleMouseOver=e=>{this.focus(),e.stopPropagation()}}connectedCallback(){super.connectedCallback(),this.addEventListener("click",this.handleHostClick),this.addEventListener("mouseover",this.handleMouseOver)}disconnectedCallback(){super.disconnectedCallback(),this.removeEventListener("click",this.handleHostClick),this.removeEventListener("mouseover",this.handleMouseOver)}handleDefaultSlotChange(){const e=this.getTextLabel();void 0!==this.cachedTextLabel?e!==this.cachedTextLabel&&(this.cachedTextLabel=e,this.emit("slotchange",{bubbles:!0,composed:!1,cancelable:!1})):this.cachedTextLabel=e}handleCheckedChange(){if(this.checked&&"checkbox"!==this.type)return this.checked=!1,void console.error('The checked attribute can only be used on menu items with type="checkbox"',this);"checkbox"===this.type?this.setAttribute("aria-checked",this.checked?"true":"false"):this.removeAttribute("aria-checked")}handleDisabledChange(){this.setAttribute("aria-disabled",this.disabled?"true":"false")}handleTypeChange(){"checkbox"===this.type?(this.setAttribute("role","menuitemcheckbox"),this.setAttribute("aria-checked",this.checked?"true":"false")):(this.setAttribute("role","menuitem"),this.removeAttribute("aria-checked"))}getTextLabel(){return function(e){if(!e)return"";const t=e.assignedNodes({flatten:!0});let o="";return[...t].forEach(e=>{e.nodeType===Node.TEXT_NODE&&(o+=e.textContent)}),o}(this.defaultSlot)}isSubmenu(){return this.hasSlotController.test("submenu")}render(){const e="rtl"===this.localize.dir(),t=this.submenuController.isExpanded();return Kt`
      <div
        id="anchor"
        part="base"
        class=${xo({"menu-item":!0,"menu-item--rtl":e,"menu-item--checked":this.checked,"menu-item--disabled":this.disabled,"menu-item--has-submenu":this.isSubmenu(),"menu-item--submenu-expanded":t})}
        ?aria-haspopup="${this.isSubmenu()}"
        ?aria-expanded="${!!t}"
      >
        <span part="checked-icon" class="menu-item__check">
          <sl-icon name="check" library="system" aria-hidden="true"></sl-icon>
        </span>

        <slot name="prefix" part="prefix" class="menu-item__prefix"></slot>

        <slot part="label" class="menu-item__label" @slotchange=${this.handleDefaultSlotChange}></slot>

        <slot name="suffix" part="suffix" class="menu-item__suffix"></slot>

        <span part="submenu-icon" class="menu-item__chevron">
          <sl-icon name=${e?"chevron-left":"chevron-right"} library="system" aria-hidden="true"></sl-icon>
        </span>

        ${this.submenuController.renderSubmenu()}
      </div>
    `}},ot.styles=Ne,ot.dependencies={"sl-icon":tt,"sl-popup":Re},Le([r("slot:not([name])")],ot.prototype,"defaultSlot",2),Le([r(".menu-item")],ot.prototype,"menuItem",2),Le([n()],ot.prototype,"type",2),Le([n({type:Boolean,reflect:!0})],ot.prototype,"checked",2),Le([n()],ot.prototype,"value",2),Le([n({type:Boolean,reflect:!0})],ot.prototype,"disabled",2),Le([ie("checked")],ot.prototype,"handleCheckedChange",1),Le([ie("disabled")],ot.prototype,"handleDisabledChange",1),Le([ie("type")],ot.prototype,"handleTypeChange",1),ot.define("sl-menu-item"),nt=ht`
  ${we}

  :host {
    display: block;
  }

  .menu-label {
    display: inline-block;
    font-family: var(--sl-font-sans);
    font-size: var(--sl-font-size-small);
    font-weight: var(--sl-font-weight-semibold);
    line-height: var(--sl-line-height-normal);
    letter-spacing: var(--sl-letter-spacing-normal);
    color: var(--sl-color-neutral-500);
    padding: var(--sl-spacing-2x-small) var(--sl-spacing-x-large);
    user-select: none;
    -webkit-user-select: none;
  }
`,(rt=class extends $e{render(){return Kt` <slot part="base" class="menu-label"></slot> `}}).styles=nt,rt.define("sl-menu-label"),tt.define("sl-icon"),it=ht`
  ${we}

  :host {
    --color: var(--sl-panel-border-color);
    --width: var(--sl-panel-border-width);
    --spacing: var(--sl-spacing-medium);
  }

  :host(:not([vertical])) {
    display: block;
    border-top: solid var(--width) var(--color);
    margin: var(--spacing) 0;
  }

  :host([vertical]) {
    display: inline-block;
    height: 100%;
    border-left: solid var(--width) var(--color);
    margin: 0 var(--spacing);
  }
`,st=class extends $e{constructor(){super(...arguments),this.vertical=!1}connectedCallback(){super.connectedCallback(),this.setAttribute("role","separator")}handleVerticalChange(){this.setAttribute("aria-orientation",this.vertical?"vertical":"horizontal")}},st.styles=it,Le([n({type:Boolean,reflect:!0})],st.prototype,"vertical",2),Le([ie("vertical")],st.prototype,"handleVerticalChange",1),st.define("sl-divider");const{i18n:No,debug:jo,globalFunctional:Vo,configManager:qo}=e.h5playerUIProvider,Wo=qo.isGlobalStorageUsable(),Ko=[{title:No.t("download"),desc:No.t("download"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-download' viewBox='0 0 16 16'%3e %3cpath d='M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5z'/%3e %3cpath d='M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708l3 3z'/%3e%3c/svg%3e",action:"mediaDownload",args:null},{title:No.t("capture"),desc:No.t("capture"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-image' viewBox='0 0 16 16'%3e %3cpath d='M6.002 5.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0z'/%3e %3cpath d='M2.002 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2h-12zm12 1a1 1 0 0 1 1 1v6.5l-3.777-1.947a.5.5 0 0 0-.577.093l-3.71 3.71-2.66-1.772a.5.5 0 0 0-.63.062L1.002 12V3a1 1 0 0 1 1-1h12z'/%3e%3c/svg%3e",action:"capture",args:null},{title:No.t("speed"),desc:No.t("speed"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-fast-forward-btn' viewBox='0 0 16 16'%3e %3cpath d='M8.79 5.093A.5.5 0 0 0 8 5.5v1.886L4.79 5.093A.5.5 0 0 0 4 5.5v5a.5.5 0 0 0 .79.407L8 8.614V10.5a.5.5 0 0 0 .79.407l3.5-2.5a.5.5 0 0 0 0-.814l-3.5-2.5Z'/%3e %3cpath d='M0 4a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V4Zm15 0a1 1 0 0 0-1-1H2a1 1 0 0 0-1 1v8a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4Z'/%3e%3c/svg%3e",dropdownMenu:[{title:"0.5x",desc:"0.5x",action:"setPlaybackRate",args:.5},{title:"0.75x",desc:"0.75x",action:"setPlaybackRate",args:.75},{title:"1.0x",desc:"1.0x",action:"setPlaybackRate",args:1},{title:"1.25x",desc:"1.25x",action:"setPlaybackRate",args:1.25},{title:"1.5x",desc:"1.5x",action:"setPlaybackRate",args:1.5},{title:"2.0x",desc:"2.0x",action:"setPlaybackRate",args:2},{title:"3.0x",desc:"3.0x",action:"setPlaybackRate",args:3},{title:"4.0x",desc:"4.0x",action:"setPlaybackRate",args:4},{title:"8.0x",desc:"8.0x",action:"setPlaybackRate",args:8},{title:"16.0x",desc:"16.0x",action:"setPlaybackRate",args:16}]},{title:No.t("menu"),desc:No.t("menu"),icon:"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' fill='currentColor' class='bi bi-list' viewBox='0 0 16 16'%3e %3cpath fill-rule='evenodd' d='M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5zm0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5z'/%3e%3c/svg%3e",dropdownMenu:[{title:No.t("graphicalInterface"),desc:No.t("graphicalInterface"),subMenu:[{title:No.t("disableCurrentInstanceGUI"),desc:No.t("disableCurrentInstanceGUI"),action:"disableCurrentInstanceGUI",args:null},{title:No.t("disableGUITemporarily"),desc:No.t("disableGUITemporarily"),action:"disableGUITemporarily",args:null},{...Vo.toggleGUIStatusUnderCurrentSite,action:"toggleGUIStatusUnderCurrentSite",args:null},{...Vo.toggleGUIStatus,action:"toggleGUIStatus",args:null,disabled:!Wo},{...Vo.alwaysShowGraphicalInterface,action:"alwaysShowGraphicalInterface",args:null,disabled:!jo.isDebugMode()||!Wo}]},{title:No.t("videoFilter"),desc:No.t("videoFilter"),subMenu:[{title:No.t("resetFilterAndTransform"),desc:No.t("resetFilterAndTransform"),action:"resetFilterAndTransform",args:null},{title:No.t("brightnessUp"),desc:No.t("brightnessUp"),action:"setBrightnessUp",args:.1},{title:No.t("brightnessDown"),desc:No.t("brightnessDown"),action:"setBrightnessDown",args:-.1},{title:No.t("contrastUp"),desc:No.t("contrastUp"),action:"setContrastUp",args:.1},{title:No.t("contrastDown"),desc:No.t("contrastDown"),action:"setContrastDown",args:-.1},{title:No.t("saturationUp"),desc:No.t("saturationUp"),action:"setSaturationUp",args:.1},{title:No.t("saturationDown"),desc:No.t("saturationDown"),action:"setSaturationDown",args:-.1},{title:No.t("hueUp"),desc:No.t("hueUp"),action:"setHueUp",args:1},{title:No.t("hueDown"),desc:No.t("hueDown"),action:"setHueDown",args:-1},{title:No.t("blurUp"),desc:No.t("blurUp"),action:"setBlurUp",args:1},{title:No.t("blurDown"),desc:No.t("blurDown"),action:"setBlurDown",args:-1}]},{title:No.t("rotateAndMirror"),desc:No.t("rotateAndMirror"),action:"rotateAndMirror",subMenu:[{title:No.t("rotate90"),desc:No.t("rotate90"),action:"setRotate",args:null},{title:No.t("horizontalMirror"),desc:No.t("horizontalMirror"),action:"setMirror",args:null},{title:No.t("verticalMirror"),desc:No.t("verticalMirror"),action:"setMirror",args:!0}]},{title:No.t("videoTransform"),desc:No.t("videoTransform"),action:"translate",subMenu:[{title:No.t("translateRight"),desc:No.t("translateRight"),action:"setTranslateRight",args:null},{title:No.t("translateLeft"),desc:No.t("translateLeft"),action:"setTranslateLeft",args:null},{title:No.t("translateUp"),desc:No.t("translateUp"),action:"setTranslateUp",args:null},{title:No.t("translateDown"),desc:No.t("translateDown"),action:"setTranslateDown",args:null}]},{title:No.t("moreActions"),desc:No.t("moreActions"),subMenu:[{title:"Clean remote helper info",desc:"Clean remote helper info",action:"cleanRemoteHelperInfo",disabled:!jo.isDebugMode()},{title:"Print Player info",desc:"Print Player info",action:"printPlayerInfo",disabled:!jo.isDebugMode()},{...Vo.openCustomConfigurationEditor,action:"openCustomConfigurationEditor",args:null,disabled:!0},{title:No.t("comingSoon"),desc:No.t("comingSoon")}]},{divider:!0},{title:No.t("keyboardControl"),desc:No.t("keyboardControl"),subMenu:[{...Vo.openHotkeysPage,action:"openHotkeysPage",args:""},{title:No.t("toggleHotkeysTemporarily"),desc:No.t("toggleHotkeysTemporarily"),action:"toggleHotkeys"},{...Vo.toggleHotkeysStatusUnderCurrentSite,action:"toggleHotkeysStatusUnderCurrentSite"},{...Vo.toggleHotkeysStatus,action:"toggleHotkeysStatus",disabled:!Wo}]},{title:No.t("mouseControl"),desc:No.t("mouseControl"),subMenu:[{...Vo.setMouseLongPressTime,action:"setMouseLongPressTime"},{...Vo.toggleMouseControlUnderCurrentSite,action:"toggleMouseControlUnderCurrentSite"},{...Vo.toggleMouseControl,action:"toggleMouseControl",disabled:!Wo},{title:No.t("comingSoon"),desc:No.t("comingSoon")}]},{title:No.t("mediaDownload.downloadOptions"),desc:No.t("mediaDownload.downloadOptions"),subMenu:[{...Vo.toggleDownloadControlUnderCurrentSite,action:"toggleDownloadControlUnderCurrentSite"},{...Vo.toggleDownloadControl,action:"toggleDownloadControl",disabled:!Wo},{title:`${No.t("toggleStates")} ${No.t("autoGotoBufferedTime")}`,desc:`${No.t("toggleStates")} ${No.t("autoGotoBufferedTime")}`,action:"toggleAutoGotoBufferedTime"},{title:No.t("ffmpegScript"),desc:No.t("ffmpegScript"),url:"https://github.com/xxxily/ffmpeg-script"}]},{title:No.t("faq"),desc:No.t("faq"),subMenu:[{title:"倍速刷课为啥学习进度没变化",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%80%8D%E9%80%9F%E5%88%B7%E8%AF%BE%E4%B8%BA%E5%95%A5%E5%AD%A6%E4%B9%A0%E8%BF%9B%E5%BA%A6%E6%B2%A1%E5%8F%98%E5%8C%96"},{title:"百度网盘视频无法倍速播放",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E7%99%BE%E5%BA%A6%E7%BD%91%E7%9B%98%E8%A7%86%E9%A2%91%E6%97%A0%E6%B3%95%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE"},{title:"倍速播放卡顿、无进度、音画不同步",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE%E5%8D%A1%E9%A1%BF%E3%80%81%E6%97%A0%E8%BF%9B%E5%BA%A6%E3%80%81%E9%9F%B3%E7%94%BB%E4%B8%8D%E5%90%8C%E6%AD%A5"},{title:"Playback is stuttering, has no progress, or is out of sync",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#playback-is-stuttering-has-no-progress-or-is-out-of-sync"},{title:"如何支持本地视频文件的倍速播放",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%A6%82%E4%BD%95%E6%94%AF%E6%8C%81%E6%9C%AC%E5%9C%B0%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6%E7%9A%84%E5%80%8D%E9%80%9F%E6%92%AD%E6%94%BE"},{title:"How can I support speed playback for local video files?",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#how-can-i-support-speed-playback-for-local-video-files"},{title:"开启插件后网站自身的调速失效了",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%BC%80%E5%90%AF%E6%8F%92%E4%BB%B6%E5%90%8E%E7%BD%91%E7%AB%99%E8%87%AA%E8%BA%AB%E7%9A%84%E8%B0%83%E9%80%9F%E5%A4%B1%E6%95%88%E4%BA%86"},{title:"The site's own speed control fails after enabling the plugin",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#the-site-s-own-speed-control-fails-after-enabling-the-plugin"},{title:"为什么视频跟音频是分开下载的",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A7%86%E9%A2%91%E8%B7%9F%E9%9F%B3%E9%A2%91%E6%98%AF%E5%88%86%E5%BC%80%E4%B8%8B%E8%BD%BD%E7%9A%84"},{title:"Why are video and audio downloaded separately?",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#why-are-video-and-audio-downloaded-separately"},{title:"如何合并下载到的音视频文件",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%A6%82%E4%BD%95%E5%90%88%E5%B9%B6%E4%B8%8B%E8%BD%BD%E5%88%B0%E7%9A%84%E9%9F%B3%E8%A7%86%E9%A2%91%E6%96%87%E4%BB%B6"},{title:"How to merge downloaded audio and video files",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#how-to-merge-downloaded-audio-and-video-files"},{title:"为什么视频截图不同网站表现不一致",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A7%86%E9%A2%91%E6%88%AA%E5%9B%BE%E4%B8%8D%E5%90%8C%E7%BD%91%E7%AB%99%E8%A1%A8%E7%8E%B0%E4%B8%8D%E4%B8%80%E8%87%B4"},{title:"Why is video screenshot functionality inconsistent across websites?",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#why-is-video-screenshot-functionality-inconsistent-across-websites"},{title:"如何禁用或自定义快捷键",action:"openDocsLink",lang:["zh"],args:"/home/q&a#%E5%A6%82%E4%BD%95%E7%A6%81%E7%94%A8%E6%88%96%E8%87%AA%E5%AE%9A%E4%B9%89%E5%BF%AB%E6%8D%B7%E9%94%AE"},{title:"How to Disable or Customize Shortcut Keys",action:"openDocsLink",lang:["en","ru"],args:"/home/q&a#how-to-disable-or-customize-shortcut-keys"}]},{title:No.t("setting"),desc:No.t("setting"),subMenu:[{...Vo.openCustomConfigurationEditor,action:"openCustomConfigurationEditor",args:""},{...Vo.restoreGlobalConfiguration,action:"restoreGlobalConfiguration",args:"",disabled:!Wo},{...Vo.toggleScriptEnableState,action:"toggleScriptEnableState",args:null},{...Vo.toggleSetCurrentTimeFunctional,action:"toggleSetCurrentTimeFunctional",args:""},{...Vo.toggleSetVolumeFunctional,action:"toggleSetVolumeFunctional",args:""},{...Vo.toggleGUIStatus,action:"toggleGUIStatus",args:null,disabled:!Wo},{...Vo.toggleSetPlaybackRateFunctional,action:"toggleSetPlaybackRateFunctional",args:"",disabled:!Wo},{...Vo.toggleAcousticGainFunctional,action:"toggleAcousticGainFunctional",args:"",disabled:!Wo},{...Vo.toggleCrossOriginControlFunctional,action:"toggleCrossOriginControlFunctional",args:"",disabled:!Wo},{...Vo.toggleExperimentFeatures,action:"toggleExperimentFeatures",args:"",disabled:!Wo},{...Vo.toggleExternalCustomConfiguration,action:"toggleExternalCustomConfiguration",args:"",disabled:!Wo},{...Vo.toggleDebugMode,action:"toggleDebugMode",args:"",disabled:!Wo},{title:`${No.t("languageSettings")}「${No.t("globalSetting")}」`,desc:`${No.t("languageSettings")}「${No.t("globalSetting")}」`,disabled:!Wo,subMenu:[{title:No.t("autoChoose"),desc:No.t("autoChoose"),action:"setLanguage",args:"auto"},{title:"简体中文",desc:"简体中文",action:"setLanguage",args:"zh-CN"},{title:"繁體中文",desc:"繁體中文",action:"setLanguage",args:"zh-TW"},{title:"English",desc:"English",action:"setLanguage",args:"en-US"},{title:"русский",desc:"русский",action:"setLanguage",args:"ru"}]}]},{title:No.t("about"),desc:No.t("about"),subMenu:[{...Vo.openWebsite,action:"openWebsite",args:""},{...Vo.openProjectGithub,action:"openProjectGithub",args:""},{...Vo.openIssuesPage,action:"openIssuesPage",args:""},{...Vo.openAddGroupChatPage,action:"openAddGroupChatPage",args:""},{...Vo.openChangeLogPage,action:"openChangeLogPage",args:""},{...Vo.openCheckVersionPage,action:"openCheckVersionPage",args:""},{...Vo.openDonatePage,action:"openDonatePage",args:""},{...Vo.openAboutDonatePage,action:"openAboutDonatePage",args:""},{...Vo.openAuthorHomePage,action:"openAuthorHomePage",args:""}]},{title:No.t("more"),desc:No.t("more"),disabled:!0,subMenu:[{title:No.t("ffmpegScript"),desc:No.t("ffmpegScript"),url:"https://github.com/xxxily/ffmpeg-script"}]}]}],Jo=[];if(!e.h5playerUIProvider)throw new Error("h5playerUIProvider is not defined, please check if you have imported h5playerUIProvider.js");const{debug:Xo,parseHTML:Yo,observeVisibility:Zo,isOutOfDocument:Qo,configManager:en,device:tn}=e.h5playerUIProvider,on={},nn={async init(){Xo.log("h5playerUI init"),document.adoptedStyleSheets=[...document.adoptedStyleSheets,at]},disableGUITemporarily(){this.__disableGUITemporarily__=!0,Object.keys(on).forEach(e=>{fe(e)})},getAllPopupWrapElement:function(){return document.querySelectorAll(".h5player-popup-wrap")},findPopupWrapWithElement:function(e){const t=[];return Object.keys(on).forEach(o=>{on[o]===e&&t.push(o)}),t.map(e=>document.querySelector(`#${e}`))},cleanPopupWrap:ye,removePopupWrapById:fe,removePopupWrapByElement:be,popup(e,t){function o(){return!!(l&&l.updateComplete&&l.updateComplete.then)||(e.removeAttribute("data-popup-wrap-id"),s.remove(),delete on[i],!1)}function n(){const t=s.querySelector(".h5player-popup-content .h5p-menu-wrap"),o=s.querySelector(".h5p-action-mod");if(t&&o){t.removeChild(o);const n=he(ue(Ko,e));Yo(n,t);const r=s.querySelectorAll("sl-icon");r&&r.forEach(e=>{e.addEventListener("sl-error",e=>{const t=e.target.parentElement;e.target.remove(),t.getAttribute("data-title")&&(t.innerText=t.getAttribute("data-title"))},{once:!0})})}}async function r(e){const t=e.target,o="h5p-action-btn";if(!t.classList.contains(o)&&!t.parentElement.classList.contains(o))return!1;const n=s.querySelectorAll("sl-dropdown"),r="sl-dropdown"===t.parentElement.tagName.toLowerCase()?t.parentElement:t.parentElement.parentElement;return r&&"sl-dropdown"===r.tagName.toLowerCase()?(n.forEach(async e=>{e!==r&&(e._open_=!1,await e.hide())}),"mousemove"===e.type?(r._open_=!0,await r.show(),!1):void(r._open_?(await r.hide(),r._open_=!1,r.addEventListener("sl-after-show",()=>{r._open_=!0},{once:!0})):(await r.show(),r._open_=!0,r.addEventListener("sl-after-hide",()=>{r._open_=!1},{once:!0})))):(n.forEach(e=>{e.open=!1,e._open_=!1}),!1)}if(this.__disableGUITemporarily__||e.__disableGUITemporarily__)return!1;if(e.videoWidth/e.videoHeight>2.5)return!1;if(this.lastRenderedPopupTime&&Date.now()-this.lastRenderedPopupTime<100)return!1;if(this.lastRenderedPopupTime=Date.now(),e.__popupRenderedCount__&&e.__popupRenderedCount__>15)return!1;if(e.__popupRenderedCount__=e.__popupRenderedCount__?e.__popupRenderedCount__+1:1,!e||!e.tagName||"video"!==e.tagName.toLowerCase()||Qo(e))return!1;let i=e.getAttribute("data-popup-wrap-id");i||(i="h5player-popup-wrap-"+Math.random().toString(36).substr(2),e.setAttribute("data-popup-wrap-id",i));let s=document.querySelector(`#${i}`);if(on[i]||(on[i]=e),s){const e=s.querySelector("sl-popup");return void(e&&e.reposition())}const a=he(ue(Ko,e));s=Yo(`\n      <div id="${i}" class="h5player-popup-wrap">\n        <sl-popup placement="top" sync="width">\n        <div class="h5player-popup-content">\n          <div class="h5p-logo-wrap">\n            <a class="h5p-logo-mod" href="${Vo.getHomePageLink.fn()}" target="_blank">h5player</a>\n          </div>\n          <div class="h5p-recommend-wrap">\n            <div style="overflow:hidden">${ge(e)}</div>\n          </div>\n          <div class="h5p-menu-wrap">\n            ${a}\n          </div>\n        </div>\n        </sl-popup>\n      </div>\n    `,document.body)[0],setTimeout(()=>{me(s.querySelector(".h5p-recommend-wrap"))},100);const l=s.querySelector("sl-popup");customElements.whenDefined("sl-popup").then(()=>{if(!o())return!1;l.updateComplete.then(()=>{l.anchor=e,l.distance=-48,l.active=!0,setTimeout(()=>{l.reposition()},600)})}),setTimeout(()=>{n()},400);const c="h5player-popup-active",u="h5player-popup-full-active",d=en.getGlobalStorage("ui.alwaysShow");let p=null;if(s.addEventListener("mouseenter",()=>{if(e.videoWidth/e.videoHeight>2.5)return e.__disableGUITemporarily__=!0,be(e),!1;clearTimeout(p),Qo(e)?s.classList.remove(u):s.classList.add(u),l.reposition()}),s.addEventListener("mouseleave",()=>{clearTimeout(p),Qo(e)?s.classList.remove(u):p=setTimeout(()=>{!d&&!e.paused&&s.classList.remove(c),!d&&!e.paused&&s.classList.remove(u),s.querySelectorAll("sl-dropdown").forEach(e=>{e._open_=!1,e.open=!1}),n()},500)}),!tn.isMobile()){let t=Date.now();s.addEventListener("mousemove",o=>{const n=Date.now();n-t>100&&(t=n,Qo(e)?(clearTimeout(p),s.classList.remove(u)):l.reposition()),r(o)})}s.addEventListener("click",o=>{r(o),function(e){const{event:t,h5Player:o,h5playerUI:n,videoElement:r,popup:i,actionCallback:s}=e,a=t.target.closest(".h5p-menu-action");if(!a)return void jo.log("[menuActionHandler]","未找到actionDOM",t.target);const l=a.getAttribute("data-action"),c=JSON.parse(a.getAttribute("data-args")||null),u=a.getAttribute("data-url");if(u)Vo.openInTab(u);else{if(o.setPlayerInstance(r),"disableGUITemporarily"===l)return n.disableGUITemporarily(),void jo.log("[menuActionHandler][disableGUITemporarily]");if(l&&(o[l]instanceof Function||Vo[l])){try{"setPlaybackRate"===l?o.setPlaybackRate(c,!1,!1,!0):Vo[l]&&Vo[l].fn instanceof Function?Vo[l].fn(c):(o[l](c),i&&i.reposition())}catch(e){jo.error("[menuActionHandler][error]",e)}s instanceof Function&&s(l,c)}}}({event:o,videoElement:e,h5Player:t,h5playerUI:this,popup:l,actionCallback:()=>{n()}})}),Zo(t=>{let n=!1;if(t?(Qo(e)||(n=!0),e&&e.paused&&!Qo(e)?e.currentTime&&e.currentTime>1.5&&s.classList.add(c):d?(s.classList.add(c),s.classList.add(u)):(s.classList.remove(c),s.classList.remove(u))):(n=!1,s.classList.remove(c),s.classList.remove(u)),!o())return!1;l.updateComplete.then(()=>{l.active=n,l.reposition()})},e),l.oldRect=e.getBoundingClientRect(),l.addEventListener("sl-reposition",()=>{if(Qo(e))l.active=!1,s.classList.remove(c),s.classList.remove(u);else{const t=e.getBoundingClientRect();t.width!==l.oldRect.width&&(l.oldRect=t,n(),function(){const t=s.querySelector(".h5player-popup-content .h5p-recommend-wrap"),o=s.querySelector(".h5player-popup-content .h5p-recommend-wrap>div");if(t&&o){t.removeChild(o);const n=`<div style="overflow:hidden">${ge(e)}</div>`;Yo(n,t),me(t,!0)}}())}}),e.addEventListener("play",()=>{d?(s.classList.add(c),s.classList.add(u)):(s.classList.remove(c),s.classList.remove(u)),Qo(e)?l.active=!1:l.active=!0,l.reposition(),ye(),n()}),e.addEventListener("pause",()=>{n(),d?(s.classList.add(c),s.classList.add(u)):e.currentTime&&e.currentTime>1.5&&s.classList.add(c),Qo(e)?(l.active=!1,s.classList.remove(c),s.classList.remove(u)):l.active=!0,l.reposition(),ye()});let h=Date.now();e.addEventListener("timeupdate",()=>{const t=Date.now();!Qo(e)&&t-h>400&&(h=t,l.reposition())}),ye()}};return nn}();return t}(Le),setTimeout(async()=>{Oe.UI.init()},400)):U.warn("当前浏览器不支持customElements或adoptedStyleSheets，无法使用UI组件，建议使用Chrome 83+，Edge 83+"):U.warn("UI组件已被禁用",Y.get("ui.enable"));try{!1!==Y.get("ui.enable")&&Re.init()}catch(e){U.error("[remoteHelper.init]",e)}}function O(e=0){if(!window.document||!window.document.documentElement)return setTimeout(()=>{e<200?O(e+1):console.error("[h5player message:]","not documentElement detected!",window)},10),!1;e>0&&console.warn("[h5player message:]","documentElement detected!",e,window),I()}var H,U,F,z,B,G;const N={Object:{defineProperty:Object.defineProperty,defineProperties:Object.defineProperties},setInterval:window.setInterval,setTimeout:window.setTimeout,HTMLElement:window.HTMLElement,customElements:window.customElements,customElementsMethods:{define:window.customElements.define,get:window.customElements.get}},j={Object:{defineProperty:Object.defineProperty,defineProperties:Object.defineProperties},Proxy:Proxy,Map:Map,map:{clear:Map.prototype.clear,set:Map.prototype.set,has:Map.prototype.has,get:Map.prototype.get,delete:Map.prototype.delete},console:{log:console.log,info:console.info,error:console.error,warn:console.warn,table:console.table},ShadowRoot:ShadowRoot,HTMLMediaElement:HTMLMediaElement,CustomEvent:CustomEvent,JSON:{parse:JSON.parse,stringify:JSON.stringify},alert:alert,confirm:confirm,prompt:prompt},V=function(){function e(e){return e instanceof j.HTMLMediaElement}function t(t){if(!e(t))return!1;let o=j.map.get.call(u,t);if(o)return o;o={};const n={lock(e,t){const n=`__${e}_info__`;o[n]=o[n]||{},o[n].lock=!0,t=Number(t),!Number.isNaN(t)&&t>0&&(o[n].unLockTime=Date.now()+t)},unLock(e){const t=`__${e}_info__`;o[t]=o[t]||{},o[t].lock=!1,o[t].unLockTime=Date.now()-100},isLock(e){const t=o[`__${e}_info__`]||{};return t.unLockTime?Date.now()<t.unLockTime:t.lock||!1},get(e){if(s[e]&&s[e].get&&!a[e])return s[e].get.apply(t)},set(e,o){if(s[e]&&s[e].set&&!a[e]&&void 0!==o)return s[e].set.apply(t,[o])},apply(e){if(a[e]instanceof Function){const o=Array.from(arguments);return o.shift(),a[e].apply(t,o)}}};o={...o,...n};const r=Object.keys(n);return["playbackRate","volume","currentTime","play","pause"].forEach(e=>{r.forEach(t=>{if(a[e]instanceof Function){if("get"===t||"set"===t)return!0}else if("apply"===t)return!0;var r;o[`${t}${r=e,r.replace(/^\S/,e=>e.toUpperCase())}`]=function(){return n[t].apply(null,[e,...arguments])}})}),j.map.set.call(u,t,o),o}function o(o){if(e(o)&&!l.includes(o)){l.push(o),t(o);try{c.forEach(e=>{e instanceof Function&&e(o)})}catch(e){}}}function n(e){return e instanceof Function&&!c.includes(e)?(c.push(e),i||i||(["play","pause","load","addEventListener"].forEach(e=>{!function(e,n){const r=e&&e.prototype[n];r&&(e.prototype[n]=new j.Proxy(r,{apply(e,r,i){if(o(r),["play","pause"].includes(n)){const e=t(r);if(e&&e.isLock(n))return}return e.apply(r,i)}}))}(HTMLMediaElement,e)}),["playbackRate","volume","currentTime","src"].forEach(e=>{!function(e,n){if(!e||!e.prototype||!s[n])return!1;j.Object.defineProperty.call(Object,e.prototype,n,{configurable:!0,enumerable:!0,get:function(){const e=s[n].get.apply(this,arguments),o=t(this);return o&&o.isLock(n)&&"playbackRate"===n?+!+[]:e},set:function(e){if("src"===n&&o(this),["playbackRate","volume","currentTime"].includes(n)){const e=t(this);if(e&&e.isLock(n))return}return s[n].set.apply(this,arguments)}})}(HTMLMediaElement,e)}),i=!0),l):l}let r=!1,i=!1,s={};const a={},l=[],c=[],u=new j.Map;return{init:function(e){return!r&&(s=Object.getOwnPropertyDescriptors(HTMLMediaElement.prototype),Object.keys(HTMLMediaElement.prototype).forEach(e=>{try{HTMLMediaElement.prototype[e]instanceof Function&&(a[e]=HTMLMediaElement.prototype[e])}catch(e){}}),n(e=e instanceof Function?e:function(){}),r=!0,!0)},mediaPlus:function(e){return t(e)},mediaChecker:n,originDescriptors:s,originMethods:a,mediaElementList:l}}(),q=e=>(e=>"object"===
/*!
 * @name         utils.js
 * @description  数据类型相关的方法
 * @version      0.0.1
 * @author       Blaze
 * @date         22/03/2019 22:46
 * @github       https://github.com/xxxily
 */
function(e){return null==e?String(e):"object"==typeof e||"function"==typeof e?e.constructor&&e.constructor.name&&e.constructor.name.toLowerCase()||/function\s(.+?)\(/.exec(e.constructor)[1].toLowerCase():typeof e}(e))(e),W=function(e){var t,o,n,r,i;if(e.length<=1)return e;for(t=Math.floor(e.length/2),o=e.splice(t,1)[0],n=[],r=[],i=0;i<e.length;i++)e[i]<o?n.push(e[i]):r.push(e[i]);return W(n).concat([o],W(r))},K="Mozilla/5.0 (iPhone; CPU iPhone OS 12_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/74.0.3729.121 Mobile/15E148 Safari/605.1",J={keyCodeList:[13,16,17,18,27,32,37,38,39,40,49,50,51,52,67,68,69,70,73,74,75,77,78,79,80,81,82,83,84,85,87,88,89,90,97,98,99,100,220],keyList:["enter","shift","control","alt","escape"," ","arrowleft","arrowright","arrowup","arrowdown","1","2","3","4","c","d","e","f","i","j","k","n","o","p","q","r","s","t","u","w","x","y","z","\\","|"],keyMap:{enter:13,shift:16,ctrl:17,alt:18,esc:27,space:32,"←":37,"↑":38,"→":39,"↓":40,1:49,2:50,3:51,4:52,c:67,d:68,e:69,f:70,i:73,j:74,k:75,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,w:87,x:88,y:89,z:90,pad1:97,pad2:98,pad3:99,pad4:100,"\\":220}};p();const X=function(){const e={};return["getItem","setItem","removeItem","clear","key"].forEach(t=>{w()?(e[`_${t}_`]=localStorage[t],e[t]=function(){return e[`_${t}_`].apply(localStorage,arguments)}):e[t]=function(){console.error("localStorage unavailable")}}),e}(),Y=new class{constructor(e){this.opts=e}isLocalStorageUsable=w;isGlobalStorageUsable=v;getConfKeyName(e=""){return this.opts.prefix+e.replace(/\./g,"_")}getConfPath(e=""){return e.replace(this.opts.prefix,"").replace(/_/g,".")}getConfPathList(e){const t=[];return function e(o,n=""){Object.keys(o).forEach(r=>{const i=n?`${n}.${r}`:r;"[object Object]"===Object.prototype.toString.call(o[r])?e(o[r],i):t.push(i)})}(e),t}get(e){if("string"!=typeof e)return null;const t=this.getLocalStorage(e);if(null!=t)return t;const o=this.getGlobalStorage(e);return null!=o?o:this.getMemoryStorage(e)}set(e,t){if("string"!=typeof e||null==t)return!1;r(this.opts.config,e,t);let o=!1;return o=this.setLocalStorage(e,t),o||(o=this.setGlobalStorage(e,t)),o}list(){return{localConf:this.listLocalStorage(),globalConf:this.listGlobalStorage(),defConfig:this.opts.config}}clear(){this.clearLocalStorage(),this.clearGlobalStorage()}getMemoryStorage(e){if("string"!=typeof e)return null;const t=n(this.getConfObj(),e);return null!=t?t:null}getLocalStorage(e){if("string"!=typeof e)return null;const t=this.getConfKeyName(e);if(w()){let o=X.getItem(t);if(null!=o){try{o=JSON.parse(o)}catch(e){console.error("configManager parse localStorage error:",t,o)}return o}return this.getMemoryStorage(e)}return null}getGlobalStorage(e){if("string"!=typeof e)return null;const t=this.getConfKeyName(e);if(v()){const o=window.GM_getValue(t);return null!=o?o:this.getMemoryStorage(e)}return this.getLocalStorage(e)}setMemoryStorage(e,t){return"string"==typeof e&&null!=t&&(r(this.opts.config,e,t),!0)}setLocalStorage(e,t){if("string"!=typeof e||null==t)return!1;r(this.opts.config,e,t);const o=this.getConfKeyName(e);if(!w())return!1;try{return("[object Object]"===Object.prototype.toString.call(t)||Array.isArray(t))&&(t=JSON.stringify(t)),X.setItem(o,t),!0}catch(e){return console.error("configManager set localStorage error:",o,t,e),!1}}setGlobalStorage(e,t){if("string"!=typeof e||null==t)return!1;r(this.opts.config,e,t);const o=this.getConfKeyName(e);if(!v())return this.setLocalStorage(e,t);try{return window.GM_setValue(o,t),!0}catch(e){return console.error("configManager set globalStorage error:",o,t,e),!1}}listLocalStorage(){if(w()){const e={};return Object.keys(localStorage).forEach(t=>{if(t.startsWith(this.opts.prefix)){const o=this.getConfPath(t);e[o]=this.getLocalStorage(o)}}),e}return{}}listGlobalStorage(){if(v()){const e={};return window.GM_listValues().forEach(t=>{if(t.startsWith(this.opts.prefix)){const o=this.getConfPath(t);e[o]=this.getGlobalStorage(o)}}),e}return{}}getConfObj(){const e=this.list();return Object.keys(e.globalConf).forEach(t=>{r(this.opts.config,t,e.globalConf[t])}),Object.keys(e.localConf).forEach(t=>{r(this.opts.config,t,e.localConf[t])}),this.opts.config}setLocalStorageByObj(e){const t=this.getConfObj();this.getConfPathList(e).forEach(o=>{const r=n(t,o),i=n(e,o);r!==i&&void 0!==r&&this.setLocalStorage(o,i)})}setGlobalStorageByObj(e){const t=this.getConfObj();this.getConfPathList(e).forEach(o=>{const r=n(t,o),i=n(e,o);r!==i&&void 0!==r&&this.setGlobalStorage(o,i)})}clearLocalStorage(){w()&&Object.keys(localStorage).forEach(e=>{e.startsWith(this.opts.prefix)&&X.removeItem(e)})}clearGlobalStorage(){v()&&window.GM_listValues().forEach(e=>{e.startsWith(this.opts.prefix)&&window.GM_deleteValue(e)})}mergeDefConf(e){return o(this.opts.config,e)}}({prefix:"_h5player_",config:{enable:!0,media:{autoPlay:!1,playbackRate:1,volume:1,lastPlaybackRate:1.5,allowRestorePlayProgress:{},progress:{}},enableHotkeys:!0,hotkeys:[{desc:"网页全屏",key:"shift+enter",command:"setWebFullScreen",disabled:!1},{desc:"全屏",key:"enter",command:"setFullScreen"},{desc:"切换画中画模式",key:"shift+p",command:"togglePictureInPicture"},{desc:"视频截图",key:"shift+s",command:"capture"},{desc:"启用或禁止自动恢复播放进度功能",key:"shift+r",command:"switchRestorePlayProgressStatus"},{desc:"垂直镜像翻转",key:"shift+m",command:"setMirror",args:[!0]},{desc:"水平镜像翻转",key:"m",command:"setMirror"},{desc:"下载音视频文件（实验性功能）",key:"shift+d",command:"mediaDownload"},{desc:"缩小视频画面 -0.05",key:"shift+x",command:"setScaleDown",args:-.05},{desc:"放大视频画面 +0.05",key:"shift+c",command:"setScaleUp",args:.05},{desc:"恢复视频画面",key:"shift+z",command:"resetTransform"},{desc:"画面向右移动10px",key:"shift+arrowright",command:"setTranslateRight",args:10},{desc:"画面向左移动10px",key:"shift+arrowleft",command:"setTranslateLeft",args:-10},{desc:"画面向上移动10px",key:"shift+arrowup",command:"setTranslateUp",args:10},{desc:"画面向下移动10px",key:"shift+arrowdown",command:"setTranslateDown",args:-10},{desc:"前进5秒",key:"arrowright",command:"setCurrentTimeUp",args:5},{desc:"后退5秒",key:"arrowleft",command:"setCurrentTimeDown",args:-5},{desc:"前进30秒",key:"ctrl+arrowright",command:"setCurrentTimeUp",args:[30]},{desc:"后退30秒",key:"ctrl+arrowleft",command:"setCurrentTimeDown",args:[-30]},{desc:"音量升高 5%",key:"arrowup",command:"setVolumeUp",args:[.05]},{desc:"音量降低 5%",key:"arrowdown",command:"setVolumeDown",args:[-.05]},{desc:"音量升高 20%",key:"ctrl+arrowup",command:"setVolumeUp",args:[.2]},{desc:"音量降低 20%",key:"ctrl+arrowdown",command:"setVolumeDown",args:[-.2]},{desc:"切换暂停/播放",key:"space",command:"switchPlayStatus"},{desc:"减速播放",key:"x",command:"setPlaybackRateDown",args:-.1},{desc:"加速播放",key:"c",command:"setPlaybackRateUp",args:.1},{desc:"正常速度播放",key:"z",command:"resetPlaybackRate"},{desc:"设置1x的播放速度",key:"Digit1",command:"setPlaybackRatePlus",args:1},{desc:"设置1x的播放速度",key:"Numpad1",command:"setPlaybackRatePlus",args:1},{desc:"设置2x的播放速度",key:"Digit2",command:"setPlaybackRatePlus",args:2},{desc:"设置2x的播放速度",key:"Numpad2",command:"setPlaybackRatePlus",args:2},{desc:"设置3x的播放速度",key:"Digit3",command:"setPlaybackRatePlus",args:3},{desc:"设置3x的播放速度",key:"Numpad3",command:"setPlaybackRatePlus",args:3},{desc:"设置4x的播放速度",key:"Digit4",command:"setPlaybackRatePlus",args:4},{desc:"设置4x的播放速度",key:"Numpad4",command:"setPlaybackRatePlus",args:4},{desc:"下一帧",key:"F",command:"freezeFrame",args:1},{desc:"上一帧",key:"D",command:"freezeFrame",args:-1},{desc:"增加亮度",key:"E",command:"setBrightnessUp"},{desc:"减少亮度",key:"W",command:"setBrightnessDown"},{desc:"增加对比度",key:"T",command:"setContrastUp"},{desc:"减少对比度",key:"R",command:"setContrastDown"},{desc:"增加饱和度",key:"U",command:"setSaturationUp"},{desc:"减少饱和度",key:"Y",command:"setSaturationDown"},{desc:"增加色相",key:"O",command:"setHueUp"},{desc:"减少色相",key:"I",command:"setHueDown"},{desc:"模糊增加 1 px",key:"K",command:"setBlurUp"},{desc:"模糊减少 1 px",key:"J",command:"setBlurDown"},{desc:"图像复位",key:"Q",command:"resetFilterAndTransform"},{desc:"画面旋转 90 度",key:"S",command:"setRotate"},{desc:"播放下一集",key:"N",command:"setNextVideo"},{desc:"插入debugger断点",key:"ctrl+shift+alt+d",command:"debuggerNow"},{desc:"执行JS脚本",key:"ctrl+j ctrl+s",command:()=>{alert("自定义JS脚本")},when:""}],mouse:{enable:!1,longPressTime:600},ui:{enable:!0,alwaysShow:!1,mod:{recommend:{enable:!1}}},download:{enable:!0},enhance:{blockSetPlaybackRate:!0,blockSetCurrentTime:!1,blockSetVolume:!1,allowExperimentFeatures:!1,allowExternalCustomConfiguration:!1,allowAcousticGain:!1,allowCrossOriginControl:!0,unfoldMenu:!1},language:"auto",debug:!1,blacklist:{urls:["https://www.bilibili.com/"],domains:["challenges.cloudflare.com"]}}});!async function(){const e=location.href.indexOf("h5player.anzz.top/tools/json-editor")>-1||location.href.indexOf("h5player.anzz.site/tools/json-editor")>-1,t=location.href.indexOf("saveHandlerName=saveH5PlayerConfig")>-1;if(!e||!t)return;let o=0;const n=await p();n&&function e(t){t.JSONEditor?function(e){const t=JSON.parse(JSON.stringify(Y.getConfObj()));delete t.recommendList,Array.isArray(t.hotkeys)&&t.hotkeys.forEach(e=>{void 0===e.disabled&&(e.disabled=!1)}),e.jsonEditor.set(t),e.jsonEditor.expandAll&&e.jsonEditor.expandAll(),e.saveH5PlayerConfig=function(e){try{const t=Y.getConfObj(),o=e.get();o.recommendList=t.recommendList||[],Y.setGlobalStorageByObj(o),alert("配置已更新")}catch(e){alert(`配置格式异常，保存失败：${e}`)}}}(t):o<30&&setTimeout(()=>{o++,e(t)},200)}(n)}();let Z=class{constructor(e,t){this.conf=e||{"demo.demo":{fullScreen:".fullscreen-btn",exitFullScreen:".exit-fullscreen-btn",webFullScreen:function(){},exitWebFullScreen:".exit-fullscreen-btn",autoPlay:".player-start-btn",pause:".player-pause",play:".player-play",switchPlayStatus:".player-play",playbackRate:function(){},currentTime:function(){},addCurrentTime:".add-currenttime",subtractCurrentTime:".subtract-currenttime",shortcuts:{register:["ctrl+shift+alt+c","ctrl+shift+c","ctrl+alt+c","ctrl+c","c"],callback:function(e,t,o){const{event:n,player:r}=o;console.log(n,r)}},include:/^.*/,exclude:/\t/}},this.doTaskFunc=t instanceof Function?t:function(){}}setTaskConf(e){this.conf=e}getDomain(){const e=window.location.host;let t=e;const o=e.split(".");return o.length>2&&(o.shift(),t=o.join(".")),t}formatTCC(e){function t(e){const t={include:/^.*/,exclude:/\t/};return e.include=e.include||t.include,e.exclude=e.exclude||t.exclude,e}const o=this,n=Object.keys(o.conf),r=o.getDomain(),i=window.location.host,s={};return n.forEach(function(n){let a=o[n];q(a)&&(e?(a=t(a),s[n]=a):n!==i&&n!==r||(a=t(a),s[n]=a))}),s}isMatch(e){const t=window.location.href;let o=!1;return e.include||e.exclude?(e.include&&e.include.test(t)&&(o=!0),e.exclude&&e.exclude.test(t)&&(o=!1)):o=!0,o}getTaskConfig(){const e=this;e._hasFormatTCC_||(e.formatTCC(),e._hasFormatTCC_=!0);const t=e.getDomain(),o=e.conf[window.location.host]||e.conf[t];return o&&e.isMatch(o)?o:{}}doTask(e,t){let o=!1;if(!e)return o;const n=q(e)?e:this.getTaskConfig();return q(n)&&n[e]?(n[e]&&(o=this.doTaskFunc(e,n,t)),o):o}};class Q{constructor(e={}){this.config={msg:"[Debug Msg]",trace:!1,traceGroup:!0,printTime:!1,color:"#000000",backgroundColor:"transparent",style:"",...e,colorMap:{info:"#2274A5",log:"#95B46A",warn:"#F5A623",error:"#D33F49",...e.colorMap||{}},backgroundColorMap:{info:"",log:"",warn:"",error:"",...e.backgroundColorMap||{}},styleMap:{info:"",log:"",warn:"",error:"",...e.styleMap||{}}},["log","error","info","warn"].forEach(e=>{this[e]=this.createDebugMethod(e)})}create(e){return new Q(e)}createDebugMethod(e){e=e||"info";const{msg:t,color:o,colorMap:n,backgroundColor:r,backgroundColorMap:i,style:s,styleMap:a,printTime:l,trace:c,traceGroup:u}=this.config,d=n[e]||o,p=i[e]||r,h=a[e]||s;return function(){if(!window._debugMode_)return!1;const o=Array.from(arguments),n=o[0];o.unshift(`color: ${d}; background-color: ${p}; ${h}`);let r="";if(l){const e=new Date;r=`[${e.getHours()}:${e.getMinutes()}:${e.getSeconds()}] `}if(o.unshift(`%c ${r}${t} `),c)if(u){const i="string"==typeof n?n:Object.prototype.toString.call(n);console.groupCollapsed(`%c ${r}${t} ${i}`,`color: ${d}; background-color: ${p}; ${h}`),window.console[e].apply(console,o),console.trace(),console.groupEnd()}else window.console[e].apply(console,o),console.trace();else window.console[e].apply(window.console,o)}}isDebugMode(){return Boolean(window._debugMode_)}}H=new Q,U=H.create({msg:"[H5player Msg]",trace:!1,traceGroup:!0,printTime:!1});const ee=function(e){return document.querySelector(e)},te={"demo.demo":{init:function(){},fullScreen:".fullscreen-btn",exitFullScreen:".exit-fullscreen-btn",webFullScreen:function(){},exitWebFullScreen:".exit-fullscreen-btn",autoPlay:".player-start-btn",pause:".player-pause",play:".player-play",afterPlay:function(){},afterPause:function(){},switchPlayStatus:".player-play",playbackRate:function(){},currentTime:function(){},addCurrentTime:".add-currenttime",subtractCurrentTime:".subtract-currenttime",shortcuts:{register:["ctrl+shift+alt+c","ctrl+shift+c","ctrl+alt+c","ctrl+c","c"],callback:function(e,t,o){const{event:n,player:r}=o;console.log(n,r)}},blockSetPlaybackRate:!0,blockSetCurrentTime:!0,blockSetVolume:!0,include:/^.*/,exclude:/\t/},"youtube.com":{init:function(t){if(t.hasBindSkipAdEvents)return;const o=(new Date).getTime();let n=0;const r=e=>!((new Date).getTime()-o<3e3)&&!document.hidden&&(e.click(),n++,void U.log("youtube.com ad skip count",n));e(".ytp-ad-skip-button",function(e){r(e)}),e(".ytp-ad-skip-button-modern",function(e){r(e)}),setInterval(function(){const e=document.querySelector(".ytp-ad-skip-button"),t=document.querySelector(".ytp-ad-skip-button-modern");e&&r(e),t&&r(t)},1e3),t.hasBindSkipAdEvents=!0},webFullScreen:"button.ytp-size-button",fullScreen:"button.ytp-fullscreen-button",next:".ytp-next-button",afterPlay:function(e){setTimeout(()=>{e.setCurrentTimeUp(.01,!0)},0);const t=e.player(),o=t.closest(".html5-video-player");if(!o)return;if(o.classList.add("ytp-autohide","playing-mode"),clearTimeout(o.autohideTimer),o.autohideTimer=setTimeout(()=>{o.classList.add("ytp-autohide","playing-mode")},1e3),!o.hasBindCustomEvents){const n=()=>{o.classList.remove("ytp-autohide","ytp-hide-info-bar"),clearTimeout(o.mousemoveTimer),o.mousemoveTimer=setTimeout(()=>{t.paused||o.classList.add("ytp-autohide","ytp-hide-info-bar")},2e3)},r=()=>{e.switchPlayStatus(),n()};t.addEventListener("mousemove",n),t.addEventListener("click",r),o.hasBindCustomEvents=!0}const n=o.querySelector(".ytp-spinner");if(n){const e=()=>{n&&(n.style.visibility="visible")};n&&(n.style.visibility="hidden"),clearTimeout(o.spinnerTimer),o.spinnerTimer=setTimeout(()=>{n.style.display="none",e()},1e3)}},afterPause:function(e){const t=e.player().closest(".html5-video-player");t&&(t.classList.remove("ytp-autohide","playing-mode"),t.classList.add("paused-mode"),clearTimeout(t.autohideTimer))},shortcuts:{register:["escape"],callback:function(e,t,o){const{event:n}=o;27===n.keyCode&&"none"!==document.querySelector(".ytp-upnext").style.display&&document.querySelector(".ytp-upnext-cancel-button").click()}}},"netflix.com":{fullScreen:"button.button-nfplayerFullscreen",addCurrentTime:"button.button-nfplayerFastForward",subtractCurrentTime:"button.button-nfplayerBackTen",playbackRate:!0,shortcuts:{register:["f"],callback:function(){return!0}}},"bilibili.com":{fullScreen:function(){const e=ee(".bpx-player-ctrl-full")||ee(".squirtle-video-fullscreen")||ee(".bilibili-player-video-btn-fullscreen");if(e)return e.click(),!0},webFullScreen:function(){const e=ee(".bilibili-player-video-web-fullscreen"),t=ee(".bpx-player-ctrl-web-enter")||ee(".squirtle-pagefullscreen-inactive"),o=ee(".bpx-player-ctrl-web-leave")||ee(".squirtle-pagefullscreen-active");if(e||t&&o)return(e||("none"===getComputedStyle(o).display?t:o)).click(),setTimeout(function(){const e=ee(".bpx-player-dm-input")||ee(".bilibili-player-video-danmaku-input");e&&e.blur()},100),!0},autoPlay:[".bpx-player-ctrl-play",".squirtle-video-start",".bilibili-player-video-btn-start"],switchPlayStatus:[".bpx-player-ctrl-play",".squirtle-video-start",".bilibili-player-video-btn-start"],next:[".bpx-player-ctrl-next",".squirtle-video-next",".bilibili-player-video-btn-next",'.bpx-player-ctrl-btn[aria-label="下一个"]'],init:function(){},shortcuts:{register:["escape"],callback:function(e,t,o){const{event:n}=o;if(27===n.keyCode){const e=ee(".bilibili-player-video-web-fullscreen");if(e&&e.classList.contains("closed"))e.click();else{const e=ee(".bpx-player-ctrl-web-leave")||ee(".squirtle-pagefullscreen-active");"none"!==getComputedStyle(e).display&&e.click()}}}}},"t.bilibili.com":{fullScreen:'button[name="fullscreen-button"]'},"live.bilibili.com":{init:function(){JSON._stringifySource_||(JSON._stringifySource_=JSON.stringify,JSON.stringify=function(e){try{return JSON._stringifySource_.apply(this,arguments)}catch(t){console.error("JSON.stringify 解释出错：",t,e)}})},fullScreen:".bilibili-live-player-video-controller-fullscreen-btn button",webFullScreen:".bilibili-live-player-video-controller-web-fullscreen-btn button",switchPlayStatus:".bilibili-live-player-video-controller-start-btn button"},"acfun.cn":{fullScreen:'[data-bind-key="screenTip"]',webFullScreen:'[data-bind-key="webTip"]',switchPlayStatus:function(e){const t=e.player(),o=t.paused;setTimeout(function(){o===t.paused&&(t.paused?t.play():t.pause())},200)}},"ixigua.com":{fullScreen:["xg-fullscreen.xgplayer-fullscreen",'.xgplayer-control-item__entry[aria-label="全屏"]','.xgplayer-control-item__entry[aria-label="退出全屏"]'],webFullScreen:["xg-cssfullscreen.xgplayer-cssfullscreen",'.xgplayer-control-item__entry[aria-label="剧场模式"]','.xgplayer-control-item__entry[aria-label="退出剧场模式"]']},"tv.sohu.com":{fullScreen:'button[data-title="网页全屏"]',webFullScreen:'button[data-title="全屏"]'},"iqiyi.com":{fullScreen:".iqp-btn-fullscreen",webFullScreen:".iqp-btn-webscreen",next:".iqp-btn-next",init:function(){i(".iqp-logo-box"),window.GM_addStyle('\n          div[templatetype="common_pause"]{ display:none }\n          .iqp-logo-box{ display:none !important }\n      ')}},"youku.com":{fullScreen:".control-fullscreen-icon",next:".control-next-video",init:function(){i(".youku-layer-logo")}},"ted.com":{fullScreen:"button.Fullscreen"},"qq.com":{pause:".container_inner .txp-shadow-mod",play:".container_inner .txp-shadow-mod",shortcuts:{register:["c","x","z","1","2","3","4"],callback:function(e,t,o){const{event:n}=o,r=n.key.toLowerCase(),i="customShortcuts_"+r;if(!e[i])return e[i]={time:Date.now(),playbackRate:e.playbackRate},!1;if(Date.now()-e[i].time<200)return!1;if(e[i]===e.playbackRate||!0===e[i]){if(window.sessionStorage.playbackRate&&/(c|x|z|1|2|3|4)/.test(r)){const t=Number(window.sessionStorage.playbackRate),o=t-.1>=0?t-.1:.1,n=t+.1<=4?t+.1:4;let i=t;switch(r){case"z":i=1;break;case"c":i=n;break;case"x":i=o;break;default:i=Number(r)}return window.sessionStorage.playbackRate=i,e.setCurrentTimeUp(.01,!0),e.setPlaybackRate(i,!0),!0}e[i]=!0}else e[i]=!1}},fullScreen:'txpdiv[data-report="window-fullscreen"]',webFullScreen:'txpdiv[data-report="browser-fullscreen"]',next:'txpdiv[data-report="play-next"]',init:function(){i(".txp-watermark"),i(".txp-watermark-action")},include:/(v.qq|sports.qq)/},"pan.baidu.com":{fullScreen:function(e){e.player().parentNode.querySelector(".vjs-fullscreen-control").click()}},"facebook.com":{fullScreen:function(e){const t=e.player().parentNode.querySelectorAll("button");if(t&&t.length>3)return t[t.length-2].click(),!0},webFullScreen:function(e){const t=e.player().parentNode.querySelectorAll("button");if(t&&t.length>3)return t[t.length-2].click(),!0},shortcuts:{register:["escape"],callback:function(e){s(e.player(),function(e){if("true"===e.getAttribute("data-fullscreen-container")){const t=e.parentNode.querySelector("div>a>i>u");return t&&t.parentNode.parentNode.click(),!0}})}}},"douyu.com":{fullScreen:function(e){const t=e.player(),o=t._fullScreen_.getContainer();return t._isFullScreen_?o.querySelector('div[title="退出窗口全屏"]').click():o.querySelector('div[title="窗口全屏"]').click(),t._isFullScreen_=!t._isFullScreen_,!0},webFullScreen:function(e){const t=e.player(),o=t._fullScreen_.getContainer();return t._isWebFullScreen_?o.querySelector('div[title="退出网页全屏"]').click():o.querySelector('div[title="网页全屏"]').click(),t._isWebFullScreen_=!t._isWebFullScreen_,!0}},"open.163.com":{init:function(e){e.player().setAttribute("crossOrigin","anonymous")}},"agefans.tv":{init:function(e){e.player().setAttribute("crossOrigin","anonymous")}},"chaoxing.com":{fullScreen:".vjs-fullscreen-control"},"yixi.tv":{init:function(e){e.player().setAttribute("crossOrigin","anonymous")}},"douyin.com":{fullScreen:".xgplayer-fullscreen",webFullScreen:".xgplayer-page-full-screen",next:[".xgplayer-playswitch-next"],init:function(e){e.player().setAttribute("crossOrigin","anonymous");const t=e.player(),o=t.closest('div[data-e2e="feed-item"]'),n=()=>{if(o&&o.querySelector(".video-info-detail")){const e=o.querySelector(".video-info-detail"),r=e.querySelector(".account-name").innerText.replace(/^@*/,""),i=`${e.querySelector(".title").innerText.trim()} - ${r}`.replace(/[\\/:*?"<>|]/g,"-");o.setAttribute("data-title",i),t.setAttribute("data-title",i),document.title=i,o.removeEventListener("mouseover",n)}};o&&o.addEventListener("mouseover",n),setTimeout(n,1200)}},"live.douyin.com":{fullScreen:".xgplayer-fullscreen",webFullScreen:".xgplayer-page-full-screen",next:[".xgplayer-playswitch-next"],init:function(e){e.player().setAttribute("crossOrigin","anonymous")}},"zhihu.com":{fullScreen:['button[aria-label="全屏"]','button[aria-label="退出全屏"]'],play:function(e){const t=e.player();if(t&&t.parentNode&&t.parentNode.parentNode){const e=t.parentNode.parentNode.querySelector("div~div:nth-child(3)");if(e){const t=e.querySelector("div");t&&""===t.innerText&&t.click()}}},init:function(e){e.player().setAttribute("crossOrigin","anonymous")}},"weibo.com":{fullScreen:["button.wbpv-fullscreen-control"],webFullScreen:["div.wbpv-open-layer-button"]},"twitter.com":{init:function(e){const t=e.player(),o=t.closest('article[data-testid="tweet"]'),n=()=>{if(o&&!o.getAttribute("data-title")&&o.querySelector('div[data-testid="tweetText"]')){const e=`${o.querySelector('div[data-testid="tweetText"]').innerText.trim()}`.replace(/[\\/:*?"<>|]/g,"-");o.setAttribute("data-title",e),t.setAttribute("data-title",e),o.removeEventListener("mouseover",n)}};o&&o.addEventListener("mouseover",n),setTimeout(n,600)}}},oe={"open.163.com":K,"m.open.163.com":K,"pan.baidu.com":"Mozilla/5.0 (iPhone; CPU iPhone OS 13_2 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) CriOS/111.0.0.0 Mobile/15E148 Safari/604.1"};class ne{constructor(e,t){this.dom=e,this.shadowRoot=null,this.fullStatus=!1,this.pageMode=t||!1;const o="\n      ._webfullscreen_box_size_ {\n\t\t\t\twidth: 100% !important;\n\t\t\t\theight: 100% !important;\n\t\t\t}\n      ._webfullscreen_ {\n        display: block !important;\n\t\t\t\tposition: fixed !important;\n\t\t\t\twidth: 100% !important;\n\t\t\t\theight: 100% !important;\n\t\t\t\ttop: 0 !important;\n\t\t\t\tleft: 0 !important;\n\t\t\t\tbackground: #000 !important;\n\t\t\t\tz-index: 999999 !important;\n\t\t\t}\n\t\t\t._webfullscreen_zindex_ {\n\t\t\t\tz-index: 999999 !important;\n\t\t\t}\n\t\t";!window._hasInitFullPageStyle_&&window.GM_addStyle&&(window.GM_addStyle(o),window._hasInitFullPageStyle_=!0);const n=function(e){for(;e;e=e.parentNode)if("[object ShadowRoot]"===e.toString())return e;return!1}(e);n&&(this.shadowRoot=n,function(e,t,o){if(t&&document.getElementById(t))return!1;const n=document.createElement("style"),r=o||document.head||document.getElementsByTagName("head")[0];n.appendChild(document.createTextNode(e)),r.appendChild(n),t&&n.setAttribute("id",t)}(o,"fullPageStyle",n));const r=this;window.addEventListener("keyup",e=>{"escape"===e.key.toLowerCase()&&(r.isFull()?r.exit():r.isFullScreen()&&r.exitFullScreen())},!0),this.getContainer()}eachParentNode(e,t){let o=e.parentNode;for(;o&&o.classList;){const n=t(o,e);if(o=o.parentNode,n)break}}getContainer(){const e=this;if(e._container_)return e._container_;const t=e.dom,o=t.getBoundingClientRect();let n=t;return e.eachParentNode(t,function(e){if(!e||!e.getBoundingClientRect||e.getAttribute("data-fullscreen-container"))return n=e,!0;const t=e.getBoundingClientRect();if(!(t.width<=o.width&&t.height<=o.height))return!0;n=e}),n.setAttribute("data-fullscreen-container","true"),e._container_=n,n}isFull(){return this.dom.classList.contains("_webfullscreen_")||this.fullStatus}isFullScreen(){const e=document;return!!(e.fullscreen||e.webkitIsFullScreen||e.mozFullScreen||e.fullscreenElement||e.webkitFullscreenElement||e.mozFullScreenElement)}enterFullScreen(){const e=this.getContainer(),t=e.requestFullscreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullScreen;t&&t.call(e)}enter(){function e(e){t.eachParentNode(e,function(e){e.classList.add("_webfullscreen_"),(o===e||n)&&(n=!0,e.classList.add("_webfullscreen_zindex_"))})}const t=this;if(t.isFull())return;const o=t.getContainer();let n=!1;if(t.dom===o&&(n=!0),e(t.dom),t.dom.parentNode){const o=t.dom.getBoundingClientRect();if(t.dom.parentNode.getBoundingClientRect().width-o.width>=5&&t.dom.classList.add("_webfullscreen_"),t.shadowRoot&&t.shadowRoot._shadowHost){const n=t.shadowRoot._shadowHost;n.getBoundingClientRect().width<=o.width&&(n.classList.add("_webfullscreen_"),e(n))}}!t.pageMode&&t.enterFullScreen(),this.fullStatus=!0}exitFullScreen(){const e=document,t=e.exitFullscreen||e.webkitExitFullscreen||e.mozCancelFullScreen||e.msExitFullscreen;t&&t.call(e)}exit(){function e(e){t.eachParentNode(e,function(e){e.classList.remove("_webfullscreen_"),e.classList.remove("_webfullscreen_zindex_")})}const t=this;if(e(t.dom),t.dom.classList.remove("_webfullscreen_"),t.shadowRoot&&t.shadowRoot._shadowHost){const o=t.shadowRoot._shadowHost;o.classList.remove("_webfullscreen_"),e(o)}(!t.pageMode||t.isFullScreen())&&t.exitFullScreen(),this.fullStatus=!1}toggle(){this.isFull()?this.exit():this.enter()}}
/*!
 * @name      videoCapturer.js
 * @version   0.0.1
 * @author    Blaze
 * @date      2019/9/21 12:03
 * @github    https://github.com/xxxily
 */F={capture(e,t,o){if(!e)return!1;const n=`${Math.floor(e.currentTime/60)}'${(e.currentTime%60).toFixed(3)}''`,r=o||`${document.title}_${n}`;e.setAttribute("crossorigin","anonymous");const i=document.createElement("canvas");return i.width=e.videoWidth,i.height=e.videoHeight,i.getContext("2d").drawImage(e,0,0,i.width,i.height),t?this.download(i,r,e):this.previe(i,r),i},previe(e,t){e.style="max-width:100%";const o=window.open("","_blank");o.document.title=`capture previe - ${t||"Untitled"}`,o.document.body.style.textAlign="center",o.document.body.style.background="#000",o.document.body.appendChild(e)},download(e,t,o){t=t||"videoCapturer_"+Date.now();try{e.toBlob(function(e){!async function(e){navigator.clipboard?navigator.clipboard.write([new ClipboardItem({[e.type]:e})]).then(()=>{console.info("[setClipboard] clipboard suc",e.type)}).catch(t=>{console.error("[setClipboard] clipboard err",e.type,t)}):console.error("当前网站不支持将数据写入到剪贴板里，见：\n https://developer.mozilla.org/en-US/docs/Web/API/Clipboard")}(e)},"image/png",.99)}catch(e){console.error("无法将截图复制到剪贴板。",e)}try{e.toBlob(function(e){const o=document.createElement("a");o.download=`${t}.jpg`,o.href=URL.createObjectURL(e),o.click()},"image/jpeg",.99)}catch(n){F.previe(e,t),console.error("视频源受CORS标识限制，无法直接下载截图，见：\n https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS"),console.error(o,n)}}};const re={"zh-CN":z={website:"🏠脚本官网",about:"关于",issues:"问题反馈",faq:"常见问题",setting:"设置",hotkeys:"快捷键",keyboardControl:"键盘控制",mouseControl:"鼠标控制",hotkeysDocs:"快捷键文档",enable:"启用",disable:"禁用",toggleStates:"启用/禁用",disableHotkeysTemporarily:"临时禁用快捷键",toggleHotkeysTemporarily:"临时启用/禁用快捷键",enableHotkeys:"启用快捷键",disableHotkeys:"禁用快捷键",enableMouseControl:"启用鼠标控制",disableMouseControl:"禁用鼠标控制",donate:"👍请作者喝杯咖啡",aboutDonate:"100万级安装量的作品，有多少打赏？",aboutAuthor:"关于作者",recommend:"❤️ 免费ChatGPT-4 ❤️",enableScript:"启用脚本",disableScript:"禁用脚本",disableCurrentInstanceGUI:"关闭当前图形用户界面",disableGUITemporarily:"临时禁用图形用户界面",enableGUI:"启用图形用户界面",disableGUI:"禁用图形用户界面",graphicalInterface:"图形界面",alwaysShowGraphicalInterface:"始终显示图形界面",openCrossOriginFramePage:"单独打开跨域的页面",disableInitAutoPlay:"禁止在此网站自动播放视频",enableInitAutoPlay:"允许在此网站自动播放视频",restoreConfiguration:"还原全局的默认配置",blockSetPlaybackRate:"禁用默认速度调节逻辑",blockSetCurrentTime:"禁用默认播放进度控制逻辑",blockSetVolume:"禁用默认音量控制逻辑",unblockSetPlaybackRate:"允许默认速度调节逻辑",unblockSetCurrentTime:"允许默认播放进度控制逻辑",unblockSetVolume:"允许默认音量控制逻辑",allowAcousticGain:"开启音量增益能力",notAllowAcousticGain:"禁用音量增益能力",allowCrossOriginControl:"开启跨域控制能力",notAllowCrossOriginControl:"禁用跨域控制能力",allowExperimentFeatures:"开启实验性功能",notAllowExperimentFeatures:"禁用实验性功能",experimentFeaturesWarning:"实验性功能容易造成一些不确定的问题，请谨慎开启",useMediaDownloadTips:"使用下载功能，需开启实验性功能，\n实验性功能容易造成一些不确定的问题，确定要开启吗？",allowExternalCustomConfiguration:"开启外部自定义能力",notAllowExternalCustomConfiguration:"关闭外部自定义能力",changeLog:"更新日志",currentVersion:"当前版本",checkVersion:"检查是否有新版本？",configFail:"配置失败",globalSetting:"全局设置",openCustomConfigurationEditor:"打开自定义配置编辑器",localSetting:"仅用于此网站",openDebugMode:"开启调试模式",closeDebugMode:"关闭调试模式",unfoldMenu:"展开菜单",foldMenu:"折叠菜单",addGroupChat:"💬添加群聊",speed:"倍速",capture:"截图",download:"下载",mediaDownload:{enable:"开启媒体下载",disable:"关闭媒体下载",downloadOptions:"下载选项",downloading:"文件正在下载中，确定重复执行此操作？",hasDownload:"文件已经下载，确定重复执行此操作？",confirmTitle:"请输入文件名",notSupport:"当前媒体文件无法下载，下载功能待优化完善",notEndOfStream:"媒体数据还没完全就绪，确定要执行下载操作？",cancelAutoDownload:"是否取消自动下载？",autoDownload:"媒体数据完全就绪后，是否自动下载？",notFoundMediaSource:"未找到对应的媒体流数据，数据可能被清理或者媒体元素已经被移除，建议刷新页面后重试"},menu:"菜单",more:"更多",moreActions:"更多操作",videoFilter:"画面滤镜",resetFilterAndTransform:"图像复位",brightnessUp:"增加亮度",brightnessDown:"减少亮度",contrastUp:"增加对比度",contrastDown:"减少对比度",saturationUp:"增加饱和度",saturationDown:"减少饱和度",hueUp:"增加色相",hueDown:"减少色相",blurUp:"增加模糊度",blurDown:"减少模糊度",rotateAndMirror:"旋转镜像",rotate90:"画面旋转 90 度",horizontalMirror:"画面水平镜像翻转",verticalMirror:"画面垂直镜像翻转",videoTransform:"画面位移",translateRight:"画面向右移动",translateLeft:"画面向左移动",translateUp:"画面向上移动",translateDown:"画面向下移动",languageSettings:"语言设置",default:"默认",autoChoose:"自动选择",comingSoon:"更多功能正在完善中，敬请期待",ffmpegScript:"音视频合并/转换脚本",autoGotoBufferedTime:"自动跟随跳转到缓冲区时间",disableAutoGotoBufferedTime:"禁用自动跟随跳转到缓冲区时间",mouse:{enable:"启用鼠标控制",disable:"禁用鼠标控制",longPressTime:"长按多久响应鼠标长按事件"},tipsMsg:{playspeed:"播放速度：",forward:"前进：",backward:"后退：",seconds:"秒",volume:"音量：",nextframe:"定位：下一帧",previousframe:"定位：上一帧",stopframe:"定格帧画面：",play:"播放",pause:"暂停",arpl:"允许自动恢复播放进度",drpl:"禁止自动恢复播放进度",brightness:"图像亮度：",contrast:"图像对比度：",saturation:"图像饱和度：",hue:"图像色相：",blur:"图像模糊度：",imgattrreset:"图像属性：复位",imgrotate:"画面旋转：",onplugin:"启用h5Player插件",offplugin:"禁用h5Player插件",globalmode:"全局模式：",playbackrestored:"为你恢复上次播放进度",playbackrestoreoff:"恢复播放进度功能已禁用，按 SHIFT+R 可开启该功能",horizontal:"水平位移：",vertical:"垂直位移：",horizontalMirror:"水平镜像",verticalMirror:"垂直镜像",videozoom:"视频缩放率："},faqList:{}},zh:z,"zh-HK":G={website:"🏠腳本官網",about:"關於",issues:"反饋",faq:"常見問題",setting:"設置",hotkeys:"快捷鍵",keyboardControl:"鍵盤控制",mouseControl:"鼠標控制",hotkeysDocs:"快捷鍵文檔",enable:"啟用",disable:"禁用",toggleStates:"啟用/禁用",disableHotkeysTemporarily:"臨時禁用快捷鍵",toggleHotkeysTemporarily:"臨時啟用/禁用快捷鍵",enableHotkeys:"啟用快捷鍵",disableHotkeys:"禁用快捷鍵",donate:"👍讚賞",aboutDonate:"100萬級安裝量的作品，有多少打賞？",aboutAuthor:"關於作者",enableScript:"啟用腳本",disableScript:"禁用腳本",disableCurrentInstanceGUI:"關閉當前圖形用戶界面",disableGUITemporarily:"臨時禁用圖形用戶界面",enableGUI:"啟用圖形用戶界面",disableGUI:"禁用圖形用戶界面",graphicalInterface:"圖形界面",alwaysShowGraphicalInterface:"始終顯示圖形界面",openCrossOriginFramePage:"單獨打開跨域的頁面",disableInitAutoPlay:"禁止在此網站自動播放視頻",enableInitAutoPlay:"允許在此網站自動播放視頻",restoreConfiguration:"還原全局的默認配置",blockSetPlaybackRate:"禁用默認速度調節邏輯",blockSetCurrentTime:"禁用默認播放進度控制邏輯",blockSetVolume:"禁用默認音量控制邏輯",unblockSetPlaybackRate:"允許默認速度調節邏輯",unblockSetCurrentTime:"允許默認播放進度控制邏輯",unblockSetVolume:"允許默認音量控制邏輯",allowAcousticGain:"開啟音量增益能力",notAllowAcousticGain:"禁用音量增益能力",allowCrossOriginControl:"開啟跨域控制能力",notAllowCrossOriginControl:"禁用跨域控制能力",allowExperimentFeatures:"開啟實驗性功能",notAllowExperimentFeatures:"禁用實驗性功能",experimentFeaturesWarning:"實驗性功能容易造成一些不確定的問題，請謹慎開啟",useMediaDownloadTips:"使用下載功能，需開啟實驗功能，\n實驗功能容易造成一些不確定的問題，確定要開啟嗎？",allowExternalCustomConfiguration:"開啟外部自定義能力",notAllowExternalCustomConfiguration:"關閉外部自定義能力",changeLog:"更新日誌",currentVersion:"當前版本",checkVersion:"檢查是否有新版本？",configFail:"配置失敗",globalSetting:"全局設置",openCustomConfigurationEditor:"打開自定義配置編輯器",localSetting:"僅用於此網站",openDebugMode:"開啟調試模式",closeDebugMode:"關閉調試模式",unfoldMenu:"展開菜單",foldMenu:"折疊菜單",addGroupChat:"💬新增群聊",speed:"倍速",capture:"截圖",download:"下載",mediaDownload:{enable:"開啟媒體下載",disable:"關閉媒體下載",downloadOptions:"下載選項",downloading:"文件正在下載中，確定重複執行此操作？",hasDownload:"文件已經下載，確定重複執行此操作？",confirmTitle:"請輸入文件名",notSupport:"目前媒體檔案無法下載，下載功能要優化完善",notEndOfStream:"媒體資料還沒完全就緒，確定要執行下載操作？",cancelAutoDownload:"是否取消自動下載？",autoDownload:"媒體資料完全就緒後，是否自動下載？",notFoundMediaSource:"未找到對應的媒體流數據，數據可能被清理或媒體元素已經被移除，建議刷新頁面後重試"},menu:"菜單",more:"更多",moreActions:"更多操作",videoFilter:"視頻濾鏡",resetFilterAndTransform:"圖像復位",brightnessUp:"增加亮度",brightnessDown:"減少亮度",contrastUp:"增加對比度",contrastDown:"減少對比度",saturationUp:"增加飽和度",saturationDown:"減少飽和度",hueUp:"增加色相",hueDown:"減少色相",blurUp:"增加模糊度",blurDown:"減少模糊度",rotateAndMirror:"旋轉和鏡像",rotate90:"畫面旋轉 90 度",horizontalMirror:"畫面水平鏡像翻轉",verticalMirror:"畫面垂直鏡像翻轉",videoTransform:"畫面位移",translateRight:"畫面向右移動",translateLeft:"畫面向左移動",translateUp:"畫面向上移動",translateDown:"畫面向下移動",languageSettings:"語言設置",default:"默認",autoChoose:"自動選擇",comingSoon:"更多功能正在完善中，敬請期待",ffmpegScript:"音視頻合併/轉換腳本",autoGotoBufferedTime:"自動跟隨跳轉到緩衝區時間",disableAutoGotoBufferedTime:"禁用自動跟隨跳轉到緩衝區時間",mouse:{enable:"啟用鼠標控制",disable:"禁用鼠標控制",longPressTime:"長按多久響應鼠標長按事件"},tipsMsg:{playspeed:"播放速度：",forward:"向前：",backward:"向後：",seconds:"秒",volume:"音量：",nextframe:"定位：下一幀",previousframe:"定位：上一幀",stopframe:"定格幀畫面：",play:"播放",pause:"暫停",arpl:"允許自動恢復播放進度",drpl:"禁止自動恢復播放進度",brightness:"圖像亮度：",contrast:"圖像對比度：",saturation:"圖像飽和度：",hue:"圖像色相：",blur:"圖像模糊度：",imgattrreset:"圖像屬性：復位",imgrotate:"畫面旋轉：",onplugin:"啟用h5Player插件",offplugin:"禁用h5Player插件",globalmode:"全局模式：",playbackrestored:"為你恢復上次播放進度",playbackrestoreoff:"恢復播放進度功能已禁用，按 SHIFT+R 可開啟該功能",horizontal:"水平位移：",vertical:"垂直位移：",horizontalMirror:"水平鏡像",verticalMirror:"垂直鏡像",videozoom:"視頻縮放率："}},"zh-TW":G,"en-US":B={website:"🏠Script Homepage",about:"About",issues:"Issues",faq:"FAQ",setting:"Setting",hotkeys:"Hotkeys",keyboardControl:"Keyboard Control",mouseControl:"Mouse Control",hotkeysDocs:"Hotkeys Docs",enable:"Enable",disable:"Disable",toggleStates:"Enable/Disable",disableHotkeysTemporarily:"Disable hotkeys temporarily",toggleHotkeysTemporarily:"Toggle hotkeys temporarily",enableHotkeys:"Enable hotkeys",disableHotkeys:"Disable hotkeys",donate:"👍Donate",aboutDonate:"How much the author has received?",aboutAuthor:"About the author",enableScript:"Enable script",disableScript:"Disable script",disableCurrentInstanceGUI:"Close the current graphical user interface",disableGUITemporarily:"Temporarily disable the graphical interface",enableGUI:"Enable Graphical User Interface",disableGUI:"Disable Graphical User Interface",graphicalInterface:"Graphical Interface",alwaysShowGraphicalInterface:"Always show graphical interface",openCrossOriginFramePage:"Open cross-domain pages alone",disableInitAutoPlay:"Prohibit autoplay of videos on this site",enableInitAutoPlay:"Allow autoplay videos on this site",restoreConfiguration:"Restore the global default configuration",blockSetPlaybackRate:"Disable default speed regulation logic",blockSetCurrentTime:"Disable default playback progress control logic",blockSetVolume:"Disable default volume control logic",unblockSetPlaybackRate:"Allow default speed adjustment logic",unblockSetCurrentTime:"Allow default playback progress control logic",unblockSetVolume:"Allow default volume control logic",allowAcousticGain:"Turn on volume boost",notAllowAcousticGain:"Disable volume boost ability",allowCrossOriginControl:"Enable cross-domain control capability",notAllowCrossOriginControl:"Disable cross-domain control capabilities",allowExperimentFeatures:"Turn on experimental features",notAllowExperimentFeatures:"Disable experimental features",experimentFeaturesWarning:"Experimental features are likely to cause some uncertain problems, please turn on with caution",useMediaDownloadTips:"To use the download capability, you need to enable experimental features.\nExperimental features can easily cause some uncertain problems. Are you sure you want to enable it?",allowExternalCustomConfiguration:"Enable external customization capabilities",notAllowExternalCustomConfiguration:"Turn off external customization capabilities",changeLog:"Change log",currentVersion:"Current version",checkVersion:"Check for new version ?",configFail:"Configuration failed",globalSetting:"Global Settings",openCustomConfigurationEditor:"Open custom configuration editor",localSetting:"For this site only",openDebugMode:"Enable debug mode",closeDebugMode:"Turn off debug mode",unfoldMenu:"Expand menu",foldMenu:"Collapse menu",addGroupChat:"💬Add chat group",speed:"Speed",capture:"Capture",download:"Download",mediaDownload:{enable:"Enable media download",disable:"Disable media download",downloadOptions:"Download options",downloading:"The file is being downloaded. Are you sure you want to execute this operation again?",hasDownload:"The file has been downloaded. Are you sure you want to execute this operation again?",confirmTitle:"Please enter the file name",notSupport:"The current media file cannot be downloaded. The download function needs to be optimized and improved",notEndOfStream:"The media data is not fully ready, are you sure you want to download it?",cancelAutoDownload:"Cancel automatic download?",autoDownload:"The media data is not fully ready, do you want to automatically download it when it is ready?",notFoundMediaSource:"The corresponding media stream data was not found, the data may have been cleared or the media element has been removed, it is recommended to refresh the page and try again"},menu:"Menu",more:"More",moreActions:"More actions",videoFilter:"Video filter",resetFilterAndTransform:"Reset filter and transform",brightnessUp:"Increase brightness",brightnessDown:"Decrease brightness",contrastUp:"Increase contrast",contrastDown:"Decrease contrast",saturationUp:"Increase saturation",saturationDown:"Decrease saturation",hueUp:"Increase hue",hueDown:"Decrease hue",blurUp:"Increase blur",blurDown:"Decrease blur",rotateAndMirror:"Rotate and mirror",rotate90:"Rotate 90 degrees",horizontalMirror:"Horizontal mirror flip",verticalMirror:"Vertical mirror flip",videoTransform:"Video displacement",translateRight:"Move the screen to the right",translateLeft:"Move the screen to the left",translateUp:"Move the screen up",translateDown:"Move the screen down",languageSettings:"Language settings",default:"Default",autoChoose:"Auto choose",comingSoon:"More features are being improved, stay tuned",ffmpegScript:"Audio and video merge/convert script",autoGotoBufferedTime:"Automatically jump to the buffered time",disableAutoGotoBufferedTime:"Disable automatic jump to the buffered time",mouse:{enable:"Enable mouse control",disable:"Disable mouse control",longPressTime:"How long to respond to mouse long press events"},tipsMsg:{playspeed:"Speed: ",forward:"Forward: ",backward:"Backward: ",seconds:"sec",volume:"Volume: ",nextframe:"Next frame",previousframe:"Previous frame",stopframe:"Stopframe: ",play:"Play",pause:"Pause",arpl:"Allow auto resume playback progress",drpl:"Disable auto resume playback progress",brightness:"Brightness: ",contrast:"Contrast: ",saturation:"Saturation: ",hue:"HUE: ",blur:"Blur: ",imgattrreset:"Attributes: reset",imgrotate:"Picture rotation: ",onplugin:"ON h5Player plugin",offplugin:"OFF h5Player plugin",globalmode:"Global mode: ",playbackrestored:"Restored the last playback progress for you",playbackrestoreoff:"The function of restoring the playback progress is disabled. Press SHIFT+R to turn on the function",horizontal:"Horizontal displacement: ",vertical:"Vertical displacement: ",horizontalMirror:"Horizontal mirror",verticalMirror:"vertical mirror",videozoom:"Video zoom: "},demo:"demo-test"},en:B,ru:{website:"🏠официальный сайт скрипта",about:"около",issues:"обратная связь",faq:"часто задаваемые вопросы",setting:"установка",hotkeys:"горячие клавиши",keyboardControl:"управление клавиатурой",mouseControl:"управление мышью",hotkeysDocs:"документы горячих клавиш",enable:"включить",disable:"отключить",toggleStates:"включить/отключить",disableHotkeysTemporarily:"временно отключить горячие клавиши",toggleHotkeysTemporarily:"временно включить/отключить горячие клавиши",enableHotkeys:"включить горячие клавиши",disableHotkeys:"отключить горячие клавиши",donate:"👍пожертвовать",aboutDonate:"Сколько автор получил?",aboutAuthor:"о авторе",enableScript:"включить скрипт",disableScript:"отключить скрипт",disableCurrentInstanceGUI:"отключить текущий графический интерфейс пользователя",disableGUITemporarily:"Временно отключить графический интерфейс пользователя",enableGUI:"Включить графический интерфейс пользователя",disableGUI:"Отключить графический интерфейс пользователя",graphicalInterface:"Графический интерфейс",alwaysShowGraphicalInterface:"Всегда показывать графический интерфейс",openCrossOriginFramePage:"Открывать только междоменные страницы",disableInitAutoPlay:"Запретить автовоспроизведение видео на этом сайте",enableInitAutoPlay:"Разрешить автоматическое воспроизведение видео на этом сайте",restoreConfiguration:"Восстановить глобальную конфигурацию по умолчанию",blockSetPlaybackRate:"Отключить логику регулирования скорости по умолчанию",blockSetCurrentTime:"Отключить логику управления ходом воспроизведения по умолчанию",blockSetVolume:"Отключить логику управления громкостью по умолчанию",unblockSetPlaybackRate:"Разрешить логику регулировки скорости по умолчанию",unblockSetCurrentTime:"Разрешить логику управления ходом воспроизведения по умолчанию",unblockSetVolume:"Разрешить логику управления громкостью по умолчанию",allowAcousticGain:"Включите усиление громкости",notAllowAcousticGain:"Отключить возможность увеличения громкости",allowCrossOriginControl:"Включить возможность междоменного контроля",notAllowCrossOriginControl:"Отключить возможности междоменного контроля",allowExperimentFeatures:"Включить экспериментальные функции",notAllowExperimentFeatures:"Отключить экспериментальные функции",experimentFeaturesWarning:"Экспериментальные функции могут вызвать определенные проблемы, включайте их с осторожностью.",useMediaDownloadTips:"Чтобы использовать функцию загрузки, вам необходимо включить экспериментальную функцию.\nЭкспериментальные функции могут легко вызвать некоторые неопределенные проблемы. Вы уверены, что хотите включить ее?",allowExternalCustomConfiguration:"Включить возможности внешней настройки",notAllowExternalCustomConfiguration:"Отключить возможности внешней настройки",changeLog:"Журнал изменений",currentVersion:"Текущая версия",checkVersion:"Проверить наличие новой версии ?",configFail:"Ошибка конфигурации",globalSetting:"Глобальные настройки",openCustomConfigurationEditor:"Открыть редактор пользовательской конфигурации",localSetting:"только для этого сайта",openDebugMode:"Включить режим отладки",closeDebugMode:"отключить режим отладки",unfoldMenu:"развернуть меню",foldMenu:"свернуть меню",addGroupChat:"💬Добавить группу чата",speed:"Скорость",capture:"Захват",download:"Скачать",mediaDownload:{enable:"Включить загрузку медиафайлов",disable:"Отключить загрузку медиафайлов",downloadOptions:"Опции загрузки",downloading:"Идет скачивание файла. Вы уверены, что хотите повторить эту операцию?",hasDownload:"Файл скачан. Вы уверены, что хотите повторить эту операцию?",confirmTitle:"Пожалуйста, введите имя файла",notSupport:"Текущий медиафайл невозможно загрузить, а функцию загрузки необходимо оптимизировать и улучшить.",notEndOfStream:"Медиаданные еще не полностью готовы. Вы уверены, что хотите их скачать?",cancelAutoDownload:"Отменить автоматическую загрузку?",autoDownload:"Будут ли медиаданные загружаться автоматически после их полной готовности?",notFoundMediaSource:"Соответствующие данные медиапотока не найдены. Возможно, данные были очищены или медиа-элементы удалены. Рекомендуется обновить страницу и повторить попытку."},menu:"Меню",more:"Больше",moreActions:"Дополнительные действия",videoFilter:"Видеофильтр",resetFilterAndTransform:"Сбросить фильтр и трансформацию",brightnessUp:"Увеличить яркость",brightnessDown:"Уменьшить яркость",contrastUp:"Увеличить контраст",contrastDown:"Уменьшить контраст",saturationUp:"Увеличить насыщенность",saturationDown:"Уменьшить насыщенность",hueUp:"Увеличить оттенок",hueDown:"Уменьшить оттенок",blurUp:"Увеличить размытие",blurDown:"Уменьшить размытие",rotateAndMirror:"Повернуть и отразить",rotate90:"Повернуть изображение на 90 градусов",horizontalMirror:"Горизонтальное отражение изображения",verticalMirror:"Вертикальное отражение изображения",videoTransform:"Видео трансформация",translateRight:"Сдвинуть экран вправо",translateLeft:"Сдвинуть экран влево",translateUp:"Сдвинуть экран вверх",translateDown:"Сдвинуть экран вниз",languageSettings:"Настройки языка",default:"По умолчанию",autoChoose:"Автоматический выбор",comingSoon:"Больше функций находится в процессе улучшения, следите за обновлениями",ffmpegScript:"Скрипт слияния/преобразования аудио и видео",autoGotoBufferedTime:"Автоматически перейти к времени буфера",disableAutoGotoBufferedTime:"Отключить автоматический переход к времени буфера",mouse:{enable:"Включить управление мышью",disable:"Отключить управление мышью",longPressTime:"Как долго реагировать на долгие нажатия мыши"},tipsMsg:{playspeed:"Скорость: ",forward:"Вперёд: ",backward:"Назад: ",seconds:" сек",volume:"Громкость: ",nextframe:"Следующий кадр",previousframe:"Предыдущий кадр",stopframe:"Стоп-кадр: ",play:"Запуск",pause:"Пауза",arpl:"Разрешить автоматическое возобновление прогресса воспроизведения",drpl:"Запретить автоматическое возобновление прогресса воспроизведения",brightness:"Яркость: ",contrast:"Контраст: ",saturation:"Насыщенность: ",hue:"Оттенок: ",blur:"Размытие: ",imgattrreset:"Атрибуты: сброс",imgrotate:"Поворот изображения: ",onplugin:"ВКЛ: плагин воспроизведения",offplugin:"ВЫКЛ: плагин воспроизведения",globalmode:"Глобальный режим:",playbackrestored:"Восстановлен последний прогресс воспроизведения",playbackrestoreoff:"Функция восстановления прогресса воспроизведения отключена. Нажмите SHIFT + R, чтобы включить функцию",horizontal:"Горизонтальное смещение: ",vertical:"Вертикальное смещение: ",horizontalMirror:"Горизонтальное зеркало",verticalMirror:"вертикальное зеркало",videozoom:"Увеличить видео: "}}},ie=new class{constructor(e){this._languages={},this._locale=this.getClientLang(),this._defaultLanguage="",this.init(e)}init(e){if(!e)return!1;const t=this;t._locale=e.locale||t._locale,t._languages=e.languages||t._languages,t._defaultLanguage=e.defaultLanguage||t._defaultLanguage}use(){}t(e){const t=this;let o=t.getValByPath(t._languages[t._locale]||{},e);return o||t._locale===t._defaultLanguage||(o=t.getValByPath(t._languages[t._defaultLanguage]||{},e)),o||""}language(){return this._locale}languages(){return this._languages}changeLanguage(e){return!!this._languages[e]&&(this._locale=e,e)}isMatchCurLang(e){const t=this.language()||"",o=t.replace("-",""),n=t.replace("-","_"),r=t.split("-")[0];return e&&!Array.isArray(e)&&(e=[e]),e.includes(t)||e.includes(o)||e.includes(n)||e.includes(r)}getValByPath(e,t){const o=(t=t||"").split(".");let n=e;for(let e=0;e<o.length&&n;e++)n=n[o[e]];return n}getClientLang(){return navigator.languages?navigator.languages[0]:navigator.language}}({defaultLanguage:"en",languages:re}),se=Y.get("language");se&&ie.changeLanguage(se);let ae=0,le=null;new Promise(e=>{window.GM_getTab instanceof Function?window.GM_getTab(function(t){t.tabId||(t.tabId=function(){if(window.GM_getValue&&window.GM_setValue){let e=window.GM_getValue("_global_id_");return e||(e=0),e=Number(e)+1,window.GM_setValue("_global_id_",e),e}return ae=Number(ae)+1,ae}(),window.GM_saveTab(t)),le=t.tabId,e(t.tabId)}):e(Date.now())});const ce={send(e,t,o=80){if(!window.GM_getValue||!window.GM_setValue)return!1;const n=window.GM_getValue(e);if(n&&n.updateTime&&Math.abs(Date.now()-n.updateTime)<o)return!1;const r={data:t,tabId:le||"undefined",title:document.title,referrer:S(window.location),updateTime:Date.now()};"object"==typeof t&&(r.data=S(t)),window.GM_setValue(e,r)},set:(e,t)=>ce.send(e,t),get:e=>window.GM_getValue&&window.GM_getValue(e),on:(e,t)=>window.GM_addValueChangeListener&&window.GM_addValueChangeListener(e,function(e,o,n,r){n.originTab=n.tabId===le,t instanceof Function&&t.apply(null,arguments)}),off:e=>window.GM_removeValueChangeListener&&window.GM_removeValueChangeListener(e),broadcast(e){const t="__monkeyMsgBroadcast__";return ce._monkeyMsgBroadcastHandler_=ce._monkeyMsgBroadcastHandler_||[],e instanceof Function&&ce._monkeyMsgBroadcastHandler_.push(e),ce._hasMonkeyMsgBroadcast_||(ce.on(t,function(){ce._monkeyMsgBroadcastHandler_.forEach(e=>{e.apply(null,arguments)})}),setInterval(function(){const e=ce.get(t);if(e&&Date.now()-e.updateTime<2e3)return!1;ce.send(t,{})},2e3)),t}},ue={excludeShortcuts(e){if(!e||void 0===e.keyCode)return!1;const t=["c","v","f","d"];if(e.ctrlKey||e.metaKey){const o=e.key.toLowerCase();return!!t.includes(o)}return!1},updatePictureInPictureInfo(){setInterval(function(){document.pictureInPictureElement&&ce.send("globalPictureInPictureInfo",{usePictureInPicture:!0})},1500),ce.broadcast(function(){document.pictureInPictureElement&&ce.send("globalPictureInPictureInfo",{usePictureInPicture:!0})})},hasOpenPictureInPicture(){const e=ce.get("globalPictureInPictureInfo");return!(!e||!e.data)&&(e.data.usePictureInPicture?Math.abs(Date.now()-e.updateTime)<3e3:Math.abs(Date.now()-e.updateTime)<15e3)},isNeedSendCrossTabCtlEvent(){const e=ue,t=ce.get("globalPictureInPictureInfo");return!(!e.hasOpenPictureInPicture()||t.tabId===le)},crossTabKeydownEvent(e){const t=ue;if(!a(e.composedPath&&e.composedPath()[0]||e.target))return t.isNeedSendCrossTabCtlEvent()&&d(e)&&!t.excludeShortcuts(e)?(e.stopPropagation(),e.preventDefault(),!0):void 0},bindCrossTabEvent(){const e=ue;e._hasBindEvent_||(document.removeEventListener("keydown",e.crossTabKeydownEvent),document.addEventListener("keydown",e.crossTabKeydownEvent,!0),e._hasBindEvent_=!0)},init(){const e=ue;e.updatePictureInPictureInfo(),e.bindCrossTabEvent()}},de="undefined"==typeof window?global:window,pe=Function.prototype.call.bind(Object.prototype.toString),he=Boolean.originMethod?Boolean.originMethod:Boolean,ge={toStr:pe,isObj:e=>"[object Object]"===pe(e),isRef:e=>"object"==typeof e,isReg:e=>"[object RegExp]"===pe(e),isFn:e=>e instanceof Function,isAsyncFn:e=>"[object AsyncFunction]"===pe(e),isPromise:e=>"[object Promise]"===pe(e),firstUpperCase:e=>e.replace(/^\S/,e=>e.toUpperCase()),toArr:e=>Array.from(Array.isArray(e)?e:[e]),debug:{log(){let e=de.console.log;e.originMethod&&(e=e.originMethod),de._debugMode_&&e.apply(de.console,arguments)}},getAllKeys(e){const t=[];for(const o in e)t.push(o);return Array.from(new Set(t.concat(Reflect.ownKeys(e))))}};
/*!
 * @name         crossTabCtl.js
 * @description  跨Tab控制脚本逻辑
 * @version      0.0.1
 * @author       Blaze
 * @date         2019/11/21 上午11:56
 * @github       https://github.com/xxxily
 */class me{constructor(e){this.useProxy=e||!1,this.hookPropertiesKeyName="_hookProperties"+Date.now()}hookJsPro(){return new me(!0)}_addHook(e,t,o,n){const r=o+"Hooks",i=e[this.hookPropertiesKeyName];i[r]||(i[r]=[]);let s=!1;for(let e=0;e<i[r].length;e++)if(t===i[r][e]){s=!0;break}s||(t.classHook=n||!1,i[r].push(t))}_runHooks(e,t,o,n,r,i,s,a,l){function c(n,r){let l=null;if(f.type=r||"",Array.isArray(n))for(let r=0;r<n.length;r++){const c=n[r];if(ge.isFn(c)&&a===c.classHook&&(l=c(s,e,t,o,f,i),"STOP-INVOKE"===l))return l}return l}const u=n[l],d=u.beforeHooks||[],p=u.afterHooks||[],h=u.errorHooks||[],g=u.hangUpHooks||[],m=u.replaceHooks||[],f={result:null,error:null,args:s,type:""},b=a?function(){return new r(...s)}:function(){return r.apply(i,s)},y=c(d,"before");if("STOP-INVOKE"===y)return y;if(g.length||m.length)c(g,"hangUp"),c(m,"replace");else if(h.length)try{f.result=b()}catch(e){if(f.error=e,"SKIP-ERROR"!==c(h,"error"))throw e}else f.result=b();return c(p,"after"),f.result}_proxyMethodcGenerator(e,t,o,n,r,i){const s=this,a=s.useProxy;let l=null;if(s.isHook(o)?l=o:o[s.hookPropertiesKeyName]&&s.isHook(o[s.hookPropertiesKeyName].hookMethod)&&(l=o[s.hookPropertiesKeyName].hookMethod),l)return l[s.hookPropertiesKeyName].isHook||(l[s.hookPropertiesKeyName].isHook=!0,ge.debug.log(`[hook method] ${ge.toStr(e)} ${t}`)),l;if(a&&Proxy){const a={...i};n?a.construct=function(n,i){return r=r||this,s._runHooks(e,t,o,l,n,r,i,!0,s.hookPropertiesKeyName)}:a.apply=function(n,i,a){return i=r||i,s._runHooks(e,t,o,l,n,i,a,!1,s.hookPropertiesKeyName)},l=new Proxy(o,a)}else l=function(){const i=r||this;return s._runHooks(e,t,o,l,o,i,arguments,n,s.hookPropertiesKeyName)},Reflect.ownKeys(o).forEach(e=>{try{Object.defineProperty(l,e,{get:function(){return o[e]},set:function(t){o[e]=t},configurable:!0})}catch(o){ge.debug.log(`[proxyMethodcGenerator] hookMethod defineProperty abnormal.  hookMethod:${t}, definePropertyName:${e}`,o)}}),l.prototype=o.prototype;const c=l[s.hookPropertiesKeyName]={};return c.originMethod=o,c.hookMethod=l,c.isHook=!0,c.classHook=n,ge.debug.log(`[hook method] ${ge.toStr(e)} ${t}`),l}_getObjKeysByRule(e,t){let o=null,n=t;return ge.isObj(t)&&t.include&&(o=t.exclude,n=t=t.include),"*"===t?n=Object.keys(e):"**"===t?n=Reflect.ownKeys(e):"***"===t?n=ge.getAllKeys(e):ge.isReg(t)&&(n=ge.getAllKeys(e).filter(e=>t.test(e))),o&&(n=Array.isArray(n)?n:[n],n=ge.isReg(o)?n.filter(e=>!o.test(e)):Array.isArray(o)?n.filter(e=>!o.includes(e)):n.filter(e=>o!==e)),ge.toArr(n)}isHook(e){if(!e||!e[this.hookPropertiesKeyName])return!1;const t=e[this.hookPropertiesKeyName];return ge.isFn(t.originMethod)&&e!==t.originMethod}isAllowHook(e,t){try{if(!e[t])return!1}catch(e){return!1}const o=Object.getOwnPropertyDescriptor(e,t);return!(o&&!1===o.configurable)}hook(e,t,o,n,r,i,s){const a=arguments[0];if(ge.isObj(a)&&a.parentObj&&a.hookMethods&&(e=a.parentObj,t=a.hookMethods,o=a.fn,n=a.type,r=a.classHook,i=a.context,s=a.proxyHandler),r=he(r),n=n||"before",!ge.isRef(e)&&!ge.isFn(e)||!ge.isFn(o)||!t)return!1;const l=this;(t=l._getObjKeysByRule(e,t)).forEach(t=>{if(!l.isAllowHook(e,t))return ge.debug.log(`${ge.toStr(e)} [${t}] does not support modification`),!1;const a=Object.getOwnPropertyDescriptor(e,t);a&&!1===a.writable&&Object.defineProperty(e,t,{writable:!0});const c=e[t];let u=null;return!!ge.isFn(c)&&(u=l._proxyMethodcGenerator(e,t,c,r,i,s),u[l.hookPropertiesKeyName].classHook!==r?(ge.debug.log(`${ge.toStr(e)} [${t}] Cannot support functions hook and classes hook at the same time `),!1):(e[t]!==u&&(e[t]=u),void l._addHook(u,o,n,r)))})}hookClass(e,t,o,n,r,i){return this.hook(e,t,o,n,!0,r,i)}unHook(e,t,o,n){if(!ge.isRef(e)||!t)return!1;const r=this;(t=r._getObjKeysByRule(e,t)).forEach(t=>{if(!r.isAllowHook(e,t))return!1;const i=e[t];if(!r.isHook(i))return!1;const s=i[r.hookPropertiesKeyName],a=s.originMethod;if(o){const i=o+"Hooks",l=s[i]||[];if(n){for(let o=0;o<l.length;o++)if(n===l[o]){delete n.classHook,s[i].splice(o,1),ge.debug.log(`[unHook ${i} func] ${ge.toStr(e)} ${t}`,n);break}["beforeHooks","afterHooks","errorHooks","hangUpHooks","replaceHooks"].some(e=>Array.isArray(s[e])&&s[e].length>0)||(e[t]=a,delete e[t][r.hookPropertiesKeyName])}else Array.isArray(s[i])&&(s[i].forEach(e=>{delete e.classHook}),s[i]=[],ge.debug.log(`[unHook all ${i}] ${ge.toStr(e)} ${t}`))}else ge.isFn(a)&&(["beforeHooks","afterHooks","errorHooks","hangUpHooks","replaceHooks"].forEach(e=>{Array.isArray(s[e])&&(s[e].forEach(e=>{delete e.classHook}),s[e]=[])}),e[t]=a,delete e[t][r.hookPropertiesKeyName],ge.debug.log(`[unHook method] ${ge.toStr(e)} ${t}`))})}_hook(e,t){const o=this;return function(){const n=e[0];return ge.isObj(n)&&n.parentObj&&n.hookMethods&&(n.type=t),o.hook.apply(o,e)}}before(e,t,o,n,r,i){return this.hook(e,t,o,"before",n,r,i)}after(e,t,o,n,r,i){return this.hook(e,t,o,"after",n,r,i)}replace(e,t,o,n,r,i){return this.hook(e,t,o,"replace",n,r,i)}error(e,t,o,n,r,i){return this.hook(e,t,o,"error",n,r,i)}hangUp(e,t,o,n,r,i){return this.hook(e,t,o,"hangUp",n,r,i)}}const fe=new me(!0),be={menuIds:{},on(e,t,o){if(e instanceof Function&&(e=e()),window.GM_registerMenuCommand){const n=window.GM_registerMenuCommand(e,t,o);return this.menuIds[n]={title:e,fn:t,accessKey:o},n}},off(e){window.GM_unregisterMenuCommand&&delete this.menuIds[e]},clear(){Object.keys(this.menuIds).forEach(e=>{this.off(e)})},build(e){if(this.clear(),Array.isArray(e))e.forEach(e=>{!0!==e.disable&&this.on(e.title,e.fn,e.accessKey)});else if(e instanceof Function){const t=e();Array.isArray(t)?(this._menuBuilder_=e,t.forEach(e=>{!0!==e.disable&&this.on(e.title,()=>{try{e.fn.apply(e,arguments)}catch(t){console.error("[monkeyMenu]",e.title,t)}setTimeout(()=>{this.build(this._menuBuilder_)},100)},e.accessKey)})):console.error("monkeyMenu build error, no menuList return",e)}}},ye="4.2.7",we=()=>ie.language().indexOf("zh")>-1,ve={openInTab:h,getHomePageLink:{title:ie.t("website"),desc:ie.t("website"),fn:()=>C()},openWebsite:{title:ie.t("website"),desc:ie.t("website"),fn:()=>h(C())},openAuthorHomePage:{title:ie.t("aboutAuthor"),desc:ie.t("aboutAuthor"),fn:()=>{h("https://github.com/xxxily")}},openHotkeysPage:{title:ie.t("hotkeysDocs"),desc:ie.t("hotkeysDocs"),fn:()=>{const e=["https://h5player.anzz.site/zh/home/quickStart#%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%88%97%E8%A1%A8","https://h5player.anzz.top/home/quickStart#shortcut-key-list"];h(we()?e[0]:e[1])}},openProjectGithub:{title:"GitHub",desc:"GitHub",fn:()=>h("https://github.com/xxxily/h5player")},openIssuesPage:{title:ie.t("issues"),desc:ie.t("issues"),fn:()=>h("https://github.com/xxxily/h5player/issues")},openDonatePage:{title:ie.t("donate"),desc:ie.t("donate"),fn:()=>P("/home/rewardTheAuthor")},openAboutDonatePage:{title:ie.t("aboutDonate"),desc:ie.t("aboutDonate"),fn:()=>P("/home/aboutDonate")},openAddGroupChatPage:{title:ie.t("addGroupChat"),desc:ie.t("addGroupChat"),fn:()=>{h(we()?"https://h5player.anzz.site/zh/home/quickStart#%E4%BA%A4%E6%B5%81%E7%BE%A4":"https://h5player.anzz.top/home/quickStart#discussion-groups")}},openChangeLogPage:{title:ie.t("changeLog"),desc:ie.t("changeLog"),fn:()=>P("/home/changeLog")},openCheckVersionPage:{title:ie.t("checkVersion"),desc:ie.t("checkVersion"),fn:()=>{window.confirm(`${ie.t("currentVersion")}「${ye}」\n${ie.t("checkVersion")}`)&&h("https://greasyfork.org/zh-CN/scripts/381682/versions")}},openRecommendPage:{title:ie.t("recommend"),desc:ie.t("recommend"),fn:()=>{Math.floor(2*Math.random())?h("https://hello-ai.anzz.top/home/"):h("https://github.com/xxxily/hello-ai")}},openCustomConfigurationEditor:{title:ie.t("openCustomConfigurationEditor"),desc:ie.t("openCustomConfigurationEditor"),fn:()=>{h(we()?"https://h5player.anzz.site/tools/json-editor/index.html?mode=tree&saveHandlerName=saveH5PlayerConfig&expandAll=true&json=":"https://h5player.anzz.top/tools/json-editor/index.html?mode=tree&saveHandlerName=saveH5PlayerConfig&expandAll=true&json=")}},openDocsLink:{title:ie.t("openDocsLink"),desc:ie.t("openDocsLink"),fn:e=>P(e)},toggleExpandedOrCollapsedStateOfMonkeyMenu:{title:`${Y.get("enhance.unfoldMenu")?ie.t("foldMenu"):ie.t("unfoldMenu")} 「${ie.t("globalSetting")}」`,desc:`${Y.get("enhance.unfoldMenu")?ie.t("foldMenu"):ie.t("unfoldMenu")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.unfoldMenu")?ie.t("foldMenu"):ie.t("unfoldMenu"))&&(Y.setGlobalStorage("enhance.unfoldMenu",!Y.get("enhance.unfoldMenu")),window.location.reload())}},toggleScriptEnableState:{title:`${(Y.get("blacklist.domains")||[]).includes(location.host)?ie.t("enableScript"):ie.t("disableScript")} 「${ie.t("localSetting")}」`,desc:`${(Y.get("blacklist.domains")||[]).includes(location.host)?ie.t("enableScript"):ie.t("disableScript")} 「${ie.t("localSetting")}」`,fn:()=>{const e=Y.get("blacklist.domains")||[],t=e.includes(location.host);window.confirm(t?ie.t("enableScript"):ie.t("disableScript"))&&(t?Y.setGlobalStorage("blacklist.domains",e.filter(e=>e!==location.host)):Y.setGlobalStorage("blacklist.domains",e.concat(location.host)),window.location.reload())}},toggleSetCurrentTimeFunctional:{title:()=>`${Y.get("enhance.blockSetCurrentTime")?ie.t("unblockSetCurrentTime"):ie.t("blockSetCurrentTime")} 「${ie.t("localSetting")}」`,desc:()=>`${Y.get("enhance.blockSetCurrentTime")?ie.t("unblockSetCurrentTime"):ie.t("blockSetCurrentTime")} 「${ie.t("localSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.blockSetCurrentTime")?ie.t("unblockSetCurrentTime"):ie.t("blockSetCurrentTime"))&&(Y.setLocalStorage("enhance.blockSetCurrentTime",!Y.get("enhance.blockSetCurrentTime")),window.location.reload())}},toggleSetVolumeFunctional:{title:()=>`${Y.get("enhance.blockSetVolume")?ie.t("unblockSetVolume"):ie.t("blockSetVolume")} 「${ie.t("localSetting")}」`,desc:()=>`${Y.get("enhance.blockSetVolume")?ie.t("unblockSetVolume"):ie.t("blockSetVolume")} 「${ie.t("localSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.blockSetVolume")?ie.t("unblockSetVolume"):ie.t("blockSetVolume"))&&(Y.setLocalStorage("enhance.blockSetVolume",!Y.get("enhance.blockSetVolume")),window.location.reload())}},toggleSetPlaybackRateFunctional:{title:()=>`${Y.get("enhance.blockSetPlaybackRate")?ie.t("unblockSetPlaybackRate"):ie.t("blockSetPlaybackRate")} 「${ie.t("globalSetting")}」`,desc:()=>`${Y.get("enhance.blockSetPlaybackRate")?ie.t("unblockSetPlaybackRate"):ie.t("blockSetPlaybackRate")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.blockSetPlaybackRate")?ie.t("unblockSetPlaybackRate"):ie.t("blockSetPlaybackRate"))&&(Y.setGlobalStorage("enhance.blockSetPlaybackRate",!Y.get("enhance.blockSetPlaybackRate")),window.location.reload())}},toggleAcousticGainFunctional:{title:()=>`${Y.get("enhance.allowAcousticGain")?ie.t("notAllowAcousticGain"):ie.t("allowAcousticGain")} 「${ie.t("globalSetting")}」`,desc:()=>`${Y.get("enhance.allowAcousticGain")?ie.t("notAllowAcousticGain"):ie.t("allowAcousticGain")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.allowAcousticGain")?ie.t("notAllowAcousticGain"):ie.t("allowAcousticGain"))&&(Y.setGlobalStorage("enhance.allowAcousticGain",!Y.getGlobalStorage("enhance.allowAcousticGain")),window.location.reload())}},toggleCrossOriginControlFunctional:{title:()=>`${Y.get("enhance.allowCrossOriginControl")?ie.t("notAllowCrossOriginControl"):ie.t("allowCrossOriginControl")} 「${ie.t("globalSetting")}」`,desc:()=>`${Y.get("enhance.allowCrossOriginControl")?ie.t("notAllowCrossOriginControl"):ie.t("allowCrossOriginControl")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.allowCrossOriginControl")?ie.t("notAllowCrossOriginControl"):ie.t("allowCrossOriginControl"))&&(Y.setGlobalStorage("enhance.allowCrossOriginControl",!Y.getGlobalStorage("enhance.allowCrossOriginControl")),window.location.reload())}},toggleExperimentFeatures:{title:()=>`${Y.get("enhance.allowExperimentFeatures")?ie.t("notAllowExperimentFeatures"):ie.t("allowExperimentFeatures")} 「${ie.t("globalSetting")}」`,desc:()=>`${Y.get("enhance.allowExperimentFeatures")?ie.t("notAllowExperimentFeatures"):ie.t("allowExperimentFeatures")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.allowExperimentFeatures")?ie.t("notAllowExperimentFeatures"):ie.t("experimentFeaturesWarning"))&&(Y.setGlobalStorage("enhance.allowExperimentFeatures",!Y.get("enhance.allowExperimentFeatures")),window.location.reload())}},toggleExternalCustomConfiguration:{title:()=>`${Y.get("enhance.allowExternalCustomConfiguration")?ie.t("notAllowExternalCustomConfiguration"):ie.t("allowExternalCustomConfiguration")} 「${ie.t("globalSetting")}」`,desc:()=>`${Y.get("enhance.allowExternalCustomConfiguration")?ie.t("notAllowExternalCustomConfiguration"):ie.t("allowExternalCustomConfiguration")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(Y.get("enhance.allowExternalCustomConfiguration")?ie.t("notAllowExternalCustomConfiguration"):ie.t("allowExternalCustomConfiguration"))&&(Y.setGlobalStorage("enhance.allowExternalCustomConfiguration",!Y.getGlobalStorage("enhance.allowExternalCustomConfiguration")),window.location.reload())}},toggleDebugMode:{title:()=>`${Y.getGlobalStorage("debug")?ie.t("closeDebugMode"):ie.t("openDebugMode")} 「${ie.t("globalSetting")}」`,desc:()=>`${Y.getGlobalStorage("debug")?ie.t("closeDebugMode"):ie.t("openDebugMode")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(Y.getGlobalStorage("debug")?ie.t("closeDebugMode"):ie.t("openDebugMode"))&&(Y.setGlobalStorage("debug",!Y.getGlobalStorage("debug")),window.location.reload())}},restoreGlobalConfiguration:{title:ie.t("restoreConfiguration"),desc:ie.t("restoreConfiguration"),fn:()=>{var e;Y.clear(),e=e||"配置已更改，马上刷新页面让配置生效？",confirm(e)&&window.location.reload()}},openCrossOriginFramePage:{title:ie.t("openCrossOriginFramePage"),desc:ie.t("openCrossOriginFramePage"),fn:()=>{h(location.href)}},toggleGUIStatus:{title:()=>`${!1===Y.getGlobalStorage("ui.enable")?ie.t("enableGUI"):ie.t("disableGUI")} 「${ie.t("globalSetting")}」`,desc:()=>`${!1===Y.getGlobalStorage("ui.enable")?ie.t("enableGUI"):ie.t("disableGUI")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getGlobalStorage("ui.enable")?ie.t("enableGUI"):ie.t("disableGUI")} 「${ie.t("globalSetting")}」`)&&(Y.setGlobalStorage("ui.enable",!Y.getGlobalStorage("ui.enable")),window.location.reload())}},toggleGUIStatusUnderCurrentSite:{title:()=>`${!1===Y.getLocalStorage("ui.enable")?ie.t("enableGUI"):ie.t("disableGUI")} 「${ie.t("localSetting")}」`,desc:()=>`${!1===Y.getLocalStorage("ui.enable")?ie.t("enableGUI"):ie.t("disableGUI")} 「${ie.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getLocalStorage("ui.enable")?ie.t("enableGUI"):ie.t("disableGUI")} 「${ie.t("localSetting")}」`)&&(Y.setLocalStorage("ui.enable",!Y.getLocalStorage("ui.enable")),window.location.reload())}},alwaysShowGraphicalInterface:{title:`${ie.t("toggleStates")}${ie.t("alwaysShowGraphicalInterface")} 「${ie.t("globalSetting")}」`,desc:`${ie.t("toggleStates")}${ie.t("alwaysShowGraphicalInterface")} 「${ie.t("globalSetting")}」`,fn:()=>{const e=Y.getGlobalStorage("ui.alwaysShow");window.confirm(!0===e?`${ie.t("disable")}${ie.t("alwaysShowGraphicalInterface")} 「${ie.t("globalSetting")}」`:`${ie.t("alwaysShowGraphicalInterface")} 「${ie.t("globalSetting")}」`)&&(Y.setGlobalStorage("ui.alwaysShow",!e),window.location.reload())}},toggleHotkeysStatus:{title:()=>`${!1===Y.getGlobalStorage("enableHotkeys")?ie.t("enableHotkeys"):ie.t("disableHotkeys")} 「${ie.t("globalSetting")}」`,desc:()=>`${!1===Y.getGlobalStorage("enableHotkeys")?ie.t("enableHotkeys"):ie.t("disableHotkeys")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getGlobalStorage("enableHotkeys")?ie.t("enableHotkeys"):ie.t("disableHotkeys")} 「${ie.t("globalSetting")}」`)&&(Y.setGlobalStorage("enableHotkeys",!Y.getGlobalStorage("enableHotkeys")),window.location.reload())}},toggleHotkeysStatusUnderCurrentSite:{title:()=>`${!1===Y.getLocalStorage("enableHotkeys")?ie.t("enableHotkeys"):ie.t("disableHotkeys")} 「${ie.t("localSetting")}」`,desc:()=>`${!1===Y.getLocalStorage("enableHotkeys")?ie.t("enableHotkeys"):ie.t("disableHotkeys")} 「${ie.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getLocalStorage("enableHotkeys")?ie.t("enableHotkeys"):ie.t("disableHotkeys")} 「${ie.t("localSetting")}」`)&&(Y.setLocalStorage("enableHotkeys",!Y.getLocalStorage("enableHotkeys")),window.location.reload())}},toggleMouseControl:{title:()=>`${!1===Y.getGlobalStorage("mouse.enable")?ie.t("mouse.enable"):ie.t("mouse.disable")} 「${ie.t("globalSetting")}」`,desc:()=>`${!1===Y.getGlobalStorage("mouse.enable")?ie.t("mouse.enable"):ie.t("mouse.disable")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getGlobalStorage("mouse.enable")?ie.t("mouse.enable"):ie.t("mouse.disable")} 「${ie.t("globalSetting")}」`)&&(Y.setGlobalStorage("mouse.enable",!Y.getGlobalStorage("mouse.enable")),window.location.reload())}},toggleMouseControlUnderCurrentSite:{title:()=>`${!1===Y.getLocalStorage("mouse.enable")?ie.t("mouse.enable"):ie.t("mouse.disable")} 「${ie.t("localSetting")}」`,desc:()=>`${!1===Y.getLocalStorage("mouse.enable")?ie.t("mouse.enable"):ie.t("mouse.disable")} 「${ie.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getLocalStorage("mouse.enable")?ie.t("mouse.enable"):ie.t("mouse.disable")} 「${ie.t("localSetting")}」`)&&(Y.setLocalStorage("mouse.enable",!Y.getLocalStorage("mouse.enable")),window.location.reload())}},setMouseLongPressTime:{title:`${ie.t("mouse.longPressTime")}「${ie.t("globalSetting")}」`,desc:`${ie.t("mouse.longPressTime")}「${ie.t("globalSetting")}」`,fn:()=>{const e=prompt(`${ie.t("mouse.longPressTime")}「${ie.t("globalSetting")}」`,Y.getGlobalStorage("mouse.longPressTime")||600);e&&(Y.setGlobalStorage("mouse.longPressTime",Number(e)),window.location.reload())}},toggleDownloadControl:{title:()=>`${!1===Y.getGlobalStorage("download.enable")?ie.t("mediaDownload.enable"):ie.t("mediaDownload.disable")} 「${ie.t("globalSetting")}」`,desc:()=>`${!1===Y.getGlobalStorage("download.enable")?ie.t("mediaDownload.enable"):ie.t("mediaDownload.disable")} 「${ie.t("globalSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getGlobalStorage("download.enable")?ie.t("mediaDownload.enable"):ie.t("mediaDownload.disable")} 「${ie.t("globalSetting")}」`)&&(Y.setGlobalStorage("download.enable",!Y.getGlobalStorage("download.enable")),window.location.reload())}},toggleDownloadControlUnderCurrentSite:{title:()=>`${!1===Y.getLocalStorage("download.enable")?ie.t("mediaDownload.enable"):ie.t("mediaDownload.disable")} 「${ie.t("localSetting")}」`,desc:()=>`${!1===Y.getLocalStorage("download.enable")?ie.t("mediaDownload.enable"):ie.t("mediaDownload.disable")} 「${ie.t("localSetting")}」`,fn:()=>{window.confirm(`${!1===Y.getLocalStorage("download.enable")?ie.t("mediaDownload.enable"):ie.t("mediaDownload.disable")} 「${ie.t("localSetting")}」`)&&(Y.setLocalStorage("download.enable",!Y.getLocalStorage("download.enable")),window.location.reload())}},setLanguage:{title:`${ie.t("languageSettings")}「${ie.t("globalSetting")}」`,desc:`${ie.t("languageSettings")}「${ie.t("globalSetting")}」`,fn:e=>{window.confirm(`${ie.t("languageSettings")}[${e}] ?`)&&("auto"===e||ie.languages()[e]?(Y.setGlobalStorage("language",e),window.location.reload()):alert("Language not found"))}},cleanRemoteHelperInfo:{title:ie.t("cleanRemoteHelperInfo"),desc:ie.t("cleanRemoteHelperInfo"),fn:()=>{Y.setGlobalStorage("recommendList",!1),Y.setGlobalStorage("contactRemoteHelperSuccessTime",!1),Y.setGlobalStorage("lastContactRemoteHelperTime",!1),window.location.reload()}}};
/*!
 * @name         menuManager.js
 * @description  菜单管理器
 * @version      0.0.1
 * @author       xxxily
 * @date         2022/08/11 10:05
 * @github       https://github.com/xxxily
 */
let ke=[{...ve.openWebsite},{...ve.openIssuesPage,disable:!Y.get("enhance.unfoldMenu")},{...ve.openDonatePage},{...ve.toggleScriptEnableState},{...ve.toggleGUIStatusUnderCurrentSite,disable:!1!==Y.getLocalStorage("ui.enable")},{...ve.toggleGUIStatus,disable:!1!==Y.getGlobalStorage("ui.enable")&&!Y.get("enhance.unfoldMenu")},{...ve.toggleHotkeysStatusUnderCurrentSite,disable:!1!==Y.getLocalStorage("enableHotkeys")},{...ve.toggleHotkeysStatus,disable:!1!==Y.get("enableHotkeys")},{...ve.openCustomConfigurationEditor},{...ve.toggleExpandedOrCollapsedStateOfMonkeyMenu},{...ve.restoreGlobalConfiguration,disable:!Y.get("enhance.unfoldMenu")}];const Se=function(){function e(e,t){const o=e.currentSrc||e.src;if(!o)return j.alert(ie.t("mediaDownload.notSupport")),!1;let n=!1;r.forEach(r=>{const i=r.mediaSource;if(!i.__objURL__)return console.error("no objURL",i,r),!1;if(o!==i.__objURL__)return!1;if(n=!0,r.mediaElement=e,r.hasDownload&&!j.confirm(ie.t("mediaDownload.hasDownload")))return!1;if(!r.hasDownload&&!r.endOfStream&&!j.confirm(ie.t("mediaDownload.notEndOfStream")))return r.autoDownload?j.confirm(ie.t("mediaDownload.cancelAutoDownload"))&&(r.autoDownload=!1):j.confirm(ie.t("mediaDownload.autoDownload"))&&(r.autoDownload=!0),!1;let s=null;r.sourceBuffer.forEach(o=>{if(!o.mimeCodecs||-1===o.mimeCodecs.toString().indexOf(";")){const e="[downloadMediaSource][mimeCodecs][error] mimeCodecs不存在或信息异常，无法下载";return j.console.error(e,o),j.alert(e),!1}try{let n=`${s||o.mediaInfo.title||t||e.getAttribute("data-title")||document.title||Date.now()}`;if(!s&&!o.mediaInfo.title){if(n=j.prompt(ie.t("mediaDownload.confirmTitle"),n),!n)return!1;o.mediaInfo.title=n}s=n,n=`${n}_${o.mediaInfo.type}.${o.mediaInfo.format}`;const i=document.createElement("a"),a=URL.createObjectURL(new Blob(o.bufferData));i.href=a,i.download=n;try{i.click(),r.hasDownload=!0}finally{URL.revokeObjectURL(a),o.bufferData=[]}}catch(e){r.hasDownload=!1;const t="[downloadMediaSource][error]";j.console.error(t,e),j.alert(t)}})}),n||j.alert(ie.t("mediaDownload.notFoundMediaSource"))}let t=!1;const o={},n={},r=new j.Map,i=new j.Map;return{init:function(){return!t&&!!window.MediaSource&&(Object.keys(MediaSource.prototype).forEach(e=>{try{MediaSource.prototype[e]instanceof Function&&(o[e]=MediaSource.prototype[e])}catch(e){}}),function(){if(!o.addSourceBuffer||!o.endOfStream)return!1;n.createObjectURL=n.createObjectURL||URL.prototype.constructor.createObjectURL,URL.prototype.constructor.createObjectURL=new j.Proxy(n.createObjectURL,{apply(e,t,o){const n=o[0],r=e.apply(t,o);return n instanceof MediaSource&&!j.map.has.call(i,n)&&(n.__objURL__=r,j.map.set.call(i,n,r)),r}}),MediaSource.prototype.addSourceBuffer=new j.Proxy(o.addSourceBuffer,{apply(e,t,o){j.map.has.call(r,t)||j.map.set.call(r,t,{mediaSource:t,createTime:Date.now(),sourceBuffer:[],endOfStream:!1});const n=j.map.get.call(r,t),s=o[0]||"",a=e.apply(t,o),l={mimeCodecs:s,originAppendBuffer:a.appendBuffer,bufferData:[],mediaInfo:{}};try{const e=l.mediaInfo,t=l.mimeCodecs.split(";");e.type=t[0].split("/")[0],e.format=t[0].split("/")[1],e.codecs=t[1].trim().replace("codecs=","").replace(/["']/g,"")}catch(e){j.console.error("[addSourceBuffer][mediaInfo] 媒体信息解析出错",l,e)}return n.sourceBuffer.push(l),a.appendBuffer=new j.Proxy(l.originAppendBuffer,{apply(e,o,s){const a=s[0];return n.endOfStream||l.bufferData.push(a),j.map.get.call(i,t)&&(n.mediaUrl=j.map.get.call(i,t)),j.map.get.call(r,t)||j.map.set.call(r,t,n),e.apply(o,s)}}),a}}),MediaSource.prototype.endOfStream=new j.Proxy(o.endOfStream,{apply(t,o,n){const i=j.map.get.call(r,o);return i&&(i.endOfStream=!0,i.mediaElement&&i.autoDownload&&!i.hasDownload&&e(i.mediaElement)),t.apply(o,n)}})}(),void(t=!0))},hasInit:function(){return t},originMethods:o,originURLMethods:n,mediaSourceMap:r,objectURLMap:i,downloadMediaSource:e,cleanMediaSourceData:function(){function e(e){console.log("[cleanMediaSourceData][removeMediaSourceData]",e.mediaUrl||e.mediaSource.__objURL__),e.sourceBuffer&&e.sourceBuffer.length&&(e.sourceBuffer.forEach(e=>{e.bufferData=[],e.originAppendBuffer=null}),e.sourceBuffer=[]),e.mediaElement=null,j.map.delete.call(r,e.mediaSource),j.map.delete.call(i,e.mediaSource)}r.forEach(t=>{t.mediaElement&&t.mediaElement instanceof HTMLMediaElement?l(t.mediaElement)&&e(t):e(t)})},connectMediaSourceWithMediaElement:function(e){const t=e.currentSrc||e.src;if(!t)return!1;r.forEach(o=>{o.mediaSource.__objURL__&&t===o.mediaSource.__objURL__&&(o.mediaElement=e)})}}}(),_e=window.Map,Ee=window.WeakMap,Ce={ControlLeft:"ctrl",ControlRight:"ctrl",ShiftLeft:"shift",ShiftRight:"shift",AltLeft:"alt",AltRight:"alt",MetaLeft:"meta",MetaRight:"meta"},Pe=function(){const e=new _e,t=new Ee;return{combinationKeysState:e,getCombinationKeys:function(){const t=new _e;return e.forEach((e,o)=>{!0===e&&t.set(o,e)}),t},init:function(o=window){function n(t){$(t.code)&&e.set(t.code,!0)}function r(t){if(!(t instanceof KeyboardEvent))return e.forEach((t,o)=>{e.set(o,!1)}),!0;$(t.code)&&(clearTimeout(i[t.code]),i[t.code]=setTimeout(()=>{e.set(t.code,!1)},50))}if(!o||o!==o.self||!o.addEventListener||t.get(o))return!1;const i={};o.addEventListener("keydown",n,!0),o.addEventListener("keypress",n,!0),o.addEventListener("keyup",r,!0),o.addEventListener("blur",r,!0),t.set(o,!0)}}}();
/*!
 * @name         hotkeysRunner.js
 * @description  热键运行器，实现类似vscode的热键配置方式
 * @version      0.0.1
 * @author       xxxily
 * @date         2022/11/23 18:22
 * @github       https://github.com/xxxily
 */class xe{constructor(e,t=window){this.window=t,this.windowList=[t],this.MOD="object"==typeof navigator&&/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"Meta":"Ctrl",this.prevPress=null,this._prevTimer_=null,this.setHotkeys(e),Pe.init(t)}setCombinationKeysMonitor(e){this.window=e,this.windowList.includes(e)||this.windowList.push(e),Pe.init(e)}hotkeysPreprocess(e){return!!Array.isArray(e)&&(e.forEach(e=>{if(!M(e)||!e.key||"string"!=typeof e.key)return!1;const t=e.key.trim().toLowerCase(),o=this.MOD.toLowerCase();e.keyBindings=t.split(" ").map(e=>{const t=e.split(/\b\+/),n=[];let r="";return t.forEach(e=>{$(e="$mod"===e?o:e)?n.push(e):r=e}),[n,r]})}),e)}setHotkeys(e){this.hotkeys=this.hotkeysPreprocess(e)||[]}isMatch(e,t){if(!e||!Array.isArray(t))return!1;const o=e.combinationKeys||Pe.getCombinationKeys(),n=t[0],r=t[1];if(n.length!==o.size)return!1;if(r&&e.key.toLowerCase()!==r&&e.code.toLowerCase()!==r)return!1;let i=!0;const s=new _e;return o.forEach((e,t)=>{s.set(t,e),s.set(t.toLowerCase(),e),Ce[t]&&s.set(Ce[t],e)}),n.forEach(e=>{s.has(e)||(i=!1)}),i}isMatchPrevPress(e){return this.isMatch(this.prevPress,e)}run(e={}){const t=this.windowList.map(e=>e.KeyboardEvent);if(!t.includes(e.event.constructor))return!1;const o=e.event,n=e.target||null,r=e.conditionHandler||e.whenHandler;let i=null;return this.hotkeys.forEach(t=>{if(t.disabled||!t.keyBindings)return!1;let s=t.keyBindings[0];if(this.prevPress&&(t.keyBindings.length<=1||!this.isMatchPrevPress(s)))return!1;if(this.prevPress&&t.keyBindings.length>1&&this.isMatchPrevPress(s)&&(s=t.keyBindings[1]),!this.isMatch(o,s))return!1;i=t;const a=e.stopPropagation||t.stopPropagation,l=e.preventDefault||t.preventDefault;if(a&&o.stopPropagation(),l&&o.preventDefault(),s===t.keyBindings[0]&&t.keyBindings.length>1)return this.prevPress={combinationKeys:Pe.getCombinationKeys(),code:o.code,key:o.key,keyCode:o.keyCode,altKey:o.altKey,shiftKey:o.shiftKey,ctrlKey:o.ctrlKey,metaKey:o.metaKey},clearTimeout(this._prevTimer_),this._prevTimer_=setTimeout(()=>{this.prevPress=null},1e3),!0;t.keyBindings.length>1&&s!==t.keyBindings[0]&&setTimeout(()=>{this.prevPress=null},0);const c=L(t.args);let u=t.command;if(n&&"string"==typeof t.command&&(u=function(e,t){const o=(t=t||"").split(".");let n=e;for(let e=0;e<o.length&&n;e++)n=n[o[e]];return n}(n,t.command)),!(u instanceof Function)&&n)throw new Error(`[hotkeysRunner] 未找到command: ${t.command} 对应的函数`);t.when&&r instanceof Function?!0===r.apply(n,L(t.when))&&u.apply(n,c):u.apply(n,c)}),i}binding(e={}){if(!M(e)||!Array.isArray(e.hotkeys))throw new Error("[hotkeysRunner] 提供给binding的参数不正确");e.el=e.el||this.window,e.type=e.type||"keydown",e.debug&&(this.debug=!0),this.setHotkeys(e.hotkeys),"string"==typeof e.el&&(e.el=document.querySelector(e.el)),e.el.addEventListener(e.type,t=>{e.event=t,this.run(e)},!0)}}["getContext","getSource","getGain","getElement",["getVolume",function(e){return(e?this.getLoudness():1)*this._element.volume}],["setVolume",function(e,t){var o=e/(t?this.getLoudness():1);o>1&&(this.setLoudness(this.getLoudness()*o),o=1),this._element.volume=o}],["getGainValue",function(){return this._gain.gain.value}],["setGainValue",function(e){this._gain.gain.value=e}],["getDecibels",function(){return 20*Math.log10(this.getGainValue())}],["setDecibels",function(e){this.setGainValue(Math.pow(10,e/20))}],["getLoudness",function(){return Math.pow(2,this.getDecibels()/10)}],["setLoudness",function(e){this.setDecibels(10*Math.log2(e))}]].forEach(function(e,t){"string"==typeof e?t=function(){return this[e.replace("get","").toLowerCase()]}:(t=e[1],e=e[0]),R.prototype[e]=t});const Te=new Map,Ae={isMobile:()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),isTablet:()=>/iPad/i.test(navigator.userAgent),isDesktop:()=>!Ae.isMobile()&&!Ae.isTablet(),isChrome:()=>/Chrome/i.test(navigator.userAgent),isFirefox:()=>/Firefox/i.test(navigator.userAgent),isSafari:()=>/Safari/i.test(navigator.userAgent),isEdge:()=>/Edge/i.test(navigator.userAgent)},Me={version:ye,originalMethods:N,parseHTML:function(e,t){if("string"!=typeof e)throw new Error("[parseHTML] Input must be a string");const o=function(e){if(window.trustedTypes&&window.trustedTypes.createPolicy){let t=window.trustedTypes.defaultPolicy||null;return t||(t=window.trustedTypes.createPolicy("default",{createHTML:e=>e})),t.createHTML(e)}return e}(e),n=(new DOMParser).parseFromString(o,"text/html").body.childNodes,r=[];return t&&t.appendChild&&n.forEach(e=>{const o=e.cloneNode(!0);try{t.appendChild(o)}catch(e){console.error("[parseHTML] appendChild error",e,t,o)}r.push(o)}),r.length?r:n},observeVisibility:function(e,t){const o=new IntersectionObserver((t,o)=>{t.forEach(t=>{t.isIntersecting?e(t,o):e(null,o)})});return t&&o.observe(t),o},isOutOfDocument:l,i18n:ie,debug:U,configManager:Y,globalFunctional:ve,device:Ae},Le=new Proxy({},{get:function(e,t){return"h5playerUIProvider"===t?Me:"HTMLElement"===t?N.HTMLElement:window[t]}}),$e="https://h5player.anzz.site/h5p-helper/index.html",Re={init(){if(this.remoteHandler(),c())return!1;if(!Y.isGlobalStorageUsable())return!1;const e=Y.getGlobalStorage("contactRemoteHelperSuccessTime");let t=Y.getGlobalStorage("lastContactRemoteHelperTime");t||(Y.setGlobalStorage("lastContactRemoteHelperTime",Date.now()),t=Date.now());const o=Y.getGlobalStorage("remoteHelperSyncInterval")||432e5;return!(e&&Date.now()-e<o)&&!(Date.now()-t<6e4)&&void this.establishRemoteConnection()},establishRemoteConnection(){const e=Y.getGlobalStorage("contactRemoteHelperSuccessTime")||"0",t=(new Date).toISOString().split("T")[0].replace(/-/g,"")+(new Date).getHours()+""+(new Date).getMinutes(),o=document.createElement("iframe");o.src=`${$e}?t=${t}&v=${ye}&lst=${e}`,o.style.cssText="width:0; height:0; border:none; visibility:hidden; opacity:0;";const n=()=>{document.body.appendChild(o),Y.setGlobalStorage("lastContactRemoteHelperTime",Date.now())};document.body&&document.body.appendChild?n():window.addEventListener("DOMContentLoaded",n,{once:!0}),setTimeout(()=>{document.body.removeChild(o)},1e4)},async remoteHandler(){if(!location.href.startsWith($e)||!Y.isGlobalStorageUsable())return!1;let e=0;const t=await p();t&&function t(o){Array.isArray(o.recommendList)?function(e){e.recommendList&&Y.setGlobalStorage("recommendList",e.recommendList),e.remoteVersion&&Y.setGlobalStorage("remoteVersion",e.remoteVersion),e.remoteHelperSyncInterval&&Y.setGlobalStorage("remoteHelperSyncInterval",e.remoteHelperSyncInterval),Y.setGlobalStorage("contactRemoteHelperSuccessTime",Date.now())}(o):e<30&&setTimeout(()=>{e++,t(o)},200)}(t)}},De=["video","bwp-video"];let Ie=null;const Oe={version:ye,mediaCore:V,mediaPlusApi:null,mediaSource:Se,configManager:Y,fontSize:12,enable:!0,globalMode:!0,playerInstance:null,scale:1,translate:{x:0,y:0},rotate:0,rotateY:0,rotateX:0,defaultTransform:{scale:1,translate:{x:0,y:0},rotate:0,rotateY:0,rotateX:0},historyTransform:{},playbackRate:Y.get("media.playbackRate"),volume:Y.get("media.volume"),lastPlaybackRate:Y.get("media.lastPlaybackRate"),skipStep:5,mouseObserver:new class{constructor(e){this.observer=new IntersectionObserver(e=>{e.forEach(e=>{e.target.IntersectionObserverEntry=e})},e||{}),this.observeList=[]}_observe(e){let t=!1;for(let o=0;o<this.observeList.length;o++)if(e===this.observeList[o]){t=!0;break}t||(this.observer.observe(e),this.observeList.push(e))}_unobserve(e){this.observer.unobserve(e);const t=[];this.observeList.forEach(o=>{o!==e&&t.push(o)}),this.observeList=t}on(e,t,o,n){const r=this;r._observe(e),e.MouseObserverEvent||(e.MouseObserverEvent={}),e.MouseObserverEvent[t]=!0,r._mouseObserver_||(r._mouseObserver_={}),r._mouseObserver_[t]||(r._mouseObserver_[t]=[],window.addEventListener(t,e=>{r.observeList.forEach(o=>{const n=o.IntersectionObserverEntry&&o.IntersectionObserverEntry.intersectionRatio>0,i=!0===o.MouseObserverEvent[e.type];if(n&&i){const n=o.getBoundingClientRect(),i=e.x-n.x,s=e.y-n.y;i<=n.width&&i>=0&&s<=n.height&&s>=0&&r._mouseObserver_[t].forEach(t=>{t instanceof Function&&t.call(r,e,{x:i,y:s},o)})}})},n)),o instanceof Function&&r._mouseObserver_[t].push(o)}off(e,t,o){const n=this;if(!(e&&t&&o&&n._mouseObserver_&&n._mouseObserver_[t]&&e.MouseObserverEvent&&e.MouseObserverEvent[t]))return!1;const r=[],i=n._mouseObserver_[t];let s=!1;i.forEach(e=>{e===o?s=!0:r.push(e)}),s&&(n._mouseObserver_[t]=r,0===r.length&&delete e.MouseObserverEvent[t],"{}"===JSON.stringify(e.MouseObserverEvent[t])&&n._unobserve(e))}},disableHotkeysTemporarily(){this.__disableHotkeysTemporarily__=!0},enableHotkeys(){this.__disableHotkeysTemporarily__=!1},toggleHotkeys(){window.confirm(this.__disableHotkeysTemporarily__?ie.t("enableHotkeys"):ie.t("disableHotkeys"))&&(this.__disableHotkeysTemporarily__=!this.__disableHotkeysTemporarily__)},debuggerNow(){if(U.isDebugMode()){const e=document.createElement("script");e.innerText="debugger",document.body.appendChild(e)}},disableCurrentInstanceGUI(){const e=this,t=e.player();t&&e.UI&&e.UI.removePopupWrapByElement&&(t.__disableGUITemporarily__=!0,e.UI.removePopupWrapByElement(t))},player:function(){const e=this;let t=e.playerInstance;if(!t){const o=e.getPlayerList();o.length&&(t=o[o.length-1],e.playerInstance=t,e.initPlayerInstance(1===o.length))}return t&&!e.mediaPlusApi&&(e.mediaPlusApi=V.mediaPlus(t)),t},isAudioInstance(){return y(this.player())},getPlayerList:function(){function e(e){De.forEach(o=>{e.querySelectorAll(o).forEach(function(e){"bwp-video"===e.tagName.toLowerCase()&&(e.HTMLVideoElement=!0),f(e)&&!t.includes(e)&&t.push(e)})})}const t=V.mediaElementList||[];return e(document),window._shadowDomList_&&window._shadowDomList_.forEach(function(t){e(t)}),t},getPlayerWrapDom:function(){const e=this.player();if(!e)return;let t=null;const o=e.getBoundingClientRect();return s(e,function(e){if(e===document||!e.getBoundingClientRect)return;const n=e.getBoundingClientRect();n.width&&n.height&&n.width===o.width&&n.height===o.height&&(t=e)}),t},async mountToGlobal(){try{const e=await p();e&&(e._h5Player=Oe||"null",window.top!==window&&(e._h5PlayerInFrame=Oe||"null"),e._window=window||"",U.log("h5Player对象已成功挂载到全局"))}catch(e){U.error(e)}},initPlayerInstance(e){function t(e){const t=e.currentSrc||e.src;t&&(e.srcList=e.srcList||[t],e.srcList.includes(t)||e.srcList.push(t))}const o=this;if(!o.playerInstance)return;const n=o.playerInstance;if(o.mediaPlusApi=V.mediaPlus(n),o.initPlaybackRate(),o.isFoucs(),o.proxyPlayerInstance(n),o.unLockPlaybackRate(),o.setPlaybackRate(),o.lockPlaybackRate(1e3),n._fullScreen_=new ne(n),n._fullPageScreen_=new ne(n,!0),o.registerHotkeysRunner(),n._hasCanplayEvent_||(n.addEventListener("canplay",function(){o.initAutoPlay(n)}),n._hasCanplayEvent_=!0),!n._hasPlayerInitEvent_){let e=0;n.addEventListener("playing",function(t){o.unLockPlaybackRate(),o.setPlaybackRate(null,!0),o.lockPlaybackRate(1e3),!0===Y.get("enhance.blockSetVolume")&&!1===t.target.muted&&o.setVolume(Y.getGlobalStorage("media.volume"),!0),!0===Y.get("enhance.blockSetCurrentTime")&&o.lockCurrentTime(),o.setPlayProgress(n),0===e?(o.unLockPlaybackRate(),o.setPlaybackRate(),o.lockPlaybackRate(1e3),setTimeout(()=>{o.playProgressRecorder(n)},2e3)):(o.unLockPlaybackRate(),o.setPlaybackRate(null,!0),o.lockPlaybackRate(1e3)),e+=1}),n._hasPlayerInitEvent_=!0}Ie.getTaskConfig().init&&Ie.doTask("init",n);const r=!n.__registeredInitEvent__;r&&o.mouseObserver.on(n,"click",function(){}),r&&n.addEventListener("enterpictureinpicture",()=>{ce.send("globalPictureInPictureInfo",{usePictureInPicture:!0}),U.log("enterpictureinpicture",n)}),r&&n.addEventListener("leavepictureinpicture",()=>{o.leavepictureinpictureTime=Date.now(),ce.send("globalPictureInPictureInfo",{usePictureInPicture:!1}),U.log("leavepictureinpicture",n)}),r&&n.addEventListener("loadeddata",function(){U.log(`[player][loadeddata] ${n.src} video duration: ${n.duration} video dom:`,n),t(n)}),r&&n.addEventListener("durationchange",function(){U.log(`[player][durationchange] ${n.duration}`),t(n)}),r&&n.addEventListener("loadstart",function(){U.log("[player][loadstart]",n.currentSrc,n.src),t(n)}),o.UI&&o.UI.popup&&o.UI.popup(n,o),r&&n.addEventListener("play",function(){o.UI&&o.UI.popup&&o.UI.popup(n,o)}),r&&n.addEventListener("pause",function(){o.UI&&o.UI.popup&&o.UI.popup(n,o)});let i=Date.now(),s=0;r&&n.addEventListener("timeupdate",function(){Date.now()-i>800&&s<60&&(i=Date.now(),s+=1,o.UI&&o.UI.popup&&o.UI.popup(n,o)),t(n),Se.connectMediaSourceWithMediaElement(n)});let a=Date.now();r&&n.addEventListener("progress",()=>{!function(e){if(e.buffered.length>0){const t=e.buffered.end(e.buffered.length-1);e.bufferedTime=t}o.autoGotoBufferedTime&&e.bufferedTime&&o.player()===e&&e.bufferedTime<e.duration-1&&e.currentTime<e.bufferedTime-1&&o.setCurrentTime(e.bufferedTime)}(n),Se.connectMediaSourceWithMediaElement(n),Date.now()-a>1e4&&(a=Date.now(),Se.cleanMediaSourceData())}),r&&n.addEventListener("durationchange",function(){i=Date.now(),s=0,o.UI&&o.UI.popup&&o.UI.popup(n,o)}),n.__registeredInitEvent__=!0},registerHotkeysRunner(){this.hotkeysRunner||(this.hotkeysRunner=new xe(Y.get("hotkeys")),c()&&!u()&&this.hotkeysRunner.setCombinationKeysMonitor(window.top))},isLeavepictureinpictureAwhile(){return this.leavepictureinpictureTime&&Date.now()-this.leavepictureinpictureTime<1e4},proxyPlayerInstance(e){e&&(["play","pause"].forEach(t=>{const o="origin_"+t;if(Reflect.has(e,t)&&!Reflect.has(e,o)){e[o]=e[t];const n=new Proxy(e[t],{apply(o,n,r){const i=e._hangUpInfo_||{},s=i[t]||i["hangUp_"+t];return s&&s.timeout>=Date.now()?(U.log(t+"已被挂起，本次调用将被忽略"),!1):o.apply(n||e,r)}});e[t]=n}}),e._hangUp_||(e._hangUpInfo_={},e._hangUp_=function(t,o){o=Number(o)||200,e._hangUpInfo_[t]={timeout:Date.now()+o}},e._unHangUp_=function(t){e._hangUpInfo_&&e._hangUpInfo_[t]&&(e._hangUpInfo_[t].timeout=Date.now()-1)}))},initAutoPlay:function(e){const t=this,o=e||t.player(),n=Ie.getTaskConfig();if(n.autoPlay&&(null===Y.getLocalStorage("media.autoPlay")&&Y.setLocalStorage("media.autoPlay",!0),A({title:()=>Y.getLocalStorage("media.autoPlay")?ie.t("disableInitAutoPlay"):ie.t("enableInitAutoPlay"),fn:()=>{if(window.confirm(Y.getLocalStorage("media.autoPlay")?ie.t("disableInitAutoPlay"):ie.t("enableInitAutoPlay"))){const e=Y.getLocalStorage("media.autoPlay");null===e?alert(ie.t("configFail")):Y.setLocalStorage("media.autoPlay",!e)}}})),!Y.get("media.autoPlay")||!e&&t.hasInitAutoPlay||!o||e&&e!==t.player()||document.hidden)return!1;if(!function(e){const t=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,{top:n,right:r,bottom:i,left:s}=e.getBoundingClientRect();return n>=0&&s>=0&&r<=t&&i<=o}(o)||c())return!1;if(!n.autoPlay)return!1;if(t.hasInitAutoPlay=!0,o&&n.autoPlay&&o.paused&&(Ie.doTask("autoPlay"),o.paused)){if(o._initAutoPlayCount_||(o._initAutoPlayCount_=1),o._initAutoPlayCount_+=1,o._initAutoPlayCount_>=10)return!1;setTimeout(function(){t.initAutoPlay(o)},200)}},printPlayerInfo(e){const t=this,o=e||t.player(),n={curPlayer:o,srcList:o.srcList,h5player:t,h5playerUI:t.UI,mediaSource:Se,window:window};t.UI&&t.UI.findPopupWrapWithElement&&(n.curlPopupWrap=t.UI.findPopupWrapWithElement(o),n.allPopupWrap=t.UI.getAllPopupWrapElement()),U.info("[playerInfo]",n)},setFullScreen(){const e=this.player();!Ie.doTask("fullScreen")&&e&&e._fullScreen_&&e._fullScreen_.toggle()},setWebFullScreen:function(){const e=this.player();!Ie.doTask("webFullScreen")&&e&&e._fullPageScreen_&&e._fullPageScreen_.toggle()},initPlaybackRate(){this.playbackRate=this.getPlaybackRate()},playbackRateInfo:{lockTimeout:Date.now()-1,time:Date.now(),value:-1},getPlaybackRate(){let e=Y.get("media.playbackRate")||this.playbackRate;if(c()){const t=Y.getGlobalStorage("media.playbackRate");t&&(e=t)}return Number(Number(e).toFixed(1))},lockPlaybackRate:function(e=200){if(this.mediaPlusApi)return!0===Y.get("enhance.blockSetPlaybackRate")&&(e=31536e6),this.mediaPlusApi.lockPlaybackRate(e),!0;this.playbackRateInfo.lockTimeout=Date.now()+e},unLockPlaybackRate:function(){if(this.mediaPlusApi)return this.mediaPlusApi.unLockPlaybackRate(),!0;this.playbackRateInfo.lockTimeout=Date.now()-1},isLockPlaybackRate:function(){return this.mediaPlusApi?this.mediaPlusApi.isLockPlaybackRate():Date.now()-this.playbackRateInfo.lockTimeout<0},fixPlaybackRate:function(e){const t=this.getPlaybackRate();Math.abs(t-e)>1&&this.setCurrentTimeUp(.1,!0)},setPlaybackRate:function(e,t,o,n){const r=this,i=r.player();if(!n&&r.isLockPlaybackRate())return U.info("调速能力已被锁定"),!1;if(Ie.doTask("playbackRate"))return;if(!i)return;const s=r.getPlaybackRate();let a;if(e){if(e=Number(e),Number.isNaN(e))return U.error("h5player: 播放速度转换出错"),!1;e<=0?e=.1:e>16&&(e=16),e=Number(e.toFixed(1)),a=e}else a=r.getPlaybackRate();if(r.playbackRate=a,c()?Y.setGlobalStorage("media.playbackRate",a):Y.set("media.playbackRate",a),r.mediaPlusApi)return r.mediaPlusApi.setPlaybackRate(a),!e&&1===a||t||r.tips(ie.t("tipsMsg.playspeed")+i.playbackRate),r.getPlayerList().forEach(e=>{if(e!==i){const t=V.mediaPlus(e);t&&t.setPlaybackRate(a)}}),r.fixPlaybackRate(s),!0;delete i.playbackRate,i.playbackRate=a,r.playbackRateInfo.time=Date.now(),r.playbackRateInfo.value=a,i._setPlaybackRate_={time:Date.now(),value:a};try{const e=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"playbackRate");N.Object.defineProperty.call(Object,i,"playbackRate",{configurable:!0,get:function(){return a||e.get.apply(i,arguments)},set:function(e){return"number"==typeof e&&(!Number.isInteger(i._blockSetPlaybackRateTips_)&&(i._blockSetPlaybackRateTips_=0),Ie.doTask("blockSetPlaybackRate")?(i._blockSetPlaybackRateTips_++,i._blockSetPlaybackRateTips_<3&&U.info("调速能力已被自定义的调速任务进行处理"),!1):!0===Y.get("enhance.blockSetPlaybackRate")?(i._blockSetPlaybackRateTips_++,i._blockSetPlaybackRateTips_<3&&U.info("调速能力已被blockSetPlaybackRate锁定"),!1):void r.setPlaybackRate(e))}})}catch(e){U.error("解锁playbackRate失败",e)}if(!e&&1===a)return!0;if(!t&&r.tips(ie.t("tipsMsg.playspeed")+i.playbackRate),!o&&!0===Y.get("enhance.blockSetPlaybackRate")){clearTimeout(r._setPlaybackRateDuplicate_),clearTimeout(r._setPlaybackRateDuplicate2_);const e=()=>{r.unLockPlaybackRate(),r.setPlaybackRate(a,!0,!0),r.lockPlaybackRate(1e3)};r._setPlaybackRateDuplicate_=setTimeout(e,600),r._setPlaybackRateDuplicate2_=setTimeout(e,1200)}r.fixPlaybackRate(s)},setPlaybackRatePlus:function(e){if(!(e=Number(e))||Number.isNaN(e))return!1;const t=this;t.playbackRatePlusInfo=t.playbackRatePlusInfo||{},t.playbackRatePlusInfo[e]=t.playbackRatePlusInfo[e]||{time:Date.now()-1e3,value:e},Date.now()-t.playbackRatePlusInfo[e].time<300?t.playbackRatePlusInfo[e].value=t.playbackRatePlusInfo[e].value+e:t.playbackRatePlusInfo[e].value=e,t.playbackRatePlusInfo[e].time=Date.now(),t.unLockPlaybackRate(),t.setPlaybackRate(t.playbackRatePlusInfo[e].value),t.lockPlaybackRate(1e3)},resetPlaybackRate:function(e){const t=this;e=e||t.player(),t.unLockPlaybackRate();const o=Number(e.playbackRate),n=1===o?t.lastPlaybackRate:1;1!==o&&(t.lastPlaybackRate=o,Y.setLocalStorage("media.lastPlaybackRate",o)),t.setPlaybackRate(n),t.lockPlaybackRate(1e3)},setPlaybackRateUp(e){e=g(e)||.1,this.player()&&(this.unLockPlaybackRate(),this.setPlaybackRate(this.player().playbackRate+e),this.lockPlaybackRate(1e3))},setPlaybackRateDown(e){e=m(e)||-.1,this.player()&&(this.unLockPlaybackRate(),this.setPlaybackRate(this.player().playbackRate+e),this.lockPlaybackRate(1e3))},lockCurrentTime:function(e=200){if(this.mediaPlusApi)return!0===Y.get("enhance.blockSetCurrentTime")&&(e=31536e6),this.mediaPlusApi.lockCurrentTime(e),!0;const t=this.player();t&&(t.currentTimeInfo=t.currentTimeInfo||{},t.currentTimeInfo.lockTimeout=Date.now()+e)},unLockCurrentTime:function(){if(this.mediaPlusApi)return this.mediaPlusApi.unLockCurrentTime(),!0;const e=this.player();e&&(e.currentTimeInfo=e.currentTimeInfo||{},e.currentTimeInfo.lockTimeout=Date.now()-1)},isLockCurrentTime:function(){if(this.mediaPlusApi)return this.mediaPlusApi.isLockCurrentTime();const e=this.player();return!!(e&&e.currentTimeInfo&&e.currentTimeInfo.lockTimeout)&&Date.now()-e.currentTimeInfo.lockTimeout<0},setCurrentTime:function(e){if(!e&&0!==e)return;e=Number(e);const t=Math.abs(Number(e.toFixed(1))),o=this,n=o.player();if(o.isLockCurrentTime())return!1;if(!Ie.doTask("currentTime")){if(this.mediaPlusApi)return this.mediaPlusApi.setCurrentTime(t),!0;delete n.currentTime,n.currentTime=t,n.currentTimeInfo=n.currentTimeInfo||{},n.currentTimeInfo.time=Date.now(),n.currentTimeInfo.value=t;try{const e=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"currentTime");N.Object.defineProperty.call(Object,n,"currentTime",{configurable:!0,enumerable:!0,get:function(){return e.get.apply(n,arguments)},set:function(t){return"number"==typeof t&&!Ie.doTask("blockSetCurrentTime")&&!0!==Y.get("enhance.blockSetCurrentTime")&&!o.isLockCurrentTime()&&(n.currentTimeInfo.time=Date.now(),n.currentTimeInfo.value=t,e.set.apply(n,arguments))}})}catch(e){U.error("解锁currentTime失败",e)}}},setCurrentTimeUp(e,t){e=Number(g(e)||this.skipStep),Ie.doTask("addCurrentTime")||this.player()&&(this.unLockCurrentTime(),this.setCurrentTime(this.player().currentTime+e),this.lockCurrentTime(500),t||this.tips(ie.t("tipsMsg.forward")+e+ie.t("tipsMsg.seconds")))},setCurrentTimeDown(e){if(e=Number(m(e)||-this.skipStep),Ie.doTask("subtractCurrentTime"));else if(this.player()){let t=this.player().currentTime+e;t<1&&(t=0),this.unLockCurrentTime(),this.setCurrentTime(t),this.lockCurrentTime(500),this.tips(ie.t("tipsMsg.backward")+Math.abs(e)+ie.t("tipsMsg.seconds"))}},volumeInfo:{lockTimeout:Date.now()-1,time:Date.now(),value:-1},getVolume:function(){let e=Y.get("media.volume");if(c()||!0===Y.get("enhance.blockSetVolume")){const t=Y.getGlobalStorage("media.volume");null!==t&&(e=t)}return Number(Number(e).toFixed(2))},lockVolume:function(e=200){if(this.mediaPlusApi)return!0===Y.get("enhance.blockSetVolume")&&(e=31536e6),this.mediaPlusApi.lockVolume(e),!0;this.volumeInfo.lockTimeout=Date.now()+e},unLockVolume:function(){if(this.mediaPlusApi)return this.mediaPlusApi.unLockVolume(),!0;this.volumeInfo.lockTimeout=Date.now()-1},isLockVolume:function(){return this.mediaPlusApi?this.mediaPlusApi.isLockVolume():Date.now()-this.volumeInfo.lockTimeout<0},setVolume:function(e,t,o){const n=this,r=n.player();if(n.isLockVolume())return!1;if(e||0===e||(e=n.getVolume()),(e=Number(e).toFixed(2))<0&&(e=0),e>1&&Y.get("enhance.allowAcousticGain")){e=Math.ceil(e);try{r._amp_=r._amp_||new R(r)}catch(t){e=1,U.error("媒体声音响度增益逻辑异常",t)}e>6&&(e=6),r._amp_&&r._amp_.setLoudness||(e=1)}else e>1&&(e=1);if(n.volume=e,e>1&&r._amp_&&r._amp_.setLoudness)return r._amp_.setLoudness(e),o||(r.muted=!1),!t&&n.tips(ie.t("tipsMsg.volume")+parseInt(100*e)+"%"),!0;if(c()||!0===Y.get("enhance.blockSetVolume")?Y.setGlobalStorage("media.volume",e):Y.setLocalStorage("media.volume",e),n.mediaPlusApi)n.mediaPlusApi.setVolume(e),n.getPlayerList().forEach(t=>{if(t!==r){const o=V.mediaPlus(t);o&&o.setVolume(e)}});else{delete r.volume,r.volume=e,n.volumeInfo.time=Date.now(),n.volumeInfo.value=e;try{const e=Object.getOwnPropertyDescriptor(HTMLMediaElement.prototype,"volume");N.Object.defineProperty.call(Object,r,"volume",{configurable:!0,get:function(){return e.get.apply(r,arguments)},set:function(e){return!("number"!=typeof e||e<0)&&!Ie.doTask("blockSetVolume")&&!0!==Y.get("enhance.blockSetVolume")&&void n.setVolume(e,!1,!0)}})}catch(e){U.error("解锁volume失败",e)}}o||(r.muted=!1),!t&&n.tips(ie.t("tipsMsg.volume")+parseInt(100*r.volume)+"%")},setVolumeUp(e){e=g(e)||.2;const t=this.player();t&&(this.unLockVolume(),this.volume>1&&t._amp_?this.setVolume(this.volume+e):this.setVolume(t.volume+e),this.lockVolume(500))},setVolumeDown(e){e=m(e)||-.2;const t=this.player();t&&(this.unLockVolume(),this.volume>1&&t._amp_?this.setVolume(Math.floor(this.volume+e)):this.setVolume(t.volume+e),this.lockVolume(500))},collectTransformHistoryInfo(){const e=this;Object.keys(e.defaultTransform).forEach(t=>{if("translate"===t){const t=e.defaultTransform.translate;e.historyTransform.translate=e.historyTransform.translate||{},Object.keys(t).forEach(t=>{Number(e.translate[t])!==e.defaultTransform.translate[t]&&(e.historyTransform.translate[t]=e.translate[t])})}else Number(e[t])!==e.defaultTransform[t]&&(e.historyTransform[t]=e[t])})},isSameAsDefaultTransform(){let e=!0;const t=this;return Object.keys(t.defaultTransform).forEach(o=>{q(t.defaultTransform[o])?Object.keys(t.defaultTransform[o]).forEach(n=>{Number(t[o][n])!==t.defaultTransform[o][n]&&(e=!1)}):Number(t[o])!==t.defaultTransform[o]&&(e=!1)}),e},setTransform(e){const t=this,o=t.player(),n=t.scale=Number(t.scale).toFixed(2),r=t.translate,i=180===t.rotateX?`rotateX(${t.rotateX}deg)`:180===t.rotateY?`rotateY(${t.rotateY}deg)`:"";o.style.transform=`scale(${n}) translate(${r.x}px, ${r.y}px) rotate(${t.rotate}deg) ${i}`;let s=ie.t("tipsMsg.videozoom")+`${(100*n).toFixed(0)}%`;r.x&&(s+=` ${ie.t("tipsMsg.horizontal")}${t.translate.x}px`),r.y&&(s+=` ${ie.t("tipsMsg.vertical")}${t.translate.y}px`),!0===e||(t.collectTransformHistoryInfo(),t.tips(s)),t._transformStateGuard_||(t._transformStateGuard_=setInterval(()=>{t.setTransform(!0)},300))},setRotate(){const e=this;e.rotate+=90,e.rotate%360==0&&(e.rotate=0),e.setTransform(!0),e.tips(ie.t("tipsMsg.imgrotate")+e.rotate+"°")},setMirror(e=!1){const t=this;let o="";e?(t.rotateX=0===t.rotateX?180:0,o+=` ${ie.t("tipsMsg.verticalMirror")} ${t.rotateX}deg`):(t.rotateY=0===t.rotateY?180:0,o+=` ${ie.t("tipsMsg.horizontalMirror")} ${t.rotateY}deg`),t.setTransform(!0),t.tips(o)},setScale(e){Number.isNaN(this.scale)||Number.isNaN(e)?this.scale=1:this.scale=e,this.setTransform()},setScaleUp(e){e=g(e)||.05,this.setScale(Number(this.scale)+e)},setScaleDown(e){e=m(e)||-.05,this.setScale(Number(this.scale)+e)},setTranslate(e,t){"number"==typeof e&&(this.translate.x=e),"number"==typeof t&&(this.translate.y=t),this.setTransform()},setTranslateRight(e){e=g(e)||10,this.setTranslate(this.translate.x+e)},setTranslateLeft(e){e=m(e)||-10,this.setTranslate(this.translate.x+e)},setTranslateUp(e){e=g(e)||10,this.setTranslate(null,this.translate.y-e)},setTranslateDown(e){e=m(e)||-10,this.setTranslate(null,this.translate.y-e)},resetTransform(e){const o=this;if(o.isSameAsDefaultTransform()&&Object.keys(o.historyTransform).length)Object.keys(o.historyTransform).forEach(e=>{q(o.historyTransform[e])?Object.keys(o.historyTransform[e]).forEach(t=>{o[e][t]=o.historyTransform[e][t]}):o[e]=o.historyTransform[e]});else{const e=t(o.defaultTransform);Object.keys(e).forEach(t=>{o[t]=e[t]})}o.setTransform(e)},freezeFrame(e){e=e||1;const t=this,o=t.player();o.currentTime+=Number(e/t.fps),o.paused||o.pause(),o._hangUp_&&o._hangUp_("play",400),1===e?t.tips(ie.t("tipsMsg.nextframe")):-1===e?t.tips(ie.t("tipsMsg.previousframe")):t.tips(ie.t("tipsMsg.stopframe")+e)},autoGotoBufferedTime:!1,toggleAutoGotoBufferedTime(){const e=this;e.autoGotoBufferedTime=!e.autoGotoBufferedTime,e.tips(e.autoGotoBufferedTime?ie.t("autoGotoBufferedTime"):ie.t("disableAutoGotoBufferedTime"))},togglePictureInPicture(){const e=this.player();window._isPictureInPicture_&&document.pictureInPictureElement?document.exitPictureInPicture().then(()=>{window._isPictureInPicture_=null}).catch(e=>{window._isPictureInPicture_=null,U.error("[togglePictureInPicture]",e)}):e.requestPictureInPicture&&e.requestPictureInPicture().then(()=>{window._isPictureInPicture_=!0}).catch(e=>{window._isPictureInPicture_=null,U.error("[togglePictureInPicture]",e)})},setNextVideo(){Ie.doTask("next")||U.log("当前网页不支持一键播放下个视频功能~")},switchPlayStatus(){const e=this,t=e.player();Ie.doTask("switchPlayStatus")||(t.paused?(Ie.doTask("play")||(e.mediaPlusApi?(e.mediaPlusApi.lockPause(400),e.mediaPlusApi.applyPlay()):(t._hangUp_ instanceof Function&&(t._hangUp_("pause",400),t._unHangUp_("play")),t.play()),e.tips(ie.t("tipsMsg.play"))),Ie.doTask("afterPlay")):(Ie.doTask("pause")||(e.mediaPlusApi?(e.mediaPlusApi.lockPlay(400),e.mediaPlusApi.applyPause()):(t._hangUp_ instanceof Function&&(t._hangUp_("play",400),t._unHangUp_("pause")),t.pause()),e.tips(ie.t("tipsMsg.pause"))),Ie.doTask("afterPause")))},isAllowRestorePlayProgress:function(){const e=Y.get(`media.allowRestorePlayProgress.${window.location.host}`);return null===e||e},switchRestorePlayProgressStatus:function(){const e=Oe;let t=e.isAllowRestorePlayProgress();t=!u()&&!t,Y.set(`media.allowRestorePlayProgress.${window.location.host}`,t),t?(e.tips(ie.t("tipsMsg.arpl")),e.setPlayProgress(e.player())):e.tips(ie.t("tipsMsg.drpl"))},tipsClassName:"html_player_enhance_tips",getTipsContainer:function(e){const t=e||Oe.player();let o=t.parentNode||t;const n=o.getBoundingClientRect();return n.width&&n.height||!o.parentNode||(o=o.parentNode),o},tips:function(e){function t(){u.display="block",o.on_off[0]=setTimeout(function(){u.opacity=1},50),o.on_off[1]=setTimeout(function(){u.opacity=0,u.display="none",s&&i.setAttribute("style",s)},2e3)}const o=Oe,n=o.player();if(!n)return U.log("h5Player Tips:",e),!0;const r=o.isAudioInstance(),i=r?document.body:o.getTipsContainer();if(i===n)return U.info("获取tips的包裹容器异常：",n,e),!1;let s="";if(!r){const e=i.getAttribute("style")||"";if(s=i.getAttribute("style-backup")||"",s)e&&!e.includes("style-backup")&&(s=e);else{let t=e||"style-backup: none";const o=function(e){if("string"!=typeof e)return{};const t={};return e.split(";").forEach(e=>{const o=e.split(":");2===o.length&&(t[o[0].trim()]=o[1].trim())}),t}(t);"0"===o.opacity&&(o.opacity="1"),"hidden"===o.visibility&&(o.visibility="visible"),t=function(e){if("[object Object]"!==Object.prototype.toString.call(e))return"";const t=[];return Object.keys(e).forEach(o=>{t.push(`${o}: ${e[o]}`)}),t.join("; ")}(o),i.setAttribute("style-backup",t),s=e}const t=s.split(";"),o=i.getAttribute("def-position")||window.getComputedStyle(i).position;null===i.getAttribute("def-position")&&i.setAttribute("def-position",o||""),["static","inherit","initial","unset",""].includes(o)&&t.push("position: relative");const r=n.getBoundingClientRect(),a=i.getBoundingClientRect();a.width&&a.height||(t.push("min-width:"+r.width+"px"),t.push("min-height:"+r.height+"px")),i.setAttribute("style",t.join(";"));const l=n.getBoundingClientRect();Math.abs(l.height-r.height)>50&&i.setAttribute("style",s)}const a="."+o.tipsClassName,l=document.querySelectorAll(a);l.length>1&&l.forEach(e=>{e.remove()});let c=i.querySelector(a);if(!c&&(o.initTips(),c=i.querySelector(a),!c))return U.log("init h5player tips dom error..."),!1;const u=c.style;c.innerText=e;for(let e=0;e<3;e++)this.on_off[e]&&clearTimeout(this.on_off[e]);"block"===u.display?(u.display="none",clearTimeout(this.on_off[3]),o.on_off[2]=setTimeout(function(){t()},100)):t()},initTips:function(){const e=Oe,t=e.isAudioInstance(),o=t?document.body:e.getTipsContainer();if(o.querySelector("."+e.tipsClassName))return;let n=`\n      position: absolute;\n      z-index: 999999;\n      font-size: ${e.fontSize||16}px;\n      padding: 5px 10px;\n      background: rgba(0,0,0,0.4);\n      color:white;\n      top: 0;\n      left: 0;\n      transition: all 500ms ease;\n      opacity: 0;\n      border-bottom-right-radius: 5px;\n      display: none;\n      -webkit-font-smoothing: subpixel-antialiased;\n      font-family: 'microsoft yahei', Verdana, Geneva, sans-serif;\n      -webkit-user-select: none;\n    `;t&&(n=`\n        position: fixed;\n        z-index: 999999;\n        font-size: ${e.fontSize||16}px;\n        padding: 5px 10px;\n        background: rgba(0,0,0,0.4);\n        color:white;\n        bottom: 0;\n        right: 0;\n        transition: all 500ms ease;\n        opacity: 0;\n        border-top-left-radius: 5px;\n        display: none;\n        -webkit-font-smoothing: subpixel-antialiased;\n        font-family: 'microsoft yahei', Verdana, Geneva, sans-serif;\n        -webkit-user-select: none;\n      `);const r=document.createElement("div");r.setAttribute("style",n),r.setAttribute("class",e.tipsClassName),o.appendChild(r)},on_off:new Array(3),fps:30,filter:{key:[1,1,1,0,0],setup:function(){let e="brightness({0}) contrast({1}) saturate({2}) hue-rotate({3}deg) blur({4}px)";for(let t=0;t<5;t++)e=e.replace("{"+t+"}",String(this.key[t])),this.key[t]=Number(this.key[t]);Oe.player().style.filter=e},reset:function(){this.key[0]=1,this.key[1]=1,this.key[2]=1,this.key[3]=0,this.key[4]=0,this.setup()}},setFilter(e,t,o){if(![0,1,2,3,4].includes(e)||"number"!=typeof t)return U.error("[setFilter]","参数有误",e,t),!1;!0===o&&t&&t>0&&(t=-t);const n={0:"brightness",1:"contrast",2:"saturation",3:"hue",4:"blur"},r=this;r.filter.key[e]+=t||.1,r.filter.key[e]=r.filter.key[e].toFixed(2),r.filter.key[e]<0&&"hue"!==n[e]&&(r.filter.key[e]=0),r.filter.setup(),r.tips(ie.t(`tipsMsg.${n[e]}`)+parseInt(100*r.filter.key[e])+"%")},setBrightness(e){this.setFilter(0,e)},setBrightnessUp(e){this.setFilter(0,e||.1)},setBrightnessDown(e){this.setFilter(0,e||-.1,!0)},setContrast(e){this.setFilter(1,e)},setContrastUp(e){this.setFilter(1,e||.1)},setContrastDown(e){this.setFilter(1,e||-.1,!0)},setSaturation(e){this.setFilter(2,e)},setSaturationUp(e){this.setFilter(2,e||.1)},setSaturationDown(e){this.setFilter(2,e||-.1,!0)},setHue(e){this.setFilter(3,e)},setHueUp(e){this.setFilter(3,e||1)},setHueDown(e){this.setFilter(3,e||-1,!0)},setBlur(e){this.setFilter(4,e)},setBlurUp(e){this.setFilter(4,e||1)},setBlurDown(e){this.setFilter(4,e||-1,!0)},resetFilterAndTransform(){const e=this;e.resetTransform(!0),e.filter.reset(),e.tips(ie.t("tipsMsg.imgattrreset"))},mediaDownload(){Y.get("enhance.allowExperimentFeatures")?(U.warn("[experimentFeatures][mediaDownload]"),function(e){const t=e.src||e.currentSrc,o=Te.get(t)||{};if(e&&t&&!t.startsWith("blob:")){const n={type:e instanceof HTMLVideoElement?"video":"audio",format:e instanceof HTMLVideoElement?"mp4":"mp3"};let r=`${e.getAttribute("data-title")||document.title||Date.now()}_${n.type}.${n.format}`;if(e.duration<300){if(o.downloading){if(Date.now()-o.downloading<1e3)return!1;if(!j.confirm(ie.t("mediaDownload.downloading")))return!1}if(o.hasDownload&&!j.confirm(ie.t("mediaDownload.hasDownload")))return!1;if(r=j.prompt(ie.t("mediaDownload.confirmTitle"),r),!r)return!1;r.endsWith(n.format)||(r=r+"."+n.format);let e=t;t.startsWith("http://")&&location.href.startsWith("https://")&&(e=t.replace("http://","https://")),o.downloading=Date.now(),Te.set(t,o),fetch(e).then(e=>{e.blob().then(e=>{const n=window.URL.createObjectURL(e);D(n,r),o.hasDownload=!0,delete o.downloading,Te.set(t,o),window.URL.revokeObjectURL(n)})}).catch(e=>{j.console.error("fetch下载操作失败:",e),D(t,r),delete o.downloading,o.hasDownload=!0,Te.set(t,o)})}else D(t,r)}else Se.hasInit()?Se.downloadMediaSource(e,void 0):j.alert(ie.t("mediaDownload.notSupport"))}(this.player())):window.confirm(ie.t("useMediaDownloadTips"))&&(Y.setGlobalStorage("enhance.allowExperimentFeatures",!Y.get("enhance.allowExperimentFeatures")),window.location.reload())},capture(){const e=this.player();F.capture(e,!0),e.paused||document.pictureInPictureElement||"visible"===document.visibilityState||this.freezeFrame()},_isFoucs:!1,isFoucs:function(){const e=Oe.player();e&&(e.onmouseenter=function(){Oe._isFoucs=!0},e.onmouseleave=function(){Oe._isFoucs=!1})},palyerTrigger:function(e,t){if(!e||!t)return;const o=Oe,n=t.keyCode,r=t.key.toLowerCase();if(t.shiftKey&&!t.ctrlKey&&!t.altKey&&!t.metaKey){if("enter"===r&&o.setWebFullScreen(),"p"===r&&o.togglePictureInPicture(),"s"===r&&o.capture(),"r"===r&&o.switchRestorePlayProgressStatus(),"m"===r&&o.setMirror(!0),"d"===r&&o.mediaDownload(),!["x","c","z","arrowright","arrowleft","arrowup","arrowdown"].includes(r))return;switch(o.scale=Number(o.scale),r){case"x":o.setScaleDown();break;case"c":o.setScaleUp();break;case"z":o.resetTransform();break;case"arrowright":o.setTranslateRight();break;case"arrowleft":o.setTranslateLeft();break;case"arrowup":o.setTranslateUp();break;case"arrowdown":o.setTranslateDown()}return t.stopPropagation(),t.preventDefault(),!0}return t.ctrlKey&&39===n&&o.setCurrentTimeUp(6*o.skipStep),t.ctrlKey&&37===n&&o.setCurrentTimeDown(6*-o.skipStep),t.ctrlKey&&38===n&&o.setVolumeUp(.2),t.ctrlKey&&40===n&&o.setVolumeDown(-.2),t.altKey||t.ctrlKey||t.shiftKey||t.metaKey?void 0:(39===n&&o.setCurrentTimeUp(),37===n&&o.setCurrentTimeDown(),38===n&&o.setVolumeUp(.05),40===n&&o.setVolumeDown(-.05),32===n&&o.switchPlayStatus(),88===n&&o.setPlaybackRateDown(),67===n&&o.setPlaybackRateUp(),90===n&&o.resetPlaybackRate(),(n>=49&&n<=52||n>=97&&n<=100)&&o.setPlaybackRatePlus(t.key),70===n&&o.freezeFrame(1),68===n&&o.freezeFrame(-1),69===n&&o.setBrightnessUp(),87===n&&o.setBrightnessDown(),84===n&&o.setContrastUp(),82===n&&o.setContrastDown(),85===n&&o.setSaturationUp(),89===n&&o.setSaturationDown(),79===n&&o.setHueUp(),73===n&&o.setHueDown(),75===n&&o.setBlurUp(),74===n&&o.setBlurDown(),81===n&&o.resetFilterAndTransform(),83===n&&o.setRotate(),77===n&&o.setMirror(),13===n&&o.setFullScreen(),"n"===r&&o.setNextVideo(),t.stopPropagation(),t.preventDefault(),!0)},runCustomShortcuts:function(e,t){if(!e||!t)return;const o=t.key.toLowerCase(),n=Ie.getTaskConfig();if(q(n.shortcuts)&&Array.isArray(n.shortcuts.register)&&n.shortcuts.callback instanceof Function&&function(){const e=n.shortcuts.register,r=[];t.ctrlKey&&r.push("ctrl"),t.shiftKey&&r.push("shift"),t.altKey&&r.push("alt"),t.metaKey&&r.push("command"),r.push(o);let i=!1;return e.forEach(e=>{const t=e.split("+");if(r.length===t.length){let e=!0;t.forEach(t=>{r.includes(t)||(e=!1)}),e&&(i=!0)}}),i}()){const o=Ie.doTask("shortcuts",{event:t,player:e,h5Player:Oe});return o&&(t.stopPropagation(),t.preventDefault()),o}return!1},keydownEvent:function(e){const t=Oe,o=e.keyCode,n=t.player(),r=e.composedPath&&e.composedPath()[0]||e.target;if(!t.__disableHotkeysTemporarily__&&!a(r)){if(ce.send("globalKeydownEvent",e,0),!n){if(t.hasCrossOriginVideoDetected){if(!Y.get("enhance.allowCrossOriginControl"))return!1;t.hotkeysRunner&&t.hotkeysRunner.run?t.hotkeysRunner.run({event:e,stopPropagation:!0,preventDefault:!0}):(t.registerHotkeysRunner(),e.stopPropagation(),e.preventDefault())}return!1}if(e.ctrlKey&&32===o&&(t.enable=!t.enable,t.enable?t.tips(ie.t("tipsMsg.onplugin")):t.tips(ie.t("tipsMsg.offplugin"))),!t.enable)return U.log("h5Player 已禁用~"),!1;if(e.ctrlKey&&220===o&&(t.globalMode=!t.globalMode,t.globalMode?t.tips(ie.t("tipsMsg.globalmode")+" ON"):t.tips(ie.t("tipsMsg.globalmode")+" OFF")),(t.globalMode||t._isFoucs)&&!0!==t.runCustomShortcuts(n,e))if(t.hotkeysRunner&&t.hotkeysRunner.run){const o=t.hotkeysRunner.run({event:e,target:t,stopPropagation:!0,preventDefault:!0,conditionHandler(e){if(e)return!0}});if(o)return U.info("[hotkeysRunner][matchResult]",o),!0}else{if(!d(e))return!1;t.palyerTrigger(n,e)}}},getPlayProgress:function(e){const t=Y.get("media.progress")||{};if(e){const o=window.location.href+e.duration;return t[o]?Number.isNaN(Number(e.duration))||Number(t[o].duration)!==Number(e.duration)?e.currentTime:t[o].progress:e.currentTime}return t},playProgressRecorder:function(e){const t=Oe;clearTimeout(e._playProgressTimer_),function e(o){o._playProgressTimer_=setTimeout(function(){const n=!o.duration||Number.isNaN(Number(o.duration))||o.duration<120,r="visible"!==document.visibilityState&&o.paused;if(!t.isAllowRestorePlayProgress()||n||r)return e(o),!0;const i=t.getPlayProgress()||{},s=Object.keys(i),a=window.location.href+o.duration;if(i[a]||(t._firstProgressRecord_=a,t._hasRestorePlayProgress_=a),s.length>10){let e=[];s.forEach(function(t){i[t]&&i[t].t&&e.push(i[t].t)}),e=W(e);const t=e[0];s.forEach(function(e){i[e].t===t&&delete i[e]})}i[a]={progress:o.currentTime,duration:o.duration,t:(new Date).getTime()},Y.setLocalStorage("media.progress",i),e(o)},2e3)}(e)},setPlayProgress:function(e){const t=Oe;if(!e||!e.duration||Number.isNaN(e.duration))return;const o=Number(t.getPlayProgress(e));if(!o||Number.isNaN(o)||o<10||o>=e.duration)return;if(Math.abs(o-e.currentTime)<2)return!1;const n=window.location.href+e.duration;if(t._hasRestorePlayProgress_=t._hasRestorePlayProgress_||"",t._hasRestorePlayProgress_===n||t._firstProgressRecord_===n)return t._hasRestorePlayProgress_===n&&(t._firstProgressRecord_=""),!1;t.isAllowRestorePlayProgress()?(e.currentTime=o-1.5,t._hasRestorePlayProgress_=n,t.tips(ie.t("tipsMsg.playbackrestored"))):t.tips(ie.t("tipsMsg.playbackrestoreoff"))},setPlayerInstance(e){if(!e&&!e.getBoundingClientRect)return!1;const t=Oe;if(t.player()===e)return!1;if(!t.playerInstance&&f(e))return t.playerInstance=e,t.initPlayerInstance(!1),!0;if(b(e)){const o=t.getTipsContainer(e),n=e.getBoundingClientRect(),r=o&&o.getBoundingClientRect();n&&n.width>200&&r&&r.width>200&&(t.playerInstance=e,t.initPlayerInstance(!1))}else y(e)&&(y(t.playerInstance)||b(t.playerInstance)&&!t.playerInstance.isConnected)&&(t.playerInstance=e,t.initPlayerInstance(!1))},intersectionObserver:new IntersectionObserver(function(e){const t=Oe;let o=0;e.forEach(e=>{if(e.target._intersectionInfo_=e,e.intersectionRatio>o&&e.intersectionRatio>.4){o=e.intersectionRatio;const n=t.player();if(n&&n._intersectionInfo_&&o<n._intersectionInfo_.intersectionRatio)return;t.setPlayerInstance(e.target)&&U.log("[intersectionObserver] 切换视频实例",e)}})},{threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),detecH5Player:function(){const e=this,t=e.getPlayerList();t.length&&(1===t.length&&(e.playerInstance=t[0],e.initPlayerInstance(!0)),t.forEach(function(t){t._hasMouseRedirectEvent_||(t.addEventListener("mouseenter",function(t){e.setPlayerInstance(t.target)}),t._hasMouseRedirectEvent_=!0),t._hasPlayingRedirectEvent_||(t.addEventListener("playing",function(t){const o=t.target;if(o.duration&&o.duration<8)return!1;e.setPlayerInstance(o)}),t._hasPlayingRedirectEvent_=!0),t._hasIntersectionObserver_||(e.intersectionObserver.observe(t),t._hasIntersectionObserver_=!0)}),u()&&ce.send("videoDetected",{src:e.playerInstance.src}),function(){const e=Oe,t=e.player(),o=!Y.get("enhance.unfoldMenu");if(t&&!e._hasRegisterH5playerMenus_){const t=[{...ve.openCrossOriginFramePage,disable:o||!u()},{...ve.toggleSetCurrentTimeFunctional,type:"local",disable:o},{...ve.toggleSetVolumeFunctional,type:"local",disable:o},{...ve.toggleSetPlaybackRateFunctional,type:"global",disable:o},{...ve.toggleAcousticGainFunctional,type:"global",disable:o},{...ve.toggleCrossOriginControlFunctional,type:"global",disable:o},{...ve.toggleExperimentFeatures,type:"global",disable:o},{...ve.toggleExternalCustomConfiguration,type:"global",disable:o},{...ve.toggleDebugMode,disable:o}];let n="";c()&&(n=`[${location.hostname}]`,t.forEach(e=>{const t=e.title;t instanceof Function&&"local"===e.type&&(e.title=()=>n+t())})),A(t),e._hasRegisterH5playerMenus_=!0}}())},bindFakeEvent(){const e=this;if(e._hasBindFakeEvent_)return;let t=function(t,o,n){const r=e.player();if(r&&!e.__disableHotkeysTemporarily__){const t=n.data;t.stopPropagation=()=>{},t.preventDefault=()=>{},e.palyerTrigger(r,t),U.log("已响应跨Tab/跨域按键控制信息：",n)}};ue.hasOpenPictureInPicture()||e.hasCrossOriginVideoDetected||(t=function(e,t=80){let o=null;return function(){if(o)return!1;o=setTimeout(()=>{o=null},t),e.apply(this,arguments)}}(t,80)),ce.on("globalKeydownEvent",async(o,n,r,i)=>{i&&(u()?"visible"===document.visibilityState&&r.originTab&&t(o,n,r,i):ue.hasOpenPictureInPicture()&&(r.originTab||!document.pictureInPictureElement&&!e.isLeavepictureinpictureAwhile()||t(o,n,r,i)))}),e._hasBindFakeEvent_=!0},bindEvent:function(){const e=this;e._hasBindEvent_||(document.removeEventListener("keydown",e.keydownEvent),document.addEventListener("keydown",e.keydownEvent,!0),c()&&!u()&&(window.top.document.removeEventListener("keydown",e.keydownEvent),window.top.document.addEventListener("keydown",e.keydownEvent,!0)),e._hasBindEvent_=!0)},setCustomConfiguration(e,t="Default"){if(!e)return!1;const o=Y.mergeDefConf(e.customConfiguration),n=k(e.customTaskControlCenter);Ie&&Ie.setTaskConf&&Ie.setTaskConf(n),Oe.hasSetCustomConfiguration=t,U.info(`[CustomConfiguration][${t}]`,o,n)},mergeExternalConfiguration(e,t="Default"){if(!e||!Y.getGlobalStorage("enhance.allowExternalCustomConfiguration"))return!1;Oe.setCustomConfiguration(e,"External"),Oe.hasExternalCustomConfiguration=t},init:function(e){const t=this;return window.unsafeWindow&&window.unsafeWindow.__h5PlayerCustomConfiguration__&&!t.hasExternalCustomConfiguration&&t.mergeExternalConfiguration(window.unsafeWindow.__h5PlayerCustomConfiguration__),Ie&&!0===Ie.doTask("disable")?(U.info(`[TCC][disable][${location.host}] 已禁止在该网站运行视频检测逻辑，您可查看任务配置中心的相关配置了解详情`),!0):e?(!0===Y.get("debug")&&(window._debugMode_=!0,t.mountToGlobal()),function(e){const t=window.location.host;(e=e||oe[t])&&function(e){const t=Object.getOwnPropertyDescriptor(Navigator.prototype,"userAgent");Object.defineProperty(Navigator.prototype,"userAgent",{...t,get:function(){return e}})}(e)}(),Ie=function(e){return new Z(te,function(t,o,n){try{const r=o[t],i=e.getPlayerWrapDom();if(!r)return;if("shortcuts"===t){if(q(r)&&r.callback instanceof Function)return r.callback(e,o,n)}else if(r instanceof Function)try{return r(e,o,n)}catch(e){return U.error("任务配置中心的自定义函数执行失败：",t,o,n,e),!1}else{if("boolean"==typeof r)return r;{const e=Array.isArray(r)?r:[r];for(let t=0;t<e.length;t++){const o=e[t];if(i&&i.querySelector(o))return i.querySelector(o).click(),!0;if(document.querySelector(o))return document.querySelector(o).click(),!0}}}}catch(e){return U.error("任务配置中心的自定义任务执行失败：",t,o,n,e),!1}})}(t),!1!==Y.get("enableHotkeys")?(t.bindEvent(),t.bindFakeEvent()):U.warn("快捷键能力已被禁用"),ce.on("videoDetected",async(e,o,n,r)=>{n.originTab&&(t.hasCrossOriginVideoDetected=!0),U.log("[hasCrossOriginVideoDetected]",t,e,o,n,r)}),document.addEventListener("visibilitychange",function(){Oe.initAutoPlay()}),void(window.unsafeWindow&&Y.getGlobalStorage("enhance.allowExternalCustomConfiguration")&&(window.unsafeWindow.__setH5PlayerCustomConfiguration__=t.mergeExternalConfiguration))):(t.detecH5Player(),!0)}};let He=0;try{O(0)}catch(e){setTimeout(()=>{He<200&&(He++,O(0),console.error("[h5player message:]","init error",He,e))},10)}
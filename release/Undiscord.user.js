// ==UserScript==
// @name            Undiscord
// @version         5.2.4
// @author          victornpb
// @homepageURL     https://github.com/victornpb/undiscord
// @supportURL      https://github.com/victornpb/undiscord/discussions
// @match           https://*.discord.com/app
// @match           https://*.discord.com/channels/*
// @match           https://*.discord.com/login
// @license         MIT
// @namespace       https://github.com/victornpb/deleteDiscordMessages
// @icon            https://victornpb.github.io/undiscord/images/icon128.png
// @contributionURL https://www.buymeacoffee.com/vitim
// @grant           none
// @downloadURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/Undiscord.user.js
// @updateURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/Undiscord.meta.js
// ==/UserScript==
!function(){"use strict";function e(e="div",t,n){const i=document.createElement(e);return t&&Object.entries(t).forEach(([e,t])=>i.setAttribute(e,t)),n&&n.appendChild(i),i}function t(e,n){function i(e){return null!==e&&"object"==typeof e}function s(e,t){return Object.prototype.hasOwnProperty.call(e,t)}if(i(n))for(let r in e)s(e,r)&&s(n,r)&&void 0!==n[r]&&(i(e[r])?t(e[r],n[r]):e[r]=n[r]);return e}function n(e){const t=document.createElement("div");return t.innerHTML=e,t.removeChild(t.firstElementChild)}function i(e){const t=document.createElement("style");return t.appendChild(document.createTextNode(e)),document.head.appendChild(t),t}function s(){const e=document.body.appendChild(document.createElement("iframe")).contentWindow.localStorage;return JSON.parse(e.user_id_cache)}function r(){const e=location.href.match(/channels\/([\w@]+)\/(\d+)/);if(e)return e[1];alert("Could not find the Guild ID!\nPlease make sure you are on a Server or DM.")}function o(){const e=location.href.match(/channels\/([\w@]+)\/(\d+)/);if(e)return e[2];alert("Could not find the Channel ID!\nPlease make sure you are on a Channel or DM.")}function a(){try{return function(){window.dispatchEvent(new Event("beforeunload"));const e=document.body.appendChild(document.createElement("iframe")).contentWindow.localStorage;try{return JSON.parse(e.token)}catch{return u.info("Could not automatically detect Authorization Token in local storage!"),u.info("Attempting to grab token using webpack"),(window.webpackChunkdiscord_app.push([[""],{},e=>{window.m=[];for(let t in e.c)window.m.push(e.c[t])}]),window.m).find(e=>void 0!==e?.exports?.default?.getToken).exports.default.getToken()}}()}catch(e){u.verb(e),u.error("Could not automatically detect Authorization Token!"),u.info("Please make sure Undiscord is up to date"),u.debug('Alternatively, you can try entering a Token manually in the "Advanced Settings" section.')}return""}function d(e="",t){I.logArea.insertAdjacentHTML("beforeend",`<div class="log log-${e}">${Array.from(t).map(e=>"object"==typeof e?JSON.stringify(e,e instanceof Error&&Object.getOwnPropertyNames(e)):e).join("\t")}</div>`),I.autoScroll.checked&&I.logArea.querySelector("div:last-child").scrollIntoView(!1),"error"===e&&console.error(y,...Array.from(t))}async function l(){console.log(y,"startAction");const e=_("input#authorId").value.trim(),t=_("input#guildId").value.trim(),n=_("input#channelId").value.trim().split(/\s*,\s*/),i=_("input#includeNsfw").checked,s=_("input#search").value.trim(),r=_("input#hasLink").checked,o=_("input#hasFile").checked,d=_("input#includePinned").checked,l=_("input#pattern").value,c=_("input#minId").value.trim(),h=_("input#maxId").value.trim(),p=_("input#minDate").value.trim(),g=_("input#maxDate").value.trim(),m=parseInt(_("input#searchDelay").value.trim()),v=parseInt(_("input#deleteDelay").value.trim()),b=_("input#token").value.trim()||a();if(b){if(!t)return u.error('You must fill the "Server ID" field!');if(I.logArea.innerHTML="",k.resetState(),k.options={...k.options,authToken:b,authorId:e,guildId:t,channelId:1===n.length?n[0]:void 0,minId:c||p,maxId:h||g,content:s,hasLink:r,hasFile:o,includeNsfw:i,includePinned:d,pattern:l,searchDelay:m,deleteDelay:v},n.length>1){const e=n.map(e=>({guildId:t,channelId:e}));try{await k.runBatch(e)}catch(e){u.error("CoreException",e)}}else try{await k.run()}catch(e){u.error("CoreException",e),k.stop()}}}function c(){console.log(y,"stopAction"),k.stop()}var h;const u={debug(){return h?h("debug",arguments):console.debug.apply(console,arguments)},info(){return h?h("info",arguments):console.info.apply(console,arguments)},verb(){return h?h("verb",arguments):console.log.apply(console,arguments)},warn(){return h?h("warn",arguments):console.warn.apply(console,arguments)},error(){return h?h("error",arguments):console.error.apply(console,arguments)},success(){return h?h("success",arguments):console.info.apply(console,arguments)}},p=async e=>new Promise(t=>setTimeout(t,e)),g=e=>`${e/36e5|0}h ${e%36e5/6e4|0}m ${e%6e4/1e3|0}s`,m=e=>{return`<x>${t=e,String(t).replace(/[&<"']/g,e=>({"&":"&amp;","<":"&lt;",'"':"&quot;","'":"&#039;"}[e]))}</x>`;var t},v=e=>/:/.test(e)?(new Date(e).getTime()-14200704e5)*Math.pow(2,22):e,b="[UNDISCORD]";class f{constructor({elm:n,moveHandle:i,options:s}){this.options=t({enabledDrag:!0,enabledResize:!0,minWidth:200,maxWidth:1/0,minHeight:100,maxHeight:1/0,dragAllowX:!0,dragAllowY:!0,resizeAllowX:!0,resizeAllowY:!0,draggingClass:"drag",useMouseEvents:!0,useTouchEvents:!0,createHandlers:!0},s),Object.assign(this,s),s=void 0,n.style.position="fixed",this.drag_m=new x(n,i,0,this.options),this.options.createHandlers&&(this.el_t=e("div",{name:"grab-t"},n),this.drag_t=new x(n,this.el_t,1,this.options),this.el_r=e("div",{name:"grab-r"},n),this.drag_r=new x(n,this.el_r,8,this.options),this.el_b=e("div",{name:"grab-b"},n),this.drag_b=new x(n,this.el_b,2,this.options),this.el_l=e("div",{name:"grab-l"},n),this.drag_l=new x(n,this.el_l,4,this.options),this.el_tl=e("div",{name:"grab-tl"},n),this.drag_tl=new x(n,this.el_tl,5,this.options),this.el_tr=e("div",{name:"grab-tr"},n),this.drag_tr=new x(n,this.el_tr,9,this.options),this.el_br=e("div",{name:"grab-br"},n),this.drag_br=new x(n,this.el_br,10,this.options),this.el_bl=e("div",{name:"grab-bl"},n),this.drag_bl=new x(n,this.el_bl,6,this.options))}}class x{constructor(e,t,n,i){Object.assign(this,i),i=void 0,this._targetElm=e,this._handleElm=t;let s,r,o,a,d,l,c=window.innerWidth,h=window.innerHeight;const u=(e,t,n)=>e<t?t:e>n?n:e;let p=0===n?(e,t)=>{const n=e-s,i=u(o+(t-r),0,h-l),p=u(a+n,0,c-d);this._targetElm.style.top=i+"px",this._targetElm.style.left=p+"px"}:(e,t)=>{e=u(e,0,c),t=u(t,0,h);const i=e-s,p=t-r,g=4&n?-1:1,m=1&n?-1:1,v=this.maxWidth-d,b=this.minWidth-d,f=this.maxHeight-l,x=this.minHeight-l,w=o+u(p*m,x,f)*m,y=a+u(i*g,b,v)*g,k=d+u(i*g,b,v),I=l+u(p*m,x,f);1&n&&(this._targetElm.style.top=w+"px",this._targetElm.style.height=I+"px"),2&n&&(this._targetElm.style.height=I+"px"),4&n&&(this._targetElm.style.left=y+"px",this._targetElm.style.width=k+"px"),8&n&&(this._targetElm.style.width=k+"px")};this._dragStartHandler=function(e){const t="touchstart"===e.type;if(1===e.buttons||1===e.which||t){e.preventDefault();const n=t?e.touches[0].clientX:e.clientX,i=t?e.touches[0].clientY:e.clientY;s=n,r=i,c=window.innerWidth,h=window.innerHeight,o=this._targetElm.offsetTop,a=this._targetElm.offsetLeft,d=this._targetElm.clientWidth,l=this._targetElm.clientHeight,this.useMouseEvents&&(document.addEventListener("mousemove",this._dragMoveHandler),document.addEventListener("mouseup",this._dragEndHandler)),this.useTouchEvents&&(document.addEventListener("touchmove",this._dragMoveHandler,{passive:!1}),document.addEventListener("touchend",this._dragEndHandler)),this._targetElm.classList.add(this.draggingClass)}}.bind(this),this._dragMoveHandler=function(e){let t,n;if(e.preventDefault(),"touchmove"===e.type){const i=e.touches[0];t=i.clientX,n=i.clientY}else{if(1!==(e.buttons||e.which))return void this._dragEndHandler();t=e.clientX,n=e.clientY}p(t,n)}.bind(this),this._dragEndHandler=function(){this.useMouseEvents&&(document.removeEventListener("mousemove",this._dragMoveHandler),document.removeEventListener("mouseup",this._dragEndHandler)),this.useTouchEvents&&(document.removeEventListener("touchmove",this._dragMoveHandler),document.removeEventListener("touchend",this._dragEndHandler)),this._targetElm.classList.remove(this.draggingClass)}.bind(this),this.enable()}enable(){this.destroy(),this.useMouseEvents&&this._handleElm.addEventListener("mousedown",this._dragStartHandler),this.useTouchEvents&&this._handleElm.addEventListener("touchstart",this._dragStartHandler,{passive:!1})}destroy(){this._targetElm.classList.remove(this.draggingClass),this.useMouseEvents&&(this._handleElm.removeEventListener("mousedown",this._dragStartHandler),document.removeEventListener("mousemove",this._dragMoveHandler),document.removeEventListener("mouseup",this._dragEndHandler)),this.useTouchEvents&&(this._handleElm.removeEventListener("touchstart",this._dragStartHandler),document.removeEventListener("touchmove",this._dragMoveHandler),document.removeEventListener("touchend",this._dragEndHandler))}}const w={init(){i('\nbody.undiscord-pick-message [data-list-id="chat-messages"] {\n  background-color: var(--background-secondary-alt);\n  box-shadow: inset 0 0 0px 2px var(--button-outline-brand-border);\n}\n\nbody.undiscord-pick-message [id^="message-content-"]:hover {\n  cursor: pointer;\n  cursor: cell;\n  background: var(--background-message-automod-hover);\n}\nbody.undiscord-pick-message [id^="message-content-"]:hover::after {\n  position: absolute;\n  top: calc(50% - 11px);\n  left: 4px;\n  z-index: 1;\n  width: 65px;\n  height: 22px;\n  line-height: 22px;\n  font-family: var(--font-display);\n  background-color: var(--button-secondary-background);\n  color: var(--header-secondary);\n  font-size: 12px;\n  font-weight: 500;\n  text-transform: uppercase;\n  text-align: center;\n  border-radius: 3px;\n  content: \'This ðŸ‘‰\';\n}\nbody.undiscord-pick-message.before [id^="message-content-"]:hover::after {\n  content: \'Before ðŸ‘†\';\n}\nbody.undiscord-pick-message.after [id^="message-content-"]:hover::after {\n  content: \'After ðŸ‘‡\';\n}\n')},grab:e=>new Promise(t=>{document.body.classList.add("undiscord-pick-message"),e&&document.body.classList.add(e),document.addEventListener("click",function n(i){const s=i.target.closest('[id^="message-content-"]');if(s){i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),e&&document.body.classList.remove(e),document.body.classList.remove("undiscord-pick-message"),document.removeEventListener("click",n);try{t(s.id.match(/message-content-(\d+)/)[1])}catch(i){t(null)}}})})};window.messagePicker=w;const y="[UNDISCORD]",k=new class{options={authToken:null,authorId:null,guildId:null,channelId:null,minId:null,maxId:null,content:null,hasLink:null,hasFile:null,includeNsfw:null,includePinned:null,pattern:null,searchDelay:null,deleteDelay:null,maxAttempt:2,askForConfirmation:!0};state={running:!1,delCount:0,failCount:0,grandTotal:0,offset:0,iterations:0,_seachResponse:null,_messagesToDelete:[],_skippedMessages:[]};stats={startTime:new Date,throttledCount:0,throttledTotalTime:0,lastPing:null,avgPing:null,etr:0};onStart=void 0;onProgress=void 0;onStop=void 0;resetState(){this.state={running:!1,delCount:0,failCount:0,grandTotal:0,offset:0,iterations:0,_seachResponse:null,_messagesToDelete:[],_skippedMessages:[]},this.options.askForConfirmation=!0}async runBatch(e){if(this.state.running)return u.error("Already running!");u.info(`Runnning batch with queue of ${e.length} jobs`);for(let t=0;t<e.length;t++){const n=e[t];if(u.info("Starting job...",`(${t+1}/${e.length})`),this.options={...this.options,...n},await this.run(!0),!this.state.running)break;u.info("Job ended.",`(${t+1}/${e.length})`),this.resetState(),this.options.askForConfirmation=!1,this.state.running=!0}u.info("Batch finished."),this.state.running=!1}async run(e=!1){if(this.state.running&&!e)return u.error("Already running!");this.state.running=!0,this.stats.startTime=new Date,u.success(`\nStarted at ${this.stats.startTime.toLocaleString()}`),u.debug(`authorId = "${m(this.options.authorId)}"`,`guildId = "${m(this.options.guildId)}"`,`channelId = "${m(this.options.channelId)}"`,`minId = "${m(this.options.minId)}"`,`maxId = "${m(this.options.maxId)}"`,`hasLink = ${!!this.options.hasLink}`,`hasFile = ${!!this.options.hasFile}`),this.onStart&&this.onStart(this.state,this.stats);do{if(this.state.iterations++,u.verb("Fetching messages..."),await this.search(),await this.filterResponse(),u.verb(`Grand total: ${this.state.grandTotal}`,`(Messages in current page: ${this.state._seachResponse.messages.length}`,`To be deleted: ${this.state._messagesToDelete.length}`,`Skipped: ${this.state._skippedMessages.length})`,`offset: ${this.state.offset}`),this.printStats(),this.calcEtr(),u.verb(`Estimated time remaining: ${g(this.stats.etr)}`),this.state._messagesToDelete.length>0){if(!1===await this.confirm()){this.state.running=!1;break}await this.deleteMessagesFromList()}else if(this.state._skippedMessages.length>0){const e=this.state.offset;this.state.offset+=this.state._skippedMessages.length,u.verb("There's nothing we can delete on this page, checking next page..."),u.verb(`Skipped ${this.state._skippedMessages.length} out of ${this.state._seachResponse.messages.length} in this page.`,`(Offset was ${e}, ajusted to ${this.state.offset})`)}else{if(u.verb("Ended because API returned an empty page."),u.verb("[End state]",this.state),e)break;this.state.running=!1}u.verb(`Waiting ${(this.options.searchDelay/1e3).toFixed(2)}s before next page...`),await p(this.options.searchDelay)}while(this.state.running);this.stats.endTime=new Date,u.success(`Ended at ${this.stats.endTime.toLocaleString()}! Total time: ${g(this.stats.endTime.getTime()-this.stats.startTime.getTime())}`),this.printStats(),u.debug(`Deleted ${this.state.delCount} messages, ${this.state.failCount} failed.\n`),this.onStop&&this.onStop(this.state,this.stats)}stop(){this.state.running=!1,this.onStop&&this.onStop(this.state,this.stats)}calcEtr(){this.stats.etr=this.options.searchDelay*Math.round(this.state.grandTotal/25)+(this.options.deleteDelay+this.stats.avgPing)*this.state.grandTotal}async confirm(){if(!this.options.askForConfirmation)return!0;u.verb("Waiting for your confirmation...");const e=this.state._messagesToDelete.map(e=>`${e.author.username}#${e.author.discriminator}: ${e.attachments.length?"[ATTACHMENTS]":e.content}`).join("\n");return await(async e=>new Promise(t=>setTimeout(()=>t(window.confirm(e)),10)))(`Do you want to delete ~${this.state.grandTotal} messages? (Estimated time: ${g(this.stats.etr)})(The actual number of messages may be less, depending if you're using filters to skip some messages)\n\n---- Preview ----\n`+e)?(u.verb("OK"),this.options.askForConfirmation=!1,!0):(u.error("Aborted by you!"),!1)}async search(){let e,t;e="@me"===this.options.guildId?`https://discord.com/api/v9/channels/${this.options.channelId}/messages/`:`https://discord.com/api/v9/guilds/${this.options.guildId}/messages/`;try{this.beforeRequest(),t=await fetch(e+"search?"+(n=[["author_id",this.options.authorId||void 0],["channel_id",("@me"!==this.options.guildId?this.options.channelId:void 0)||void 0],["min_id",this.options.minId?v(this.options.minId):void 0],["max_id",this.options.maxId?v(this.options.maxId):void 0],["sort_by","timestamp"],["sort_order","desc"],["offset",this.state.offset],["has",this.options.hasLink?"link":void 0],["has",this.options.hasFile?"file":void 0],["content",this.options.content||void 0],["include_nsfw",!!this.options.includeNsfw||void 0]],n.filter(e=>void 0!==e[1]).map(e=>e[0]+"="+encodeURIComponent(e[1])).join("&")),{headers:{Authorization:this.options.authToken}}),this.afterRequest()}catch(e){throw this.state.running=!1,u.error("Search request threw an error:",e),e}var n;if(202===t.status){let e=1e3*(await t.json()).retry_after;return e=e||this.stats.searchDelay,this.stats.throttledCount++,this.stats.throttledTotalTime+=e,u.warn(`This channel isn't indexed yet. Waiting ${e}ms for discord to index it...`),await p(e),await this.search()}if(!t.ok){if(429===t.status){let e=1e3*(await t.json()).retry_after;return e=e||this.stats.searchDelay,this.stats.throttledCount++,this.stats.throttledTotalTime+=e,this.stats.searchDelay+=e,e=this.stats.searchDelay,u.warn(`Being rate limited by the API for ${e}ms! Increasing search delay...`),this.printStats(),u.verb(`Cooling down for ${2*e}ms before retrying...`),await p(2*e),await this.search()}throw this.state.running=!1,u.error(`Error searching messages, API responded with status ${t.status}!\n`,await t.json()),t}const i=await t.json();return this.state._seachResponse=i,console.log(b,"search",i),i}async filterResponse(){const e=this.state._seachResponse,t=e.total_results;t>this.state.grandTotal&&(this.state.grandTotal=t);const n=e.messages.map(e=>e.find(e=>!0===e.hit));let i=n;i=i.filter(e=>0===e.type||e.type>=6&&e.type<=21),i=i.filter(e=>!e.pinned||this.options.includePinned);try{const e=new RegExp(this.options.pattern,"i");i=i.filter(t=>e.test(t.content))}catch(e){u.warn("Ignoring RegExp because pattern is malformed!",e)}const s=n.filter(e=>!i.find(t=>t.id===e.id));this.state._messagesToDelete=i,this.state._skippedMessages=s,console.log(b,"filterResponse",this.state)}async deleteMessagesFromList(){for(let e=0;e<this.state._messagesToDelete.length;e++){const t=this.state._messagesToDelete[e];if(!this.state.running)return u.error("Stopped by you!");u.debug(`[${this.state.delCount+1}/${this.state.grandTotal}] <sup>${new Date(t.timestamp).toLocaleString()}</sup> <b>${m(t.author.username+"#"+t.author.discriminator)}</b>: <i>${m(t.content).replace(/\n/g,"â†µ")}</i>`+(t.attachments.length?m(JSON.stringify(t.attachments)):""),`<sup>{ID:${m(t.id)}}</sup>`);let n=0;for(;n<this.options.maxAttempt&&"RETRY"===await this.deleteMessage(t);)n++,u.verb(`Retrying in ${this.options.deleteDelay}ms... (${n}/${this.options.maxAttempt})`),await p(this.options.deleteDelay);this.calcEtr(),this.onProgress&&this.onProgress(this.state,this.stats),await p(this.options.deleteDelay)}}async deleteMessage(e){const t=`https://discord.com/api/v9/channels/${e.channel_id}/messages/${e.id}`;let n;try{this.beforeRequest(),n=await fetch(t,{method:"DELETE",headers:{Authorization:this.options.authToken}}),this.afterRequest()}catch(t){return u.error("Delete request throwed an error:",t),u.verb("Related object:",m(JSON.stringify(e))),this.state.failCount++,"FAILED"}if(!n.ok){if(429===n.status){const e=1e3*(await n.json()).retry_after;return this.stats.throttledCount++,this.stats.throttledTotalTime+=e,this.options.deleteDelay=e,u.warn(`Being rate limited by the API for ${e}ms! Adjusted delete delay to ${this.options.deleteDelay}ms.`),this.printStats(),u.verb(`Cooling down for ${2*e}ms before retrying...`),await p(2*e),"RETRY"}{const t=await n.text();try{const i=JSON.parse(t);return 400===n.status&&50083===i.code?(u.warn("Error deleting message (Thread is archived). Will increment offset so we don't search this in the next page..."),this.state.offset++,this.state.failCount++,"FAIL_SKIP"):(u.error(`Error deleting message, API responded with status ${n.status}!`,i),u.verb("Related object:",m(JSON.stringify(e))),this.state.failCount++,"FAILED")}catch(e){u.error(`Fail to parse JSON. API responded with status ${n.status}!`,t)}}}return this.state.delCount++,"OK"}#e=0;beforeRequest(){this.#e=Date.now()}afterRequest(){this.stats.lastPing=Date.now()-this.#e,this.stats.avgPing=this.stats.avgPing>0?.9*this.stats.avgPing+.1*this.stats.lastPing:this.stats.lastPing}printStats(){u.verb(`Delete delay: ${this.options.deleteDelay}ms, Search delay: ${this.options.searchDelay}ms`,`Last Ping: ${this.stats.lastPing}ms, Average Ping: ${0|this.stats.avgPing}ms`),u.verb(`Rate Limited: ${this.stats.throttledCount} times.`,`Total time throttled: ${g(this.stats.throttledTotalTime)}.`)}};w.init();const I={undiscordWindow:null,undiscordBtn:null,logArea:null,autoScroll:null,progressMain:null,progressIcon:null,percent:null},_=e=>I.undiscordWindow.querySelector(e);!function(){function e(){const e=document.querySelector("#app-mount [class^=toolbar]");e&&e.appendChild(I.undiscordBtn)}function t(){"none"!==I.undiscordWindow.style.display?(I.undiscordWindow.style.display="none",I.undiscordBtn.style.color="var(--interactive-normal)"):(I.undiscordWindow.style.display="",I.undiscordBtn.style.color="var(--interactive-active)")}i('\n/* undiscord window */\n#undiscord.browser { box-shadow: var(--shadow-border), var(--shadow-high); border: 1px solid var(--border-subtle); overflow: hidden; }\n#undiscord.container,\n#undiscord .container { background-color: var(--background-surface-high); border-radius: 8px; box-sizing: border-box; cursor: default; flex-direction: column; }\n#undiscord .header { background-color: var(--background-tertiary); height: 48px; align-items: center; min-height: 48px; padding: 0 16px; display: flex; color: var(--header-secondary); cursor: grab; }\n#undiscord .header .icon { color: var(--interactive-normal); margin-right: 8px; flex-shrink: 0; width: 24; height: 24; }\n#undiscord .header .icon:hover { color: var(--interactive-hover); }\n#undiscord .header h3 { font-size: 16px; line-height: 20px; font-weight: 500; font-family: var(--font-display); color: var(--header-primary); flex-shrink: 0; margin-right: 16px; }\n#undiscord .spacer { flex-grow: 1; }\n#undiscord .header .vert-divider { width: 1px; height: 24px; background-color: var(--background-modifier-accent); margin-right: 16px; flex-shrink: 0; }\n#undiscord legend,\n#undiscord label { color: var(--header-secondary); font-size: 12px; line-height: 16px; font-weight: 500; text-transform: uppercase; cursor: default; font-family: var(--font-display); margin-bottom: 8px; }\n#undiscord .multiInput { display: flex; align-items: center; font-size: 16px; box-sizing: border-box; width: 100%; border-radius: 3px; color: var(--text-default); background-color: var(--input-background); border: none; transition: border-color 0.2s ease-in-out 0s; }\n#undiscord .multiInput :first-child { flex-grow: 1; }\n#undiscord .multiInput button:last-child { margin-right: 4px; }\n#undiscord .input { font-size: 16px; width: 100%; transition: border-color 0.2s ease-in-out 0s; padding: 10px; height: 44px; background-color: var(--input-background); border: 1px solid var(--input-border); border-radius: 8px; box-sizing: border-box; color: var(--text-default); }\n#undiscord fieldset { margin-top: 16px; }\n#undiscord .input-wrapper { display: flex; align-items: center; font-size: 16px; box-sizing: border-box; width: 100%; border-radius: 3px; color: var(--text-default); background-color: var(--input-background); border: none; transition: border-color 0.2s ease-in-out 0s; }\n#undiscord input[type="text"],\n#undiscord input[type="search"],\n#undiscord input[type="password"],\n#undiscord input[type="datetime-local"],\n#undiscord input[type="number"],\n#undiscord input[type="range"] { background-color: var(--input-background); border: 1px solid var(--input-border); border-radius: 8px; box-sizing: border-box; color: var(--text-default); font-size: 16px; height: 44px; padding: 12px 10px; transition: border-color .2s ease-in-out; width: 100%; }\n#undiscord .divider,\n#undiscord hr { border: none; margin-bottom: 24px; padding-bottom: 4px; border-bottom: 1px solid var(--background-modifier-accent); }\n#undiscord .sectionDescription { margin-bottom: 16px; color: var(--header-secondary); font-size: 14px; line-height: 20px; font-weight: 400; }\n#undiscord a { color: var(--text-link); text-decoration: none; }\n#undiscord .btn,\n#undiscord button { position: relative; display: flex; -webkit-box-pack: center; justify-content: center; -webkit-box-align: center; align-items: center; box-sizing: border-box; background: none; border: none; border-radius: 3px; font-size: 14px; font-weight: 500; line-height: 16px; padding: 2px 16px; user-select: none; /* sizeSmall */     width: 60px; height: 32px; min-width: 60px; min-height: 32px; /* lookFilled colorPrimary */     color: rgb(255, 255, 255); background-color: var(--button-secondary-background); }\n#undiscord .sizeMedium { width: 96px; height: 38px; min-width: 96px; min-height: 38px; }\n#undiscord .sizeMedium.icon { width: 38px; min-width: 38px; }\n#undiscord sup { vertical-align: top; }\n/* lookFilled colorPrimary */\n#undiscord .accent { background-color: var(--brand-experiment); }\n#undiscord .danger { background-color: var(--button-danger-background); }\n#undiscord .positive { background-color: var(--button-positive-background); }\n#undiscord .info { font-size: 12px; line-height: 16px; padding: 8px 10px; color: var(--text-muted); }\n/* Scrollbar */\n#undiscord .scroll::-webkit-scrollbar { width: 8px; height: 8px; }\n#undiscord .scroll::-webkit-scrollbar-corner { background-color: transparent; }\n#undiscord .scroll::-webkit-scrollbar-thumb { background-clip: padding-box; border: 2px solid transparent; border-radius: 4px; background-color: var(--scrollbar-thin-thumb); min-height: 40px; }\n#undiscord .scroll::-webkit-scrollbar-track { border-color: var(--scrollbar-thin-track); background-color: var(--scrollbar-thin-track); border: 2px solid var(--scrollbar-thin-track); }\n/* fade scrollbar */\n#undiscord .scroll::-webkit-scrollbar-thumb,\n#undiscord .scroll::-webkit-scrollbar-track { visibility: hidden; }\n#undiscord .scroll:hover::-webkit-scrollbar-thumb,\n#undiscord .scroll:hover::-webkit-scrollbar-track { visibility: visible; }\n/**** functional classes ****/\n#undiscord.redact .priv { display: none !important; }\n#undiscord.redact x:not(:active) { color: transparent !important; background-color: var(--primary-700) !important; cursor: default; user-select: none; }\n#undiscord.redact x:hover { position: relative; }\n#undiscord.redact x:hover::after { content: "Redacted information (Streamer mode: ON)"; position: absolute; display: inline-block; top: -32px; left: -20px; padding: 4px; width: 150px; font-size: 8pt; text-align: center; white-space: pre-wrap; background-color: var(--background-floating); -webkit-box-shadow: var(--elevation-high); box-shadow: var(--elevation-high); color: var(--text-default); border-radius: 5px; pointer-events: none; }\n#undiscord.redact [priv] { -webkit-text-security: disc !important; }\n#undiscord :disabled { display: none; }\n/**** layout and utility classes ****/\n#undiscord,\n#undiscord * { box-sizing: border-box; }\n#undiscord .col { display: flex; flex-direction: column; }\n#undiscord .row { display: flex; flex-direction: row; align-items: center; }\n#undiscord .mb1 { margin-bottom: 8px; }\n#undiscord .log { margin-bottom: 0.25em; }\n#undiscord .log-debug { color: inherit; }\n#undiscord .log-info { color: #00b0f4; }\n#undiscord .log-verb { color: #72767d; }\n#undiscord .log-warn { color: #faa61a; }\n#undiscord .log-error { color: #f04747; }\n#undiscord .log-success { color: #43b581; }\n'),i("\n/**** Undiscord Button ****/\n#undicord-btn { position: relative; width: auto; height: 24px; margin: 0 8px; cursor: pointer; color: var(--interactive-normal); flex: 0 0 auto; }\n#undicord-btn progress { position: absolute; top: 23px; left: -4px; width: 32px; height: 12px; display: none; }\n#undicord-btn.running { color: var(--button-danger-background) !important; }\n#undicord-btn.running progress { display: block; }\n/**** Undiscord Interface ****/\n#undiscord { position: fixed; z-index: 100; top: 58px; right: 10px; display: flex; flex-direction: column; width: 800px; height: 80vh; min-width: 610px; max-width: 100vw; min-height: 448px; max-height: 100vh; color: var(--text-normal); border-radius: 4px; background-color: var(--background-secondary); box-shadow: var(--elevation-stroke), var(--elevation-high); will-change: top, left, width, height; }\n#undiscord .header .icon { cursor: pointer; }\n#undiscord .window-body { height: calc(100% - 48px); }\n#undiscord .sidebar { overflow: hidden scroll; overflow-y: auto; width: 270px; min-width: 250px; height: 100%; max-height: 100%; padding: 8px; background: var(--bg-overlay-4, var(--background-base-lowest)); }\n#undiscord .sidebar legend,\n#undiscord .sidebar label { display: block; width: 100%; }\n#undiscord .main { display: flex; max-width: calc(100% - 250px); background-color: var(--bg-overlay-chat, var(--background-base-lower)); flex-grow: 1; }\n#undiscord.hide-sidebar .sidebar { display: none; }\n#undiscord.hide-sidebar .main { max-width: 100%; }\n#undiscord #logArea { font-family: Consolas, Liberation Mono, Menlo, Courier, monospace; font-size: 0.75rem; overflow: auto; padding: 10px; user-select: text; flex-grow: 1; flex-grow: 1; cursor: auto; }\n#undiscord .tbar { padding: 8px; background-color: var(--bg-overlay-2, var(--__header-bar-background)); }\n#undiscord .tbar button { margin-right: 4px; margin-bottom: 4px; }\n#undiscord .footer { cursor: se-resize; padding-right: 30px; }\n#undiscord .footer #progressPercent { padding: 0 1em; font-size: small; color: var(--interactive-muted); flex-grow: 1; }\n.resize-handle { position: absolute; bottom: -15px; right: -15px; width: 30px; height: 30px; transform: rotate(-45deg); background: repeating-linear-gradient(0, var(--background-modifier-accent), var(--background-modifier-accent) 1px, transparent 2px, transparent 4px); cursor: nwse-resize; }\n/**** Elements ****/\n#undiscord summary { font-size: 16px; font-weight: 500; line-height: 20px; position: relative; overflow: hidden; margin-bottom: 2px; padding: 6px 10px; cursor: pointer; white-space: nowrap; text-overflow: ellipsis; color: var(--interactive-normal); border-radius: 4px; flex-shrink: 0; }\n#undiscord fieldset { padding-left: 8px; }\n#undiscord legend a { float: right; text-transform: initial; }\n#undiscord progress { height: 8px; margin-top: 4px; flex-grow: 1; }\n#undiscord .importJson { display: flex; flex-direction: row; }\n#undiscord .importJson button { margin-left: 5px; width: fit-content; }\n"),i('\n[name^="grab-"] { position: absolute; --size: 6px; --corner-size: 16px; --offset: -1px; z-index: 9; }\n[name^="grab-"]:hover{ background: rgba(128,128,128,0.1); }\n[name="grab-t"] { top: 0px; left: var(--corner-size); right: var(--corner-size); height: var(--size); margin-top: var(--offset); cursor: ns-resize; }\n[name="grab-r"] { top: var(--corner-size); bottom: var(--corner-size); right: 0px; width: var(--size); margin-right: var(--offset); \n  cursor: ew-resize; }\n[name="grab-b"] { bottom: 0px; left: var(--corner-size); right: var(--corner-size); height: var(--size); margin-bottom: var(--offset); cursor: ns-resize; }\n[name="grab-l"] { top: var(--corner-size); bottom: var(--corner-size); left: 0px; width: var(--size); margin-left: var(--offset); cursor: ew-resize; }\n[name="grab-tl"] { top: 0px; left: 0px; width: var(--corner-size); height: var(--corner-size); margin-top: var(--offset); margin-left: var(--offset); cursor: nwse-resize; }\n[name="grab-tr"] { top: 0px; right: 0px; width: var(--corner-size); height: var(--corner-size); margin-top: var(--offset); margin-right: var(--offset); cursor: nesw-resize; }\n[name="grab-br"] { bottom: 0px; right: 0px; width: var(--corner-size); height: var(--corner-size); margin-bottom: var(--offset); margin-right: var(--offset); cursor: nwse-resize; }\n[name="grab-bl"] { bottom: 0px; left: 0px; width: var(--corner-size); height: var(--corner-size); margin-bottom: var(--offset); margin-left: var(--offset); cursor: nesw-resize; }\n');const p=((e,t,n=!1)=>'\n<div id="undiscord" class="browser container redact" style="display:none;">\n    <div class="header">\n        <svg class="icon" aria-hidden="false" width="24" height="24" viewBox="0 0 24 24">\n            <path fill="currentColor" d="M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z"></path>\n            <path fill="currentColor"\n                d="M5 6.99902V18.999C5 20.101 5.897 20.999 7 20.999H17C18.103 20.999 19 20.101 19 18.999V6.99902H5ZM11 17H9V11H11V17ZM15 17H13V11H15V17Z">\n            </path>\n        </svg>\n        <h3>Undiscord</h3>\n        <div class="vert-divider"></div>\n        <span> Bulk delete messages</span>\n        <div class="spacer"></div>\n        <div id="hide" class="icon" aria-label="Close" role="button" tabindex="0">\n            <svg aria-hidden="false" width="24" height="24" viewBox="0 0 24 24">\n                <path fill="currentColor"\n                    d="M18.4 4L12 10.4L5.6 4L4 5.6L10.4 12L4 18.4L5.6 20L12 13.6L18.4 20L20 18.4L13.6 12L20 5.6L18.4 4Z">\n                </path>\n            </svg>\n        </div>\n    </div>\n    <div class="window-body" style="display: flex; flex-direction: row;">\n        <div class="sidebar scroll">\n            <details open>\n                <summary>General</summary>\n                <fieldset>\n                    <legend>\n                        Author ID\n                        <a href="{{WIKI}}/authorId" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="multiInput">\n                        <div class="input-wrapper">\n                            <input class="input" id="authorId" type="text" priv>\n                        </div>\n                        <button id="getAuthor">me</button>\n                    </div>\n                </fieldset>\n                <hr>\n                <fieldset>\n                    <legend>\n                        Server ID\n                        <a href="{{WIKI}}/guildId" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="multiInput">\n                        <div class="input-wrapper">\n                            <input class="input" id="guildId" type="text" priv>\n                        </div>\n                        <button id="getGuild">current</button>\n                    </div>\n                </fieldset>\n                <fieldset>\n                    <legend>\n                        Channel ID\n                        <a href="{{WIKI}}/channelId" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="multiInput mb1">\n                        <div class="input-wrapper">\n                            <input class="input" id="channelId" type="text" priv>\n                        </div>\n                        <button id="getChannel">current</button>\n                    </div>\n                    <div class="sectionDescription">\n                        <label class="row"><input id="includeNsfw" type="checkbox">This is a NSFW channel</label>\n                    </div>\n                </fieldset>\n            </details>\n            <details>\n                <summary>Wipe Archive</summary>\n                <fieldset>\n                    <legend>\n                        Import index.json\n                        <a href="{{WIKI}}/importJson" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="input-wrapper">\n                        <input type="file" id="importJsonInput" accept="application/json,.json" style="width:100%";>\n                    </div>\n                    <div class="sectionDescription">\n                        <br>\n                        After requesting your data from discord, you can import it here.<br>\n                        Select the "messages/index.json" file from the discord archive.\n                    </div>\n                </fieldset>\n            </details>\n            <hr>\n            <details>\n                <summary>Filter</summary>\n                <fieldset>\n                    <legend>\n                        Search\n                        <a href="{{WIKI}}/filters" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="input-wrapper">\n                        <input id="search" type="text" placeholder="Containing text" priv>\n                    </div>\n                    <div class="sectionDescription">\n                        Only delete messages that contain the text\n                    </div>\n                    <div class="sectionDescription">\n                        <label><input id="hasLink" type="checkbox">has: link</label>\n                    </div>\n                    <div class="sectionDescription">\n                        <label><input id="hasFile" type="checkbox">has: file</label>\n                    </div>\n                    <div class="sectionDescription">\n                        <label><input id="includePinned" type="checkbox">Include pinned</label>\n                    </div>\n                </fieldset>\n                <hr>\n                <fieldset>\n                    <legend>\n                        Pattern\n                        <a href="{{WIKI}}/pattern" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="sectionDescription">\n                        Delete messages that match the regular expression\n                    </div>\n                    <div class="input-wrapper">\n                        <span class="info">/</span>\n                        <input id="pattern" type="text" placeholder="regular expression" priv>\n                        <span class="info">/</span>\n                    </div>\n                </fieldset>\n            </details>\n            <details>\n                <summary>Messages interval</summary>\n                <fieldset>\n                    <legend>\n                        Interval of messages\n                        <a href="{{WIKI}}/messageId" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="multiInput mb1">\n                        <div class="input-wrapper">\n                            <input id="minId" type="text" placeholder="After a message" priv>\n                        </div>\n                        <button id="pickMessageAfter">Pick</button>\n                    </div>\n                    <div class="multiInput">\n                        <div class="input-wrapper">\n                            <input id="maxId" type="text" placeholder="Before a message" priv>\n                        </div>\n                        <button id="pickMessageBefore">Pick</button>\n                    </div>\n                    <div class="sectionDescription">\n                        Specify an interval to delete messages.\n                    </div>\n                </fieldset>\n            </details>\n            <details>\n                <summary>Date interval</summary>\n                <fieldset>\n                    <legend>\n                        After date\n                        <a href="{{WIKI}}/dateRange" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="input-wrapper mb1">\n                        <input id="minDate" type="datetime-local" title="Messages posted AFTER this date">\n                    </div>\n                    <legend>\n                        Before date\n                        <a href="{{WIKI}}/dateRange" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="input-wrapper">\n                        <input id="maxDate" type="datetime-local" title="Messages posted BEFORE this date">\n                    </div>\n                    <div class="sectionDescription">\n                        Delete messages that were posted between the two dates.\n                    </div>\n                    <div class="sectionDescription">\n                        * Filtering by date doesn\'t work if you use the "Messages interval".\n                    </div>\n                </fieldset>\n            </details>\n            <hr>\n            <details>\n                <summary>Advanced settings</summary>\n                <fieldset>\n                    <legend>\n                        Search delay\n                        <a href="{{WIKI}}/delay" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="input-wrapper">\n                        <input id="searchDelay" type="range" value="30000" step="100" min="100" max="60000">\n                        <div id="searchDelayValue"></div>\n                    </div>\n                </fieldset>\n                <fieldset>\n                    <legend>\n                        Delete delay\n                        <a href="{{WIKI}}/delay" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="input-wrapper">\n                        <input id="deleteDelay" type="range" value="1000" step="50" min="50" max="10000">\n                        <div id="deleteDelayValue"></div>\n                    </div>\n                    <br>\n                    <div class="sectionDescription">\n                        This will affect the speed in which the messages are deleted.\n                        Use the help link for more information.\n                    </div>\n                </fieldset>\n                <hr>\n                <fieldset>\n                    <legend>\n                        Authorization Token\n                        <a href="{{WIKI}}/authToken" title="Help" target="_blank" rel="noopener noreferrer">help</a>\n                    </legend>\n                    <div class="multiInput">\n                        <div class="input-wrapper">\n                            <input class="input" id="token" type="password" autocomplete="dont" priv>\n                        </div>\n                        <button id="getToken">fill</button>\n                    </div>\n                </fieldset>\n            </details>\n            <hr>\n            <div></div>\n            <div class="info">\n                Undiscord {{VERSION}}\n                <br> victornpb\n            </div>\n        </div>\n        <div class="main col">\n            <div class="tbar col">\n                <div class="row">\n                    <button id="toggleSidebar" class="sizeMedium icon">â˜°</button>\n                    <button id="start" class="sizeMedium danger" style="width: 150px;" title="Start the deletion process">â–¶ï¸Ž Delete</button>\n                    <button id="stop" class="sizeMedium" title="Stop the deletion process" disabled>ðŸ›‘ Stop</button>\n                    <button id="clear" class="sizeMedium">Clear log</button>\n                    <label class="row" title="Hide sensitive information on your screen for taking screenshots">\n                        <input id="redact" type="checkbox" checked> Streamer mode\n                    </label>\n                </div>\n                <div class="row">\n                    <progress id="progressBar" style="display:none;"></progress>\n                </div>\n            </div>\n            <pre id="logArea" class="logarea scroll">\n                <div class="" style="background: var(--background-mentioned); padding: .5em;">Notice: Undiscord may be working slower than usual and<wbr>require multiple attempts due to a recent Discord update.<br>We\'re working on a fix, and we thank you for your patience.</div>\n                <center>\n                    <div>Star <a href="{{HOME}}" target="_blank" rel="noopener noreferrer">this project</a> on GitHub!</div>\n                    <div><a href="{{HOME}}/discussions" target="_blank" rel="noopener noreferrer">Issues or help</a></div>\n                </center>\n            </pre>\n            <div class="tbar footer row">\n                <div id="progressPercent"></div>\n                <span class="spacer"></span>\n                <label>\n                    <input id="autoScroll" type="checkbox" checked> Auto scroll\n                </label>\n                <div class="resize-handle"></div>\n            </div>\n        </div>\n    </div>\n</div>\n\n'.replace(/\{\{([\w_]+)\}\}/g,(e,i)=>t[i]||(n?"":e)))(0,{VERSION:"5.2.4",HOME:"https://github.com/victornpb/undiscord",WIKI:"https://github.com/victornpb/undiscord/wiki"});I.undiscordWindow=n(p),document.body.appendChild(I.undiscordWindow),new f({elm:I.undiscordWindow,moveHandle:_(".header")}),I.undiscordBtn=n('\n<div id="undicord-btn" tabindex="0" role="button" aria-label="Delete Messages" title="Delete Messages with Undiscord">\n    <svg aria-hidden="false" width="24" height="24" viewBox="0 0 24 24">\n        <path fill="currentColor" d="M15 3.999V2H9V3.999H3V5.999H21V3.999H15Z"></path>\n        <path fill="currentColor" d="M5 6.99902V18.999C5 20.101 5.897 20.999 7 20.999H17C18.103 20.999 19 20.101 19 18.999V6.99902H5ZM11 17H9V11H11V17ZM15 17H13V11H15V17Z"></path>\n    </svg>\n    <progress></progress>\n</div>\n'),I.undiscordBtn.onclick=t,e();const m=document.querySelector("#app-mount");let v=null;new MutationObserver(()=>{v||(v=setTimeout(()=>{v=null,m.contains(I.undiscordBtn)||e()},3e3))}).observe(m,{attributes:!1,childList:!0,subtree:!0}),I.logArea=_("#logArea"),I.autoScroll=_("#autoScroll"),I.progressMain=_("#progressBar"),I.progressIcon=I.undiscordBtn.querySelector("progress"),I.percent=_("#progressPercent"),_("#hide").onclick=t,_("#toggleSidebar").onclick=()=>I.undiscordWindow.classList.toggle("hide-sidebar"),_("button#start").onclick=l,_("button#stop").onclick=c,_("button#clear").onclick=()=>I.logArea.innerHTML="",_("button#getAuthor").onclick=()=>_("input#authorId").value=s(),_("button#getGuild").onclick=()=>{"@me"===(_("input#guildId").value=r())&&(_("input#channelId").value=o())},_("button#getChannel").onclick=()=>{_("input#channelId").value=o(),_("input#guildId").value=r()},_("#redact").onchange=()=>{I.undiscordWindow.classList.toggle("redact")&&alert("This mode will attempt to hide personal information, so you can screen share / take screenshots.\nAlways double check you are not sharing sensitive information!")},_("#pickMessageAfter").onclick=async()=>{alert("Select a message on the chat.\nThe message below it will be deleted."),t();const e=await w.grab("after");e&&(_("input#minId").value=e),t()},_("#pickMessageBefore").onclick=async()=>{alert("Select a message on the chat.\nThe message above it will be deleted."),t();const e=await w.grab("before");e&&(_("input#maxId").value=e),t()},_("button#getToken").onclick=()=>_("input#token").value=a(),_("input#searchDelay").onchange=e=>{const t=parseInt(e.target.value);t&&(k.options.searchDelay=t)},_("input#deleteDelay").onchange=e=>{const t=parseInt(e.target.value);t&&(k.options.deleteDelay=t)},_("input#searchDelay").addEventListener("input",e=>{_("div#searchDelayValue").textContent=e.target.value+"ms"}),_("input#deleteDelay").addEventListener("input",e=>{_("div#deleteDelayValue").textContent=e.target.value+"ms"});const b=_("input#importJsonInput");b.onchange=async()=>{const e=b.files;if(0===e.length)return u.warn("No file selected.");const t=_("input#channelId");_("input#guildId").value="@me",_("input#authorId").value=s();try{const n=e[0],i=await n.text(),s=JSON.parse(i),r=Object.keys(s);t.value=r.join(","),u.info(`Loaded ${r.length} channels.`)}catch(e){u.error("Error parsing file!",e)}},h=d,k.onStart=(e,t)=>{console.log(y,"onStart",e,t),_("#start").disabled=!0,_("#stop").disabled=!1,I.undiscordBtn.classList.add("running"),I.progressMain.style.display="block",I.percent.style.display="block"},k.onProgress=(e,t)=>{let n=e.grandTotal;const i=e.delCount+e.failCount;n=Math.max(n,i,0);const s=i>=0&&n?Math.round(i/n*100)+"%":"",r=g(Date.now()-t.startTime.getTime()),o=g(t.etr);I.percent.innerHTML=`${s} (${i}/${n}) Elapsed: ${r} Remaining: ${o}`,I.progressIcon.value=i,I.progressMain.value=i,n?(I.progressIcon.setAttribute("max",n),I.progressMain.setAttribute("max",n)):(I.progressIcon.removeAttribute("value"),I.progressMain.removeAttribute("value"),I.percent.innerHTML="..."),_("input#searchDelay").value=k.options.searchDelay,_("div#searchDelayValue").textContent=k.options.searchDelay+"ms",_("input#deleteDelay").value=k.options.deleteDelay,_("div#deleteDelayValue").textContent=k.options.deleteDelay+"ms"},k.onStop=(e,t)=>{console.log(y,"onStop",e,t),_("#start").disabled=!1,_("#stop").disabled=!0,I.undiscordBtn.classList.remove("running"),I.progressMain.style.display="none",I.percent.style.display="none"}}()}();
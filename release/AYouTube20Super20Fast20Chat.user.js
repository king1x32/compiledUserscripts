// ==UserScript==
// @name                YouTube Super Fast Chat
// @version             0.102.17
// @license             MIT
// @icon                https://raw.githubusercontent.com/cyfung1031/userscript-supports/main/icons/super-fast-chat.png
// @namespace           UserScript
// @match               https://www.youtube.com/live_chat*
// @match               https://www.youtube.com/live_chat_replay*
// @author              CY Fung
// @run-at              document-start
// @grant               none
// @unwrap
// @allFrames           true
// @inject-into         page
// @require             https://update.greasyfork.org/scripts/475632/1361351/ytConfigHacks.js
// @require             https://cdn.jsdelivr.net/gh/cyfung1031/userscript-supports@c2b707e4977f77792042d4a5015fb188aae4772e/library/nextBrowserTick.min.js
//
// @compatible          firefox Violentmonkey
// @compatible          firefox Tampermonkey
// @compatible          firefox FireMonkey
// @compatible          chrome Violentmonkey
// @compatible          chrome Tampermonkey
// @compatible          opera Violentmonkey
// @compatible          opera Tampermonkey
// @compatible          safari Stay
// @compatible          edge Violentmonkey
// @compatible          edge Tampermonkey
// @compatible          brave Violentmonkey
// @compatible          brave Tampermonkey
//
//
// @downloadURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/AYouTube20Super20Fast20Chat.user.js
// @updateURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/AYouTube20Super20Fast20Chat.meta.js
// ==/UserScript==
(e=>{"use strict";function t(e,n){if(n=n||[],!e||"object"!=typeof e)return e;if(Array.isArray(e))return e.map(e=>t(e,n));const o={};for(let i in e)n.includes(i)||(o[i]=t(e[i],n));return o}function n(e){const{baseObject:t,thumbnails:n,flag0:o,imageLinks:i}=e;if((o||i)&&n&&n.length>0)if(o>0&&n.length>1){let e=0,r=[];for(const t of n){if(!t||!t.url)continue;const n=t.width===t.height&&"number"==typeof t.width,s=e<=0||(1===o?e>t.width:e<t.width),a=!n||t.width>=48;n&&!s||!a||(r.push(t),i&&i.add(t.url)),n&&s&&a&&(e=t.width)}n.length!==r.length&&n===t.thumbnails&&r.length>0?t.thumbnails=r:r.length=0,r=null}else for(const e of n)e&&e.url&&i&&i.add(e.url)}function o(e,t){const o=(e||0).liveChatTextMessageRenderer||0;if(o){const e=(o.message||0).runs||0;if(e&&e.length>0)for(const o of e){const e=((o||0).emoji||0).image||0;n({baseObject:e,thumbnails:e.thumbnails,flag0:1,imageLinks:t})}const i=o.authorPhoto||0;n({baseObject:i,thumbnails:i.thumbnails,flag0:1,imageLinks:t})}}function i(e,t,n,o){return new u(i=>{e||(e=document.createElement("link")),e.rel=t,o&&e.setAttribute("as",o),e.resolveFn=i,e.onload=je,e.onerror=We,e.href=n,document.head.appendChild(e),e=null})}const r=window.WeakMapOriginal||window.WeakMap,s=+localStorage.__debugSuperFastChat__>0,a="function"==typeof ResizeObserver&&CSS.supports("position-area:center"),l="72vw",{IntersectionObserver:c}=e;let d;try{d=document.createAttributeNS("http://www.w3.org/2000/svg","nil").addEventListener}catch(e){}const h=d;if(!h)return console.warn("pureAddEventListener cannot be obtained.");const u=(async()=>{})().constructor,[p]=[setTimeout],m=(Image,Reflect.getPrototypeOf(HTMLTitleElement)),f=nextBrowserTick;if("function"!=typeof f||(f.version||0)<2)return void console.log("nextBrowserTick is not found.");if(!c)return console.warn("Your browser does not support IntersectionObserver.\nPlease upgrade to the latest version.");if("object"!=typeof WebAssembly)return console.warn("Your browser is too old.\nPlease upgrade to the latest version.");if("undefined"==typeof CSS||"function"!=typeof(CSS||0).supports||!CSS.supports("left","clamp(-100%, calc( -100% * 0.5 ), 0%)"))return console.warn("Your browser is too old.\nPlease upgrade to the latest version.");const _="function"==typeof m.prototype.append?31:0,y=_?"\n\n    elzm-fonts {\n        visibility: collapse;\n        position: fixed;\n        top: -10px;\n        left: -10px;\n        font-size: 10pt;\n        line-height: 100%;\n        width: 100px;\n        height: 100px;\n        transform: scale(0.1);\n        transform: scale(0.01);\n        transform: scale(0.001);\n        transform-origin: 0 0;\n        contain: strict;\n        display: block;\n\n        pointer-events: none !important;\n        user-select: none !important;\n    }\n\n    elzm-fonts[id]#elzm-fonts-yk75g {\n        user-select: none !important;\n        pointer-events: none !important;\n    }\n\n    elzm-font {\n        visibility: collapse;\n        position: absolute;\n        line-height: 100%;\n        width: 100px;\n        height: 100px;\n        contain: strict;\n        display: block;\n\n        user-select: none !important;\n        pointer-events: none !important;\n    }\n\n    elzm-font::before {\n        visibility: collapse;\n        position: absolute;\n        line-height: 100%;\n        width: 100px;\n        height: 100px;\n        contain: strict;\n        display: block;\n\n        content: '0aZ!@#$~^&*()_-+[]{}|;:><?\\0460\\0301\\0900\\1F00\\0370\\0102\\0100\\28EB2\\28189\\26DA0\\25A9C\\249BB\\23F61\\22E8B\\21927\\21076\\2048E\\1F6F5\\FF37\\F94F\\F0B2\\9F27\\9D9A\\9BEA\\9A6B\\98EC\\9798\\9602\\949D\\9370\\926B\\913A\\8FA9\\8E39\\8CC1\\8B26\\8983\\8804\\8696\\8511\\83BC\\828D\\8115\\7F9A\\7E5B\\7D07\\7B91\\7A2C\\78D2\\776C\\7601\\74AA\\73B9\\7265\\70FE\\6FBC\\6E88\\6D64\\6C3F\\6A9C\\6957\\67FE\\66B3\\6535\\63F2\\628E\\612F\\5FE7\\5E6C\\5CEE\\5B6D\\5A33\\58BC\\575B\\5611\\54BF\\536E\\51D0\\505D\\4F22\\4AD1\\41DB\\3B95\\3572\\2F3F\\26FD\\25A1\\2477\\208D\\1D0A\\1FB\\A1\\A3\\B4\\2CB\\60\\10C\\E22\\A5\\4E08\\B0\\627\\2500\\5E\\201C\\3C\\B7\\23\\26\\3E\\D\\20\\25EE8\\1F235\\FFD7\\FA10\\F92D\\9E8B\\9C3E\\9AE5\\98EB\\971D\\944A\\92BC\\9143\\8F52\\8DC0\\8B2D\\8973\\87E2\\8655\\84B4\\82E8\\814A\\7F77\\7D57\\7BC8\\7A17\\7851\\768C\\7511\\736C\\7166\\6F58\\6D7C\\6B85\\69DD\\6855\\667E\\64D2\\62CF\\6117\\5F6C\\5D9B\\5BBC\\598B\\57B3\\5616\\543F\\528D\\50DD\\4F57\\4093\\3395\\32B5\\31C8\\3028\\2F14\\25E4\\24D1\\2105\\2227\\A8\\2D9\\2CA\\2467\\B1\\2020\\2466\\251C\\266B\\AF\\4E91\\221E\\2464\\2266\\2207\\4E32\\25B3\\2463\\2010\\2103\\3014\\25C7\\24\\25BD\\4E18\\2460\\21D2\\2015\\2193\\4E03\\7E\\25CB\\2191\\25BC\\3D\\500D\\4E01\\25\\30F6\\2605\\266A\\40\\2B\\4E16\\7C\\A9\\4E\\21\\1F1E9\\FEE3\\F0A7\\9F3D\\9DFA\\9C3B\\9A5F\\98C8\\972A\\95B9\\94E7\\9410\\92B7\\914C\\8FE2\\8E2D\\8CAF\\8B5E\\8A02\\8869\\86E4\\8532\\83B4\\82A9\\814D\\7FFA\\7ED7\\7DC4\\7CCC\\7BC3\\7ACA\\797C\\783E\\770F\\760A\\74EF\\73E7\\72DD\\719C\\7005\\6ED8\\6DC3\\6CB2\\6A01\\68E1\\6792\\663A\\64F8\\63BC\\623B\\60FA\\5FD1\\5EA3\\5D32\\5BF5\\5AB2\\5981\\5831\\570A\\5605\\5519\\53FB\\52A2\\5110\\4FE3\\4EB8\\3127\\279C\\2650\\254B\\23E9\\207B\\1D34\\2AE\\176\\221A\\161\\200B\\300C\\4E4C\\1F921\\FF78\\FA0A\\F78A\\9EB9\\9D34\\9BD3\\9A6F\\9912\\97C6\\964E\\950C\\93E4\\92E5\\91F0\\90BB\\8F68\\8E18\\8B6C\\89F6\\889B\\874C\\8602\\84B1\\8378\\826E\\8113\\7FB1\\7EAF\\7D89\\7C20\\7AFB\\7988\\7840\\7705\\75CC\\749A\\73B3\\727F\\7113\\6FE8\\6ED6\\6DD3\\6CDA\\6BBB\\6A31\\6900\\67D9\\66A7\\655D\\6427\\630D\\61C6\\60AC\\5F78\\5E34\\5CE0\\5B80\\5A51\\590B\\57A1\\566F\\5551\\543D\\52DB\\518F\\5032\\3A17\\305C\\2749\\264A\\2567\\2476\\2139\\1EC0\\11AF\\2C8\\1AF\\E17\\2190\\2022\\2502\\2312\\2025\\50';\n\n        user-select: none !important;\n        pointer-events: none !important;\n    }\n\n  ":"",g=l?`\n\n\n    tp-yt-paper-tooltip[role="tooltip"] {\n      box-sizing: content-box !important;\n      margin: 0px !important;\n      padding: 0px !important;\n      contain: none !important;\n    }\n\n    tp-yt-paper-tooltip[role="tooltip"] #tooltip[style-target="tooltip"] {\n      box-sizing: content-box !important;\n      display: inline-block;\n      contain: none !important;\n    }\n\n\n    tp-yt-paper-tooltip[role="tooltip"] #tooltip[style-target="tooltip"]{\n      max-width: ${l};\n      width: max-content;\n      text-overflow: ellipsis;\n      overflow: hidden;\n      white-space: nowrap;\n    }\n\n\n  `:"",v="undefined"!=typeof unsafeWindow?unsafeWindow:this instanceof Window?this:window,b="mchbwnoasqph";if(v[b])throw new Error("Duplicated Userscript Calling");v[b]=!0,setTimeout,clearTimeout;const w=setInterval,C=(clearInterval,m.prototype.__shady_native_appendChild||m.prototype.appendChild,m.prototype.__shady_native_removeChild||m.prototype.removeChild),A=e=>{for(const t in e)if(e.hasOwnProperty(t)&&"object"==typeof e[t])return t;return null};class E extends Set{constructor(e){super(),this.limit=e}add(e){if(!super.has(e)){super.add(e);let t=super.size-this.limit;if(t>0){const e=super.values();do{const t=e.next().value;super.delete(t)}while(--t>0)}}}removeAdd(e){super.delete(e),this.add(e)}}class S{constructor(){this.p=u.resolve()}lockWith(e){this.p=this.p.then(()=>new u(e).catch(console.warn))}}const k=((e,t)=>{const n=(n,o)=>{e=n,t=o};return class extends u{constructor(o=n){super(o),o===n&&(this.resolve=e,this.reject=t)}}})();let I=e=>{if(I=e=>e,"undefined"!=typeof trustedTypes&&null===trustedTypes.defaultPolicy){let e=e=>e;trustedTypes.createPolicy("default",{createHTML:e,createScriptURL:e,createScript:e})}return e},T=null,R=null,x=null;const D=`${Math.floor(314159265359*Math.random()+314159265359).toString(36)}`,O=new Map;O.set=O.setOriginal||O.set;let N=null;const M=(e,t,n)=>{const o="string"==typeof e?e:"string"==typeof(e||0).component?(e||0).component:"";if(o&&t.id&&t.fullDurationSec){n||console.warn("[yt-chat] REUSE_TICKER: reuse bool is false");const e=O.get(`<${o}>${t.id}:${t.fullDurationSec}`),i=Re(e);if(i&&!1===i.isAttached){const e=i.hostElement;if(e instanceof m&&!1===e.isConnected&&null===e.parentNode&&e.getAttribute("__reuseid__")===D&&(e.hasAttribute("__nogc__")&&u.resolve(e).then(e=>{e.isConnected&&e.removeAttribute("__nogc__")}),!i.__dataInvalid&&i.__dataEnabled&&i.__dataReady)){if(!N){let e=document.createElement("noscript");e.style.all="unset",document.body.prepend(e),N=e}N.appendChild(e),i.__dataInvalid=!1,i.__dataEnabled=!0,i.__dataReady=!0,i.__data&&(i.__data=Object.assign({},i.__data)),i.__dataPending={},i.__dataOld={};try{i.markDirty()}catch(e){}try{i.markDirtyVisibilityObserver()}catch(e){}try{i.wasPrescan=i.wasVisible=!1}catch(e){}return e}}}},F=(e,t,n)=>{"number"==typeof n&&(n=n.toFixed(3));const o=e.style.getPropertyValue(t);return!(""!==o&&Math.abs(o-n)<1e-5||(e.style.setProperty(t,n),0))},B=e=>e?e.polymerController||e.inst||e||0:e||0,P=(()=>{let e=null,t=null,n=null;return setInterval(()=>{e&&e.resolve(),e=t,t=n,n=null},345.00123),()=>n||(n=new k)})(),L={get length(){return 0}},$=e=>(e instanceof Node&&1!==e.nodeType&&!e.children&&(e.children=L),e),q=$(document.createComment("1"));let j=new k;new MutationObserver(()=>{j.resolve(),j=new k}).observe(q,{characterData:!0});let W=u.resolve(),G=null,K=null,z=null,H=null,U=!1;const Y=()=>{Z&&(console.log("updateTickerCurrentTime"),H&&Re(H)||(H=Te(document.querySelector("yt-live-chat-ticker-renderer"))),U=!0);const e=Re(H),t=U?Date.now()/1e3-V/1e3:G;e instanceof m&&t>=0&&F(e,"--ticker-current-time",t)},V=+new Date(Math.floor(performance.timeOrigin))-1e3;let X=!1,Q=0,J=!1;const Z=!1,ee=document.getElementsByTagName("ticker-bg-overlay"),te=()=>{if(!Z&&0===ee.length)return;J=!1;const e=Date.now();e-Q>375&&(Q=e,Y())},ne=(e=!1)=>{(!0===e||U)&&(J||(J=!0,u.resolve().then(te)))},oe=()=>{X||(X=!0,document.addEventListener("yt-action",()=>{ne(!0)},!0),ne(!0),w(ne,400))};Z&&oe();const ie=e=>e&&B(e).constructor.prototype||null,re=(e,t)=>Function.prototype.bind.call(console.log,console,`%c ${e}`,"background: #222; color: #bada55",t),se=e=>e()||(console.assert(!1,`${e}`),!1),ae=(e,t)=>{if(!e||"function"!=typeof e)return void console.warn("f is not a function",e);let n=`${e}`,o=0,i=-1,r=0,s=" ";for(let e=0,t=n.length;e<t;e++){let t=n[e];t>="a"&&t<="z"||t>="A"&&t<="Z"?(i<e-1&&(r++,"$"===s&&o--),i=e):o++,s=t}let a=`${e.length}.${o}.${r}`;return t?a===t||(console.warn("fnIntegrity=false",a),!1):a};(()=>{const e=e=>{e&&(e.kevlar_should_maintain_stable_list=!0,e.kevlar_tuner_should_test_reuse_components=!0,e.kevlar_tuner_should_reuse_components=!0,e.enable_shadydom_free_scoped_node_methods=!1,e.enable_shadydom_free_scoped_query_methods=!1,e.enable_shadydom_free_scoped_readonly_properties_batch_one=!1,e.enable_shadydom_free_parent_node=!1,e.enable_shadydom_free_children=!1,e.enable_shadydom_free_last_child=!1)},t=t=>{if(t=t||(()=>{try{return ytcfg.data_}catch(e){}return null})()){const{EXPERIMENT_FLAGS:n,EXPERIMENTS_FORCED_FLAGS:o}=t;n&&(e(n),o&&e(o))}};window._ytConfigHacks.add(e=>{t(e)}),t()})();{let e=new MutationObserver(()=>{if(!e)return;let t=document.head;if(!t)return;e.disconnect(),e.takeRecords(),e=null;let n=document.createElement("meta");n.setAttribute("name","google"),n.setAttribute("content","notranslate"),t.appendChild(n)});e.observe(document,{subtree:!0,childList:!0})}CSS.supports("contain","layout paint style")||console.warn("Your browser does not support css property 'contain'.\nPlease upgrade to the latest version.".trim());const le=CSS.supports("overflow-anchor","auto");le||console.warn("Your browser does not support css property 'overflow-anchor'.\nPlease upgrade to the latest version.".trim());const ce=le&&"function"==typeof ResizeObserver;let de=!1;const he=(e,t)=>{let n=null;try{n=Object.getOwnPropertyDescriptor(e,t).get}catch(e){}return"function"==typeof n?e=>{try{return n.call(e)}catch(e){}return e[t]}:e=>e[t]},ue=he(Node.prototype,"parentNode"),pe=he(m.prototype,"previousElementSibling"),me=he(m.prototype,"nextElementSibling"),fe=he(m.prototype,"lastElementChild");let _e=[],ye=0;const[ge]=[console],ve={log(...e){if(a)return 1===ye?be(...e):ge.log(...e)},warn(...e){if(a)return 1===ye?we(...e):ge.warn(...e)},debug(...e){if(a)return 1===ye?Ce(...e):ge.debug(...e)}},be=(...e)=>{for(const t of e){if("string"!=typeof t)break;if(t.endsWith("OK"))return}_e.push(["log",...e])},we=(...e)=>{_e.push(["warn",...e])},Ce=(...e)=>{_e.push(["debug",...e])},Ae=(e,t)=>{if(!a)return;0!==ye&&ge.warn("groupDI in groupCollapsed fails",ye),ye++,_e.length=0;let n="groupCollapsed";s&&(n="group"),_e.push([n,`%c${e}%c${t}`,"background-color: #010502; color: #6acafe; font-weight: 700; padding: 2px;","background-color: #010502; color: #6ad9fe; font-weight: 300; padding: 2px;"])},Ee=()=>{if(a&&(ye--,0!==ye&&ge.warn("groupDI in groupEnd fails",ye),_e.length>=0)){let e=!1;for(const t of _e)if("group"!==t[0]&&"groupCollapsed"!==t[0]&&"[Begin]"!==t[1]&&"[End]"!==t[1]){e=!0;break}if(e){for(const e of _e){const t=e.slice(1);let n="";for(const e of t){if("string"!=typeof e){n="";break}"OK"===e||"NG"===e?n=e:e.endsWith(" OK")?n="OK":e.endsWith(" NG")&&(n="NG")}let o=t;n&&(o=[t.map(e=>`%c${e}`).join(" "),...t.map(e=>"OK"===n&&e.includes(n)?"background-color:rgb(29, 29, 29); color:rgb(57, 215, 83); font-weight: 600;":"NG"===n&&e.includes(n)?"background-color:rgb(29, 29, 29); color:rgb(215, 133, 57); font-weight: 600;":"background-color:rgb(29, 29, 29); color:rgb(231, 231, 231); font-weight: 400;")]),console[e[0]](...o)}console.groupEnd(),_e.length=0}}},Se="ytI-ce-registry-created",ke=new u(e=>{if("undefined"==typeof customElements){"__CE_registry"in document||Object.defineProperty(document,"__CE_registry",{get(){},set(e){return"object"==typeof e&&(delete this.__CE_registry,this.__CE_registry=e,this.dispatchEvent(new CustomEvent(Se))),!0},enumerable:!1,configurable:!0});let t=()=>{document.removeEventListener(Se,t,!1);const n=e;e=null,t=null,n()};document.addEventListener(Se,t,!1)}else e()}),Ie="undefined"!=typeof ResizeObserver?e=>new u(t=>{let n=new ResizeObserver(e=>{e&&e.length>=1&&(t(),n.disconnect(),n=null)});n.observe(e)}):e=>new u(t=>{let n=new c(e=>{e&&e.length>=1&&(t(),n.disconnect(),n=null)});n.observe(e)}),Te="function"==typeof WeakRef?e=>e?new WeakRef(e):null:e=>e||null,Re=e=>e&&e.deref?e.deref():e,{insertBeforeNaFn:xe,appendChildNaFn:De}=(()=>{const e=m.prototype.insertBefore,t=m.prototype.appendChild;return{insertBeforeNaFn:(t,n,o)=>{e.call(t,n,o)},appendChildNaFn:(e,n)=>{t.call(e,n)}}})();let Oe=0;const Ne=[];let Me=null;const Fe=()=>Me||(Me=u.all([customElements.whenDefined("yt-live-chat-app"),customElements.whenDefined("yt-live-chat-renderer")]).then(async()=>{const e="yt-live-chat-renderer";let t=document.querySelector(e);if(t)console.log("[yt-chat-lcr] lcr exists");else{let n=null;const o=document.querySelector("yt-live-chat-app")||document.createElement("yt-live-chat-app"),i=ie(o);let r,s=0,a=!1;t=await new u(t=>{if("function"==typeof i.createComponent_&&!i.createComponent99_&&3===i.createComponent_.length)return console.log("[yt-chat-lcr] lcaProto.createComponent_ is found"),i.createComponent99_=i.createComponent_,i.createComponent98_=function(e,n,o){const i=M(e,n,o);if(void 0!==i)return i;const r=this.createComponent99_(e,n,o);if("yt-live-chat-renderer"===(("string"==typeof e?e:(e||0).component)||`${(r||0).nodeName}`.toLowerCase())&&!a){s=1,Oe|=1;for(const e of Ne)e(r);Ne.length=0,t(r),console.log("[yt-chat-lcr] element found by method 1")}return r},void(i.createComponent_=i.createComponent98_);const o=document.getElementsByTagName(e);r=()=>{const e=o[0];e&&(s=2,Oe|=2,t(e),console.log("[yt-chat-lcr] element found by method 2"))},n=new MutationObserver(r),n.observe(document,{subtree:!0,childList:!0,attributes:!0}),document.addEventListener("yt-action",r,!0),r()}),a=!0,n&&(n.disconnect(),n.takeRecords(),n=null),r&&(document.removeEventListener("yt-action",r,!0),r=null),console.log(`[yt-chat-lcr] lcr appears, dom = ${document.getElementsByTagName(e).length}, method = ${s}`)}return t})),{addCssManaged:Be}=(()=>{const e=()=>{Ae("YouTube Super Fast Chat"," | Fonts Pre-Rendering");let e=document.createElement("elzm-fonts");e.id="elzm-fonts-yk75g";const t=[];let n=document.createElement("elzm-font");if(t.push(n),1&_)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontWeight=e,t.push(n);if(2&_)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily="Roboto",n.style.fontWeight=e,t.push(n);if(4&_)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily='"YouTube Noto",Roboto,Arial,Helvetica,sans-serif',n.style.fontWeight=e,t.push(n);if(8&_)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily='"Noto",Roboto,Arial,Helvetica,sans-serif',n.style.fontWeight=e,t.push(n);if(16&_)for(const e of[100,200,300,400,500,600,700,800,900])n=document.createElement("elzm-font"),n.style.fontFamily="sans-serif",n.style.fontWeight=e,t.push(n);ve.log("number of elzm-font elements",t.length),m.prototype.append.apply(e,t),(document.body||document.documentElement).appendChild(e),ve.log("elzm-font elements have been added to the page for rendering."),Ee()};let t=!1;return{addCssManaged:()=>{!t&&document.documentElement&&document.head&&(t=!0,document.head.appendChild(function(){let e=document.createElement("style");return e.id="ewRvC",e}()).textContent=`\n\n    yt-live-chat-renderer {\n      max-height: 100vh;\n    }\n\n    @property --ticker-rtime {\n      syntax: "<percentage>";\n      inherits: false;\n      initial-value: 0%;\n    }\n\n    .run-ticker {\n      --ticker-bg:linear-gradient(90deg, var(--ticker-c1),var(--ticker-c1) var(--ticker-rtime),var(--ticker-c2) var(--ticker-rtime),var(--ticker-c2));\n    }\n\n    .run-ticker,\n    yt-live-chat-ticker-renderer #items > * > #container.run-ticker,\n    yt-live-chat-ticker-renderer[class] #items[class] > *[class] > #container.run-ticker[class]\n    {\n      background: var(--ticker-bg) !important;\n    }\n\n    yt-live-chat-ticker-dummy777-item-renderer {\n      background: #00000001;\n    }\n\n    yt-live-chat-ticker-dummy777-item-renderer[dummy777] {\n      position: fixed !important;\n      top: -1000px !important;\n      left: -1000px !important;\n      font-size: 1px !important;\n      color: transparent !important;\n      pointer-events: none !important;\n      z-index: -1 !important;\n      contain: strict !important;\n      box-sizing: border-box !important;\n      pointer-events: none !important;\n      user-select: none !important;\n      max-width: 1px !important;\n      max-height: 1px !important;\n      overflow: hidden !important;\n      visibility: collapse !important;\n      display: none !important;\n    }\n\n    yt-live-chat-ticker-dummy777-item-renderer #container {\n      background: inherit;\n    }\n\n\n    ${y}\n\n    \n    tp-yt-iron-dropdown.yt-live-chat-app ytd-menu-popup-renderer  {\n        -webkit-backdrop-filter: none;\n        backdrop-filter: none;\n    }\n  \n\n    @supports (contain: layout paint style) {\n\n      \n\n    /* ------------------------------------------------------------------------------------------------------------- */\n\n    yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer #image, yt-live-chat-author-chip #chat-badges.yt-live-chat-author-chip yt-live-chat-author-badge-renderer #image img {\n        contain: layout style;\n    }\n\n    #items.style-scope.yt-live-chat-item-list-renderer {\n        contain: layout paint style;\n    }\n\n    #item-offset.style-scope.yt-live-chat-item-list-renderer {\n        contain: style;\n    }\n\n    #item-scroller.style-scope.yt-live-chat-item-list-renderer {\n        contain: size style;\n    }\n\n    #contents.style-scope.yt-live-chat-item-list-renderer, #chat.style-scope.yt-live-chat-renderer, img.style-scope.yt-img-shadow[width][height] {\n        contain: size layout paint style;\n    }\n\n    .style-scope.yt-live-chat-ticker-renderer[role="button"][aria-label], .style-scope.yt-live-chat-ticker-renderer[role="button"][aria-label] > #container {\n        contain: layout paint style;\n    }\n\n    yt-live-chat-text-message-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-membership-item-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-paid-message-renderer.style-scope.yt-live-chat-item-list-renderer, yt-live-chat-banner-manager.style-scope.yt-live-chat-item-list-renderer {\n        contain: layout style;\n    }\n\n    tp-yt-paper-tooltip[style*="inset"][role="tooltip"] {\n        contain: layout paint style;\n    }\n\n    /* ------------------------------------------------------------------------------------------------------------- */\n\n  \n\n    }\n\n    @supports (color: var(--general)) {\n\n      html {\n          --yt-live-chat-item-list-renderer-padding: 0px 0px;\n      }\n\n      \n\n    #item-offset.style-scope.yt-live-chat-item-list-renderer > #items.style-scope.yt-live-chat-item-list-renderer {\n        position: static !important;\n    }\n\n  \n\n      \n\n    /* remove YouTube constant will-change */\n    /* constant value will slow down the performance; default auto */\n\n    /* www-player.css */\n    html .ytp-contextmenu,\n    html .ytp-settings-menu {\n        will-change: unset;\n    }\n\n    /* frequently matched elements */\n    html .fill.yt-interaction,\n    html .stroke.yt-interaction,\n    html .yt-spec-touch-feedback-shape__fill,\n    html .yt-spec-touch-feedback-shape__stroke {\n        will-change: unset;\n    }\n\n    /* live_chat_polymer.js */\n    /*\n    html .toggle-button.tp-yt-paper-toggle-button,\n    html #primaryProgress.tp-yt-paper-progress,\n    html #secondaryProgress.tp-yt-paper-progress,\n    html #onRadio.tp-yt-paper-radio-button,\n    html .fill.yt-interaction,\n    html .stroke.yt-interaction,\n    html .yt-spec-touch-feedback-shape__fill,\n    html .yt-spec-touch-feedback-shape__stroke {\n        will-change: unset;\n    }\n    */\n\n    /* desktop_polymer_enable_wil_icons.js */\n    /* html .fill.yt-interaction,\n    html .stroke.yt-interaction, */\n    html tp-yt-app-header::before,\n    html tp-yt-iron-list,\n    html #items.tp-yt-iron-list > *,\n    html #onRadio.tp-yt-paper-radio-button,\n    html .toggle-button.tp-yt-paper-toggle-button,\n    html ytd-thumbnail-overlay-toggle-button-renderer[use-expandable-tooltip] #label.ytd-thumbnail-overlay-toggle-button-renderer,\n    html #items.ytd-post-multi-image-renderer,\n    html #items.ytd-horizontal-card-list-renderer,\n    html #items.yt-horizontal-list-renderer,\n    html #left-arrow.yt-horizontal-list-renderer,\n    html #right-arrow.yt-horizontal-list-renderer,\n    html #items.ytd-video-description-infocards-section-renderer,\n    html #items.ytd-video-description-music-section-renderer,\n    html #chips.ytd-feed-filter-chip-bar-renderer,\n    html #chips.yt-chip-cloud-renderer,\n    html #items.ytd-merch-shelf-renderer,\n    html #items.ytd-product-details-image-carousel-renderer,\n    html ytd-video-preview,\n    html #player-container.ytd-video-preview,\n    html #primaryProgress.tp-yt-paper-progress,\n    html #secondaryProgress.tp-yt-paper-progress,\n    html ytd-miniplayer[enabled] /* ,\n    html .yt-spec-touch-feedback-shape__fill,\n    html .yt-spec-touch-feedback-shape__stroke */ {\n        will-change: unset;\n    }\n\n    /* other */\n    .ytp-videowall-still-info-content[class],\n    .ytp-suggestion-image[class] {\n        will-change: unset !important;\n    }\n\n  \n\n      \n\n    img,\n    yt-img-shadow[height][width],\n    yt-img-shadow {\n        content-visibility: visible !important;\n    }\n\n  \n\n      yt-live-chat-item-list-renderer:not([allow-scroll]) #item-scroller.yt-live-chat-item-list-renderer {\n          overflow-y: scroll;\n          padding-right: 0;\n      }\n\n      \n\n    /* optional */\n    #item-offset.style-scope.yt-live-chat-item-list-renderer {\n        height: auto !important;\n        min-height: unset !important;\n    }\n\n    #items.style-scope.yt-live-chat-item-list-renderer {\n        transform: translateY(0px) !important;\n    }\n\n    /* optional */\n\n  \n\n      yt-icon[icon="down_arrow"] > *, yt-icon-button#show-more > * {\n          pointer-events: none !important;\n      }\n\n      #continuations, #continuations * {\n          contain: strict;\n          position: fixed;\n          top: 2px;\n          height: 1px;\n          width: 2px;\n          height: 1px;\n          visibility: collapse;\n      }\n\n      \n\n    yt-live-chat-renderer[has-action-panel-renderer] #show-more.yt-live-chat-item-list-renderer{\n        top: 4px;\n        transition-property: top;\n        bottom: unset;\n    }\n\n    yt-live-chat-renderer[has-action-panel-renderer] #show-more.yt-live-chat-item-list-renderer[disabled]{\n        top: -42px;\n    }\n\n  \n\n      \n\n    html #panel-pages.yt-live-chat-renderer > #input-panel.yt-live-chat-renderer:not(:empty) {\n        --yt-live-chat-action-panel-top-border: none;\n    }\n\n    html #panel-pages.yt-live-chat-renderer > #input-panel.yt-live-chat-renderer.iron-selected > *:first-child {\n        border-top: 1px solid var(--yt-live-chat-panel-pages-border-color);\n    }\n\n    html #panel-pages.yt-live-chat-renderer {\n        border-top: 0;\n        border-bottom: 0;\n    }\n\n  \n\n      \n\n    #input-panel #picker-buttons yt-live-chat-icon-toggle-button-renderer#product-picker {\n        contain: layout style;\n    }\n\n    #chat.yt-live-chat-renderer ~ #panel-pages.yt-live-chat-renderer {\n        overflow: visible;\n    }\n\n  \n\n    }\n\n\n    @supports (overflow-anchor: auto) {\n\n      .no-anchor * {\n          overflow-anchor: none;\n      }\n      .no-anchor > item-anchor {\n          overflow-anchor: auto;\n      }\n    \n      #item-scroller.style-scope.yt-live-chat-item-list-renderer[class] {\n        overflow-anchor: initial !important; /* whenever ENABLE_OVERFLOW_ANCHOR or not */\n      }\n    }\n\n      \n    item-anchor {\n\n        height: 1px;\n        width: 100%;\n        transform: scaleY(0.00001);\n        transform-origin:0 0;\n        contain: strict;\n        opacity:0;\n        display:flex;\n        position:relative;\n        flex-shrink:0;\n        flex-grow:0;\n        margin-bottom:0;\n        overflow:hidden;\n        box-sizing:border-box;\n        visibility: visible;\n        content-visibility: visible;\n        contain-intrinsic-size: auto 1px;\n        pointer-events:none !important;\n\n    }\n\n    html item-anchor {\n\n        height: 1px;\n        width: 1px;\n        top: auto;\n        left: auto;\n        right: auto;\n        bottom: auto;\n        transform: translateY(-1px);\n        position: absolute;\n        z-index: -1;\n\n    }\n\n    @supports (color: var(--pre-rendering)) {\n\n      @keyframes dontRenderAnimation {\n          0% {\n              background-position-x: 3px;\n          }\n          100% {\n              background-position-x: 4px;\n          }\n      }\n\n      .dont-render[class] {\n          /* visibility: collapse !important; */\n          /* visibility: collapse will make innerText become "" which conflicts with BetterStreamChat; see https://greasyfork.org/scripts/469878/discussions/197267 */\n\n          transform: scale(0.01) !important;\n          transform: scale(0.00001) !important;\n          transform: scale(0.0000001) !important;\n          transform-origin: 0 0 !important;\n          z-index: -1 !important;\n          contain: strict !important;\n          box-sizing: border-box !important;\n\n          height: 1px !important;\n          height: 0.1px !important;\n          height: 0.01px !important;\n          height: 0.0001px !important;\n          height: 0.000001px !important;\n\n          animation: dontRenderAnimation 1ms linear 80ms 1 normal forwards !important;\n\n          pointer-events: none !important;\n          user-select: none !important;\n\n      }\n\n      #sk35z {\n        display: block !important;\n\n        visibility: collapse !important;\n\n        transform: scale(0.01) !important;\n        transform: scale(0.00001) !important;\n        transform: scale(0.0000001) !important;\n        transform-origin: 0 0 !important;\n        z-index: -1 !important;\n        contain: strict !important;\n        box-sizing: border-box !important;\n\n        height: 1px !important;\n        height: 0.1px !important;\n        height: 0.01px !important;\n        height: 0.0001px !important;\n        height: 0.000001px !important;\n\n        position: absolute !important;\n        top: -1000px !important;\n        left: -1000px !important;\n\n      }\n\n    }\n\n    [rNgzQ] {\n      opacity: 0 !important;\n      pointer-events: none !important;\n    }\n\n\n    \n\n    @keyframes blinker-miuzp {\n        0%, 60%, 100% {\n            opacity: 1;\n        }\n        30% {\n            opacity: 0.6;\n        }\n    }\n\n    yt-icon-button#show-more.has-new-messages-miuzp {\n        animation: blinker-miuzp 1.74s linear infinite;\n    }\n\n  \n\n    \n\n    yt-live-chat-paid-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n    yt-live-chat-membership-item-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n    yt-live-chat-paid-sticker-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n    yt-live-chat-text-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important; /* TO_BE_REVIEWED */\n    }\n\n    yt-live-chat-auto-mod-message-renderer.yt-live-chat-item-list-renderer[whole-message-clickable] #menu.style-scope[class] {\n      pointer-events: none !important;\n    }\n\n  \n\n    ${g}\n\n    \n    [menu-visible] {\n      --sfc47-text-select: none;\n    }\n    [menu-visible] #header[id][class],\n    [menu-visible] #content[id][class],\n    [menu-visible] #header[id][class] *,\n    [menu-visible] #content[id][class] * {\n      user-select: var(--sfc47-text-select) !important;\n    }\n    [menu-visible] #menu {\n      --sfc47-text-select: inherit;\n    }\n  \n\n    \n  yt-live-chat-header-renderer.yt-live-chat-renderer #label.yt-dropdown-menu::before {\n    border:0;\n  }\n  \n\n    \n    .style-scope.yt-live-chat-ticker-renderer #animation-container[id][class] {\n      position: relative;\n      display: grid;\n      grid-auto-columns: 1fr;\n      grid-auto-rows: 1fr;\n      grid-template-columns: repeat(1, 1fr);\n      gap: 7px;\n      padding-bottom: 0;\n      margin-bottom: 0;\n      padding-top: 0;\n      align-self: flex-start;\n      flex-wrap: nowrap;\n      margin-top: 1px;\n  }\n\n  .style-scope.yt-live-chat-ticker-renderer #animation-container > [id][class] {\n      margin-top: 0px;\n      margin-bottom: 0px;\n      flex-direction: row;\n      flex-wrap: nowrap;\n      align-items: center;\n      justify-content: flex-start;\n  }\n\n  .style-scope.yt-live-chat-ticker-renderer #animation-container > [id][class]:first-child::after {\n      content: '補';\n      visibility: collapse;\n      display: inline-block;\n      position: relative;\n      width: 0;\n      line-height: 22px;\n  }\n\n  \n\n    \n    #card  #author-name-chip > yt-live-chat-author-chip[single-line] {\n        flex-wrap: nowrap;\n        white-space: nowrap;\n        display: inline-flex;\n        flex-direction: row;\n        text-wrap: nowrap;\n        flex-shrink: 0;\n        align-items: center;\n    }\n\n    #card  #author-name-chip {\n        display: inline-flex;\n        flex-direction: row;\n        align-items: flex-start;\n    }\n  \n\n    \n    yt-live-chat-banner-manager#live-chat-banner.style-scope.yt-live-chat-item-list-renderer {\n      max-width: 100%;\n      box-sizing: border-box;\n    }\n  \n\n    \n    #reaction-control-panel-overlay[class] {\n      contain: strict;\n      margin: 0;\n      padding: 0;\n      border: 0;\n      box-sizing: border-box;\n      will-change: initial;\n    }\n    #reaction-control-panel-overlay[class] *[class] {\n      will-change: initial;\n    }\n  \n\n    \n\n      ticker-bg-overlay {\n        display: block;\n        position: absolute;\n        z-index: -1;\n        box-sizing: border-box;\n        border: 0;\n        padding: 0;\n        margin: 0;\n        width: 200%;\n        top: 0;\n        bottom: 0;\n        left: clamp(-100%, calc( -100% * ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) ), 0%);\n        contain: strict;\n        pointer-events: none;\n      }\n      ticker-bg-overlay-end2 {\n\n        all:unset;\n        position: fixed;\n        display: block;\n        margin-left: -0.5px;\n        top: 8px;\n        left: clamp(-250px, calc( 250px * ( ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) - 1 ) ), 2px);\n\n        width: 1px;\n        height: 1px;\n        opacity: 0;\n        pointer-events: none;\n        box-sizing: border-box;\n        border: 0;\n        padding: 0;\n        margin: 0;\n        contain: strict;\n        z-index: -1;\n        visibility: collapse;\n\n\n      }\n\n\n        /* .r6-closing-ticker is provided in ADVANCED_TICKING */\n        /* so .r6-width-adjustable is only available for ADVANCED_TICKING too */\n\n        /* DO NOT use .r6-width-adjustable ~ .r6-width-adjustable  => very laggy */\n\n        /*\n        yt-live-chat-ticker-renderer {\n          --r6-transition-duration: 0.2s;\n        }\n\n        .r6-width-adjustable, .yt-live-chat-ticker-stampdom {\n          --r6-transition-duration-v: var(--r6-transition-duration);\n          transition: var(--r6-transition-duration-v);\n        }\n\n        .r6-width-adjustable-f {\n          --r6-transition-duration-v: 0s;\n        }\n\n        .r6-closing-ticker[class] {\n          --r6-transition-duration-v: var(--r6-transition-duration);\n        }\n          */\n\n\n\n        .r6-width-adjustable {\n          --r6-min-width: 0;\n          min-width: var(--r6-min-width);\n        }\n\n        .r6-width-adjustable-f {\n          --r6-min-width: max-content;\n        }\n\n        .r6-closing-ticker[class] {\n          --r6-min-width: 0;\n        }\n\n  \n\n    \n\n    :root {\n      --ticker-items-gap: 8px;\n    }\n    #ticker-items.yt-live-chat-ticker-renderer {\n        position: relative;\n        transform: translateZ(1px);\n        box-sizing: border-box;\n        contain: style;\n        display: flex;\n        flex-direction: row;\n        gap: var(--ticker-items-gap);\n    }\n    #container.yt-live-chat-ticker-renderer {\n        contain: layout paint style;\n    }\n\n    .yt-live-chat-ticker-stampdom {\n      position: static;\n      width: max-content;\n      content-visibility:auto;\n    }\n    .yt-live-chat-ticker-stampdom[class] {\n      transition: none;\n    }\n    .yt-live-chat-ticker-stampdom-container {\n      position: static;\n      width: max-content;\n      content-visibility:auto;\n    }\n\n    .yt-live-chat-ticker-stampdom {\n      margin-right:0 !important; /* flex gap 8px */\n    }\n\n    \n    /* default animation */\n    .yt-live-chat-ticker-stampdom {\n        animation: ticker-shown-animation 220ms ease-in 0s 1 normal forwards;\n    }\n    \n   \n    /* default animation */\n    @keyframes ticker-shown-animation {\n        0%, 70%, 100% { opacity: 1; }\n        30% { opacity: 0.2; }\n    }\n\n\n  \n\n  `,_&&u.resolve().then(e))}}})(),{setupStyle:Pe}=(()=>{const e=Symbol();return{setupStyle:(t,n)=>{const o={transform:"",height:"",minHeight:"",paddingBottom:"",paddingTop:""},i=t=>function(){return this[e][t](...arguments)};for(const e of["toString","getPropertyPriority","getPropertyValue","item","removeProperty","setProperty"])o[e]=i(e);const r=(s=o,{get:(t,n)=>n in s?s[n]:n===e?t:t[n],set:(e,t,n)=>(t in s||(e[t]=n),!0),has:(e,t)=>t in e,deleteProperty:()=>!0,ownKeys:e=>Object.keys(e),defineProperty:(e,t,n)=>Object.defineProperty(e,t,n),getOwnPropertyDescriptor:(e,t)=>Object.getOwnPropertyDescriptor(e,t)});var s;const a=new Proxy(t.style,r),l=new Proxy(n.style,r);Object.defineProperty(t,"style",{get:()=>a,set(){},enumerable:!0,configurable:!0}),Object.defineProperty(n,"style",{get:()=>l,set(){},enumerable:!0,configurable:!0}),t.removeAttribute("style"),n.removeAttribute("style")}}})();let Le=null;const $e=new E(512),qe=new E(68),je=function(){this.resolveFn({link:this,success:!0}),this.remove()},We=function(){this.resolveFn({link:this,success:!1}),this.remove()},Ge=e=>u.resolve(e).then(e=>{for(const t of e.getElementsByTagName("*")){const e=B(t);if("function"==typeof e.dispose&&0===e.dispose.length)try{e.dispose()}catch(e){}else if("function"==typeof t.dispose&&0===t.dispose.length)try{t.dispose()}catch(e){}}}).catch(console.warn);new MutationObserver(()=>{const e=document.querySelectorAll("[ticker-message-removed]:nth-child(n + 40)");for(const t of e)B(t).requestRemoval()}).observe(document,{subtree:!0,attributes:!0,attributeFilter:["ticker-message-removed"]});let Ke=!1;(async e=>{const t=requestAnimationFrame;try{let n=16;const o="vanillajs-iframe-v1";let i=document.getElementById(o),r=null;if(!i){i=document.createElement("iframe"),i.id=o;const s="function"==typeof webkitCancelAnimationFrame&&"undefined"==typeof kagi?i.src=URL.createObjectURL(new Blob([],{type:"text/html"})):null;i.sandbox="allow-same-origin";let a=document.createElement("noscript");for(a.appendChild(i);!document.documentElement&&n-- >0;)await new u(t);document.documentElement.appendChild(a),s&&u.resolve().then(()=>URL.revokeObjectURL(s)),r=t=>{const n=o=>{o&&e.removeEventListener("DOMContentLoaded",n,!1),o=a,a=e=r=0,t?t(()=>o.remove(),200):o.remove()};t&&"loading"===document.readyState?e.addEventListener("DOMContentLoaded",n,!1):n()}}for(;!i.contentWindow&&n-- >0;)await new u(t);const s=i.contentWindow;if(!s)throw"window is not found.";try{const{requestAnimationFrame:t,setTimeout:n,cancelAnimationFrame:o,setInterval:i,clearInterval:a,getComputedStyle:l}=s,c={requestAnimationFrame:t,setTimeout:n,cancelAnimationFrame:o,setInterval:i,clearInterval:a,getComputedStyle:l};for(let t in c)c[t]=c[t].bind(e);r&&u.resolve(c.setTimeout).then(r);const d=s.HTMLElement.prototype,h=s.EventTarget.prototype;return{...c,animate:d.animate,addEventListener:h.addEventListener,removeEventListener:h.removeEventListener}}catch(e){return r&&r(),null}}catch(e){return console.warn(e),null}})(v).then(e=>{if(!e)return null;const{requestAnimationFrame:n,setTimeout:s,cancelAnimationFrame:a,setInterval:l,clearInterval:d,animate:_,getComputedStyle:y,addEventListener:g,removeEventListener:b}=e,w=(new r,(()=>{try{const e=document.createElement("canvas");return!(!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}})()),E=(()=>{if(w)return null;const e=Object.getOwnPropertyDescriptor(Document.prototype,"visibilityState");if(!e||"function"!=typeof e.get)return null;const t=e.get;let n=null,o="hidden"===t.call(document);return h.call(document,"visibilitychange",()=>{const e="hidden"===t.call(document);o!==e&&(o=e,!o&&n&&(n=n.resolve()))}),()=>{if(n)return n;const e=(!o&&s(()=>{o||n!==e||(n=n.resolve())}),n=new k);return e}})();let N=null;const L=E||(()=>N||(N=new u(e=>{n(t=>{N=null,e(t)})})));let Q=null,Z=null,ee=null,te=0,le=!1,he=!1,_e=0,ye=null;const ge=new r;let be=Date.now()-2e3;const we=()=>Date.now()-be;let Ce=0,Se=0,Me=!1,je=0,We=0,ze=!1,He=0,Ue=null;const Ye=Object.getOwnPropertyDescriptor(Element.prototype,"firstElementChild"),Ve=Symbol();Object.defineProperty(Element.prototype,Ve,Ye);const Xe=Object.getOwnPropertyDescriptor(Element.prototype,"lastElementChild"),Qe=Symbol();Object.defineProperty(Element.prototype,Qe,Xe);const Je=Object.getOwnPropertyDescriptor(Element.prototype,"previousElementSibling"),Ze=Symbol();Object.defineProperty(Element.prototype,Ze,Je);const et=Object.getOwnPropertyDescriptor(Element.prototype,"nextElementSibling"),tt=Symbol();Object.defineProperty(Element.prototype,tt,et);const nt=e=>{for(e=e[Ve];e instanceof Element&&!e.is;)e=e[tt];return e},ot=e=>{do{e=e[tt]}while(e instanceof Element&&!e.is);return e},it=performance.constructor.prototype.now.bind(performance),rt="function"==typeof queueMicrotask?queueMicrotask:e=>{u.resolve().then(e)},st=function(e,t=!0){if(!(e||0).length)throw new TypeError("Illegal invocation");return new u(n=>{let o=null;const i=e.length,r=new Array(i),s=()=>new u(e=>{o=e});let a=0;const l=()=>{if(e.length!==i)throw new TypeError("Illegal invocation");const t=o;let n=0,s=0;e.forEach((e,t)=>{if("object"!=typeof(e||0))throw new TypeError("Illegal invocation");e.fired||rt(()=>{if(s||e.fired)return;e.fired=!0,++a===i&&(s|=2),n||(n=it()+10);const{fn:o}=e;r[t]=o(e),it()>n&&(s|=1)})}),rt(()=>t(s))},c=e=>{if(!e)throw new TypeError("Illegal invocation");if(2&e)1&e?f(()=>n(r)):n(r);else{const e=s();f(l),e.then(c)}},d=s();t?f(l):l(),d.then(c)})},at=new r,lt=(e,t)=>{let n=0;const o=function(e){const t=e.target;t&&1===t.nodeType&&"IMG"===t.nodeName&&(n=1+(1073741823&n))},{key:i,stamperDomClass:s,preloadFn:a}=t,l=document.createElementNS("http://www.w3.org/2000/svg","defs");document.documentElement.insertAdjacentHTML("beforeend",I("\x3c!----\x3e")),$(document.documentElement.lastChild),document.documentElement.lastChild.replaceWith(l);const c=document.createElement("ns-538");l.insertAdjacentHTML("beforeend",I("\x3c!----\x3e")),$(l.lastChild),l.lastChild.replaceWith(c);const d=document.createElementNS("http://www.w3.org/2000/svg","defs");"function"==typeof c.attachShadow?c.attachShadow({mode:"open"}).replaceChildren(d):(c.insertAdjacentHTML("beforeend",I("\x3c!----\x3e")),$(c.lastChild),c.lastChild.replaceWith(d));const h=document.createElementNS("http://www.w3.org/2000/svg","defs");d.insertAdjacentHTML("beforeend",I("\x3c!----\x3e")),$(d.lastChild),d.lastChild.replaceWith(h),h.addEventListener("load",o,!0),h.addEventListener("error",o,!0);const p=new Map;p.set=p.setOriginal||p.set;const m=new Map;m.set=m.setOriginal||m.set;const _=new r,y=`${i}$$c472`;let g=!1;e.__ensureContainerDomApi7577=function(e){const t=this.getStampContainer_(e);if(t&&!t.__checkedDomApi33__&&(t.__checkedDomApi33__=!0,!t.__domApi&&"function"==typeof this.stampDomArray366_&&6===this.stampDomArray366_.length)){let n=t;try{this.stampDomArray366_.call({getStampContainer_:()=>n,get is(){throw new Error("")},get hostElement(){throw new Error("")}},0,e,!1,!1,!1,!1)}catch(e){}n=null}},e[y]=async function(e,t,n){if(!this)return;const o=this.fxCounter5355=1+(1073741823&this.fxCounter5355);if(await u.all([n,f()]),o!==this.fxCounter5355)return;const i=this.ec389a,l=this.ec389r;if(this.ec389=!1,this.ec389a=0,this.ec389r=0,!i&&!l)return;const c=(this.stampDom||0)[e]||0,d=c.mapping,y=c.events;if(!d)return;if(!this.__ensureContainerDomApi7577)return;const v=this.hostElement;if(!v)return;g=!0,this.__ensureContainerDomApi7577(t);const b="tickerItems"===e,w="visibleItems"===e,C=e=>{const t=A(e);return[d[t],e[t]]};let E=0,S={},k=!1,T=this[e];const R=T.map(e=>{const[t,n]=C(e),o=this.getComponentName_(t,n);if(n&&n.id&&o){const i=`${o}#${n.id}`;n.__renderOrderId422__||(n.__renderOrderId422__=this.__renderOrderId411__=1+(1073741823&this.__renderOrderId411__));let r=S[i];return r&&(k=!0),(!r||r>n.__renderOrderId422__)&&(S[i]=n.__renderOrderId422__),[e,t,n,o,i]}return[e,t,n,o,!0]});if(k)for(let e=R.length-1;e>=0;e--){const t=R[e];let n=t[4];!0===n||S[n]===t[2].__renderOrderId422__||(T.splice(e,1),R.splice(e,1))}T=null,S=null;const x=R.map(e=>{const[t,n,o,i]=e,r=Re(at.get(o));return r&&v.contains(r)?(E++,r):r&&!v.contains(r)?(at.delete(o),t):t}),D=0===x.length;this.ec389a=0,this.ec389r=0;const O=this.getStampContainer_(t),N=e=>{const[t,n]=C(e),o=this.getComponentName_(t,n),i=p.get(o.toLowerCase());let r=null;if(i&&(r=i.firstElementChild)){this.telemetry_&&this.telemetry_.reuse++,h.insertAdjacentHTML("beforeend",I("\x3c!----\x3e")),$(h.lastChild),h.lastChild.replaceWith(r);const e=r.attributes,t=_.get(r);if(t){for(const n of[...e]){const o=n.name;o in t?n.value=t[o]:e.removeNamedItem(o)}if(e.length!==t['"'])for(const n in t)e[n]||'"'===n||r.setAttribute(n,t[n])}}else r=((e,t,n,o)=>{let i;return m.has(o)?i=m.get(o):(m.set(o,i=document.createElement(o)),i.className=s),i=i.cloneNode(!1),h.insertAdjacentHTML("beforeend",I("\x3c!----\x3e")),$(h.lastChild),h.lastChild.replaceWith(i),i})(0,0,0,o),this.telemetry_&&this.telemetry_.create++;if(b){const e=r.firstElementChild;e&&e.classList.add("yt-live-chat-ticker-stampdom-container")}return[e,t,n,r]};let M=null;if(w){const e=x.filter(e=>"object"===e&&e instanceof Node);M=a(e)()}g=!1;const F=D?[]:await st(x.map(e=>({item:e,fn(e){const{item:t}=e;return"object"!=typeof t||t instanceof Node?t:N(t)}}))),L=[],q=new Set,j=e=>{const[t,n,o,i]=e,r=this.deferRenderStamperBinding_;let s;return"object"==typeof r&&(s=this.deferRenderStamperBinding_=[]),this.deferRenderStamperBinding_(i,n,Object.assign({},o)),this.flushRenderStamperComponentBindings_(),"object"==typeof r&&(this.deferRenderStamperBinding_=r,s.length=0),_.set(i,(e=>{const t=e.attributes,n={};for(const{name:e,value:o}of t)n[e]=o;return n['"']=t.length,n})(i)),e},W=D?[]:await st(F.map(e=>({entry:e,fn(e){const{entry:t}=e;return"object"!=typeof t||t instanceof Node?t:j(t)}})));if(this.flushRenderStamperComponentBindings_(),L.length>0){const e=u.all(L).catch(()=>{}),t=P();await u.race([e,t]).catch(()=>{}),q.clear(),L.length=0}M&&await M;const G=[];await new u(e=>{f(()=>{const t=!0===this.atBottom,n=[];let o=document.createDocumentFragment(),s=null,a=null,c=null;const d={remove:e=>{const{elNode:t}=e,n=t.id;return(e=>{const t=e,n=B(t);let o=t.querySelectorAll("yt-img-shadow").length;const i=t.parentNode;t.__requestRemovalAt003__?t.__requestRemovalAt003__=0:n.requestRemoval&&n.requestRemoval();try{(i.__domApi||i).removeChild(t)}catch(e){}document.createDocumentFragment().appendChild(t);const r=t.nodeName.toLowerCase();let s=p.get(r);s||(s=document.createDocumentFragment(),p.set(r,s)),n.data&&at.delete(n.data);let a=t.querySelectorAll("yt-img-shadow").length;const[l,c]=[Ge(t),void 0];G.push(l),G.push(c),(window.__fixTemplateReuse1058__||o===a)&&u.all([t,s,l,c]).then(e=>{const[t,n]=e;n.appendChild(t)})})(t),w&&G.push((e=>u.resolve(e).then(e=>{const t=document.querySelector(`.style-scope.yt-live-chat-ticker-renderer[id="${e}"]`);t&&t.setAttribute("ticker-message-removed","")}).catch(console.warn))(n)),2},append:e=>{if(!o)return;const{newNode:n,nodeAfter:i,parentNode:r,L:l,H:d}=e;o.appendChild(n);const h=w&&t?this.itemScroller:null;h&&null===a&&(a=h.scrollTop),i?(r.__domApi||r).insertBefore(o,i):(r.__domApi||r).appendChild(o),this.deferRenderStamperBinding_(n,l,d),this.flushRenderStamperComponentBindings_();const p=n,m=B(p);return at.set(m.data,Te(p)),b&&G.push((()=>{if(!Ke)return Ke=!0,u.resolve().then(()=>{Ke=!1;const e="[ticker-message-removed]:nth-child(n + 40)";if(document.querySelector(e)){const t=document.querySelectorAll(e);for(const e of t)B(e).requestRemoval()}}).catch(console.warn)})()),h&&(null===c&&(c=h.scrollTop),null===s&&(s=a>=0&&c>=0&&Math.abs(c-a)<6),s&&(h.scrollTop=c+16777216)),1}};{const e=new r;if(!D)for(let t=nt(O),n=0;t instanceof Node;t=ot(t))e.set(t,n++);const t=new Array(E);let o=0,s=-1,a=!1;for(let n=0,i=W.length;n<i;n++){const i=W[n];if(i instanceof Node){const n=e.get(i);t[o++]=[n,i],n>s?s=n:a=!0}}t.length=o,a&&t.sort((e,t)=>e[0]-t[0]);let c,h=0,u=0;if(c=nt(O),!D)for(const o of W)if("number"==typeof e.get(o)){const r=t[h++],[s,a]=r;e.delete(o);const p=s;for(;u<p&&c;)n.push({type:"remove",elNode:c,fn:d.remove}),c=ot(c),u++;u===p&&(c?(c=ot(c),u++):console.warn("elNode is not available?",x,i,l,u,p))}else if(o instanceof Node)n.push({type:"remove",elNode:o,fn:d.remove});else if((o||0).length>=4){const[e,t,i,r]=o;n.push({type:"append",newNode:r,nodeAfter:c,parentNode:O,item:e,L:t,H:i,fn:d.append})}for(;c;)n.push({type:"remove",elNode:c,fn:d.remove}),c=ot(c)}n.length>=1&&st(n).then(()=>{o=null,e()}).catch(console.warn)})}).catch(console.warn);{const t=this[e];let n=0;n|=this._setPendingPropertyOrPath(`${e}.splices`,{},!0,!0),n|=this._setPendingPropertyOrPath(`${e}.length`,t.length,!0,!0),n&&this._invalidateProperties()}await u.all(G);const K={container:O};y&&this.hostElement.dispatchEvent(new CustomEvent("yt-rendererstamper-finished",{bubbles:!0,cancelable:!1,composed:!0,detail:K})),K.container=null},e[i]=function(e,t,n){if(g)return!0;const{index:o,addedCount:i,removed:r}=n,s=r?r.length:n.removedCount;if(n=null,!i&&!s)return console.warn("proceedStampDomArraySplices_","Error 001"),!1;if(this.ec389)this.ec389a+=i,this.ec389r+=s;else{if(this.ec389a||this.ec389r)return console.warn("proceedStampDomArraySplices_","Error 002"),!1;if("string"!=typeof(e||0)||"string"!=typeof(t||0))return console.warn("proceedStampDomArraySplices_","Error 003"),!1;this.ec389=!0,this.ec389a=i,this.ec389r=s;const n=this.ec389pr,o=this.ec389pr=this[y](e,t,n).catch(console.warn);"visibleItems"===e&&(this.prDelay288=o)}return!0}};new u(e=>{"loading"!==document.readyState?e():v.addEventListener("DOMContentLoaded",e,!1)}).then(()=>{function e(){o=document.createElement("link"),Le=o.relList&&o.relList.supports?(o.relList.supports("dns-prefetch")?1:0)+(o.relList.supports("preconnect")?2:0)+(o.relList.supports("prefetch")?4:0)+(o.relList.supports("subresource")?8:0)+(o.relList.supports("preload")?16:0):0,Ae("YouTube Super Fast Chat"," | PREFETCH SUPPORTS"),ve.log("dns-prefetch",1&Le?"OK":"NG"),ve.log("preconnect",2&Le?"OK":"NG"),ve.log("prefetch",4&Le?"OK":"NG"),ve.log("preload",16&Le?"OK":"NG"),Ee()}const t=["https://www.youtube.com","https://googlevideo.com","https://googleapis.com","https://accounts.youtube.com","https://www.gstatic.com","https://ggpht.com","https://yt3.ggpht.com","https://yt4.ggpht.com"],n=["https://youtube.com","https://fonts.googleapis.com","https://fonts.gstatic.com"];let o=null;for(const n of t)null===Le&&e(),2&Le&&(i(o,"preconnect",n),o=null);for(const t of n)null===Le&&e(),1&Le&&(i(o,"dns-prefetch",t),o=null)});const{notifyPath7081:ct}=(()=>{function e(e){return e.map(e=>{if(!e||"object"!=typeof e)return console.warn("Error(0xFA41): convertToIds",e),e;let t=Object.keys(e);if(1!==t.length)return console.warn("Error(0xFA42): convertToIds",e),e;let n=e[t[0]]||0,o=n.authorName||0,i=`${o.simpleText||o.text}`,r=e;return"string"!=typeof i?console.warn("Error(0xFA53): convertToIds",e):(i=`${n.authorExternalChannelId||"null"}|${i||""}`,i.length>1&&(r=i)),r})}const t=new S;let o=0,i=0,r=-1;const s=(e,t)=>{const n=new Set(t),o=e.map(e=>n.has(e));return n.clear(),o};let a=null;class l{constructor(e,t,n){this.index=e,this.addedCount=t,this.removed=n}get __proxy312__(){return 1}get type(){return"splice"}get object(){return Re(a)}}const c=(e,t)=>e.authorName!==t.authorName||e.authorPhoto!==t.authorPhoto||e.authorBadges!==t.authorBadges;return{notifyPath7081:function(d){if("participantsManager.participants"!==d)return this.__notifyPath5036__.apply(this,arguments);if(r===i)return;o>1e8&&(o%=100);let h=++o;const p=Te(this);t.lockWith(t=>{const d=Re(p),m=((d||0).participantsManager||0).participants||0;if(h!==o||!d||"function"!=typeof(m||0).splice)return void t();let _=!1;if(m.r94dm||(m.r94dm=1,i=1+(1073741823&i),m.push=function(){return i=1+(1073741823&i),Array.prototype.push.apply(this,arguments)},m.pop=function(){return i=1+(1073741823&i),Array.prototype.pop.apply(this,arguments)},m.shift=function(){return i=1+(1073741823&i),Array.prototype.shift.apply(this,arguments)},m.unshift=function(){return i=1+(1073741823&i),Array.prototype.unshift.apply(this,arguments)},m.splice=function(){return i=1+(1073741823&i),Array.prototype.splice.apply(this,arguments)},m.sort=function(){return i=1+(1073741823&i),Array.prototype.sort.apply(this,arguments)},m.reverse=function(){return i=1+(1073741823&i),Array.prototype.reverse.apply(this,arguments)}),r!==i&&(r=i,_=!0),!_)return void t();const y=m.slice(0),g=ge.get(d)||[];ge.set(d,y);const v=(async()=>{if(0===g.length)return 0;let t=d.__getAllParticipantsDOMRenderedLength__();if(g.length!==t)return 0;const n=e(g),o=e(y);let{indexSplices:i,contentUpdates:r}=((e,t,n,o)=>{let i=s(o,n),r=s(n,o);const c=i.length,d=r.length,h=[],u=[];a=null;for(let s=0,a=0;s<d||a<c;)if(e[s]===t[a])s++,a++;else if(n[s]===o[a])u.push({indexI:s,indexJ:a}),s++,a++;else{let t=0;for(let e=a;e<c&&!1===i[e];e++)t++;let n=0;for(let e=s;e<d&&!1===r[e];e++)n++;if(!t&&!n)throw"ERROR(0xFF32): spliceIndicesFunc";const o=new l(a,t,n>=1?e.slice(s,s+n):[]);h.push(o),s+=n,a+=t}return r=null,i=null,n=null,o=null,e=null,a=h.length>0?Te(t):null,t=null,{indexSplices:h,contentUpdates:u}})(g,y,n,o),h=1;if(i.length>=1){if(await new u(e=>{d.resolveForDOMRendering781=e,d.__notifyPath5036__("participantsManager.participants.splices",{indexSplices:i}),i=null,a=null,d.__notifyPath5036__("participantsManager.participants.length",y.length)}),await f(),t=d.__getAllParticipantsDOMRenderedLength__(),y.length!==t)return console.warn("ERROR(0xE2C3): notifyPath7081",g.length,y.length,doms.length),0;h=6}else if(i=null,a=null,y.length!==t)return 0;if(r.length>=1)for(const e of r)c(g[e.indexI],y[e.indexJ])&&(d.__notifyPath5036__(`participantsManager.participants[${e.indexJ}]`),h|=12);return r=null,h})();v.then(async e=>{const o=0===e?1:4&~e?0:2;1===o&&await new u(e=>{d.resolveForDOMRendering781=e,d.__notifyPath5036__("participantsManager.participants")}),2===o&&await new u(n),t()})})}}})(),dt=async e=>{const t=[...new Set(e)],n=t.length,o=new Array(n);for(let e=0;e<n;e++)o[e]=customElements.whenDefined(t[e]);return await u.all(o),o.length=0,t};ke.then(()=>{function e(){}function t(){}customElements.whenDefined("yt-live-chat-participant-list-renderer").then(()=>{const n="yt-live-chat-participant-list-renderer",o=ie(document.createElement(n));if(!o||"function"!=typeof o.attached)return void console.warn(`proto.attached for ${n} is unavailable.`);Ae("YouTube Super Fast Chat"," | yt-live-chat-participant-list-renderer hacks");const i=["kevlar_tuner_should_test_maintain_stable_list","kevlar_should_maintain_stable_list","kevlar_tuner_should_test_reuse_components","kevlar_tuner_should_reuse_components"],r={};for(const e of i)r[e]=void 0;try{const e=ytcfg.data_.EXPERIMENT_FLAGS;for(const t of i)r[t]=e[t]}catch(e){}ve.log(`EXPERIMENT_FLAGS: ${JSON.stringify(r,null,2)}`);const s=(()=>{if("function"!=typeof o.__notifyPath5035__||"dummy5035"===o.__notifyPath5035__.name)if("function"!=typeof o.__attached411__||"dummy411"===o.__attached411__.name)if(o.__notifyPath5035__=e,o.__attached411__=t,"function"==typeof o.flushRenderStamperComponentBindings_&&0===o.flushRenderStamperComponentBindings_.length)if("function"!=typeof o.flushRenderStamperComponentBindings66_){if("function"!=typeof o.__getAllParticipantsDOMRenderedLength__)return!0;console.warn("ERROR(0xE357): cProto.__getAllParticipantsDOMRenderedLength__")}else console.warn("ERROR(0xE356): cProto.flushRenderStamperComponentBindings66_");else console.warn("ERROR(0xE355): cProto.flushRenderStamperComponentBindings_ not found");else console.warn("YouTube Live Chat Tamer is running.");else console.warn("YouTube Live Chat Tamer is running.")})();if(ve.log(`Data Manipulation Boost = ${s}`),se(()=>ae(o.attached,"0.32.22")),"function"==typeof o.flushRenderStamperComponentBindings_){const e=ae(o.flushRenderStamperComponentBindings_);ve.log(`flushRenderStamperComponentBindings_ ### ${e} ###`)}else ve.log("flushRenderStamperComponentBindings_ - not found");"function"==typeof o.flushRenderStamperComponentBindings_&&(o.flushRenderStamperComponentBindings66_=o.flushRenderStamperComponentBindings_,o.flushRenderStamperComponentBindings_=function(){this.flushRenderStamperComponentBindings66_(),this.resolveForDOMRendering781&&(this.resolveForDOMRendering781(),this.resolveForDOMRendering781=null)}),o.__getAllParticipantsDOMRenderedLength__=function(){const e=((this||0).$||0).participants;return e?m.prototype.querySelectorAll.call(e,"yt-live-chat-participant-renderer").length:0};const a=[...document.querySelectorAll("yt-live-chat-participant-list-renderer:not(.n9fJ3)")];o.__attached412__=o.attached;const l=function(e){const t=B(e);if(ge.has(t))return;if(e.classList.add("n9fJ3"),se(()=>!0===t.__dataEnabled&&!0===t.__dataReady),"function"!=typeof t.notifyPath||void 0!==t.__notifyPath5036__)return void console.warn("ERROR(0xE318): yt-live-chat-participant-list-renderer");Ae("Participant List attached",""),t.__notifyPath5036__=t.notifyPath;const n=(t.participantsManager||0).participants||0;se(()=>n.length>-1&&"function"==typeof n.slice),ve.log(`initial number of participants: ${n.length}`);const o=n.length>=1&&"function"==typeof n.slice?n.slice(0):[];ge.set(t,o),t.notifyPath=ct,ve.log("CHECK_CHANGE_TO_PARTICIPANT_RENDERER_CONTENT = true"),Ee()};o.attached=function(){l(this.hostElement||this),this.__attached412__.apply(this,arguments)};{let e=!0;if("function"==typeof o.stampDomArray_&&6===o.stampDomArray_.length&&!o.stampDomArray_.nIegT&&!o.stampDomArray66_){let t=0;o.stampDomArray66_=o.stampDomArray_,o.stampDomArray_=function(...n){if(n[0]&&n[0].length>0&&"participants"===n[1]&&n[2]&&!0===n[3]&&!n[5]){"function"==typeof e&&(e=e()),n[5]=e;let o=Date.now();o-t>440&&(t=o,console.log("maintain_stable_list for participants list",e))}return this.stampDomArray66_.apply(this,n)},o.stampDomArray_.nIegT=1}ve.log("ENABLE_FLAGS_MAINTAIN_STABLE_LIST_FOR_PARTICIPANTS_LIST - OK")}if(Ee(),a.length>=1)for(const e of a)!0===B(e).isAttached&&l(e)}).catch(console.warn)});const ht=new class{constructor(){this.startAt=8170,this.counter=0,this.rid=0,this.funcs=new Map;const e=this.funcs;this.bCallback=this.mCallback.bind(this),this.pClear=()=>e.clear(),this.keepRAF=!1}mCallback(e){this.rid=0,u.resolve().then(this.pClear),this.funcs.forEach(t=>u.resolve(e).then(t).catch(console.warn))}request(e){const t=this.startAt+(this.counter=1+(1073741823&this.counter));return this.funcs.set(t,e),0===this.rid&&(this.rid=n(this.bCallback)),t}cancel(e){if((e=+e)>0){if(e<=this.startAt)return a(e);this.rid>0&&(this.funcs.delete(e),0!==this.funcs.size||this.keepRAF||(a(this.rid),this.rid=0))}}},ut=new WeakSet,pt=new r;let mt=0;const ft="function"!=typeof c||{capture:!0,passive:!0},_t=e=>{if(mt>0&&e.propertyName&&!e.pseudoElement){const t=e.target,n=pt.get(t);n&&(pt.delete(t),n.resolve(e.propertyName))}};if("function"==typeof Object.getOwnPropertyDescriptor&&"undefined"!=typeof Proxy){let Ct=!1;const At=HTMLDivElement.prototype,Et=function(e,t,n){return B(this).set(e,t,n)},St=function(e,t){return B(this).set(e,t)},kt=function(){console.log("dummyFn",...arguments)},It=new Map;function Tt(e){const t=e.is;if(t&&!e.set){let n=It.get(t);if(!n){n=1;const o=B(e);if(o!==e&&o&&"function"==typeof o.set){const e=o.constructor.prototype.set;e&&"function"==typeof e&&3===e.length?n=Et:e&&"function"==typeof e&&2===e.length&&(n=St)}It.set(t,n)}e.set="function"==typeof n?n:kt}}if(!At.__children577__&&!At.__children578__){const Rt=Object.getOwnPropertyDescriptor(Element.prototype,"children"),xt=Object.getOwnPropertyDescriptor(m.prototype,"children"),Dt=Object.getOwnPropertyDescriptor(At,"children");if(Rt&&!0===Rt.configurable&&!0===Rt.enumerable&&"function"==typeof Rt.get&&!xt&&!Dt&&At instanceof m&&At instanceof Element){let Ot=Object.assign({},Rt);At.__children577__=Rt.get,At.__children578__=function(){if(this.__children803__)return this.__children803__;if(this.__children801__){let e=[];for(let t=this.firstElementChild;null!==t;t=t.nextElementSibling)t.is&&(Tt(t),e.push(t));return 2===this.__children801__&&(this.__children803__=e),e}return 577},Ot.get=function(){const e=this.__children578__();return 577!==e?e:this.__children577__()},Object.defineProperty(At,"children",Ot),Ct=!0}}Ct||console.log("fixChildrenIssue - set NG")}const yt=()=>{const e=e=>{const t=Re(e);return t&&t.isConnected?t:null},t=()=>{u.resolve().then(()=>{const t=document.querySelector("#show-more[disabled]");let n=t?Te(t):null,o=null;for(const e of document.querySelectorAll("[wsr93]"))"visible"===e.getAttribute("wsr93")&&(o=Te(e)),e.setAttribute("wsr93","");L().then(()=>{const t=e(n);if(n=null,t)t.click();else{const t=e(o);o=null,t&&u.resolve().then(()=>t.scrollIntoView()).then(()=>t.scrollIntoView(!1)).then(()=>t.scrollIntoView({behavior:"instant",block:"end",inline:"nearest"})).catch(()=>{})}})}).catch(console.warn)},n=new MutationObserver(e=>{for(const n of e){if((n.addedNodes||0).length>=1)for(const e of n.addedNodes)if("STYLE"===e.nodeName)return void t();if((n.removedNodes||0).length>=1)for(const e of n.removedNodes)if("STYLE"===e.nodeName)return void t()}});n.observe(document.documentElement,{childList:!0,subtree:!1}),n.observe(document.head,{childList:!0,subtree:!1}),n.observe(document.body,{childList:!0,subtree:!1})},{lcRendererElm:gt,visObserver:vt}=(()=>{let e=null,t=!1;const n=e=>{const n=e.target;n&&n.hasAttribute("wsr93")&&(!0===e.isIntersecting&&e.intersectionRatio>.5?(n.setAttribute("wsr93","visible"),null===me(n)||t||(t=!0)):"visible"===n.getAttribute("wsr93")&&n.setAttribute("wsr93","hidden"))};return{lcRendererElm:()=>{let t=Re(e);return t&&t.isConnected||(t=document.querySelector("yt-live-chat-item-list-renderer.yt-live-chat-renderer"),e=t?Te(t):null),t},visObserver:new c(e=>{for(const t of e)u.resolve(t).then(n)},{rootMargin:"0px",threshold:[.05,.95]})}})(),bt="function"==typeof ResizeObserver&&ce?new ResizeObserver(e=>{const t=(e[e.length-1]||0).target;if(!t)return;const n=t.closest("yt-live-chat-item-list-renderer");if(!n)return;const o=B(n);0!==o.visibleItems.length&&!0===o.atBottom&&(t.scrollTop=16777216)}):null,{setupMutObserver:wt}=(()=>{const e=e=>{let t=-1;const n=new Set;n.add=n.addOriginal||n.add;for(let o=fe(e);null!==o;o=pe(o)){let e=o.hasAttribute("wsr93")?o.hasAttribute("yt-chat-item-seq")?2:1:0;if(1===e&&o.removeAttribute("wsr93"),2===e){t=parseInt(o.getAttribute("yt-chat-item-seq"),10);break}vt.unobserve(o),o.setAttribute("wsr93",""),vt.observe(o),n.add(o)}let o=n.values(),i=t+n.size;for(let e;e=o.next().value;)e.setAttribute("yt-chat-item-seq",i%60),e.classList.add("yt-chat-item-"+(i%2?"odd":"even")),i--;o=null,n.clear()},t=new MutationObserver(t=>{const n=(t[0]||0).target;n&&e(n)});return{setupMutObserver:n=>{Ue=null,t.disconnect(),t.takeRecords(),n&&("function"==typeof n.__appendChild932__&&("function"==typeof n.appendChild&&(n.appendChild=n.__appendChild932__),"function"==typeof n.__shady_native_appendChild&&(n.__shady_native_appendChild=n.__appendChild932__)),t.observe(n,{childList:!0,subtree:!1}),e(n),n&&null===n.nextElementSibling&&(n.parentNode.appendChild(document.createElement("item-anchor")),de=!0,ce&&(n.classList.add("no-anchor"),ue(n).classList.add("no-anchor"))),(()=>{const e="yt-iframed-player-events-relay",t=document.createElement(e),n=ie(t);if(n&&n.handlePostMessage_){if("function"==typeof n.handlePostMessage_&&!n.handlePostMessage66_&&!n.handlePostMessage67_){n.handlePostMessage66_=n.handlePostMessage_;const e=e=>{if(e&&"object"==typeof e)if("yt-player-state-change"in e){const t=e["yt-player-state-change"];let n=!1;2===t?(n=t!==Z,Z=2,te=0):3===t?(n=t!==Z,Z=3):1===t&&(n=t!==Z,Z=1),n&&Q!==Z&&(le=!0,x=new u(e=>{const t=Z;L().then(()=>{t===Z&&Q!==Z&&(Q=Z),x=null,e()})}).catch(console.warn))}else if("yt-player-video-progress"in e){const t=e["yt-player-video-progress"];te++,ee=t>0?t:0,R&&t>0&&te>=2&&(x?x.then(()=>{R&&R.resolve(),R=null}):(R.resolve(),R=null))}};n.handlePostMessage67_=function(t){let n=t.data;const o=Te(this);W=W.then(()=>{const i=Re(o);i&&t&&n&&(e(n),n=null,i.handlePostMessage66_(t),t=null)}).catch(console.warn)};const t=e=>{const t=document.querySelector("yt-live-chat-renderer"),n=document.querySelector("yt-player-seek-continuation");if(t&&n&&t.replayBuffer_){const o=t.replayBuffer_.lastVideoOffsetTimeMsec,i=1e3*e["yt-player-video-progress"],r=(t.replayBuffer_.replayQueue||0).front_,s=(t.replayBuffer_.replayQueue||0).back_;r&&s&&o>i&&s.length>2&&s.some(e=>e&&+e.videoOffsetTimeMsec>i)&&s.some(e=>e&&+e.videoOffsetTimeMsec<i)||o<i+3400&&o>i-1200||(t.previousProgressSec=1e-5,t.replayBuffer_.clear(),n.fireSeekContinuation_(e["yt-player-video-progress"]))}};n.handlePostMessage_=function(e){let n=(e||0).data||0;const o=Te(this);if("object"==typeof n&&1!==_e){if(!he&&(he=!0,"yt-player-video-progress"in n)){_e=1;const i=t=>{const{origin:n}=e;return{origin:n,data:t}};return this.handlePostMessage67_(i({"yt-iframed-parent-ready":!0})),void(W=W.then(()=>{const i=Re(o);i&&e&&n&&(t(n),n=null,_e=2,i.handlePostMessage_(e),e=null)}).catch(console.warn))}this.handlePostMessage67_(e)}}}}else console.warn(`proto.handlePostMessage_ for ${e} is unavailable.`)})())}}})();ke.then(()=>{function e(e,t,n,o){return(e<=t?t:e)>=(n<=o?n:o)&&(n<=o?o:n)>=(e<=t?e:t)}let l=!1;const d=()=>se(()=>location.pathname.startsWith("/live_chat")&&(location.search.indexOf("continuation=")>0||location.search.indexOf("v=")>0)),h=()=>{if(l)return;if(l=!0,!document.body||!document.head)return;if(!d())return;Be();let e=document.getElementById("elzm-fonts-yk75g");e&&e.parentNode!==document.body&&document.body.appendChild(e)};if(!d())return;const{weakWrap:_}=(()=>{const e="dtz02",t="dtz04",n="dtz08",o=t=>{if(!t)return null;const n=t[e];if(n){const e=n.ref;return(e?Re(e):null)||null}return t},i={get:(e,n)=>n===t?e:Reflect.get(e,n),apply(e,t,n){if(t=o(t))return Reflect.apply(e,t,n)}},r={get(o,r){if(r===e)return o;const s=o.ref,a=Re(s);return a?"function"!=typeof a[r]||a[r][t]||a[r][e]?a[r]:(a[r][n]||(a[r][n]=new Proxy(a[r],i)),a[r][n]):void 0},set(n,i,r){const s=Re(n.ref);return!s||(r&&(r[t]||r[e])?(s[i]=r[t]||o(r),!0):(s[i]=r,!0))}};return window.getComputedStyle533||"function"!=typeof window.getComputedStyle||(window.getComputedStyle533=window.getComputedStyle,window.getComputedStyle=function(e,...t){return(e=o(e))?getComputedStyle533(e,...t):null}),{weakWrap:e=>(e=o(e))?new Proxy({ref:Te(e)},r):(console.error("thisArg is not found"),null)}})();document.documentElement&&document.head&&Be();const y=new WeakSet,v=e=>{if(!e||"object"!=typeof e)return!1;const t=A(e);if(!t)return!1;let n=e[t];if(!n||"object"!=typeof n)return!1;if("object"==typeof(n.item||0)&&"item"===A(n)){n=n.item;const e=A(n);e&&(n=n[e])}return n},w=[];let E=0;const I=(e,t)=>{const n=130095;return e<n&&t<n?e+t:Math.round((e+t)/(1+e*t/898704e10))},N=(t,n)=>{if(n||(n=Date.now()),E||(Oe||console.error("[yt-chat] preprocessChatLiveActions might fail because of no __LCRInjection__"),E=1),!t||!t.length)return t;if(y.has(t))return t;y.add(t);const o=n;let i=null;const s=new r;{const n=w,o=t=>{const o=t-1e6,i=t+1e6;let r=!1,s=null,a=null,l=-1;for(let t=0,c=n.length;t<c;t++){const c=n[t],[d,h,u]=c;if(s>d){if(r){const e=n[a],o=I(e[2],u),i=u/(e[2]+u);e[0]+=(d-e[0])*i,e[1]+=(h-e[1])*i,e[2]=o,n[t]=null,l<0&&(l=t);continue}console.warn("logic ERROR"),n[t]=null,l<0&&(l=t);break}if(i<s)break;if(e(o,i,d,h)){r=!0;const e=d+1*(o-d)/(u+1);if(e<s){const e=n[a],r=I(I(e[2],u),1),c=u/(e[2]+u+1),p=1/(e[2]+u+1);e[0]+=(d-e[0])*c+(o-e[0])*p,s=e[1]+=(h-e[1])*c+(i-e[1])*p,e[2]=r,n[t]=null,l<0&&(l=t);continue}{const n=I(u,1);c[0]=e,c[1]=s=h+1*(i-h)/(u+1),c[2]=n,a=t}}else s=h,a=t}l>=0&&function(e,t=0){let n=t;for(let o=t;o<e.length;o++)null!==e[o]&&(n!==o&&(e[n]=e[o]),n++);e.length=n}(n,l),r||((e,t)=>{let n=0;const o=e.length;let i=o;for(;n<i;){const o=n+i>>>1;e[o][0]<t[0]?n=o+1:i=o}n===o?e.push(t):e.splice(n,0,t)})(n,[o,i,1])};let r=0;for(let e=0,n=t.length;e<n;e++){const n=t[e],i=v(n);if(!1===i)continue;let a,l=i.timestampText,c=null,d=null,h=null;l&&l.simpleText&&(a=l.simpleText);let u,p=i.timestampUsec;if(p&&+p>11105532e8&&(u=+p),u>0&&!r){const e=Math.round(u/1e6);r=e-e%1e7,e-r<2e6&&(r-=1e7)}if(a&&u){let e;if(e=/^\s*(-?)(\d+):(\d+)\s*$/.exec(a)){let t=e[1]?-1:1,n=+e[2],o=+e[3];t>0&&n>=0&&o>=0?c=60*n+o:t<0&&n>=0&&o>=0&&(c=60*-n-o),null!==c&&(d=c-.5,h=c+.5)}else if(e=/^\s*(-?)(\d+):(\d+):(\d+)\s*$/.exec(a)){let t=e[1]?-1:1,n=+e[2],o=+e[3],i=+e[4];t>0&&n>=0&&o>=0&&i>=0?c=60*n*60+60*o+i:t<0&&n>=0&&o>=0&&i>=0&&(c=60*-n*60+60*-o-i),null!==c&&(d=c-.5,h=c+.5)}}if(null!==d&&null!==h&&u>0){let e=u-1e6*h,t=u-1e6*d;const n=(e+t)/2;let r=s.get(i);r||s.set(i,r={}),r.timestampUsecOriginal=u,r.t0au=e,r.t0bu=t,r.t0mu=n,o(n)}}i=n}const a=i.map(e=>{const[t,n]=e;return(t+n)/2}),l=new Map;l.set=l.setOriginal||l.set;for(let e=0,n=t.length;e<n;e++){const n=t[e],i=v(n);if(!1!==i&&(i.id&&!i.__timestampActionRequest__&&(i.__timestampActionRequest__=o),i.id&&i.__timestampActionRequest__>0&&i.durationSec>0&&i.fullDurationSec)){const e=i.__timestampActionRequest__-1e3*(i.fullDurationSec-i.durationSec);l.set(n,e)}}if(l.size>1){const e=[];let n=t.filter((t,n)=>!!l.has(t)&&(e.push(n),!0)),o=n.sort((e,t)=>l.get(e)-l.get(t));for(let i=0,r=n.length;i<r;i++)t[e[i]]=o[i]}{const e=new Map;e.set=e.setOriginal||e.set;const n=[];let o=t.filter((t,o)=>{const i=v(t);if(!i)return!1;const r=i.timestampText;if(!+i.timestampUsec||!r)return!1;let l;{const e=(e=>{const t=a.length;if(t<1)return null;if(!1===e)return null;const n=s.get(e);if(!n)return null;const{t0mu:o}=n;let i=0;if(t>=3){let e=0,n=t-1;for(;n-e>1;){const t=e+n>>>1;a[t]>=o?n=t:e=t}i=e}let r=-1,l=-1;for(let e=i;e<t;e++){const t=a[e]-o;if(t>=0){r=t;break}l=-t}const c=r,d=l;if(c>=0&&(d<0||c<=d))n.chosenT0=o+c;else{if(!(d>=0&&(c<0||d<=c)))return console.warn("logic error"),null;n.chosenT0=o-d}const h=n.timestampUsecOriginal-n.chosenT0;return n.timestampUsecAdjusted=h+11105532e8,h})(i);if(!Number.isFinite(e))return console.warn(`FIX_TIMESTAMP_FOR_REPLAY - no adjustmentTime for ${i.id}.${i.timestampUsec}`,i),!1;l=e}return n.push(o),e.set(t,l),!0});if(e.size>1){let i=o.sort((t,n)=>e.get(t)-e.get(n));for(let e=0,r=o.length;e<r;e++)t[n[e]]=i[e]}}return t};{console.log("[yt-chat-control] ATTEMPT_TICKER_ANIMATION_START_TIME_DETECTION is used.");const e=function(){const e=this.pop78();if(e&&(e.actions||0).length>=1&&e.videoOffsetTimeMsec)for(const t of e.actions){const n=t?"addChatItemAction"in t?"addChatItemAction":"addLiveChatTickerItemAction"in t?"addLiveChatTickerItemAction":null:null;if(n){const o=(t[n]||0).item;if("object"==typeof o){const t=A(o);if(t){const n=o[t];n&&"object"==typeof n&&(n.__videoOffsetTimeMsec__=e.videoOffsetTimeMsec,n.__progressAt__=G)}}}}return e},t={get(t,n,o){if("qe3"===n)return 1;const i=t[n];return"front_"===n&&i&&"number"==typeof i.length&&(i.pop78||(i.pop78=i.pop,i.pop=e)),i}},n=e=>{const n=ie(e);n&&n.attached?"function"!=typeof n.playerProgressChanged_||n.playerProgressChanged32_||(n.playerProgressChanged32_=n.playerProgressChanged_,n.playerProgressChanged_=function(e,n,o){0===e&&(e=arguments[0]=Number.MIN_VALUE),G=e,K=n,z=o;const i=this.replayBuffer_;if(i){const e=i.replayQueue;e&&"object"==typeof e&&!e.qe3&&(i.replayQueue=new Proxy(i.replayQueue,t))}return u.resolve().then(Y),this.playerProgressChanged32_.apply(this,arguments)}):console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Oe&&Ne.push(n),Fe().then(n)}const W=(()=>{let e,t,n,o=()=>{e=$(document.createComment("1")),t=new Set,n=new MutationObserver(()=>{const e=t;t=new Set;for(const t of e)t();e.clear()}),n.observe(e,{characterData:!0})};return n=>{o&&(o=o()),t.add(n),e.data=""+(1+(1&e.data))}})();window.stackDM=W;const ee=(()=>{let e,t,n=()=>{e=new r,t=new c(n=>{const o=new Map;for(const e of n)o.set(e.target,e.boundingClientRect);for(const[n,i]of o){t.unobserve(n);const o=e.get(n);o&&e.delete(n);const{promise:r,values:s}=o||{};r&&s&&(s.width=i.width,r.resolve(s))}})};return o=>{n&&(n=n());{const{promise:t,values:n}=e.get(o)||{};if(t)return t}const i=new k;return e.set(o,{promise:i,values:{}}),t.unobserve(o),t.observe(o),i}})();customElements.whenDefined("yt-live-chat-item-list-renderer").then(()=>{const e="yt-live-chat-item-list-renderer",t=document.createElement(e),r=ie(t);if(!r||!r.attached)return void console.warn(`proto.attached for ${e} is unavailable.`);h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-item-list-renderer hacks"),ve.log("[Begin]");const l=r,d=window._flag0281_;try{se(()=>"function"==typeof l.scrollToBottom_),se(()=>"function"==typeof l.flushActiveItems_),se(()=>"function"==typeof l.canScrollToBottom_),se(()=>"function"==typeof l.setAtBottom),se(()=>void 0===l.scrollToBottom66_),se(()=>void 0===l.flushActiveItems66_)}catch(e){}try{se(()=>"function"==typeof l.attached),se(()=>"function"==typeof l.detached),se(()=>"function"==typeof l.canScrollToBottom_),se(()=>"function"==typeof l.isSmoothScrollEnabled_),se(()=>"function"==typeof l.maybeResizeScrollContainer_),se(()=>"function"==typeof l.refreshOffsetContainerHeight_),se(()=>"function"==typeof l.smoothScroll_),se(()=>"function"==typeof l.resetSmoothScroll_)}catch(e){}l.prDelay171=null;let p=0,_=0,y=0,g=0,v=0,b=null;8192&d||(0===(l.clearList||0).length?(!(2&d)&&se(()=>ae(l.clearList,"0.106.50")),l.clearList66=l.clearList,l.clearList=function(){p=1+(1073741823&p),_=1+(1073741823&_),y=1+(1073741823&y),g=1+(1073741823&g),v=1+(1073741823&v),b=null,this.prDelay171=null,this.clearList66()},ve.log("clearList","OK")):ve.log("clearList","NG"));let w=!1;const C=[];let A=0;const E=e=>{f(()=>{const{a:t,b:n}=e,o=Re(t);o&&n&&n.call(o),e.a=e.b=null})},S=async(e,t)=>{const n=e.__weakRef9441__||(e.__weakRef9441__=Te(e));if(C[A++]={a:n,b:t},A>1)return;const o=e.prDelay288;await o,q.data=""+(1+(7&q.data)),await j;const i=A;A=0;for(let e=0;e<i;e++){const t=C[e];C[e]=null,u.resolve(t).then(E)}};let k=null;l.__showMoreBtn_transitionstart011__=function(e){k=!0;const t=!0===this.atBottom?"hidden":"visible";if("visible"===t){const n=e.target;n.style.visibility!==t&&(n.style.visibility=t)}},l.__showMoreBtn_transitionend011__=function(e){k=!0;const t=!0===this.atBottom?"hidden":"visible";if("hidden"===t){const n=e.target;n.style.visibility!==t&&(n.style.visibility=t)}},l.attached419=async function(){if(!this.isAttached)return;let e=16;for(;!(this.$&&this.$["item-scroller"]&&this.$["item-offset"]&&this.$.items);){if(--e<0||!this.isAttached)return;await f()}if(!0!==this.isAttached)return;if(!this.$)return void console.warn("!this.$");if(!this.$)return;const t=this.$["item-scroller"],n=this.$["item-offset"],o=this.$.items;if(!t||!n||!o)return void console.warn("items.parentNode !== itemOffset");if(ue(o)!==n)return void console.warn("items.parentNode !== itemOffset");if("items"!==o.id||"item-offset"!==n.id)return void console.warn("id incorrect");if(!m.prototype.matches.call(o,"#item-offset.style-scope.yt-live-chat-item-list-renderer > #items.style-scope.yt-live-chat-item-list-renderer"))return void console.warn("!isTargetItems");(function(e,t){!1===w&&(w=!0,u.resolve().then(yt),Be(),!(262144&~window._flag0281_)||(()=>{let e=0,t=-1,n=0;const o="function"!=typeof c||{capture:!0,passive:!0};document.addEventListener("scroll",t=>{t&&t.isTrusted&&(e=1+(1073741823&e))},o),document.addEventListener("wheel",n=>{n&&n.isTrusted&&t!==e&&(t=e,Ce=we())},o),document.addEventListener("mousedown",e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=we(),Me=!0,He=n)},o),document.addEventListener("pointerdown",e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=we(),Me=!0,He=n)},o),document.addEventListener("click",e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=Se=we(),Me=!1,He=n)},o),document.addEventListener("tap",e=>{e&&e.isTrusted&&"item-scroller"===((e||0).target||0).id&&(n=Se=we(),Me=!1,He=n)},o),document.addEventListener("mouseup",e=>{e&&e.isTrusted&&Me&&(Se=we(),Me=!1,He=Se)},o),document.addEventListener("pointerup",e=>{e&&e.isTrusted&&Me&&(Se=we(),Me=!1,He=Se)},o),document.addEventListener("touchstart",e=>{e&&e.isTrusted&&(je=we(),ze=!0,He=je)},o),document.addEventListener("touchmove",e=>{e&&e.isTrusted&&(je=we(),ze=!0,He=je)},o),document.addEventListener("touchend",e=>{e&&e.isTrusted&&ze&&(We=we(),ze=!1,He=We)},o),document.addEventListener("touchcancel",e=>{e&&e.isTrusted&&ze&&(We=we(),ze=!1,He=We)},o)})()),Pe(e,t),wt(t),console.log("[yt-chat] setupMutObserver DONE")})(n,o),this.__itemAnchorColl011__=de?n.getElementsByTagName("item-anchor"):null;const i=this.$["show-more"];i&&(this.__showMoreBtn_transitionstart012__||(this.__showMoreBtn_transitionstart012__=this.__showMoreBtn_transitionstart011__.bind(this)),this.__showMoreBtn_transitionend012__||(this.__showMoreBtn_transitionend012__=this.__showMoreBtn_transitionend011__.bind(this)),i.addEventListener("transitionrun",this.__showMoreBtn_transitionstart012__,!1),i.addEventListener("transitionstart",this.__showMoreBtn_transitionstart012__,!1),i.addEventListener("transitionend",this.__showMoreBtn_transitionend012__,!1),i.addEventListener("transitioncancel",this.__showMoreBtn_transitionend012__,!1)),bt&&bt.observe(this.itemScroller||this.$["item-scroller"])},l.attached331=l.attached,l.attached=function(){return this.attached419&&this.attached419(),this.attached331()},l.detached331=l.detached,l.detached=function(){return wt(),this.detached331()};const I=document.querySelectorAll("yt-live-chat-item-list-renderer");for(const e of I){const t=B(e);!0===t.isAttached&&t.attached419()}if(2===(l.async||0).length&&1===(l.cancelAsync||0).length){se(()=>ae(l.async,"2.24.15")),se(()=>ae(l.cancelAsync,"1.15.8"));const e=new Map,t=s(()=>0,.625),o=n(()=>0);clearTimeout(t),a(o);const i=t+o+1740;let r=i;l.async66=l.async,l.async=function(t,n){const o=2===arguments.length;r>1e9&&(r=i+9);const s=++r;e.set(s,t);const a=u.all([this.prDelay288,j,this.prDelay171,u.resolve()]),l=P();return u.race([a,l]).then(()=>{const t=e.get(s);if("function"!=typeof t)return;const i=function(){return e.delete(s)&&t.apply(this,arguments)};e.set(s,o?this.async66(i,n):this.async66(i))}),s},l.cancelAsync66=l.cancelAsync,l.cancelAsync=function(t){if(t<=i)this.cancelAsync66(t);else if(e.has(t)){const n=e.get(t);e.delete(t),"function"!=typeof n&&this.cancelAsync66(n)}},ve.log("async","OK")}else ve.log("async","NG");if(2&d||(0===(l.showNewItems_||0).length?(se(()=>ae(l.showNewItems_,"0.170.79")),l.showNewItems66_=l.showNewItems_,l.showNewItems_=function(){},ve.log("showNewItems_","OK")):ve.log("showNewItems_","NG")),!(2&d))if(1===(l.onScrollItems_||0).length){if(l.onScrollItems3641_||se(()=>ae(l.onScrollItems_,"1.17.9")),"function"==typeof l.setAtBottom&&0===l.setAtBottom.length){l.setAtBottom217=l.setAtBottom,l.setAtBottom=function(){const e=this.ec217;if("boolean"!=typeof e)return this.setAtBottom217();const t=this.atBottom;t!==e&&"boolean"==typeof t&&(this.atBottom=e)};let e=null;l.onScrollItems66_=l.onScrollItems_;let t=()=>{},n=null,o=null,i=null;const r=n=>{const o=n[n.length-1];o.target===e&&t(o)},s=(n,o)=>{const i=n[n.length-1];o.unobserve(i.target),i.target===e&&(e=null,t(i))};l.onScrollItems3885cb2_=function(e){const t=!0===e.isIntersecting;this.ec217=t,this.onScrollItems66_(n),this.ec217=null},l.onScrollItems3885cb1_=function(e){const t=e.intersectionRatio>.98;this.ec217=t,this.onScrollItems66_(n),this.ec217=null},l.onScrollItems_=function(a){if(a===n)return;if(a&&n&&a.timeStamp===n.timeStamp)return;n=a;const l=this.ytRendererBehavior||0;"function"==typeof l.onScroll&&l.onScroll(a);const d=this.__itemAnchorColl011__;if(d){const n=1===d.length?d[0]:null;e!==n&&(o&&o.disconnect(),e=n,n&&(this.onScrollItems3886cb2_||(this.onScrollItems3886cb2_=this.onScrollItems3885cb2_.bind(this)),t=this.onScrollItems3886cb2_,o||(o=new c(r)),o.observe(n)))}else{const n=this.$.items;if(!n)return this.onScrollItems66_();const o=(e=>{for(e=e[Qe];e instanceof Element&&!e.is;)e=e[Ze];return e})(n);if(!o)return this.onScrollItems66_();if(e===o)return;e=o,i&&i.disconnect(),this.onScrollItems3886cb1_||(this.onScrollItems3886cb1_=this.onScrollItems3885cb1_.bind(this)),t=this.onScrollItems3886cb1_,i||(i=new c(s)),i.observe(o)}}}ve.log("onScrollItems_","OK")}else ve.log("onScrollItems_","NG");if(64&d||("function"!=typeof l.refreshOffsetContainerHeight_||l.refreshOffsetContainerHeight26_||0!==l.refreshOffsetContainerHeight_.length?ve.log("refreshOffsetContainerHeight_","NG"):(se(()=>ae(l.refreshOffsetContainerHeight_,"0.31.21")),l.refreshOffsetContainerHeight26_=l.refreshOffsetContainerHeight_,l.refreshOffsetContainerHeight_=function(){},ve.log("refreshOffsetContainerHeight_","OK"))),!(8192&d))if(0===(l.flushActiveItems_||0).length){if(!(2&d)){const e=ae(l.flushActiveItems_);"0.156.86"===e||"0.150.84"===e||"0.137.81"===e||"0.138.81"===e||se(()=>ae(l.flushActiveItems_,"0.157.86"))||re("mclp.flushActiveItems_",l.flushActiveItems_)()}let e=0;l.flushActiveItems66a_=l.flushActiveItems_;const t=e=>{let t=[];const n=new Set;n.add=n.addOriginal||n.add;for(const t of e)o(t,n);if(null!==Le&&12&Le&&n.size>0){const e=8&Le?"subresource":16&Le?"preload":4&Le?"prefetch":"";e&&n.forEach(n=>{let o=!1;if(n.includes(".ggpht.com/"))return;const r=n.includes("/emoji/")?$e:qe;r.has(n)||(r.add(n),o=!0),o&&t.push(i(null,e,n,"image"))})}return n.clear(),async()=>{t.length>0&&await u.race([new u(e=>s(e,250)),u.all(t)]),t.length=0,t=null}};if(`${l.flushActiveItems_}`.includes("this.push.apply(this,this.activeItems_)")&&`${l.flushActiveItems_}`.includes('this.splice("visibleItems",0,')&&!r.notifyPath371&&!r.proceedStampDomArraySplices381_&&!r.stampDomArraySplices381_&&!r.push377&&!r.splice377){{lt(r,{key:"proceedStampDomArraySplices381_",stamperDomClass:"style-scope yt-live-chat-item-list-renderer yt-live-chat-item-list-stampdom",preloadFn:t}),r.notifyPath371=r.notifyPath,r.stampDomArraySplices381_=r.stampDomArraySplices_,"function"==typeof r.stampDomArraySplices381_&&r.stampDomArraySplices381_.length>=3?r.stampDomArraySplices_=function(e,t,n){if("visibleItems"===e&&"items"===t&&(n||0).indexSplices){const o=n.indexSplices;if(1===o.length||void 0===o.length){const n=o[0]||o;if("splice"===n.type&&(n.addedCount>=1||(n.removed||[]).length>=1)&&this.proceedStampDomArraySplices381_(e,t,n))return}}return this.stampDomArraySplices381_(...arguments)}:console.warn("0xF0230 Function Signature Changed"),r.stampDomArray366_=r.stampDomArray_,"function"==typeof r.stampDomArray366_&&r.stampDomArray366_.length>=5?r.stampDomArray_=function(e,t,n,o,i,r){const s=e===this.tickerItems&&"ticker-items"===t,a=e===this.visibleItems&&"items"===t;if(!s&&!a)return console.log("stampDomArray_ warning 0xF501",...arguments),this.stampDomArray366_(...arguments);const l=(this.$||0)[t];if(!l)return console.log("stampDomArray_ warning 0xF502",...arguments),this.stampDomArray366_(...arguments);if(null===l[Ve]&&0===e.length);else{const n=s?"tickerItems":"visibleItems";this.proceedStampDomArraySplices381_(n,t,{addedCount:e.length,removedCount:l.childElementCount})}const c=()=>{this.markDirty&&this.markDirty();const e={container:l};i&&this.hostElement.dispatchEvent(new CustomEvent("yt-rendererstamper-finished",{bubbles:!0,cancelable:!1,composed:!0,detail:e})),e.container=null};this.ec389pr?this.ec389pr.then(c):c()}:console.warn("0xF0230 Function Signature Changed"),l.push377=l.push,l.splice377=l.splice;const e=[];e.push=()=>0,e.unshift=()=>0,e.pop=()=>{},e.shift=()=>{},e.splice=()=>{},e.slice=function(){return this},"function"==typeof l.push377&&l.push377.length>=1?l.push=function(e,...t){if("visibleItems"!==e||!t.length||!t[0])return this.push377(...arguments);const n=this.visibleItems,o=n.length,i=n.push(...t),r=t.length;return this.proceedStampDomArraySplices381_("visibleItems","items",{index:o,addedCount:r,removedCount:0}),i}:console.warn("0xF0230 Function Signature Changed"),"function"==typeof l.splice377&&l.splice377.length>=1?l.splice=function(e,...t){if("visibleItems"!==e||!t.length||2===t.length&&!t[1]||t.length>2&&!t[2])return this.splice377(...arguments);const n=this.visibleItems.splice(...t),o=n.length,i=t.length>2?t.length-2:0;return t.length>=2&&o!==t[1]&&console.warn(`incorrect splice count. expected = ${t[1]}; actual = ${o}`),this.proceedStampDomArraySplices381_("visibleItems","items",{index:t[0],addedCount:i,removedCount:o}),n}:console.warn("0xF0230 Function Signature Changed")}l.flushActiveItemsFix001_=function(){const e=this.data;if(!e)return;const t=this.visibleItems,n=this.activeItems_;if(!t||!n)return;const o=t.length,i=n.length,r=e.maxItemsToDisplay;r&&o+i>r&&i>r&&n.splice(0,i-r)},l.flushActiveItems3641_=l.flushActiveItems_,l.__moreItemButtonBlinkingCheck183__=function(){const t=this.activeItems_&&this.activeItems_.length>0?1:0;if(e===1-t){e=t;const n=(this.$||0)["show-more"];n&&n.classList.toggle("has-new-messages-miuzp",!!t)}};let n=!1;l.flushActiveItems_=function(){n||(n=!0,S(this,()=>{if(n=!1,this.activeItems_.length>0){const e=this.data;e&&(e.maxItemsToDisplay>90&&(e.maxItemsToDisplay=90),this.flushActiveItemsFix001_(),this.flushActiveItems3641_(),this.__moreItemButtonBlinkingCheck183__())}}).catch(console.warn))},l.showNewItems3641_=l.showNewItems_,l.refreshOffsetContainerHeight3641_=l.refreshOffsetContainerHeight_,l.maybeScrollToBottom3641_=l.maybeScrollToBottom_;let o=!1;l.showNewItems_=function(){o||(o=!0,S(this,()=>{o=!1,this.showNewItems3641_()}).catch(console.warn))};let i=!1;l.maybeScrollToBottom_=function(){i||(i=!0,S(this,()=>{i=!1,!0===this.atBottom||this.maybeScrollToBottom3641_()}).catch(console.warn))},l.onScrollItems3641_=l.onScrollItems_,l.maybeResizeScrollContainer3641_=l.maybeResizeScrollContainer_,l.handleLiveChatActions3641_=l.handleLiveChatActions_;let s=!1;l.onScrollItems_=function(e){s||(s=!0,S(this,()=>{s=!1,this.onScrollItems3641_(e)}).catch(console.warn))}}ve.log("flushActiveItems_","OK")}else ve.log("flushActiveItems_","NG");if(!(64&d)){let e=null,t=null;l.atBottomChanged314_=l.atBottomChanged_,l.atBottomChanged_=function(){const n=this.atBottom;if(t===n)return;if(t=n,k)return;const o=((this||0).$||0)["show-more"]||0;if(!o)return this.atBottomChanged314_();const i=o.hasAttribute("disabled");if(e!==i){if(e=i,0===this.visibleItems.length){!0===this.atBottom&&(o.setAttribute("disabled",""),e=!0);const t=!0===this.atBottom?"hidden":"visible";return void(o.style.visibility!==t&&(o.style.visibility=t))}f(()=>{if(k)return;const e=((this||0).$||0)["show-more"]||0,t=!0===this.atBottom?"hidden":"visible";"hidden"===t&&console.warn("show-more-btn no transition"),e&&e.style.visibility!==t&&(e.style.visibility=t)})}}}if(!(2&d))if(1===(l.handleLiveChatActions_||0).length){const e=ae(l.handleLiveChatActions_);"1.40.20"===e||"1.39.20"===e||"1.31.17"===e||l.handleLiveChatActions3641_||se(()=>ae(l.handleLiveChatActions_,"1.40.20"))||re("mclp.handleLiveChatActions_",l.handleLiveChatActions_)(),l.handleLiveChatActions66_=l.handleLiveChatActions_,l.handleLiveChatActions_=function(e){if((e||0).length>=1){try{N(e)}catch(e){console.warn(e)}this.handleLiveChatActions66_(e)}else(this.activeItems_||0).length>=1&&this.flushActiveItems_();ne(!0)},ve.log("handleLiveChatActions_","OK")}else ve.log("handleLiveChatActions_","NG");0==!(262144&~d)&&(l.hasUserJustInteracted11_=()=>{const e=we();return e-Ce<80||Me||ze||e-He<80},0!==(l.canScrollToBottom_||0).length||l.canScrollToBottom157_?ve.log("canScrollToBottom_","NG"):(se(()=>ae(l.canScrollToBottom_,"0.9.5")),l.canScrollToBottom157_=l.canScrollToBottom_,l.canScrollToBottom_=function(){return this.canScrollToBottom157_()&&!this.hasUserJustInteracted11_()},ve.log("canScrollToBottom_","OK"))),l.isSmoothScrollEnabled_=function(){return!1},l.maybeResizeScrollContainer_=function(){},l.refreshOffsetContainerHeight_=function(){},l.smoothScroll_=function(){},l.resetSmoothScroll_=function(){},ve.log("ENABLE_NO_SMOOTH_TRANSFORM","OK"),8&d||"function"!=typeof l.forEachItem_||l.forEachItem66_||1!==l.forEachItem_.length||(l.forEachItem66_=l.forEachItem_,l.forEachItem_=function(e){if(!(8&~this._flag0281_))return this.forEachItem66_(e);try{let t=!1;if("function"==typeof e){const e=this.items;if(e instanceof HTMLDivElement){const n=this.visibleItems,o=this.activeItems_;n&&o&&n.length>=0&&o.length>=0&&(t=e)}}if(t){t.__children801__=1;const n=this.forEachItem66_(e);return t.__children801__=0,n}}catch(e){}return this.forEachItem66_(e)}),"function"!=typeof l.handleAddChatItemAction_||l.handleAddChatItemAction66_||(l.handleAddChatItemAction66_=l.handleAddChatItemAction_,l.handleAddChatItemAction_=function(e){try{e&&"object"==typeof e&&!("length"in e)&&(o(e.item,null),console.assert(e==e))}catch(e){console.warn(e)}let t;try{t=this.handleAddChatItemAction66_.apply(this,arguments)}catch(e){if(!e||!(e.message||"").includes(".querySelector("))throw e;console.log("skipErrorForhandleAddChatItemAction_",e.message)}return t}),ve.log("handleAddChatItemAction_ [ FIX_THUMBNAIL_SIZE_ON_ITEM_ADDITION ]","OK"),"function"!=typeof l.handleReplaceChatItemAction_||l.handleReplaceChatItemAction66_||(l.handleReplaceChatItemAction66_=l.handleReplaceChatItemAction_,l.handleReplaceChatItemAction_=function(e){try{e&&"object"==typeof e&&!("length"in e)&&(o(e.replacementItem,null),console.assert(e==e))}catch(e){console.warn(e)}return this.handleReplaceChatItemAction66_.apply(this,arguments)}),ve.log("handleReplaceChatItemAction_ [ FIX_THUMBNAIL_SIZE_ON_ITEM_REPLACEMENT ]","OK"),ve.log("[End]"),Ee()}).catch(console.warn);const ce=function(e,t){let n=(this.__dataHost||B(this).__dataHost||0).__data;if(2===arguments.length&&"style"===e&&n&&t){let o=`${t}`;const i=100*n.ratio;if(i>-1){let e=i;const t=n.data;if(t){const r=t.durationSec,s=t.fullDurationSec;let a=500;(r===s||r+1===s)&&r>1&&(a=s>400?500:s>200?200:s>100?100:s>50?50:20),a>500&&(a=500),a<5&&(a=5);const l=a/100;if(e=Math.round(e*l)/l,e=e.toFixed(1),o=o.replace(`${i}%`,`${e}%`).replace(`${i}%`,`${e}%`),n.__style_last__===o)return;n.__style_last__=o}}m.prototype.setAttribute.call(this,e,o)}else m.prototype.setAttribute.apply(this,arguments)},he=e=>{const t=B(e);se(()=>"string"==typeof(t||0).is),se(()=>1===((t||0).hostElement||0).nodeType);const n=(t.$||0).container;n?(se(()=>1===(n||0).nodeType),se(()=>"function"==typeof n.setAttribute),n.setAttribute=ce):console.warn(`"container" does not exist in ${t.is}`)},pe=["yt-live-chat-ticker-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer","yt-live-chat-ticker-sponsor-item-renderer"],me=["yt-live-chat-ticker-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer","yt-live-chat-ticker-sponsor-item-renderer"];new MutationObserver(e=>{const t=new Set;for(const n of e)"attributes"===n.type&&t.add(n.target);for(const e of t){const t=e&&!0===e.isConnected?e.getAttribute("q92wb"):"";if("1"===t){e.setAttribute("q92wb","2");const t=B(e),n=((t||0).data||0).id;t&&"function"==typeof t.requestRemoval49&&n&&(e.id=n,t.requestRemoval49(),e.setAttribute("q92wb","3"))}else if("3"===t){e.setAttribute("q92wb","4");const t=B(e),n=((t||0).data||0).id;if(t&&"function"==typeof t.requestRemoval49&&n){e.id=n;const o=e.closest("yt-live-chat-ticker-renderer")||t.parentComponent,i=B(o);o&&i&&i.removeTickerItemById&&(i.removeTickerItemById(n),e.setAttribute("q92wb","5"))}}}t.clear()}).observe(document,{attributes:!0,attributeFilter:["q92wb"],subtree:!0}),u.all(pe.map(e=>customElements.whenDefined(e))).then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-ticker-... hacks"),ve.log("[Begin]");let e=0;const t=function(e){if(e.hostElement&&"function"==typeof e.requestRemoval){try{(e.data||0).id||(e.data={id:1})}catch(e){}try{return e.requestRemoval(),!0}catch(e){}}return!1},n=new r,o={updateStatsBarAndMaybeShowAnimationRevised:function(e,t,n){try{return this.__proxySelf0__||(this.__proxySelf0__=_(this)),this.updateStatsBarAndMaybeShowAnimation38.call(this.__proxySelf0__,e,t,n)}catch(e){console.log("updateStatsBarAndMaybeShowAnimationRevised ERROR"),console.error(e)}},detachedForMemoryLeakage:function(){try{this.actionHandlerBehavior.unregisterActionMap(this.behaviorActionMap)}catch(e){}return this.detached582MemoryLeak()},detachedForTickerInit:function(){u.resolve(this).then(e=>{e.isAttached||(!1===e.isAttached&&!1===((e.$||0).container||0).isConnected&&t(e),e.rafId>1&&ht.cancel(e.rafId))}).catch(console.warn);const e=(this||0).hostElement;if((this||0).__isTickerItem58__&&e instanceof m&&(e.style.removeProperty("--ticker-start-time"),e.style.removeProperty("--ticker-duration-time"),Re(T)===e)){const e=document.querySelector(".r6-width-adjustable");e instanceof m&&e.classList.contains("r6-width-adjustable-f")&&e.classList.remove("r6-width-adjustable-f"),T=Te(e)}let n;try{n=this.detached77()}catch(e){console.warn(e)}return this.__ticker_attachmentId__=0,n},attachedForTickerInit:function(){this.__ticker_attachmentId__=e=1+(1073741823&e);const t=(this||0).hostElement;if((this||0).__isTickerItem58__&&t instanceof m){const e=Re(T);e instanceof m&&e.classList.add("r6-width-adjustable-f"),t.__fgvm573__?(t.classList.remove("r6-closing-ticker"),t.classList.remove("r6-width-adjustable-f")):(t.__fgvm573__=1,t.classList.add("r6-width-adjustable")),T=Te(t)}return he(t||this),this.attached77()},setContainerWidthNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=_(this)),this.setContainerWidth55.call(this.__proxySelf0__)}catch(e){console.log("setContainerWidthNoSelfLeakage ERROR"),console.error(e)}},slideDownNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=_(this)),this.slideDown55.call(this.__proxySelf0__)}catch(e){console.log("slideDownNoSelfLeakage ERROR"),console.error(e)}},collapseNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=_(this)),this.collapse55.call(this.__proxySelf0__)}catch(e){console.log("collapseNoSelfLeakage ERROR"),console.error(e)}},deletedChangedNoSelfLeakage:function(){try{return this.__proxySelf0__||(this.__proxySelf0__=_(this)),this.deletedChanged55.call(this.__proxySelf0__)}catch(e){console.log("deletedChangedNoSelfLeakage ERROR"),console.error(e)}},handlePauseReplayForPlaybackProgressState:function(){if(!le)return this.handlePauseReplay66.apply(this,arguments);const e=this.__ticker_attachmentId__;if(!e)return;const t=Te(this);if(x){const n=this._Y7rtu=1+(1073741823&this._Y7rtu);return void x.then(()=>{const o=Re(t)||0;e===o.__ticker_attachmentId__&&o.isAttached&&n===o._Y7rtu&&!x&&"function"==typeof o.handlePauseReplay&&o.hostElement&&o.handlePauseReplay.apply(o,arguments)})}if(2===Q&&this.isAttached){const n=this._Y7rtk=1+(1073741823&this._Y7rtk),o=te;L().then(()=>{const i=Re(t);e===(i||0).__ticker_attachmentId__&&i.isAttached&&n===i._Y7rtk&&o===te&&2===Q&&Z===Q&&i.hostElement&&i.handlePauseReplay66()})}},handleResumeReplayForPlaybackProgressState:function(){if(!le)return this.handleResumeReplay66.apply(this,arguments);const e=this.__ticker_attachmentId__;if(!e)return;const t=Te(this);if(x){const n=this._Y7rtv=1+(1073741823&this._Y7rtv);return void x.then(()=>{const o=Re(t);e===(o||0).__ticker_attachmentId__&&n===o._Y7rtv&&!x&&"function"==typeof o.handleResumeReplay&&o.hostElement&&o.handleResumeReplay.apply(o,arguments)})}if(1===Q&&this.isAttached){const n=te;R=R||new k,R.then(()=>{const o=Re(t);e===(o||0).__ticker_attachmentId__&&te>n&&1===Q&&Z===Q&&o.hostElement&&o.handleResumeReplay66()})}},handleReplayProgressForPlaybackProgressState:function(e){if(this.isAttached){const t=this.__ticker_attachmentId__;if(!t)return;const n=this._Y7rtk=1+(1073741823&this._Y7rtk),o=Te(Re(this));L().then(()=>{const i=Re(o);t===(i||0).__ticker_attachmentId__&&i.isAttached&&n===i._Y7rtk&&i.hostElement&&i.handleReplayProgress66(e)})}}},i=function(){const e=document.querySelector("#ticker-bar.yt-live-chat-ticker-renderer");return!!e&&e.scrollLeft>0},s=function(e){if(!1===e.__dataEnabled||!0===e.__dataInvalid)return;Oe||console.error("[yt-chat] USE_ADVANCED_TICKING fails because of no __LCRInjection__");const t=((e||0).__data||0).data||(e||0).data||0;if(!t)return;const i=e.hostElement;if(!(i instanceof m))return;const r=t.fullDurationSec||t.durationSec||0;let s;Oe&&t&&r>0&&!("__progressAt__"in t)?(s=Date.now(),t.__timestampActionRequest__||console.log(" 5688001 "),t.__liveTimestamp__=((t.__timestampActionRequest__||s)-V)/1e3||Number.MIN_VALUE,U=!0):Oe&&t&&r>0&&t.__progressAt__>0&&(U=!1);let a=t.__progressAt__||t.__liveTimestamp__;if(!a)return void console.log("time property is not found",!!Oe,!!t,!!(r>0),!("__progressAt__"in t),t.__progressAt__,t.__liveTimestamp__);const l=s>0&&t.__timestampActionRequest__>0?s-t.__timestampActionRequest__:0;if(l>0&&(t.durationSec-=Math.floor(l/1e3),t.durationSec<0&&(t.durationSec=0),!t.durationSec)){try{e.requestRemoval()}catch(e){}return}let d=t.fullDurationSec-t.durationSec;d>0&&(a-=d);const h=`ticker-bg-overlay[ticker-id="${e.__ticker_attachmentId__}"]`,u=Re(n.get(e));if((F(i,"--ticker-start-time",a)||!u||!1===u.isConnected)&&r>0){const s=e.parentComponent,l=s?s.hostElement||s:0;if(l&&(H=Te(l),J=!1,X?Y():oe()),!i.querySelector(h)){const s=i.querySelector("ticker-bg-overlay");s&&s.remove(),e.__advancedTicking038__=1;const d=u||document.createElement("ticker-bg-overlay");n.set(e,Te(d));const h=document.createElement("ticker-bg-overlay-end2"),p=e.colorFromDecimal(t.startBackgroundColor),f=e.colorFromDecimal(t.endBackgroundColor),_=e.$.container;d.setAttribute("ticker-id",`${e.__ticker_attachmentId__}`);const y=`ticker-${e.__ticker_attachmentId__}-${Math.floor(314159265359*Math.random()+314159265359).toString(36)}`;d.id=`${y}-b`,d.style.background=`linear-gradient(90deg, ${p},${p} 50%,${f} 50%,${f})`,_ instanceof m?xe(_,d,_.firstChild):(xe(i,d,i.firstChild),i.style.borderRadius="16px",_.style.borderRadius="initial"),_ instanceof m&&(_.style.background="transparent",_.style.backgroundColor="transparent"),F(i,"--ticker-duration-time",r),F(h,"--ticker-start-time",a),F(h,"--ticker-duration-time",r),h.id=`${y}-e`,De(l,h);const g=o.wio2;g instanceof c&&g.observe(h)}}},a=e=>{if((e=Re(e))&&!(e.__startCountdownAdv477__<0)){if(e.__startCountdownAdv477__||(e.__startCountdownAdv477__=Date.now(),2===e.__advancedTicking038__&&(e.__advancedTicking038__=1)),e&&e.hostElement&&e.isAttached&&e.hostElement.isConnected&&e.parentComponent&&e.__ticker_attachmentId__){const t=e.data,n=t?((e||0).data||0).id:null,o=((e||0).hostElement||0).id;if(n&&n===o){const o=`${e.__ticker_attachmentId__}!${n}`;if(t.__wsi6c__!==o)return t.__wsi6c__=o,u.resolve(e).then(s),!0}}return!1}};let l=0;for(const e of me){l++;const n=document.createElement(e),r=ie(n);if(!r||!r.attached){ve.warn(`proto.attached for ${e} is unavailable.`);continue}"function"!=typeof r.detached582MemoryLeak&&"function"==typeof r.detached&&(r.detached582MemoryLeak=r.detached,r.detached=o.detachedForMemoryLeakage),r.detached77=r.detached,r.detached=o.detachedForTickerInit,r.attached77=r.attached,r.attached=o.attachedForTickerInit;let s=0;"function"!=typeof r.updateStatsBarAndMaybeShowAnimation||r.updateStatsBarAndMaybeShowAnimation38||3!==r.updateStatsBarAndMaybeShowAnimation.length||(r.updateStatsBarAndMaybeShowAnimation38=r.updateStatsBarAndMaybeShowAnimation,r.updateStatsBarAndMaybeShowAnimation=o.updateStatsBarAndMaybeShowAnimationRevised,s|=2);let d=0;if("function"==typeof r.startCountdown&&"function"==typeof r.updateTimeout&&"function"==typeof r.isAnimationPausedChanged){const e=ae(r.startCountdown,"2.66.37")&&ae(r.updateTimeout,"1.76.45")&&ae(r.isAnimationPausedChanged,"2.56.30");e||ve.log("isTimingFunctionHackable = false"),d=e?2:1}else{let t=0;"function"==typeof r.startCountdown&&(t|=1),"function"==typeof r.updateTimeout&&(t|=2),"function"==typeof r.isAnimationPausedChanged&&(t|=4),ve.log(`Skip Timing Function Modification[#${l}]: ${t} / 7`,` ${e}`)}let h=0;if("function"!=typeof r.handlePauseReplay||r.handlePauseReplay66||0!==r.handlePauseReplay.length)d>0&&ve.log("Error for setting cProto.handlePauseReplay",e);else{const e=ae(r.handlePauseReplay);h++,"0.8.2"===e||"0.12.4"===e||se(()=>ae(r.handlePauseReplay,"0.8.2"))}"function"!=typeof r.handleResumeReplay||r.handleResumeReplay66||0!==r.handleResumeReplay.length?d>0&&ve.log("Error for setting cProto.handleResumeReplay",e):(h++,se(()=>ae(r.handleResumeReplay,"0.8.2"))),"function"!=typeof r.handleReplayProgress||r.handleReplayProgress66||1!==r.handleReplayProgress.length?d>0&&ve.log("Error for setting cProto.handleReplayProgress",e):(h++,se(()=>ae(r.handleReplayProgress,"1.16.13")));const p=3===h&&!0;r.__ENABLE_VIDEO_PROGRESS_STATE_FIX_AND_URT_PASSED__=p,p&&(r._Y7rtk=0,r._Y7rtu=0,r._Y7rtv=0,r.handlePauseReplay66=r.handlePauseReplay,r.handlePauseReplay=o.handlePauseReplayForPlaybackProgressState,r.handleResumeReplay66=r.handleResumeReplay,r.handleResumeReplay=o.handleResumeReplayForPlaybackProgressState,r.handleReplayProgress66=r.handleReplayProgress,r.handleReplayProgress=o.handleReplayProgressForPlaybackProgressState),"function"!=typeof r.deletedChanged||r.deletedChanged55||0!==r.deletedChanged.length||(r.deletedChanged55=r.deletedChanged,r.deletedChanged=o.deletedChangedNoSelfLeakage,s|=32);const f=35;ve.log(`FIX_MEMORY_LEAKAGE_TICKER_[#${l}]: ${s} / ${f}`,r.is);const _=!("function"!=typeof r.startCountdown||r.startCountdown49||2!==r.startCountdown.length||"function"!=typeof r.updateTimeout||r.updateTimeout49||1!==r.updateTimeout.length||"function"!=typeof r.isAnimationPausedChanged||r.isAnimationPausedChanged49||2!==r.isAnimationPausedChanged.length||"function"!=typeof r.setContainerWidth||0!==r.setContainerWidth.length||"function"!=typeof r.requestRemoval||r.requestRemoval49||0!==r.requestRemoval.length);if(CSS.supports("left","clamp(-100%, calc( -100% * ( var(--ticker-current-time) - var(--ticker-start-time) ) / var(--ticker-duration-time) ), 0%)"),_){document.documentElement.setAttribute("r6-advanced-ticking",""),ve.log(`USE_ADVANCED_TICKING[#${l}]::START`);const e=o.wio2||(o.wio2=new c(n=>{for(const o of n)if(o.isIntersecting){const n=o.target;let i=n.id;if(!i)continue;let r=i.substring(0,i.length-2);if(!r)continue;const s=document.querySelector(`#${r}-b`);if(!s)continue;const a=s;e.unobserve(n),n.remove();let l=a||0,c=4;for(;(l=l.parentElement)instanceof m;){if(l instanceof m){const e=B(l);if(e&&"function"==typeof e.slideDown&&"function"==typeof e.setContainerWidth&&1===e.__advancedTicking038__){e.__advancedTicking038__=2;let n=!1;const o=((e||0).__data||0).data||(e||0).data||0;if(U&&o&&o.durationSec>0&&o.__timestampActionRequest__>0?o.__timestampActionRequest__+1e3*o.durationSec+280<Date.now()&&(n=!0):Oe&&!U&&o&&o.durationSec>0&&o.__progressAt__>0&&o.__progressAt__+o.durationSec+.28<G&&(n=!0),n)t(e);else{const t=e.hostElement.style.width;"auto"!==t&&""!==t||e.setContainerWidth(),e.slideDown()}break}}if(c--,!c){console.log("cnt not found for ticker-bg-overlay");break}}}},{rootMargin:"0px",threshold:[1]}));r.__isTickerItem58__=1,r.attached747=r.attached,r.attached=function(){const e=(this||0).hostElement;return e&&e.hasAttribute("q92wb")&&e.removeAttribute("q92wb"),e&&e.__requestRemovalAt003__&&(e.__requestRemovalAt003__=0),this.__startCountdownAdv477__<0&&(this.__startCountdownAdv477__=0),u.resolve().then(()=>{this.hostElement&&this.isAttached&&this.hostElement.isConnected&&this.parentComponent&&this.__startCountdownAdv477__>0&&u.resolve(this).then(a)}).catch(console.warn),this.attached747()},r.startCountdown=o.startCountdownAdv||(o.startCountdownAdv=function(){a(this)}),r.updateTimeout=o.updateTimeoutAdv||(o.updateTimeoutAdv=function(){}),r.isAnimationPausedChanged=o.isAnimationPausedChangedAdv||(o.isAnimationPausedChangedAdv=function(){}),"function"!=typeof r.slideDown||r.slideDown43||0!==r.slideDown.length?ve.log(`USE_ADVANCED_TICKING[#${l}]::slideDown - NG`):(r.slideDown43=r.slideDown,r.slideDown=o.slideDownAdv||(o.slideDownAdv=async function(){if(!(this.__startCountdownAdv477__<0)){if(this.__advancedTicking038__){1===this.__advancedTicking038__&&(this.__advancedTicking038__=2);const e=this.hostElement,t=this.$.container,n=B(this.parentComponent),o=n?n.hostElement:null;if(e instanceof m&&t instanceof m&&o instanceof m){e.classList.add("r6-closing-ticker"),ut.has(o)||(ut.add(o),document.addEventListener("transitionend",_t,ft));const n=new k;return pt.set(e,n),pt.set(t,n),mt++,e.classList.add("sliding-down"),await n.then(),mt--,pt.delete(e),pt.delete(t),void(this&&this.hostElement instanceof m&&this.collapse())}}this.slideDown43()}}),ve.log(`USE_ADVANCED_TICKING[#${l}]::slideDown - OK`)),"function"!=typeof r.collapse||r.collapse43||0!==r.collapse.length?ve.log(`USE_ADVANCED_TICKING[#${l}]::collapse - NG`):(r.collapse43=r.collapse,r.collapse=o.collapseAdv||(o.collapseAdv=async function(){if(this.__advancedTicking038__){1===this.__advancedTicking038__&&(this.__advancedTicking038__=2);const e=this.hostElement,t=this.$.container,n=B(this.parentComponent),o=n?n.hostElement:null;if(e instanceof m&&t instanceof m&&o instanceof m){e.classList.add("r6-closing-ticker"),ut.has(o)||(ut.add(o),document.addEventListener("transitionend",_t,ft));const n=new k;return pt.set(e,n),pt.set(t,n),mt++,e.classList.add("collapsing"),e.style.width="0",await n.then(),mt--,pt.delete(e),pt.delete(t),void(this&&this.hostElement instanceof m&&this.requestRemoval())}}this.collapse43()}),ve.log(`USE_ADVANCED_TICKING[#${l}]::collapse - OK`)),"function"!=typeof r.requestRemoval||r.requestRemoval49||0!==r.requestRemoval.length?ve.log(`USE_ADVANCED_TICKING[#${l}]::requestRemoval - NG`):(r.requestRemoval49=r.requestRemoval,r.requestRemoval=o.requestRemovalAdv||(o.requestRemovalAdv=function(){if(this.__startCountdownAdv477__<0)return;this.__startCountdownAdv477__=-1;const t=this.hostElement;if(t.__requestRemovalAt003__=Date.now(),this.__advancedTicking038__){try{const n=t.querySelector("ticker-bg-overlay[id]");if(n){const t=n.id,o=t?t.substring(0,t.length-2):"",i=o?document.querySelector(`#${o}-e`):null;i&&(e.unobserve(i),i.remove())}}catch(e){}this.__advancedTicking038__=2,t instanceof m&&(t.style.removeProperty("--ticker-start-time"),t.style.removeProperty("--ticker-duration-time"));{const e=this.data;t instanceof m&&e.id&&e.fullDurationSec&&!t.hasAttribute("__reuseid__")&&(t.setAttribute("__reuseid__",D),t.setAttribute("__nogc__",""),O.set(`<${this.is}>${e.id}:${e.fullDurationSec}`,Te(this)))}}if(t instanceof m){try{t.classList.remove("r6-closing-ticker"),t.classList.remove("r6-width-adjustable-f")}catch(e){}t.setAttribute("q92wb","1")}}),ve.log(`USE_ADVANCED_TICKING[#${l}]::requestRemoval - OK`)),"function"!=typeof r.computeContainerStyle||r.computeContainerStyle49||2!==r.computeContainerStyle.length?ve.log(`USE_ADVANCED_TICKING[#${l}]::computeContainerStyle - NG`):(r.computeContainerStyle49=r.computeContainerStyle,r.computeContainerStyle=o.computeContainerStyleAdv||(o.computeContainerStyleAdv=function(e,t){return this.__advancedTicking038__?"":this.computeContainerStyle49(e,t)}),ve.log(`USE_ADVANCED_TICKING[#${l}]::computeContainerStyle - OK`)),"function"!=typeof r.updateWidthOnDataChanged||0!==r.updateWidthOnDataChanged.length||r.updateWidthOnDataChanged41||(r.updateWidthOnDataChanged41=r.updateWidthOnDataChanged,r.updateWidthOnDataChanged=o.updateWidthOnDataChangedAdv||(o.updateWidthOnDataChangedAdv=function(){const e=this.hostElement.style;e.width="",e.overflow=""})),r.setStandardContainerWidth8447||(r.setStandardContainerWidth8447=o.setStandardContainerWidthAdv||(o.setStandardContainerWidthAdv=async function(e){if(this.__startCountdownAdv477__<0)return;this.__startCountdownAdv477__>0&&u.resolve(this).then(a);const t=(this||0).hostElement,n=this.$.container;let o=null,r="";{let e=4;for(let i=r=t.getAttribute("r6-ticker-width")||"";e--;){const e=`${t.id}`;if(i&&i.startsWith(`${e}::`)){o=i.split("::");break}{const o=t.style.width;""!==o&&"auto"!==o&&(t.style.width="auto");const s=await ee(n);if(s.width<1||!Number.isFinite(s.width))return;t.setAttribute("r6-ticker-width",i=r=`${e}::${s.width.toFixed(2)}`)}}}if(!o)return console.log("container width failure"),void("setContainerWidth"===e?this.setContainerWidth41():this.setRevampContainerWidth41());const s=((this||0).ytLiveChatTickerItemBehavior||0).shouldAnimateIn||(this||0).shouldAnimateIn||!1;W(s?async()=>{if(t.getAttribute("r6-ticker-width")===r&&!0===t.isConnected)if(t.previousElementSibling||i())t.style.width=`${o[1]}px`;else{const e=t.style.width;"0px"!==e&&"0"!==e&&(t.style.width="0"),await ee(n),t.style.width=`${o[1]}px`}}:async()=>{t.getAttribute("r6-ticker-width")===r&&!0===t.isConnected&&(t.style.width=`${o[1]}px`)})})),"function"!=typeof r.setRevampContainerWidth||r.setRevampContainerWidth41||0!==r.setRevampContainerWidth.length||"function"!=typeof r.setStandardContainerWidth8447||1!==r.setStandardContainerWidth8447.length||(r.setRevampContainerWidth41=r.setRevampContainerWidth,r.setRevampContainerWidth=o.setRevampContainerWidthAdv||(o.setRevampContainerWidthAdv=async function(){if(this.__startCountdownAdv477__<0)return;const e=this.hostElement;((e||0).style||0).width&&(e.style.width="")}),ve.log(`USE_ADVANCED_TICKING[#${l}]::setRevampContainerWidth - OK`)),"function"!=typeof r.setContainerWidth||r.setContainerWidth41||0!==r.setContainerWidth.length||"function"!=typeof r.setStandardContainerWidth8447||1!==r.setStandardContainerWidth8447.length?ve.log(`USE_ADVANCED_TICKING[#${l}]::setContainerWidth - NG`):(r.setContainerWidth41=r.setContainerWidth,r.setContainerWidth=o.setContainerWidthAdv||(o.setContainerWidthAdv=async function(){if(this.__startCountdownAdv477__<0)return;const e=this.hostElement;((e||0).style||0).width&&(e.style.width="")}),ve.log(`USE_ADVANCED_TICKING[#${l}]::setContainerWidth - OK`))}else ve.log(`USE_ADVANCED_TICKING[#${l}] is not injected.`)}const d=pe.join(", "),p=document.querySelectorAll(d);if(p.length>=1)for(const e of p)!0===B(e).isAttached&&he(e);ve.log("[End]"),Ee()}).catch(console.warn);{const e={dataChanged54500:function(){if("function"!=typeof(this.ytLiveChatTickerItemBehavior||0).setContainerWidth)return this.dataChanged544();try{return this.__proxySelf0__||(this.__proxySelf0__=_(this)),this.dataChanged544.call(this.__proxySelf0__)}catch(e){console.log("dataChanged54500 ERROR"),console.error(e)}},dataChanged54501:function(e){if("function"!=typeof(this.ytLiveChatTickerItemBehavior||0).setContainerWidth)return this.dataChanged544(e);try{return this.__proxySelf0__||(this.__proxySelf0__=_(this)),this.dataChanged544.call(this.__proxySelf0__,e)}catch(e){console.log("dataChanged54501 ERROR"),console.error(e)}}};for(const t of["yt-live-chat-ticker-sponsor-item-renderer","yt-live-chat-ticker-paid-sticker-item-renderer"].map(e=>[e,customElements.whenDefined(e)])){const[n,o]=t;o.then(()=>{const t=document.createElement(n),o=ie(t);o&&o.attached?o.dataChanged&&!o.dataChanged544&&"function"==typeof o.dataChanged&&o.dataChanged.length>=0&&o.dataChanged.length<=1&&(o.dataChanged544=o.dataChanged,0===o.dataChanged.length?o.dataChanged=e.dataChanged54500:1===o.dataChanged.length&&(o.dataChanged=e.dataChanged54501)):console.warn(`proto.attached for ${n} is unavailable.`)})}}customElements.whenDefined("yt-live-chat-ticker-renderer").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-ticker-renderer hacks"),ve.log("[Begin]"),(()=>{const e="yt-live-chat-ticker-renderer",t=document.createElement(e),o=ie(t);if(o&&o.attached)if("function"!=typeof o.splice||"function"!=typeof o.markDirty||"function"!=typeof o.removeTickerItemById||o.removeTickerItemById737||(o.removeTickerItemById737=o.removeTickerItemById,o.removeTickerItemById=function(e){if("#ticker-items"!==this.tickerItemsQuery||"string"!=typeof(e||0))return this.removeTickerItemById737(e);const t=this.hostElement;if(!t||!e)return this.removeTickerItemById737(e);const n=t.querySelectorAll(`[id="${e}"]`),o=new Set;"string"==typeof(e||0)&&o.add(e);for(const e of n){if(!e)continue;const t=e.id;if(!t)continue;o.add(t);const n=B(e).data||0;if(n){const e=n.id;e?o.add(e):n.id=t}}const i=this.tickerItems;for(let e=i.length-1;e>=0;e--){const t=i[e];if(!t||"object"!=typeof t)continue;const n=A(t);if(!n)continue;const r=(t[n]||0).id;o.has(r)&&(this.splice("tickerItems",e,1),this.markDirty())}o.has(this.highlightId)&&(this.highlightId=void 0)}),"function"!=typeof o.notifyPath||2!==o.notifyPath.length||"function"!=typeof o.stampDomArraySplices_||3!==o.stampDomArraySplices_.length||o.notifyPath371||o.proceedStampDomArraySplices371_||o.stampDomArraySplices371_||o.stampDomArray366_||(lt(o,{key:"proceedStampDomArraySplices371_",stamperDomClass:"style-scope yt-live-chat-ticker-renderer yt-live-chat-ticker-stampdom"}),o.notifyPath371=o.notifyPath,o.stampDomArraySplices371_=o.stampDomArraySplices_,"function"==typeof o.stampDomArraySplices371_&&o.stampDomArraySplices371_.length>=3?o.stampDomArraySplices_=function(e,t,n){if("tickerItems"===e&&"ticker-items"===t&&(n||0).indexSplices){const o=n.indexSplices;if(1===o.length||void 0===o.length){const n=o[0]||o;if("splice"===n.type&&(n.addedCount>=1||(n.removed||0).length>=1)&&this.proceedStampDomArraySplices371_(e,t,n))return}}return this.stampDomArraySplices371_(...arguments)}:console.warn("0xF0230 Function Signature Changed"),o.stampDomArray366_=o.stampDomArray_,"function"==typeof o.stampDomArray366_&&o.stampDomArray366_.length>=5?o.stampDomArray_=function(e,t,n,o,i,r){const s=e===this.tickerItems&&"ticker-items"===t,a=e===this.visibleItems&&"items"===t;if(!s&&!a)return console.log("stampDomArray_ warning 0xF501",...arguments),this.stampDomArray366_(...arguments);const l=(this.$||0)[t];if(!l)return console.log("stampDomArray_ warning 0xF502",...arguments),this.stampDomArray366_(...arguments);if(null===l[Ve]&&0===e.length);else{const n=s?"tickerItems":"visibleItems";this.proceedStampDomArraySplices371_(n,t,{addedCount:e.length,removedCount:l.childElementCount})}const c=()=>{this.markDirty&&this.markDirty();const e={container:l};i&&this.hostElement.dispatchEvent(new CustomEvent("yt-rendererstamper-finished",{bubbles:!0,cancelable:!1,composed:!0,detail:e})),e.container=null};this.ec389pr?this.ec389pr.then(c):c()}:console.warn("0xF0230 Function Signature Changed")),"function"!=typeof o.createComponent_||3!==o.createComponent_.length||o.createComponent58_?console.warn("0xF0230 Function Signature Changed"):(o.createComponent58_=o.createComponent_,o.createComponent_=function(e,t,n){const o=M(e,t,n);return void 0!==o?o:this.createComponent58_(e,t,n)}),o.handleLiveChatActions47||"function"!=typeof o.handleLiveChatActions||1!==o.handleLiveChatActions.length?ve.log("USE_ADVANCED_TICKING::handleLiveChatActions - NG"):(o.handleLiveChatActions47=o.handleLiveChatActions,o.handleLiveChatActions=function(e){try{N(e)}catch(e){console.warn(e)}return this.handleLiveChatActions47(e)},ve.log("USE_ADVANCED_TICKING::handleLiveChatActions - OK")),"function"!=typeof o.keepScrollClamped||o.keepScrollClamped72||"0.17.10"!==ae(o.keepScrollClamped)?(se(()=>ae(o.keepScrollClamped,"0.17.10")),ve.log("RAF_FIX: keepScrollClamped",e,"NG")):(o.keepScrollClamped72=o.keepScrollClamped,o.keepScrollClamped=function(){const e=Re(this);e&&e.hostElement&&(e._bound_keepScrollClamped=e._bound_keepScrollClamped||e.keepScrollClamped.bind(Te(e)),e.scrollClampRaf=n(e._bound_keepScrollClamped),e.maybeClampScroll())},ve.log("RAF_FIX: keepScrollClamped",e,"OK")),"function"==typeof o.startScrolling&&"function"==typeof o.scrollIncrementally&&"|1.43.31|1.44.31|".indexOf("|"+ae(o.startScrolling)+"|")>=0&&"|1.78.45|1.82.43|1.43.31|".indexOf("|"+ae(o.scrollIncrementally)+"|")>=0?(o.startScrolling=function(e){const t=Re(this);t&&t.hostElement&&(t.scrollStopHandle&&t.cancelAsync(t.scrollStopHandle),t.asyncHandle&&a(t.asyncHandle),t.lastFrameTimestamp=t.scrollStartTime=performance.now(),t.scrollRatePixelsPerSecond=e,t._bound_scrollIncrementally=t._bound_scrollIncrementally||t.scrollIncrementally.bind(Te(t)),t.asyncHandle=n(t._bound_scrollIncrementally))},o.__getTickerBarQuery__=function(){return"#items"===this.tickerBarQuery?this.$.items:this.hostElement.querySelector(this.tickerBarQuery)},o.scrollIncrementally=function(e){const t=Re(this);if(!t)return;if(!t.hostElement)return;const o=e-(t.lastFrameTimestamp||0),i=t.scrollRatePixelsPerSecond,r=o/1e3*(i||0),s=t.__getTickerBarQuery__();if(!s)return;const a=s.scrollLeft;t.lastFrameTimestamp==t.scrollStartTime||r>-1e-5&&r<1e-5||(a>0&&i>0&&r>0||a>0&&i<0&&r<0||a<1e-5&&a>-1e-5&&i>0&&r>0)&&(s.scrollLeft+=r,t.maybeClampScroll(),t.updateArrows()),t.lastFrameTimestamp=e,t._bound_scrollIncrementally=t._bound_scrollIncrementally||t.scrollIncrementally.bind(Te(t)),0<s.scrollLeft||i&&0<i?t.asyncHandle=n(t._bound_scrollIncrementally):t.stopScrolling()},ve.log("RAF_FIX: scrollIncrementally2",e,"OK")):(se(()=>ae(o.startScrolling,"1.43.31"))||re("cProto.startScrolling",o.startScrolling)(),se(()=>ae(o.scrollIncrementally,"1.78.45"))||re("cProto.scrollIncrementally",o.scrollIncrementally)(),ve.log("RAF_FIX: scrollIncrementally",e,"NG")),"function"!=typeof o.attached||o.attached37||"function"!=typeof o.detached||o.detached37)ve.log("CLOSE_TICKER_PINNED_MESSAGE_WHEN_HEADER_CLICKED - NG");else{o.attached37=o.attached,o.detached37=o.detached;let e=0;o.__naohzId__=0,o.attached=function(){return u.resolve(this).then(t=>{const n=t.hostElement||t;if(!(n instanceof m))return;if(!m.prototype.matches.call(n,".yt-live-chat-renderer"))return;const o=m.prototype.closest.call(n,"iron-pages.yt-live-chat-renderer");o&&(t.__naohzId__&&b.call(o,"click",t.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),t.__naohzId__=e=1+(1073741823&e),o.setAttribute("naohz",""+ +t.__naohzId__),g.call(o,"click",t.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),t=null)}),this.attached37.apply(this,arguments)},o.detached=function(){return u.resolve(this).then(e=>{const t=document.querySelector(`iron-pages[naohz="${+e.__naohzId__}"]`);t&&(b.call(t,"click",e.messageBoxClickHandlerForFade,{capture:!1,passive:!0}),e=null)}),this.detached37.apply(this,arguments)};const t=e=>{e.click()};o.messageBoxClickHandlerForFade=async e=>{const n=(e||0).target||0;if(n)for(let o=n;o instanceof m;o=ue(o)){const n=o.is;if("string"==typeof n&&n){if("yt-live-chat-pinned-message-renderer"===n)return;if("iron-pages"===n||"yt-live-chat-renderer"===n||"yt-live-chat-app"===n){const n=m.prototype.querySelector.call(o,"yt-live-chat-pinned-message-renderer:not([hidden]) #fade");return void(n&&(u.resolve(n).then(t),e&&e.stopPropagation()))}if("yt-live-chat-ticker-renderer"!==n){if(n.startsWith("yt-live-chat-ticker-"))return;if(!n.endsWith("-renderer"))return}}else if((o.nodeName||"").includes("BUTTON"))return}},ve.log("CLOSE_TICKER_PINNED_MESSAGE_WHEN_HEADER_CLICKED - OK")}else ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}).catch(console.warn),customElements.whenDefined("yt-live-chat-message-input-renderer").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-message-input-renderer hacks"),ve.log("[Begin]"),(()=>{const e="yt-live-chat-message-input-renderer",t=document.createElement(e),n=ie(t);if(n&&n.attached){if(null!==ht){let t=!1;"function"==typeof n.handleTimeout&&"function"==typeof n.updateTimeout&&(t=ae(n.handleTimeout,"1.27.16")&&ae(n.updateTimeout,"1.50.33"),t||ve.log("doHack = false")),t?(n.handleTimeout=function(t){const n=Re(this);n&&n.hostElement&&(console.log("cProto.handleTimeout",e),n.boundUpdateTimeout38_||(n.boundUpdateTimeout38_=n.updateTimeout.bind(Te(n))),n.timeoutDurationMs=n.timeoutMs=t,n.countdownRatio=1,0===n.lastTimeoutTimeMs&&ht.request(n.boundUpdateTimeout38_))},n.updateTimeout=function(t){const n=Re(this);n&&n.hostElement&&(console.log("cProto.updateTimeout",e),n.boundUpdateTimeout38_||(n.boundUpdateTimeout38_=n.updateTimeout.bind(Te(n))),n.lastTimeoutTimeMs&&(n.timeoutMs=Math.max(0,n.timeoutMs-(t-n.lastTimeoutTimeMs)),n.countdownRatio=n.timeoutMs/n.timeoutDurationMs),n.isAttached&&n.timeoutMs?(n.lastTimeoutTimeMs=t,ht.request(n.boundUpdateTimeout38_)):n.lastTimeoutTimeMs=0)},ve.log("RAF_HACK_INPUT_RENDERER",e,"OK")):(ve.log("typeof handleTimeout",typeof n.handleTimeout),ve.log("typeof updateTimeout",typeof n.updateTimeout),ve.log("RAF_HACK_INPUT_RENDERER",e,"NG"))}"function"!=typeof n.onFocusedChanged||1!==n.onFocusedChanged.length||n.onFocusedChanged372||(n.onFocusedChanged372=n.onFocusedChanged,n.onFocusedChanged=function(e){u.resolve(this).then(t=>{!0===t.isAttached&&t.onFocusedChanged372(e),t=null}).catch(console.warn)})}else ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}),null!==ht&&customElements.whenDefined("yt-emoji-picker-renderer").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-emoji-picker-renderer hacks"),ve.log("[Begin]"),(()=>{const e="yt-emoji-picker-renderer",t=document.createElement(e),n=ie(t);if(!n||!n.attached)return void ve.warn(`proto.attached for ${e} is unavailable.`);let o=!1;if("function"==typeof n.animateScroll_?(ve.log("animateScroll_: function - OK"),o=ae(n.animateScroll_,"1.102.49")):ve.log("animateScroll_",typeof n.animateScroll_),o){const t=m.prototype.querySelector,o=e=>({querySelector:n=>t.call(e,n)});n.animateScroll_=function(e){const t=Re(this);t&&t.hostElement&&(t.boundAnimateScroll39_||(t.boundAnimateScroll39_=t.animateScroll_.bind(Te(t))),t.lastAnimationTime_||(t.lastAnimationTime_=e),200>(e-=t.lastAnimationTime_)?(o(t.hostElement).querySelector("#categories").scrollTop=t.animationStart_+(t.animationEnd_-t.animationStart_)*e/200,ht.request(t.boundAnimateScroll39_)):(null!=t.animationEnd_&&(o(t.hostElement).querySelector("#categories").scrollTop=t.animationEnd_),t.animationEnd_=t.animationStart_=null,t.lastAnimationTime_=0),t.updateButtons_())},ve.log("ENABLE_RAF_HACK_EMOJI_PICKER",e,"OK")}else ve.log("ENABLE_RAF_HACK_EMOJI_PICKER",e,"NG")})(),ve.log("[End]"),Ee()}),null!==ht&&customElements.whenDefined("yt-live-chat-docked-message").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-docked-message hacks"),ve.log("[Begin]"),(()=>{const e="yt-live-chat-docked-message",t=document.createElement(e),n=ie(t);if(!n||!n.attached)return void ve.warn(`proto.attached for ${e} is unavailable.`);let o=!1;"function"==typeof n.detached&&"function"==typeof n.checkIntersections&&"function"==typeof n.onDockableMessagesChanged&&void 0===n.boundCheckIntersections?(ve.log("detached: function - OK"),ve.log("checkIntersections: function - OK"),ve.log("onDockableMessagesChanged: function - OK"),o=ae(n.detached,"0.32.22")&&ae(n.checkIntersections,"0.128.85")&&ae(n.onDockableMessagesChanged,"0.20.11")):(ve.log("detached",typeof n.detached,"NG"),ve.log("checkIntersections",typeof n.checkIntersections,"NG"),ve.log("onDockableMessagesChanged",typeof n.onDockableMessagesChanged,"NG")),o?(n.__boundCheckIntersectionsSubstitutionFn__=function(){const e=this;e.i5zmk||"function"!=typeof e.boundCheckIntersections||"function"!=typeof e.checkIntersections||(e.i5zmk=1,e.boundCheckIntersections=e.checkIntersections.bind(Te(e)))},n.checkIntersections=function(){const e=Re(this);if(e&&e.hostElement)if("function"==typeof e.__boundCheckIntersectionsSubstitutionFn__&&e.__boundCheckIntersectionsSubstitutionFn__(),e.dockableMessages.length){e.intersectRAF=ht.request(e.boundCheckIntersections);let t=e.dockableMessages[0],n=e.hostElement.getBoundingClientRect();t=t.getBoundingClientRect();let o=t.top-n.top,i=8>=o;if(o=8>=o-e.hostElement.clientHeight,i){let r;for(;i&&(r=e.dockableMessages.shift(),i=e.dockableMessages[0],i);){i=i.getBoundingClientRect(),o=i.top-n.top;let e=8>=o;if(8>=o-t.height){if(!e)return;t=i}i=e}e.dock(r)}else o&&e.dockedItem&&e.clear()}else e.intersectRAF=0},n.onDockableMessagesChanged=function(){const e=this;"function"==typeof e.__boundCheckIntersectionsSubstitutionFn__&&e.__boundCheckIntersectionsSubstitutionFn__(),e.dockableMessages.length&&!e.intersectRAF&&(e.intersectRAF=ht.request(e.boundCheckIntersections))},n.detached=function(){this.intersectRAF&&ht.cancel(this.intersectRAF)},ve.log("ENABLE_RAF_HACK_DOCKED_MESSAGE",e,"OK")):ve.log("ENABLE_RAF_HACK_DOCKED_MESSAGE",e,"NG")})(),ve.log("[End]"),Ee()}).catch(console.warn),customElements.whenDefined("yt-img-shadow").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-img-shadow hacks"),ve.log("[Begin]"),(()=>{const e="yt-img-shadow",t=document.createElement(e),n=ie(t);n&&n.attached?("function"!=typeof n.thumbnailChanged_||n.thumbnailChanged66_?ve.log("cProto.thumbnailChanged_ - NG"):(n.thumbnailChanged66_=n.thumbnailChanged_,n.thumbnailChanged_=function(e){if((!this.oldThumbnail_||!this.thumbnail||this.oldThumbnail_.thumbnails!==this.thumbnail.thumbnails)&&(this.oldThumbnail_||this.thumbnail))return this.thumbnailChanged66_.apply(this,arguments)},ve.log("cProto.thumbnailChanged_ - OK")),"function"!=typeof n.setSrc_||n.setSrc66_?ve.log("cProto.setSrc_ - NG"):(n.setSrc66_=n.setSrc_,n.setSrc_=function(e){if((((this||0).$||0).img||0).src!==e)return this.setSrc66_.apply(this,arguments)},ve.log("cProto.setSrc_ - OK"))):ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}).catch(console.warn),customElements.whenDefined("yt-live-chat-author-badge-renderer").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-author-badge-renderer hacks"),ve.log("[Begin]"),(()=>{const e="yt-live-chat-author-badge-renderer",t=document.createElement(e),n=ie(t);n&&n.attached?"function"==typeof n.dataChanged&&!n.dataChanged86&&"|0.169.106|".includes(`|${ae(n.dataChanged)}|`)?(n.dataChanged86=n.dataChanged,n.dataChanged=function(){const e=(this||0).data,t=((this||0).$||0).image;if(t&&e&&t.firstElementChild){const n=t.firstElementChild;if(n===t.lastElementChild){if(e.icon&&"YT-ICON"===n.nodeName.toUpperCase()){const t=n,o=B(t),i="icon"in o||"defaultToFilled"in o?o:t;if("MODERATOR"===e.icon.iconType&&this.enableNewModeratorBadge)"yt-sys-icons:shield-filled"!==i.icon&&(i.icon="yt-sys-icons:shield-filled"),!0!==i.defaultToFilled&&(i.defaultToFilled=!0);else{const t="live-chat-badges:"+e.icon.iconType.toLowerCase();i.icon!==t&&(i.icon=t),!1!==i.defaultToFilled&&(i.defaultToFilled=!1)}return}if(e.customThumbnail&&"IMG"==n.nodeName.toUpperCase()){const t=n;if(e.customThumbnail.thumbnails.map(e=>e.url).includes(t.src))return void t.setAttribute("alt",this.hostElement.ariaLabel||"")}}}return this.dataChanged86.apply(this,arguments)},ve.log("cProto.dataChanged - OK")):"function"==typeof n.dataChanged&&!n.dataChanged86&&"|1.163.100|1.162.100|1.160.97|1.159.97|".includes(`|${ae(n.dataChanged)}|`)?(n.dataChanged86=n.dataChanged,n.dataChanged=function(e){const t=((this||0).$||0).image;if(t&&e&&t.firstElementChild){const n=t.firstElementChild;if(n===t.lastElementChild){if(e.icon&&"YT-ICON"===n.nodeName.toUpperCase()){const t=n,o=B(t),i="icon"in o||"defaultToFilled"in o?o:t;if("MODERATOR"===e.icon.iconType&&this.enableNewModeratorBadge)"yt-sys-icons:shield-filled"!==i.icon&&(i.icon="yt-sys-icons:shield-filled"),!0!==i.defaultToFilled&&(i.defaultToFilled=!0);else{const t="live-chat-badges:"+e.icon.iconType.toLowerCase();i.icon!==t&&(i.icon=t),!1!==i.defaultToFilled&&(i.defaultToFilled=!1)}return}if(e.customThumbnail&&"IMG"==n.nodeName.toUpperCase()){const t=n;if(e.customThumbnail.thumbnails.map(e=>e.url).includes(t.src))return void t.setAttribute("alt",this.hostElement.ariaLabel||"")}}}return this.dataChanged86.apply(this,arguments)},ve.log("cProto.dataChanged - OK")):(se(()=>ae(n.dataChanged,"0.169.106")),ve.log("cProto.dataChanged - NG")):ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}).catch(console.warn);{const e=e=>{const t=ie(e);t&&t.attached?(t&&"function"==typeof t.immediatelyApplyLiveChatActions&&1===t.immediatelyApplyLiveChatActions.length&&!t.immediatelyApplyLiveChatActions82&&(t.immediatelyApplyLiveChatActions82=t.immediatelyApplyLiveChatActions,t.immediatelyApplyLiveChatActions=function(e){try{N(e)}catch(e){console.warn(e)}return this.immediatelyApplyLiveChatActions82(e)}),t&&"function"==typeof t.preprocessActions_&&1===t.preprocessActions_.length&&!t.preprocessActions82_&&(t.preprocessActions82_=t.preprocessActions_,t.preprocessActions_=function(e){const t=Date.now();e=this.preprocessActions82_(e);try{N(e,t)}catch(e){console.warn(e)}return e})):console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Oe&&Ne.push(e),Fe().then(e)}{const e=e=>{const t=ie(e);if(t&&t.attached){if(!(262144&~window._flag0281_)&&t&&"function"==typeof t.preprocessActions_&&1===t.preprocessActions_.length&&!t.preprocessActions92_){let e=!1,n=!1,o="",i="",r="";const s=function(){if(e)return this.emitSmoothedMessages018();e=!0;try{if(!n){const e=Object.getOwnPropertyNames(this);for(const t of e){if(`${t}`.endsWith("_estimatedUpdateInterval"))o=t;else if(`${t}`.endsWith("_lastUpdateTime"))i=t;else{if(!`${t}`.endsWith("_messageQueue"))continue;r=t}if(o&&i&&r)break}o&&i&&r&&(n=!0)}o&&i&&(this[o]=78,this[i]=Date.now()-1)}catch(e){}let t,s=!1;try{const e=r?this[r]:null;e&&e.length&&(e.length>255||document.hidden&&(s=!0))}catch(e){}return s?p(()=>this.emitSmoothedMessages019(),250):t=this.emitSmoothedMessages018(),e=!1,t};t.preprocessActions92_=t.preprocessActions_,t.preprocessActions_=function(e){e=this.preprocessActions92_(e);try{const e=this.smoothedQueue_;e&&!e.__fix018__&&(e.__fix018__=!0,e.emitSmoothedMessages018||"function"!=typeof e.emitSmoothedMessages||0!==e.emitSmoothedMessages.length||(e.emitSmoothedMessages018=e.emitSmoothedMessages,e.emitSmoothedMessages019=s,e.emitSmoothedMessages=s))}catch(e){console.warn(e)}return e}}}else console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Oe&&Ne.push(e),Fe().then(e)}{const e=e=>e&&e.get&&!e.set&&e.enumerable&&e.configurable,t=new r,n={},o=function(){let o;if(void 0===t.get(this)){const i=document.createElement;let r=null;if(t.set(this,null),document.createElement=function(){let e=i.apply(this,arguments);return r=e,e},o=this.createTooltipIfRequired14_(),document.createElement=i,r instanceof m&&r.is)if(t.set(this,r),r.setAttribute("__nogc__",""),"number"==typeof r.offset&&(n.offset=r.offset),"boolean"==typeof r.fitToVisibleBounds&&(n.fitToVisibleBounds=r.fitToVisibleBounds),"string"==typeof r.position&&(n.position=r.position),"string"==typeof r.for&&(n.for=r.for),"undefined"!=typeof Polymer&&Polymer.__fixedGetOwnerRoot__&&Polymer.__fixedQuerySelector__);else{let t=null;const n=B(r);e(Object.getOwnPropertyDescriptor(n.constructor.prototype||{},"target"))?t=n.constructor.prototype:e(Object.getOwnPropertyDescriptor(r.constructor.prototype||{},"target"))&&(t=r.constructor.prototype),t&&(delete t.target,Object.defineProperty(t,"target",{get(){const e=B(this),t=e.hostElement||e;let n=t.parentNode,o=t.getRootNode();const i=e.for||t.for;return i?o.querySelector("#"+i):n}}))}else t.set(this,null)}else o=this.createTooltipIfRequired14_();const i=t.get(this);if(i){i.remove(),"number"==typeof n.offset&&(i.offset=n.offset),"boolean"==typeof n.fitToVisibleBounds&&(i.fitToVisibleBounds=n.fitToVisibleBounds);try{"string"==typeof n.position&&(i.position=n.position),"string"==typeof n.for?i.for=n.for:delete i.for}catch(e){}}const r=i;if(!r._showing&&r.__shady_parentNode&&r.__shady_parentNode!==r.parentNode){if(r.__shady_parentNode)try{r.__shady_parentNode.__shady_removeChild(r)}catch(e){}if(r.__shady_parentNode)try{r.__shady_parentNode.removeChild(r)}catch(e){}if(r.__shady_parentNode)try{r.__shady_parentNode.__shady_native_removeChild(r)}catch(e){}if(r.__shady_parentNode)try{C.call(r.__shady_parentNode,r)}catch(e){}if(r.parentNode&&!r.__shady_parentNode)try{C.call(r.parentNode,r)}catch(e){}}return o},i=e=>{const t=ie(e);t&&t.attached?t&&"function"==typeof t.createTooltipIfRequired_&&0===t.createTooltipIfRequired_.length&&!t.createTooltipIfRequired14_&&(t.createTooltipIfRequired14_=t.createTooltipIfRequired_,t.createTooltipIfRequired_=o):console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Oe&&Ne.push(i),Fe().then(i),customElements.whenDefined("tp-yt-paper-tooltip").then(()=>{h(),Ae("YouTube Super Fast Chat"," | tp-yt-paper-tooltip hacks"),ve.log("[Begin]"),(()=>{const e="tp-yt-paper-tooltip",t=document.createElement(e),n=ie(t);n&&n.attached?("function"==typeof n.attached&&"function"==typeof n.detached&&n._readyClients&&n._attachDom&&n.ready&&!n._readyClients43?(n._readyClients43=n._readyClients,n._readyClients=function(){let e=n._readyClients43.apply(this,arguments);return this.$&&this.$$&&this.$.tooltip&&(this.root=null),e},ve.log("_readyClients - OK")):ve.log("_readyClients - NG"),"function"!=typeof n.show||n.show17?ve.log("trim tooltip content - NG"):(n.show17=n.show,n.show=function(){let e=this.show17.apply(this,arguments);return!0===this._showing&&u.resolve(this).then(e=>{const t=(e.$||0).tooltip;if(t&&null===t.firstElementChild){let e=t.textContent;"string"==typeof e&&e.length>=2&&(t.textContent=e.trim())}e=null}).catch(console.warn),e},ve.log("trim tooltip content - OK"))):ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}).catch(console.warn)}{const e=()=>{let e=0,t=null;const n={muHandler282:function(n){if(!n||!n.isTrusted||!e)return;const o=t;e=0,t=null;const i=Re(ye)||0,r=i.hostElement||i;r.hasAttribute("menu-visible")&&(m.prototype.closest.call(r,"yt-live-chat-banner-renderer")||o&&o.positionTarget&&r.contains(o.positionTarget)&&(e=Date.now(),n.stopImmediatePropagation(),n.stopPropagation(),u.resolve(o).then(e=>{e.cancel(),e=null})))},mlHandler282:function(){e=0,t=null},ckHandler282:function(t){t&&t.isTrusted&&e&&Date.now()-e<40&&(e=Date.now(),t.stopImmediatePropagation(),t.stopPropagation())},tapHandler282:function(t){t&&t.isTrusted&&e&&Date.now()-e<40&&(e=Date.now(),t.stopImmediatePropagation(),t.stopPropagation())},handleEvent(e){if(e){const t=Re(ye)||0,n=B(t),o=n.hostElement||n;if(!n||!0!==n.isAttached||!0!==o.isConnected)return;switch(e.type){case"mouseup":return this.muHandler282(e);case"mouseleave":return this.mlHandler282(e);case"tap":return this.tapHandler282(e);case"click":return this.ckHandler282(e)}}}};document.addEventListener("mousedown",function(o){if(!o||!o.isTrusted||!o.target)return;e=0,t=null;const i=Re(ye);if(!i)return;const r=m.prototype.closest.call(i,"[menu-visible]")||0;if(!r||!r.hasAttribute("whole-message-clickable"))return;const s=B(r);if(!s.isClickableChatRow111||!s.isClickableChatRow111()||!m.prototype.contains.call(r,o.target))return;if(m.prototype.closest.call(r,"yt-live-chat-banner-renderer"))return;let a=null;for(const e of document.querySelectorAll("tp-yt-iron-dropdown.style-scope.yt-live-chat-app"))e&&e.positionTarget===i&&(a=e);if(a&&!o.target.closest("ytd-menu-popup-renderer")&&(t=a)){e=Date.now(),o.stopImmediatePropagation(),o.stopPropagation(),ye=Te(r);const t={capture:!0,passive:!1,once:!0};document.removeEventListener("mouseup",n,t),document.removeEventListener("mouseleave",n,t),document.removeEventListener("tap",n,t),document.removeEventListener("click",n,t),document.addEventListener("mouseup",n,t),document.addEventListener("mouseleave",n,t),document.addEventListener("tap",n,t),document.addEventListener("click",n,t)}},!0)};dt(["yt-live-chat-paid-message-renderer","yt-live-chat-membership-item-renderer","yt-live-chat-paid-sticker-renderer","yt-live-chat-text-message-renderer","yt-live-chat-auto-mod-message-renderer"]).then(t=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-message-renderer(s)... hacks"),ve.log("[Begin]");let n=!1;const o=function(){return this.data&&"function"==typeof this.shouldSupportWholeItemClick&&"function"==typeof this.hasModerationOverlayVisible&&this.data.contextMenuEndpoint&&this.wholeMessageClickable&&this.shouldSupportWholeItemClick()&&!this.hasModerationOverlayVisible()},i=function(){try{return this.updateMessage372()}catch(e){console.warn(e)}};for(const e of t)(()=>{const t=e,r=document.createElement(t),s=ie(r);if(!s||!s.attached)return void ve.warn(`proto.attached for ${t} is unavailable.`);if(s&&"function"==typeof s.updateMessage&&!s.updateMessage373&&0===s.updateMessage.length&&ae(s.updateMessage)){const e=ae(s.updateMessage);"0.36.21"!==e?console.warn("updateMessage signature changed",e,"0.36.21",s.updateMessage):(s.updateMessage373=!0,s.updateMessage372=s.updateMessage,s.updateMessage=i)}const a=B(r);"wholeMessageClickable"in a&&"function"==typeof a.hasModerationOverlayVisible&&"function"==typeof a.shouldSupportWholeItemClick?(s.isClickableChatRow111=o,"function"==typeof s.shouldSupportWholeItemClick&&"function"==typeof s.hasModerationOverlayVisible&&(n=!0),ve.log("shouldSupportWholeItemClick - OK",t)):ve.log("shouldSupportWholeItemClick - NG",t)})();n&&(e(),ve.log("FIX_CLICKING_MESSAGE_MENU_DISPLAY_ON_MOUSE_CLICK - Doc MouseEvent OK")),ve.log("[End]"),Ee()}).catch(console.warn)}{let e=null,t=null;document.addEventListener("mousedown",n=>{if(!n||!n.isTrusted)return;let o=n.target;for(;o instanceof m&&!o.is;o=o.parentNode);if(!o||!o.is)return;if(o.closest("ytd-menu-popup-renderer"))return;const i=B(o);if("function"==typeof i.onItemTap){i._onItemTap_isNonStationary=0;const r=ie(o);r.onItemTap366||"function"!=typeof r.onItemTap||1!==r.onItemTap.length||(r.onItemTap366=r.onItemTap,r.onItemTap=function(e){const t=this._onItemTap_isNonStationary;if(this._onItemTap_isNonStationary=0,!(t>Date.now()))return this.onItemTap366.apply(this,arguments)}),t=n,e=Te(i)}else t=null,e=null},{capture:!0,passive:!0}),document.addEventListener("mouseup",n=>{if(!n||!n.isTrusted)return;const o=t;if(t=null,!o)return;const i=Re(e);if(e=null,i)if(n.timeStamp-o.timeStamp>280)i._onItemTap_isNonStationary=Date.now()+40;else if(`${window.getSelection()}`.trim().replace(/[\u2000-\u200a\u202f\u2800\u200B\u200C\u200D\uFEFF]+/g,"").length>=1)i._onItemTap_isNonStationary=Date.now()+40;else{const e=n.clientX-o.clientX,t=n.clientY-o.clientY,r=Math.sqrt(e*e+t*t)*window.devicePixelRatio*.26458333;i._onItemTap_isNonStationary=r>1?Date.now()+40:0}},{capture:!0,passive:!0})}document.addEventListener("mousedown",function(e){let t=0,n=0,o=(e||0).target||0;if(!o)return;if(o.closest("ytd-menu-popup-renderer"))return;for(;o instanceof m&&!(++t>4)&&"string"!=typeof(o.is||B(o).is||null);)o=ue(o);const i=[];for(;o instanceof m&&!(++n>4);){const e=B(o);if("string"==typeof(o.is||e.is||null)&&i.push(o),"function"==typeof e.showContextMenu)break;o=o.parentComponent||e.parentComponent||null}if(!(o instanceof m))return;const r=B(o);if("function"!=typeof r.handleGetContextMenuResponse_||"function"!=typeof r.handleGetContextMenuError)return void console.log("Error Found: handleGetContextMenuResponse_ OR handleGetContextMenuError is not defined on a component with showContextMenu");const a=(r.data||0).contextMenuEndpoint;if(!a)return;if(r.opened||!r.isAttached)return;"function"!=typeof r.__cacheResolvedEndpointData__&&console.log(`preRequest for showContextMenu in ${r.is} is not yet supported.`);const l=B(c=o).$||c.$||0;var c;let d=!1;if((i.length>=2&&"menu-button"===i[0].id&&(l||0)["menu-button"]===i[0]||1===i.length&&i[0]===o||i.length>=2&&"author-photo"===i[0].id&&(l||0)["author-photo"]===i[0])&&(d=!0),!1!==d){if("function"==typeof r.__getCachedEndpointData__&&!r.__getCachedEndpointData__(a))if("function"!=typeof r.__showContextMenu_mutex_unlock_isEmpty__||r.__showContextMenu_mutex_unlock_isEmpty__()){if(d){let t=0;const n=function(){let e=null;const t=new u(t=>{e=t}),n=()=>{const t=e;t&&(e=null,t())};return{p1:t,p1unlock:n,assignLock:(e,o)=>{e.__showContextMenu_assign_lock__(t),o&&s(n,o)}}}(),o=800,i="__$$__proxy_to_this__$$__"+Date.now();try{const o=function(){n.p1unlock(),5===t?this[i]===r?(e=>{if(!(e=e.response||e))return void console.log("unexpected error in prerequest for showContextMenu.onSuccess");let t=null;e.liveChatItemContextMenuSupportedRenderers&&e.liveChatItemContextMenuSupportedRenderers.menuRenderer&&(t=e.liveChatItemContextMenuSupportedRenderers.menuRenderer),t&&(e=t,r.__cacheResolvedEndpointData__(a,e,!0))})(...arguments):console.log("Error in prerequest for showContextMenu.this"):console.log("Error in prerequest for showContextMenu.onSuccessHelperFn")},s=function(){n.p1unlock(),5===t?this[i]===r?(()=>{r.__cacheResolvedEndpointData__(a,null)})(...arguments):console.log("Error in prerequest for showContextMenu.this"):console.log("Error in prerequest for showContextMenu.onFailureHelperFn")},l=new Proxy({__showContextMenu_forceNativeRequest__:1,get handleGetContextMenuResponse_(){return t+=2,o},get handleGetContextMenuError(){return t+=3,s}},{get(e,t,n){if(t in e)return e[t];if(t===i)return r;let o=!1;return t in r&&("data"===t||"function"==typeof r[t])&&(o=!0),o?r[t]:void 0}}),c=(()=>{const{target:t,bubbles:n,cancelable:o,cancelBubble:i,srcElement:r,timeStamp:s,defaultPrevented:a,currentTarget:l,composed:c}=e,d=function(){},[h,u,p]=[d,d,d];return{type:"tap",eventPhase:0,isTrusted:!1,__composed:!0,bubbles:n,cancelable:o,cancelBubble:i,timeStamp:s,target:t,srcElement:r,defaultPrevented:a,currentTarget:l,composed:c,stopPropagation:h,stopImmediatePropagation:u,preventDefault:p}})();r.showContextMenu.call(l,c)}catch(e){console.warn(e),t=7}if(5!==t)return void console.log("Error in prerequest for showContextMenu",t);n.assignLock(r,o)}}else console.log("preRequest on showContextMenu aborted due to stacked network request")}else console.log("doPreRequest = fasle on showContextMenu",i)},!0),dt(["yt-live-chat-ticker-sponsor-item-renderer","yt-live-chat-ticker-paid-message-item-renderer","yt-live-chat-banner-header-renderer","yt-live-chat-text-message-renderer","ytd-sponsorships-live-chat-gift-purchase-announcement-renderer","ytd-sponsorships-live-chat-header-renderer","ytd-sponsorships-live-chat-gift-redemption-announcement-renderer","yt-live-chat-paid-sticker-renderer","yt-live-chat-viewer-engagement-message-renderer","yt-live-chat-paid-message-renderer"]).then(e=>{h(),Ae("YouTube Super Fast Chat"," | fixShowContextMenu"),ve.log("[Begin]");const n=new S;let o=null,i=null;const a=new r,l=(e,n,o)=>{n?(o&&(n=t(n)),a.set(e,n)):a.remove(e)},c=function(e){return(e=e||(this.data||0).contextMenuEndpoint||0)?a.get(e):null},d=function(e){e=t(e),u.resolve(e).then(e=>{this.__showContextMenu_skip_cacheResolvedEndpointData__=1,this.showContextMenu_(e),this.__showContextMenu_skip_cacheResolvedEndpointData__=0,e=null})},p=function(e){if(this&&this.__showContextMenu_forceNativeRequest__)return this.showContextMenu37(e);if(this&&this.isAttached){if(!this.__showContextMenu_forceNativeRequest__){const t=(this.data||0).contextMenuEndpoint||0;if(t){const n=this.__getCachedEndpointData__(t);if(n)return this.__showCachedContextMenu__(n),void(e&&e.stopPropagation())}}return this.showContextMenu37(e)}},m=function(e){if(this&&this.__showContextMenu_forceNativeRequest__)return this.showContextMenu37_(e);if(this&&this.isAttached){if(!this.__showContextMenu_skip_cacheResolvedEndpointData__){const t=(this.data||0).contextMenuEndpoint||0;if(t){const n=this.__cacheResolvedEndpointData__;"function"==typeof n&&n(t,e,!0)}}return this.showContextMenu37_(e)}},f=()=>null===o,_=function(e){n.lockWith(t=>{e.then(t),e=null,t=null})},y=function(e){if(this.__showContextMenu_forceNativeRequest__)return this.showContextMenu47(e);if(!this||!this.isAttached)return;i=this;const t=Te(this);n.lockWith(n=>{const r=Re(t);if(i===r&&r){s(n,800),o=n;try{r.showContextMenu47(e)}catch(e){console.warn(e),n()}}else n()})},g=function(e){return o&&this===i&&(o(),o=null),this.showContextMenu47_(e)};for(const t of e)(()=>{const e=document.createElement(t),n=ie(e);n&&n.attached?("function"!=typeof n.showContextMenu||"function"!=typeof n.showContextMenu_||n.showContextMenu37||n.showContextMenu37_||1!==n.showContextMenu.length||1!==n.showContextMenu_.length?ve.log("CACHE_SHOW_CONTEXT_MENU_FOR_REOPEN - NG",t):(n.showContextMenu37_=n.showContextMenu_,n.showContextMenu37=n.showContextMenu,n.__showContextMenu_forceNativeRequest__=0,n.__cacheResolvedEndpointData__=l,n.__getCachedEndpointData__=c,n.__showCachedContextMenu__=d,n.showContextMenu=p,n.showContextMenu_=m,ve.log("CACHE_SHOW_CONTEXT_MENU_FOR_REOPEN - OK",t)),"function"!=typeof n.showContextMenu||"function"!=typeof n.showContextMenu_||n.showContextMenu47||n.showContextMenu47_||1!==n.showContextMenu.length||1!==n.showContextMenu_.length?ve.log("ENABLE_MUTEX_FOR_SHOW_CONTEXT_MENU - NG",t):(n.showContextMenu47_=n.showContextMenu_,n.showContextMenu47=n.showContextMenu,n.__showContextMenu_mutex_unlock_isEmpty__=f,n.__showContextMenu_assign_lock__=_,n.showContextMenu=y,n.showContextMenu_=g,ve.log("ENABLE_MUTEX_FOR_SHOW_CONTEXT_MENU - OK",t))):ve.warn(`proto.attached for ${t} is unavailable.`)})();ve.log("[End]"),Ee()}).catch(console.warn),customElements.whenDefined("tp-yt-paper-dialog").then(()=>{h(),Ae("YouTube Super Fast Chat"," | tp-yt-paper-dialog hacks"),ve.log("[Begin]"),(()=>{const e="tp-yt-paper-dialog",t=document.createElement(e),n=ie(t);n&&n.attached?"function"!=typeof n.__openedChanged||n.__openedChanged49||0!==n.__openedChanged.length||(n.__openedChanged49=n.__openedChanged,n.__openedChanged=function(){const e=(this||0)._manager||0;return e&&!e.trackBackdrop49&&e.trackBackdrop&&(e.trackBackdrop49=e.trackBackdrop,0===e.trackBackdrop.length&&(e.trackBackdrop=function(){try{return this.trackBackdrop49()}catch(e){let t=!0;e instanceof TypeError&&"this.backdropElement.prepare is not a function"===e.message&&(t=!1),t&&console.log("manager.trackBackdrop",e)}})),this.__openedChanged49()}):ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}).catch(console.warn),customElements.whenDefined("tp-yt-iron-dropdown").then(()=>{h(),Ae("YouTube Super Fast Chat"," | tp-yt-iron-dropdown hacks"),ve.log("[Begin]"),(()=>{const e="tp-yt-iron-dropdown",t=document.createElement(e),o=ie(t);if(o&&o.attached){if("function"!=typeof o.__deraf||2!==o.__deraf.length||o.__deraf34||"2.42.24"!==ae(o.__deraf)?ve.log("USE_VANILLA_DEREF - NG"):(o.__deraf_hn__=function(e,t){const n=`_rafHandler_${e}`,o=this[n]||(this[n]=new r);if(o.has(t))return o.get(t);const i=()=>{this.__rafs[e]=null,t.call(this)};return o.set(t,i),o.set(i,i),i},o.__deraf34=o.__deraf,o.__deraf=function(e,t){let o=this.__rafs;null!==o[e]&&a(o[e]),o[e]=n(this.__deraf_hn__(e,t))},ve.log("USE_VANILLA_DEREF - OK")),"function"!=typeof o.__deraf||2!==o.__deraf.length||o.__deraf66?ve.log("FIX_DROPDOWN_DERAF - NG"):(o.__deraf66=o.__deraf,o.__deraf=function(e,t){return this.__byPassRAF__&&u.resolve(this).then(e=>{t.call(e),e=null}),this.__deraf66.apply(this,arguments)},ve.log("FIX_DROPDOWN_DERAF - OK")),"function"!=typeof o.__openedChanged||o.__mtChanged__||"0.46.20"!==ae(o.__openedChanged))se(()=>ae(o.__openedChanged,"0.46.20")),ve.log("FIX_MENU_REOPEN_RENDER_PERFORMANC_1 - NG");else{let e=null,t=null,i=0;o.__mtChanged__=function(e){u.resolve(this).then(e=>(e._applyFocus(),e)).then(t=>{e?t._renderOpened():t._renderClosed(),t=null}).catch(console.warn)};const r=()=>{i&&(i=0,t&&!e&&t.isAttached?t.__mtChanged__(1):e&&!t&&e.isAttached&&e.__mtChanged__(0),t=null,e=null)};"function"!=typeof o._openedChanged||o._openedChanged66||(o._openedChanged66=o._openedChanged,o._openedChanged=function(){this.__byPassRAF__=!0;let e=this._openedChanged66.apply(this,arguments);return this.__byPassRAF__=!1,e});const a=(e,t,n)=>({get:(t[e]||0).get||(n[e]||0).get,set:(t[e]||0).set||(n[e]||0).set});if(o.__modifiedMenuPropsFn__=function(){const e=Object.getOwnPropertyDescriptors(this.constructor.prototype),t=Object.getOwnPropertyDescriptors(this),n=a("autoFitOnAttach",e,t),o=a("expandSizingTargetForScrollbars",e,t),i=a("allowOutsideScroll",e,t);if(n.get||n.set)return void console.warn("there is setter/getter for autoFitOnAttach");if(o.get||o.set)return void console.warn("there is setter/getter for expandSizingTargetForScrollbars");if(!i.get||!i.set)return void console.warn("there is NO setter-getter for allowOutsideScroll");let{autoFitOnAttach:r,expandSizingTargetForScrollbars:s,allowOutsideScroll:l}=this;this.__AllowOutsideScrollPD__=i,Object.defineProperties(this,{autoFitOnAttach:{get:()=>r,set:e=>(r=e,!0),enumerable:!0,configurable:!0},expandSizingTargetForScrollbars:{get:()=>s,set:e=>(s=e,!0),enumerable:!0,configurable:!0},allowOutsideScroll:{get(){return!!this._modifiedMenuPropOn062__||l},set(e){return l=e,this.__AllowOutsideScrollPD__.set.call(this,e),!0},enumerable:!0,configurable:!0}})},"function"!=typeof o.position||o.position34||"function"!=typeof o.refit)ve.log("FIX_MENU_POSITION_ON_SHOWN - NG");else{let e=0;o.__refitByPosition__=function(){if(e++,e<=0&&(e=0),1!==e)return;const t=this.hostElement||this;if("visible"===document.visibilityState){const n=this.sizingTarget;if(!n)return void(e=0);t.setAttribute("rNgzQ",""),n.setAttribute("rNgzQ","");const o=()=>{t.removeAttribute("rNgzQ"),n.removeAttribute("rNgzQ")};s(async()=>{for(;e>=1;)await Ie(n),this.opened&&this.isAttached&&!0===n.isConnected&&n===this.sizingTarget&&n.matches('ytd-menu-popup-renderer[slot="dropdown-content"].yt-live-chat-app')&&this.refit(),e--;e=0,u.resolve().then(o)},4)}else e=0},o.position34=o.position,o.position=function(){return this._positionInitialize_&&(this._positionInitialize_=0,this.__refitByPosition__()),o.position34.apply(this,arguments)},ve.log("FIX_MENU_POSITION_ON_SHOWN - OK")}o.__openedChanged=function(){this._positionInitialize_=1,"boolean"!=typeof this.__menuTypeCheck__&&(this.__menuTypeCheck__=!0),this.opened?u.resolve().then(()=>{this._prepareRenderOpened()}).then(()=>{try{this._manager.addOverlay(this)}catch(e){console.log("this._manager.addOverlay(this) fails.")}if(1!==this._manager._overlays.length)return 1;t=this,e=null,i=i||n(r)}).then(e=>{e&&this.__mtChanged__(1)}).catch(console.warn):u.resolve().then(()=>{try{this._manager.removeOverlay(this)}catch(e){console.log("this._manager.removeOverlay(this) fails.")}if(0!==this._manager._overlays.length)return 1;e=this,t=null,i=i||n(r)}).then(e=>{e&&this.__mtChanged__(0)}).catch(console.warn)},ve.log("BOOST_MENU_OPENCHANGED_RENDERING - OK")}"function"!=typeof o.__openedChanged||o.__openedChanged82||(o.__openedChanged82=o.__openedChanged,o.__openedChanged=function(){const e=this.positionTarget;return ye=e?Te(e):null,this.__openedChanged82.apply(this,arguments)})}else ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}).catch(console.warn),(()=>{let e=0;const t=new WeakSet;new MutationObserver(()=>{for(const e of document.querySelectorAll("[shared-tooltip-text]:not([__a6cwm__])"))e.setAttribute("__a6cwm__","")}).observe(document,{subtree:!0,attributes:!0,attributeFilter:["shared-tooltip-text"],childList:!0}),new MutationObserver(e=>{for(const n of e){const e=n.target;if(n.attributeName)if(e.getAttribute("shared-tooltip-text")){t.add(e);for(const n of e.getElementsByTagName("*"))t.add(n)}else if(t.has(e)){t.remove(e);for(const n of e.getElementsByTagName("*"))t.remove(n)}}}).observe(document,{subtree:!0,attributes:!0,attributeFilter:["__a6cwm__","shared-tooltip-text"],childList:!1});let n=0;const o=o=>{const i=ie(o);if(i&&i.attached)if(1===n||"function"!=typeof i.onMouseOver_||i.onMouseOver37_||"function"!=typeof i.createTooltipIfRequired_||0!==i.createTooltipIfRequired_.length)1!==n&&(n=2,console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - NG"));else{n=1;const r=i.onMouseOver37_=i.onMouseOver_;if((()=>{let e,t=[],n=!1;try{r.call(o,{type:"mouseover",target:new Proxy({nodeName:"DIV",tagName:"DIV",getAttribute:function(){},parentNode:null},{get(e,n){if(t.push(`getter:${n}`),!(n in e))throw Error(`getter ${n} is not found`)},set(e,n,o){throw t.push(`setter:${n}`),Error(`setter ${n} is not found`)}})})}catch(e){n=!0}if(n)return!1;if("getter:getAttribute,getter:parentNode"!==t.join(","))return!1;t.length=0;try{e=new Proxy({nodeName:"DIV",tagName:"DIV",getAttribute:function(e){return t.push(`getter:getAttribute(${e})`),"shared-tooltip-text"===e?":cherry_blossom:":null},parentNode:null},{get(e,n){if(t.push(`getter:${n}`),!(n in e))throw Error(`getter ${n} is not found`);return e[n]},set(e,n,o){throw t.push(`setter:${n}`),Error(`setter ${n} is not found`)}}),r.call(o,{type:"mouseover",target:new Proxy({nodeName:"IMG",tagName:"IMG",id:"img",getAttribute:function(e){return t.push(`getter:getAttribute(${e})`),"shared-tooltip-text"===e?":cherry_blossom:":null},get parentNode(){return e},get parentElement(){return e}},{get(e,n){if(t.push(`getter:${n}`),!(n in e))throw Error(`getter ${n} is not found`);return e[n]},set(e,n,o){throw t.push(`setter:${n}`),Error(`setter ${n} is not found`)}})})}catch(e){n=!0}return e=null,!(!n||"getter:getAttribute,getter:getAttribute,getter:getAttribute(shared-tooltip-text),getter:getAttribute,getter:getAttribute(shared-tooltip-text),getter:tagName,getter:parentElement,getter:id,getter:id,getter:$$"!==t.join(","))||void 0})()){i.onMouseOver_=function(n){const o=(n||0).target||0;if(1===o.nodeType&&t.has(o)){const t=Date.now();if(e+18>t)return;const o=B(this);e=t;try{o.onMouseOver37_.call(this,n)}catch(e){console.warn(e)}}};const n=(e=>{const t=new Set(e),n=[...t];return t.clear(),n})([o,...document.querySelectorAll("yt-live-chat-renderer")]);for(const e of n){const t=B(e),n=t.hostElement;n&&!0===t.isAttached&&t.onMouseOver37_===i.onMouseOver37_&&"function"==typeof i.onMouseOver_&&i.onMouseOver_!==i.onMouseOver37_&&t.onMouseOver_===i.onMouseOver_&&(n.removeEventListener("mouseover",i.onMouseOver37_,!0),n.addEventListener("mouseover",i.onMouseOver_,!0))}console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - OK")}else console.log("[yt-chat-lcr] FIX_MOUSEOVER_FN - NG")}else console.warn("proto.attached for yt-live-chat-renderer is unavailable.")};!Oe&&Ne.push(o),Fe().then(o)})();const fe=e=>{if(!e||"object"!=typeof e)return;const t=e.constructor.prototype;let o="";for(const[t,n]of Object.entries(e))t.includes("_callbacks_")&&(o=t);if(!o||"function"!=typeof t.unsubscribe||2!==t.unsubscribe.length)return;if(t.unsubscribe16)return;t.unsubscribe16=t.unsubscribe,Ae("YouTube Super Fast Chat"," | *live-chat-manager* hacks"),ve.log("[Begin]");const i=new Map,r=function(e){if(!e||"string"!=typeof e)return null;let t=i.get(e);return t||(t=atob(e.replace(/-/g,"+").replace(/_/g,"/")),i.set(e,t),t)},s=[];let a=0,l=0;const c=()=>{if(a=0,1===s.length){const e=s[0];s.length=0,e()}else if(s.length>1){const e=s.slice(0);s.length=0;for(const t of e)t()}};{const e=e=>{if(e&&"function"==typeof e.unsubscribe16&&2===e.unsubscribe16.length&&"function"==typeof e.subscribe18&&(0===e.subscribe18.length||3===e.subscribe18.length)){const t=new Set(Object.keys(e)),n=new Set(Object.keys(e.constructor.prototype));if(t.size>=6&&n.size>=4){let i=0;for(const e of["nextHandle_","clients_",o,"unsubscribeAsyncHandles_","subscribe","subscribe18"])i+=t.has(e)?1:0;for(const e of["unsubscribe","handleInvalidationData_","unsubscribe16","subscribe19"])i+=n.has(e)?1:0;if(10===i){const t=e=>(e||0).constructor===Object;if(t(e.clients_)&&t(e[o])&&t(e.unsubscribeAsyncHandles_))return!0}}}return!1};t.subscribe19=function(e,t,n){const o=this.clients_||0,i=this.unsubscribeAsyncHandles_||0;if(!0!==this.__doCustomSubscribe__||!o||!i)return this.subscribe18.apply(this,arguments);let s=((e||0).invalidationId||0).objectId;return s?(s=r(s),o[s]&&i[s]<0&&delete i[s],this.subscribe18.apply(this,arguments)):this.subscribe18.apply(this,arguments)},t.unsubscribe=function(t,i){this.subscribe18||"function"!=typeof this.subscribe||(this.subscribe18=this.subscribe,this.subscribe=this.subscribe19,this.__doCustomSubscribe__=e(this));const d=this.clients_,h=this.unsubscribeAsyncHandles_;if(!0!==this.__doCustomSubscribe__||!d||!h)return this.unsubscribe16.apply(this,arguments);let u=((t||0).invalidationId||0).objectId;if(!u)return this.unsubscribe16.apply(this,arguments);u=r(u);const p=this[o]||0,m=p[u]||0;if(m&&(delete m[i],(e=>{for(const t in e)if(e.hasOwnProperty(t))return!1;return!0})(m))){const e=d[u];l=1+(1073741823&l);const t=-l;s.push(()=>{if(t===h[u]){const t={callbacks:p,callbackObj:m,client:d[u],handle:h[u]};let n=0;try{d[u]===e?(e&&"function"==typeof e.dispose&&e.dispose(),delete d[u],delete h[u],n=1):n=2}catch(e){console.warn(e)}console.log(`unsubscribed: ${n}`,this,t)}}),h[u]=t,0===a&&(a=n(c))}},ve.log("CHANGE_MANAGER_UNSUBSCRIBE - OK")}ve.log("[End]"),Ee()};u.all([customElements.whenDefined("yt-icon-shape"),customElements.whenDefined("yt-icon")]).then(()=>{let e=0,t=[document.createElement("yt-icon-shape"),document.createElement("yt-icon")];for(const n of t){let t=ie(n);t&&"function"==typeof t.shouldRenderIconShape&&!t.shouldRenderIconShape571&&1===t.shouldRenderIconShape.length&&(se(()=>ae(t.shouldRenderIconShape,"1.70.38")),e++,t.shouldRenderIconShape571=t.shouldRenderIconShape,t.shouldRenderIconShape=function(e){return this.isAnimatedIcon?this.shouldRenderIconShape571(e):this.iconType&&this.iconShapeData?!this.iconName&&this.shouldRenderIconShape571(e):this.shouldRenderIconShape571(e)})}1===e?console.log("modified shouldRenderIconShape - Y"):console.log("modified shouldRenderIconShape - N",e)}),customElements.whenDefined("yt-invalidation-continuation").then(()=>{let e=null;h(),Ae("YouTube Super Fast Chat"," | yt-invalidation-continuation hacks"),ve.log("[Begin]"),(()=>{const t="yt-invalidation-continuation",n=document.createElement(t),o=ie(n);if(!o||!o.attached)return void ve.warn(`proto.attached for ${t} is unavailable.`);const i=B(n).manager_||0;e=i})(),ve.log("[End]"),Ee(),fe(e)}).catch(console.warn),customElements.whenDefined("yt-live-interactivity-component-background").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-interactivity-component-background hacks"),ve.log("[Begin]"),(()=>{const e="yt-live-interactivity-component-background",t=document.createElement(e),n=ie(t);n&&n.attached?(n.__toStopAfterRun__=function(e){let t=new MutationObserver(()=>{t.disconnect(),t.takeRecords(),t=null,this.lottieAnimation&&this.lottieAnimation.stop(),L().then(()=>{this.lottieAnimation&&this.lottieAnimation.stop()})});t.observe(e,{subtree:!0,childList:!0})},"function"!=typeof n.maybeLoadAnimationBackground||n.maybeLoadAnimationBackground77||0!==n.maybeLoadAnimationBackground.length?ve.log("INTERACTIVITY_BACKGROUND_ANIMATION(1) - NG"):(n.maybeLoadAnimationBackground77=n.maybeLoadAnimationBackground,n.maybeLoadAnimationBackground=function(){let e=!0,t=!1;if(!this.__bypassDisableAnimationBackground__){let n=!1;this.lottieAnimation||(n=!0),n&&(!0===this.useAnimationBackground&&console.log("DISABLE_INTERACTIVITY_BACKGROUND_ANIMATION",this.lottieAnimation),e=!0,t=!0)}if(e){t&&this.hostElement instanceof m&&this.__toStopAfterRun__(this.hostElement);const e=this.maybeLoadAnimationBackground77.apply(this,arguments);return t&&this.lottieAnimation&&this.lottieAnimation.stop(),e}},ve.log("INTERACTIVITY_BACKGROUND_ANIMATION(1) - OK"))):ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()}).catch(console.warn),customElements.whenDefined("yt-live-chat-text-input-field-renderer").then(()=>{h(),Ae("YouTube Super Fast Chat"," | yt-live-chat-text-input-field-renderer hacks"),ve.log("[Begin]"),(()=>{const e="yt-live-chat-text-input-field-renderer",t=document.createElement(e),n=ie(t);n&&n.attached?"function"!=typeof n.focusedChanged||0!==n.focusedChanged.length||n.focusedChanged372||(n.focusedChanged372=n.focusedChanged,n.focusedChanged=function(){u.resolve(this).then(e=>{!0===e.isAttached&&e.focusedChanged372()})}):ve.warn(`proto.attached for ${e} is unavailable.`)})(),ve.log("[End]"),Ee()})}),ke.then(()=>{let e=window.onerror;try{JSON.parse("{}")}catch(e){console.warn(e)}e!==window.onerror&&(console.groupCollapsed("%cYouTube Super Fast Chat%c | JS Engine Issue Found","background-color: #010502; color: #fe806a; font-weight: 700; padding: 2px;","background-color: #010502; color: #fe806a; font-weight: 300; padding: 2px;"),console.warn("\nJSON.parse is hacked (e.g. Brave's script injection) which causes window.onerror changes on every JSON.parse call.\nPlease install https://greasyfork.org/scripts/473972-youtube-js-engine-tamer to fix the issue.\n"),console.groupEnd())})})})({IntersectionObserver:IntersectionObserver});
// ==UserScript==
// @name Privacy Redirector
// @namespace https://github.com/dybdeskarphet/privacy-redirector
// @author Ahmet Arda KavakcÄ±
// @license GPLv3
// @version 1.6.2
// @downloadURL
// https://raw.githubusercontent.com/dybdeskarphet/privacy-redirector/main/privacy-redirector.user.js
// @supportURL https://github.com/dybdeskarphet/privacy-redirector
// @updateURL
// https://raw.githubusercontent.com/dybdeskarphet/privacy-redirector/main/privacy-redirector.user.js
// @run-at document-start
// @match *://*.bandcamp.com/*
// @match *://*.fandom.com/*
// @match *://*.genius.com/*
// @match *://*.google.com/*
// @match *://*.imdb.com/*
// @match *://*.imgur.com/*
// @match *://*.imgur.io/*
// @match *://*.instagram.com/*
// @match *://*.medium.com/*
// @match *://*.pinterest.com/*
// @match *://*.quora.com/*
// @match *://*.reddit.com/*
// @match *://*.reuters.com/*
// @match *://*.soundcloud.com/*
// @match *://*.tiktok.com/*
// @match *://*.twitch.tv/*
// @match *://*.deepl.com/*
// @match *://*.deviantart.com/*
// @match *://twitch.tv/*
// @match *://*.twitter.com/*
// @match *://*.x.com/*
// @match *://*.tumblr.com/*
// @match *://x.com/*
// @match *://*.wikipedia.org/*
// @match *://*.youtube-nocookie.com/*
// @match *://*.youtube.com/*
// @match *://f4.bcbits.com/*
// @match *://genius.com/*
// @match *://i.pinimg.com/*
// @match *://imgur.com/*
// @match *://instagram.com/*
// @match *://medium.com/*
// @match *://news.ycombinator.com/*
// @match *://reddit.com/*
// @match *://stackoverflow.com/*
// @match *://t4.bcbits.com/*
// @match *://translate.google.com/*
// @match *://twitter.com/*
// @match *://www.goodreads.com/*
// @match *://www.pixiv.net/*
// @match *://youtube.com/*
// @exclude *://*.youtube.com/redirect*
// @exclude *://youtube.com/redirect*
// @downloadURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/Privacy20Redirector.user.js
// @updateURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/Privacy20Redirector.meta.js
// ==/UserScript==
async function e(e){if(_[0]){window.stop();let o=`${window.location.pathname}${window.location.search}`;if(window.location.pathname.startsWith("/embed"))C=_[1]?`${S}/invidious`:await A(R.invidious),M=`${I}${C}${window.location.pathname}${window.location.search}${U}`,window.location.replace(M);else{if("tubo"===e)C=await A(R.tubo),o=`/stream?url=${window.location.href}`,(window.location.pathname.startsWith("/@")||window.location.pathname.startsWith("/channel"))&&(o=`/channel?url=${window.location.href}`);else{if("freetube"===e){let e=window.location.href;return void window.location.replace(`freetube://${e}`)}C=_[1]&&"hyperpipe"!==e?`${S}/${e}`:await A(R[e])}M=`${I}${C}${o}${U}`,window.location.replace(M)}}}async function o(){if(a[0]){C=await A(R.tent);const e=new URLSearchParams(window.location.search),o=window.location.hostname.replace(/\..+/,""),i=/^\/([^\/]+?)\/(.+)/.exec(window.location.pathname),a=/^\/stream\/([a-f0-9]+?)\/([^\/]+?)\/([0-9]+)/.exec(window.location.pathname),t=/^\/img\/(.+)/.exec(window.location.pathname);let n="";switch(!0){case"/search"===window.location.pathname:n=`/search.php?query=${e.get("q")}`;break;case window.location.hostname.search(/(daily)?\.bandcamp\.com/)>0:"/"===window.location.pathname?n=`/artist.php?name=${o}`:i.length>2&&(n=`/release.php?artist=${o}&type=${i[1]}&name=${i[2]}`);break;case"f4.bcbits.com"===window.location.hostname:t.length>1&&(n=`/image.php?file=${t[1]}`);break;case"t4.bcbits.com"===window.location.hostname:a.length>3&&(n=`/audio.php?directory=${a[1]}&format=${a[2]}&file=${a[3]}&token=${e.get("token")}`);break;default:return}window.stop(),M=`${I}${C}${n}`,window.location.replace(M)}}async function i(){if(b[0]){C=await A(R.binternet);let e="";if("i.pinimg.com"===window.location.hostname)e=`/image_proxy.php?url=${window.location.href}`;else if(window.location.pathname.startsWith("/search"))e=`${window.location.pathname.replace("search","search.php").replace("/pins/","")}${window.location.search}`;else if("/"!==window.location.pathname)return;window.stop(),M=`${I}${C}${e}`,window.location.replace(M)}}let a=[!0,!0],t=[!1,!0],n=[!0,!1],r=[!0,!0],c=[!0,!0],s=[!0,!1],l=[!0,!0],w=[!0,!0],d=[!0,!0],p=[!0,!0],m=[!0,!1],u=[!0,!0],h=[!0,!0],b=[!0,!0],f=[!0,!0],$=[!0,!1],g=[!0,!1],y=[!0,!0],k=[!0,!0],v=[!0,!0],x=[!0,!1],z=[!0,!1],q=[!0,!0],W=[!0,!0],j=[!0,!1],_=[!0,!1],L="libreddit",P="librey";const R={anonymousoverflow:["code.whatever.social","ao.vern.cc","overflow.smnz.de","overflow.lunar.icu","overflow.adminforge.de","overflow.projectsegfau.lt","ao.bloat.cat","overflow.ducks.party","ao.owo.si","overflow.freedit.eu","ao.rootdo.org","a.opnxng.com","overflow.einfachzocken.eu","exchange.seitan-ayoub.lol","overflow.r4fo.com"],hyperpipe:["hyperpipe.surge.sh","hyperpipe.onrender.com","music.adminforge.de","music.pfcd.me","hyperpipe.projectsegfau.lt","hp.ggtyler.dev","hyperpipe.lunar.icu","music.seitan-ayoub.lol"],proxigram:["proxigram.protokolla.fi","proxigram.kyun.li","proxigram.lunar.icu","ig.opnxng.com"],biblioreads:["biblioreads.eu.org","biblioreads.vercel.app","biblioreads.mooo.com","bl.vern.cc","biblioreads.lunar.icu","read.seitan-ayoub.lol"],binternet:["binternet.ahwx.org","bn.bloat.cat","bn.opnxng.com","bn.vern.cc"],breezewiki:["breezewiki.com","antifandom.com","breezewiki.pussthecat.org","bw.hamstro.dev","bw.projectsegfau.lt","breeze.hostux.net","bw.artemislena.eu","breezewiki.woodland.cafe","breeze.nohost.network","z.opnxng.com","breezewiki.catsarch.com","breeze.mint.lgbt","breezewiki.lunar.icu","fandom.adminforge.de"],dumb:["dumb.privacydev.net","db.vern.cc","sing.whatever.social","dumb.lunar.icu"],intellectual:["intellectual.insprill.net","in.bloat.cat","in2.bloat.cat","intellectual.lumaeris.com"],invidious:["yewtu.be","vid.puffyan.us","yt.artemislena.eu","invidious.flokinet.to","invidious.projectsegfau.lt","invidious.privacydev.net","iv.ggtyler.dev","invidious.lunar.icu","inv.tux.pizza","invidious.protokolla.fi","proxied.invidious.fi","onion.tube","invidious.no-logs.com","invidious.io.lol","iv.nboeck.de","invidious.private.coffee","invidious.asir.dev","iv.datura.network","invidious.perennialte.ch","yt.cdaut.de","invidious.einfachzocken.eu","yt.drgnz.club"],piped:["piped.video","cf.piped.video","fl.piped.video","do.piped.video","az.piped.video","piped.mha.fi","watch.leptons.xyz","piped.lunar.icu","piped.r4fo.com","piped.privacydev.net","piped.smnz.de","piped.adminforge.de","piped.astartes.nl","piped.osphost.fi","pi.ggtyler.dev","piped.seitan-ayoub.lol","yt.owo.si","piped.minionflo.net"],libmedium:["libmedium.batsense.net","md.vern.cc","medium.hostux.net","libmedium.ducks.party"],libreddit:["redditor.fly.dev","libreddit.kavin.rocks","libreddit.northboot.xyz","libreddit.kylrth.com","libreddit.tiekoetter.com","l.opnxng.com","libreddit.projectsegfau.lt","libreddit.privacydev.net","libreddit.freedit.eu","libreddit.mha.fi","lr.artemislena.eu","libreddit.nohost.network","libreddit.lunar.icu","snoo.habedieeh.re","libreddit.tux.pizza","libreddit.perennialte.ch","libreddit.private.coffee","lr.seitan-ayoub.lol","l.bloat.cat"],libremdb:["libremdb.iket.me","libremdb.pussthecat.org","ld.vern.cc","binge.whatever.social","libremdb.lunar.icu","libremdb.jeikobu.net","libremdb.nerdyfam.tech","libremdb.tux.pizza","d.opnxng.com","libremdb.catsarch.com"],librey:["search.ahwx.org","ly.owo.si","librey.danyaal.xyz","librey.org","search.davidovski.xyz","search.funami.tech","librex.nohost.network","search.pabloferreiro.es","librey.baczek.me","search.seitan-ayoub.lol"],lingva:["lingva.ml","lingva.thedaviddelta.com","lingva.retiolus.net","translate.plausibility.cloud","lingva.lunar.icu","lingva.garudalinux.org","lingva.seitan-ayoub.lol"],mediumrip:["medium.rip"],neuters:["neuters.de","nu.vern.cc"],nitter:["nitter.net","nitter.unixfox.eu","nitter.poast.org","nitter.privacydev.net","nitter.projectsegfau.lt","nitter.soopy.moe","nitter.rawbit.ninja","nitter.freedit.eu","nitter.nohost.network","nitter.io.lol","nitter.woodland.cafe","nitter.perennialte.ch","nitter.salastil.com","n.opnxng.com","nitter.ktachibana.party"],pixivfe:["pixivfe.drgns.space","pixivfe.ducks.party","pixiv.perennialte.ch"],proxitok:["proxitok.pabloferreiro.es","proxitok.pussthecat.org","tok.habedieeh.re","proxitok.privacydev.net","tok.artemislena.eu","tok.adminforge.de","cringe.whatever.social","proxitok.lunar.icu","proxitok.privacy.com.de","cringe.seitan-ayoub.lol","tt.opnxng.com","tiktok.wpme.pl"],quetre:["quetre.iket.me","qr.vern.cc","quetre.pussthecat.org","quetre.privacydev.net","ask.habedieeh.re","quetre.blackdrgn.nl","quetre.lunar.icu","q.opnxng.com","quetre.rootdo.org","quora.seitan-ayoub.lol","ask.sudovanilla.org","quetre.smnz.de"],rimgo:["rimgo.totaldarkness.net","imgur.artemislena.eu","rimgo.lunar.icu","imgur.010032.xyz","rimgo.kling.gg","rimgo.projectsegfau.lt","rimgo.nohost.network","rimgo.catsarch.com","rimgo.quantenzitrone.eu"],scribe:["scribe.rip","scribe.citizen4.eu","scribe.nixnet.services","scribe.privacyredirect.com","scribe.projectsegfau.lt","scribe.rawbit.ninja","m.opnxng.com"],teddit:["i.opnxng.com","teddit.net","teddit.rawbit.ninja","teddit.pussthecat.org","teddit.zaggy.nl","t.sneed.network","td.vern.cc"],tent:["tent.sny.sh","tent.bloat.cat","tn.vern.cc"],tubo:["tubo.media","tubo.reallyaweso.me","tubo.ducks.party"],wikiless:["wikiless.tiekoetter.com","wikiless.funami.tech","wl.vern.cc","wiki.froth.zone","wikiless.northboot.xyz","wikiless.rawbit.ninja","wiki.adminforge.de","wikiless.rootdo.org","w.sneed.network","wikiless.r4fo.com","wiki.seitan-ayoub.lol","wikiless.ditatompel.com"],safetwitch:["safetwitch.drgns.space","safetwitch.projectsegfau.lt","safetwitch.datura.network","ttv.vern.cc","twitch.seitan-ayoub.lol","st.ggtyler.dev","safetwitch.lunar.icu","safetwitch.r4fo.com","safetwitch.ducks.party","safetwitch.nogafam.fr","safetwitch.privacyredirect.com"],searx:["searx.gnu.style","searx.nixnet.services","search.projectsegfau.lt","searx.roflcopter.fr","northboot.xyz","opnxng.com"],searxng:["search.sapti.me","priv.au","search.demoniak.ch","www.gruble.de","searx.divided-by-zero.eu","xo.wtf","freesearch.club","baresearch.org","searx.perennialte.ch","searx.techsaviours.org","search.mdosch.de","searx.si","searx.namejeff.xyz","search.ononoki.org","etsi.me","searx.work","search.smnz.de","searx.prvcy.eu","searx.headpat.exchange"],hackernews:{better:"better-hackernews.vercel.app",worker:"news.workers.tools"},mozhi:["mozhi.aryak.me","nyc1.mz.ggtyler.dev","translate.projectsegfau.lt","translate.nerdvpn.de","mozhi.ducks.party","mozhi.pussthecat.org","mozhi.adminforge.de","translate.privacyredirect.com","mozhi.canine.tools","mozhi.gitro.xyz"],skunkyart:["art.bloat.cat","skunky.bloat.cat","lost-skunk.cc/skunkyart","skunkyart.lumaeris.com"],priviblur:["pb.bloat.cat","tb.opnxng.com","priviblur.pussthecat.org","priviblur.thebunny.zone","priviblur.gitro.xyz","priviblur.canine.tools"]};let S="farside.link";const U=window.location.hash,I=`${window.location.protocol}//`;let C="",M="";const A=async e=>e[Math.floor(Math.random()*e.length)],B=window.location.hostname;switch(B){case"www.instagram.com":!async function(){if(u[0]){window.stop();let e=window.location.pathname,o=window.location.search,i=new URLSearchParams(o);switch(C=await A(R.proxigram),!0){case e.startsWith("/accounts/login/"):case e.startsWith("/accounts/signup/"):e=e.replace(/^\/accounts\/(login|signup)\/[a-z]*/,""),i.delete("next"),o=i.size?`?${i}`:"";break;case e.startsWith("/reel/"):case e.startsWith("/tv/"):e=e.replace(/^\/(reel|tv)\//,"/p/");break;case e.endsWith("/reels/"):e=e.replace("/reels","")}M=`${I}${C}${e}${o}${U}`,window.location.replace(M)}}();break;case"twitter.com":case"mobile.twitter.com":case"x.com":case"mobile.x.com":!async function(){if(W[0]){window.stop();const e=window.location.pathname;let o=`${e}${window.location.search}`;C=W[1]?`${S}/nitter`:await A(R.nitter),"/i/flow/login"===e&&(o=o.replace("/i/flow/login?redirect_after_login=","")),o.includes("%")&&(o=decodeURIComponent(o)),M=`${I}${C}${o}${U}`,window.location.replace(M)}}();break;case"www.youtube.com":case"m.youtube.com":case"www.youtube-nocookie.com":e("freetube");break;case"www.tiktok.com":!async function(){if(x[0]){window.stop();let e=window.location.pathname;C=x[1]?`${S}/proxitok`:await A(R.proxitok),await Promise.any([["/@/","/@placeholder/"],["/discover/","/tag/"],["/foryou","/trending"]].map(async([o,i])=>{e.startsWith(o)&&(e=e.replace(o,i))})),M=`${I}${C}${e}${window.location.search}${U}`,window.location.replace(M)}}();break;case"music.youtube.com":e("hyperpipe");break;case"news.ycombinator.com":!async function(){if(d[0]){let e=window.location.pathname;["/newest","/item","/user","/ask","/show","/jobs","/"].includes(e)?("/newest"===window.location.pathname&&(e="/new"),C=R.hackernews.better):["/best","/news","/submitted","/threads","/classic"].includes(e)&&(C=R.hackernews.worker),C&&(window.stop(),M=`${I}${C}${e}${window.location.search}`,window.location.replace(M))}}();break;case"translate.google.com":!async function(){if(w[0]){window.stop();let e=window.location.pathname;if(C=await A(R.mozhi),window.location.search){const o=new URLSearchParams(window.location.search);e=`?text=${o.get("text")}&from=${o.get("sl")}&to=${o.get("tl")}&engine=google`,M=`${I}${C}${e}`}else M=`${I}${C}`;window.location.replace(M)}}();break;case"www.reuters.com":!async function(){y[0]&&(window.stop(),C=await A(R.neuters),M=`${I}${C}${window.location.pathname}${window.location.search}${U}`,window.location.replace(M))}();break;case"www.imdb.com":case"m.imdb.com":!async function(){p[0]&&(window.stop(),C=p[1]?`${S}/libremdb`:await A(R.libremdb),M=`${I}${C}${window.location.pathname}${window.location.search}${U}`,window.location.replace(M))}();break;case"www.quora.com":!async function(){$[0]&&(window.stop(),C=$[1]?`${S}/quetre`:await A(R.quetre),M=`${I}${C}${window.location.pathname}${window.location.search}${U}`,window.location.replace(M))}();break;case"www.google.com":!async function(){if(l[0]&&window.location.hostname.startsWith("www")&&window.location.pathname.startsWith("/search")){window.stop(),C=l[1]?`${S}/${P}`:C=await A(R[P]);let e=window.location.pathname;"/search"===e&&(e+=".php");const o=new URLSearchParams(window.location.search).entries().q,i=o?`?q=${o}`:window.location.search;M=`${I}${C}${e}${i}${U}`,window.location.replace(M)}}();break;case"www.goodreads.com":!async function(){if(s[0]){if(window.stop(),C=await A(R.biblioreads),window.location.pathname.startsWith("/search")){const e=new URLSearchParams(search);search=`/${e.get("q")}`}M=`${I}${C}${window.location.pathname}${search}${U}`,window.location.replace(M)}}();break;case"genius.com":!async function(){if(c[0]){const e=window.location.pathname;C=await A(R.intellectual),await Promise.any([["lyrics",e.endsWith("-lyrics")],["album",e.startsWith("/albums/")],["artist",e.startsWith("/artists/")],[,["/","/search"].includes(e)]].map(async([o,i])=>{if(i){const i=o?`/${o}?path=${e.slice(1)}`:`${e}${window.location.search}`;window.stop(),M=`${I}${C}${i}${U}`,window.location.replace(M)}}))}}();break;case"stackoverflow.com":!async function(){v[0]&&(window.location.pathname.startsWith("/questions/")||"/"===window.location.pathname)&&(window.stop(),C=v[1]?`${S}/anonymousoverflow`:await A(R.anonymousoverflow),M=`${I}${C}${window.location.pathname}${window.location.search}${U}`,window.location.replace(M))}();break;case"f4.bcbits.com":case"t4.bcbits.com":o();break;case"www.deviantart.com":!async function(){window.stop();let e=window.location.pathname,o=window.location.search,i=e.split("/").filter(e=>e),a="";C=await A(R.skunkyart);let t={post:/\/art\/\S+/,tag:/\/tag\/\S+/,search:/(?<=\?q=)[^&]+/,gallery:/\/\w+\/gallery$/,gallery_folder:/\/\w+\/gallery\/\d+/,favorites:/\/(\w+)\/favourites/,profile:/^\/(\w+)$/};n[0]&&(t.post.test(e)?a=`/post/${i[0].toLowerCase()}/${i[2]}`:t.tag.test(e)?a=`/search?q=${i[1]}&type=tag`:e.startsWith("/search")?(o=o.match(t.search)[0],a=`/search?q=${o}&type=all`):t.gallery.test(e)?a=`/group_user?type=gallery&q=${i[0]}`:t.gallery_folder.test(e)?a=`/group_user?folder=${i[2]}&q=${i[0]}&type=g`:t.favorites.test(e)?a=`/group_user?q=${e.match(t.favorites)[1]}&type=favorites`:t.profile.test(e)&&(a=`/group_user?type=about&q=${e.match(t.profile)[1]}`)),M=`${I}${C}${a}`,window.location.replace(M)}();break;case"i.pinimg.com":i();break;case"soundcloud.com":case"m.soundcloud.com":!async function(){if(k[0]){window.stop(),C=await A(R.tubo);let e="/kiosk?serviceId=1";"/"!==window.location.pathname&&(e=`/stream?url=${window.location.href}`),M=`${I}${C}${e}`,window.location.replace(M)}}();break;case"www.pixiv.net":!async function(){if(f[0]){window.stop(),C=await A(R.pixivfe);const e=window.location.pathname.replace(/^\/\w{2}\//,"/");M=`${I}${C}${e}${window.location.search}`,window.location.replace(M)}}();break;case"www.deepl.com":!async function(){if(t[0]){if(window.stop(),C=await A(R.mozhi),window.location.hash){let e=window.location.hash.substring(1).split("/"),o=`?text=${e[2]}&from=${e[0]}&to=${e[1]}&engine=deepl`;M=`${I}${C}${o}`}window.location.replace(M)}}();break;case"twitch.tv":case"www.twitch.tv":!async function(){if(q[0]){window.stop(),C=await A(R.safetwitch);const e="/search"==window.location.pathname?window.location.pathname+"/":window.location.pathname;let o="/search"==window.location.pathname?window.location.search.replace("term","query"):window.location.search;M=`${I}${C}${e}${o}`,window.location.replace(M)}}();break;case B.includes("reddit.com")?B:0:!async function(){if(g[0]&&!window.location.pathname.startsWith("/domain")){window.stop();let e=window.location.pathname,o=window.location.search;if(C=g[1]?`${S}/${L}`:await A(R[L]),"/media"===e&&o){const i=new URLSearchParams(o),a=new URL(i.get("url"));["i.redd.it","preview.redd.it"].includes(a.hostname)&&(e=`/img${a.pathname}`,o=a.search)}M=`${I}${C}${e}${o}${U}`,window.location.replace(M)}}();break;case B.includes("medium.com")?B:0:!async function(){if(h[0]){let e=window.location.pathname;const o=`${window.location.hostname}${e}`;if((/^.+?\.medium\.com\/.+/.test(o)||/^\/@?[^\/]+?\//.test(e)||"medium.com/"===o)&&!/^\/(tag|m|hc)\//.test(e)&&!/\/(about|followers|following)/.test(e)){window.stop(),C=h[1]?`${S}/scribe`:await A(R.scribe);const o=window.location.hostname.replace(/\.?medium\.com/,"");o&&(e=`/${o}${e}`),M=`${I}${C}${e}${window.location.search}${U}`,window.location.replace(M)}}}();break;case B.includes("imgur.com")?B:0:case B.includes("imgur.io")?B:0:!async function(){m[0]&&(window.stop(),C=m[1]?`${S}/rimgo`:await A(R.rimgo),M=`${I}${C}${window.location.pathname}${window.location.search}${U}`,window.location.replace(M))}();break;case B.includes("wikipedia.org")?B:0:!async function(){if(j[0]){window.stop();let e=/^([a-z\-]+)\./.exec(window.location.hostname)[1];C=j[1]?`${S}/wikiless`:await A(R.wikiless),"www"===e&&(e="en"),M=`${I}${C}${window.location.pathname}?lang=${e}${U}`,window.location.replace(M)}}();break;case B.includes("fandom.com")?B:0:!async function(){if(r[0]){window.stop();const e=window.location.hostname.replace(/\..+/,"");C=await A(R.breezewiki);let o=window.location.pathname;"www"!==e&&(o=`/${e}${o}`),M=`${I}${C}${o}${window.location.search}${U}`,window.location.replace(M)}}();break;case B.includes("bandcamp.com")?B:0:o();break;case B.includes("pinterest.com")?B:0:i();break;case B.includes("tumblr.com")?B:0:!async function(){z[0]&&(window.stop(),C=await A(R.priviblur),M=`${I}${C}${window.location.pathname}${window.location.search}${U}`,window.location.replace(M))}()}"undefined"==typeof module||(module.exports={Instances:R});
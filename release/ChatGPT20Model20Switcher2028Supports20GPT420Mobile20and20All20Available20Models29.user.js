// ==UserScript==
// @name               ChatGPT Model Switcher (Supports GPT-4 Mobile and All Available Models)
// @namespace          https://github.com/hydrotho/ChatGPT_Model_Switcher
// @version            2.4.0
// @author             Hydrotho
// @license            MIT
// @copyright          2023, Hydrotho (https://github.com/hydrotho)
// @icon               data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAH1UExURUxpcXeqn3WqnHWonHSpnHWonHWpnG22knWpnHWpnHSmm3apm3SpnHWonHWpnHSonHWpnHWpm3apnXWpnHWpm3WpnP///8fc19fm43mrn67Nxf7///r8+6HFvNPk4JS8ssXb1XirnsDY0sPa1Pj7+qbHv5i/tXeqnvz9/X6uoo65roq2q+Tu7P3+/qrKwqDEu9bm4vP39qfIwPv9/NXl4ezz8Xqsn+nx73msn5/Dusnd2N7q59zp5pC6r4CwpKLFvIOxpszf2oSypsTa1fn7+/P49t/r6JrAt8LZ1L/X0d3q53aqnczf287h3Ie0qc7g3Pr8/LTQybDOxpvBuObv7c/h3PX5+Ory8ODr6OPt65G7sLnTzYWzp/n7+oi1qv7+/tTk4J7Cucve2Z3Cub7X0H+vo8LZ053CuKnJwff6+tnn4/3+/fD29XytoYWzqJe+tJa+tHapnHeqnaHEu8vf2oGxpazLw3utoMre2ZW9s7XRyu/19H2uou/186XHv6jJwNDi3sjd2OLt6u308ufw7tfm4rjTzK3MxOjw7tvp5dHi3sjd15m/tvL39q/Nxvb5+OPu64y3rIOyptnn5LbSy+Ds6eHs6tbl4cHZ0/v8/H6vo4GwpZ7Dus/h3fb6+ZK7sfT49/f6+aLFvavLw6zLxM3g28bc1pQLf2QAAAAVdFJOUwAtv5bz1PQH/dUuj5WQ/CyYwJHykqKEGP8AAAAJcEhZcwAAAHYAAAB2AU57JggAAAIcSURBVDjLhdNle9swEABgFdK0Kw7uHMfp6iTeAksaThpoUmZuV1x5zMxbx8wM7Xj7nZNjx/L2rNl9kXR6H51snwmhsWFTWQn8FSWGygKihLGmFP4ZpUXG7P5GWDcKZVEDeaKC1mfnHxUvoSV19YQOVFWTLdpiUfJ2POx/jOEzAy4tWU7KctPG95FpOjT0IA2PT80aSHEOpKQ5mSUxIA7bD2OzI5vdTNTt1QXBDvAxMT/7qkE+h8PdyoYC+DX0YgYyX4W+FwBunqYOhpp0YAl/1eN22Or5DPD8Jd6sBTiOZgYa8SfUysAMH+wWW/AK3ndbUWRADKUVMGIex1YrRGcs3uvYxcCzKVCAJTb66FZsFGDXTgHPMjD2WgWcFeCkHd/uoOshj0MD16QoLOI2+Q406ifpPXh4gisaOIXD4JiZXUoqwARx/Ab80zB7TJMzmK17nr4BK2eCOnocJGMMBBH9tO6FqYhveUJSwZsxBrpRDDltl6G3G7/8+K6AtLOZARu65hYwcLfL8s4l30EGCTzGwH6MA3Tew9u0Tp1HBmYOT+u+xZ62nl4AB91uGRQ+ZWAZ53HQqgMwgn3n6BC90+bl0nLJB51qH+QaphUD3EWuHVNuuhiQwlrPaS3n6zhEW+2G3I3TkSE3A5XalG860o/j/sSkcGAf62tS8MdvFfe3Oyf2tugyhBRB3qC/XuF/ADFWVOUHhFSXG4rXA78BYbiLJDUXqsMAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=
// @supportURL         https://github.com/hydrotho/ChatGPT_Model_Switcher/issues
// @match              http*://chat.openai.com/*
// @match              http*://chatgpt.com/*
// @require            https://cdn.jsdelivr.net/npm/vue@3.4.27/dist/vue.global.prod.js#sha256-VMrHpvwhhCKPXCaAPunCoWMozbWKGCjzejy8voYbGOs=
// @grant              none
// @run-at             document-start
// @downloadURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/ChatGPT20Model20Switcher2028Supports20GPT420Mobile20and20All20Available20Models29.user.js
// @updateURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/ChatGPT20Model20Switcher2028Supports20GPT420Mobile20and20All20Available20Models29.meta.js
// ==/UserScript==
!function(e){"use strict";function t(){return++M}function n(e){var t;if(null==e)return null;if(null==e.value)return null;let n=null!=(t=e.value.$el)?t:e.value;return n instanceof Node?n:null}function l(e,t,...n){if(e in t){let l=t[e];return"function"==typeof l?l(...n):l}let o=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(e=>`"${e}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,l),o}function o(e){if(A.isServer)return null;if(e instanceof Node)return e.ownerDocument;if(null==e?void 0:e.hasOwnProperty("value")){let t=n(e);if(t)return t.ownerDocument}return document}function r(e=document.body){return null==e?[]:Array.from(e.querySelectorAll(D)).sort((e,t)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(t.tabIndex||Number.MAX_SAFE_INTEGER)))}function a(e,t=0){var n;return e!==(null==(n=o(e))?void 0:n.body)&&l(t,{0:()=>e.matches(D),1(){let t=e;for(;null!==t;){if(t.matches(D))return!0;t=t.parentElement}return!1}})}function u(e,t,{sorted:n=!0,relativeTo:l=null,skipElements:o=[]}={}){var a;let u=null!=(a=Array.isArray(e)?e.length>0?e[0].ownerDocument:document:null==e?void 0:e.ownerDocument)?a:document,i=Array.isArray(e)?n?function(e,t=e=>e){return e.slice().sort((e,n)=>{let l=t(e),o=t(n);if(null===l||null===o)return 0;let r=l.compareDocumentPosition(o);return r&Node.DOCUMENT_POSITION_FOLLOWING?-1:r&Node.DOCUMENT_POSITION_PRECEDING?1:0})}(e):e:r(e);o.length>0&&i.length>1&&(i=i.filter(e=>!o.includes(e))),l=null!=l?l:u.activeElement;let s,d=(()=>{if(5&t)return 1;if(10&t)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(1&t)return 0;if(2&t)return Math.max(0,i.indexOf(l))-1;if(4&t)return Math.max(0,i.indexOf(l))+1;if(8&t)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),p=32&t?{preventScroll:!0}:{},f=0,v=i.length;do{if(f>=v||f+v<=0)return 0;let e=c+f;if(16&t)e=(e+v)%v;else{if(e<0)return 3;if(e>=v)return 1}s=i[e],null==s||s.focus(p),f+=d}while(s!==u.activeElement);return 6&t&&function(e){var t,n;return null!=(n=null==(t=null==e?void 0:e.matches)?void 0:t.call(e,V))&&n}(s)&&s.select(),2}function i(t,n,l){A.isServer||e.watchEffect(e=>{document.addEventListener(t,n,l),e(()=>document.removeEventListener(t,n,l))})}function s(t,n,l){A.isServer||e.watchEffect(e=>{window.addEventListener(t,n,l),e(()=>window.removeEventListener(t,n,l))})}function d(e,t){if(e)return e;let n=null!=t?t:"button";return"string"==typeof n&&"button"===n.toLowerCase()?"button":void 0}function c(t,l){let o=e.ref(d(t.value.type,t.value.as));return e.onMounted(()=>{o.value=d(t.value.type,t.value.as)}),e.watchEffect(()=>{var e;o.value||n(l)&&n(l)instanceof HTMLButtonElement&&!(null==(e=n(l))?void 0:e.hasAttribute("type"))&&(o.value="button")}),o}function p({visible:e=!0,features:t=0,ourProps:n,theirProps:o,...r}){var a;let u=m(o,n),i=Object.assign(r,{props:u});return e||2&t&&u.static?f(i):1&t?l(null==(a=u.unmount)||a?0:1,{0:()=>null,1:()=>f({...r,props:{...u,hidden:!0,style:{display:"none"}}})}):f(i)}function f({props:t,attrs:n,slots:l,slot:o,name:r}){var a,u,i;let{as:s,...d}=g(t,["unmount","static"]),c=null==(a=l.default)?void 0:a.call(l,o),p={};if(o){let e=!1,t=[];for(let[n,l]of Object.entries(o))"boolean"==typeof l&&(e=!0),!0===l&&t.push(n);e&&(p["data-headlessui-state"]=t.join(" "))}if("template"===s){if(c=v(null!=c?c:[]),Object.keys(d).length>0||Object.keys(n).length>0){let[t,...l]=null!=c?c:[];if(null==(i=t)||"string"!=typeof i.type&&"object"!=typeof i.type&&"function"!=typeof i.type||l.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${r} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(d).concat(Object.keys(n)).map(e=>e.trim()).filter((e,t,n)=>n.indexOf(e)===t).sort((e,t)=>e.localeCompare(t)).map(e=>`  - ${e}`).join("\n"),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(e=>`  - ${e}`).join("\n")].join("\n"));let o=m(null!=(u=t.props)?u:{},d,p),a=e.cloneVNode(t,o,!0);for(let e in o)e.startsWith("on")&&(a.props||(a.props={}),a.props[e]=o[e]);return a}return Array.isArray(c)&&1===c.length?c[0]:c}return e.h(s,Object.assign({},d,p),{default:()=>c})}function v(t){return t.flatMap(t=>t.type===e.Fragment?v(t.children):[t])}function m(...e){if(0===e.length)return{};if(1===e.length)return e[0];let t={},n={};for(let l of e)for(let e in l)e.startsWith("on")&&"function"==typeof l[e]?(null!=n[e]||(n[e]=[]),n[e].push(l[e])):t[e]=l[e];if(t.disabled||t["aria-disabled"])return Object.assign(t,Object.fromEntries(Object.keys(n).map(e=>[e,void 0])));for(let e in n)Object.assign(t,{[e](t,...l){let o=n[e];for(let e of o){if(t instanceof Event&&t.defaultPrevented)return;e(t,...l)}}});return t}function h(e){let t=Object.assign({},e);for(let e in t)void 0===t[e]&&delete t[e];return t}function g(e,t=[]){let n=Object.assign({},e);for(let e of t)e in n&&delete n[e];return n}function b(){return e.inject(_,null)}function y(){let t=e.ref(0);return s("keydown",e=>{"Tab"===e.key&&(t.value=e.shiftKey?1:0)}),t}function w(t){let n=e.inject(W,null);if(null===n){let e=new Error(`<${t} /> is missing a parent <${J.name} /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(e,w),e}return n}function S(){return e.inject(K,null)}function P(){let t=e.inject(Z,null);if(null===t){let e=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,P),e}return t}function E(t){ke&&(ke.unmount(),ke=null);const n=document.createElement("div");n.className="flex items-center gap-2",n.id="chatgpt-model-switcher";const l=document.createElement("div");l.className="flex gap-2 pr-1",l.appendChild(n),l.appendChild(t.removeChild(t.lastChild)),t.appendChild(l),ke=e.createApp(Ee),ke.mount(n)}var k,x,C,O,N,T,B,j,F,I,L;let M=0;k=Object.defineProperty,x=(e,t,n)=>t in e?k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,C=(e,t,n)=>(x(e,"symbol"!=typeof t?t+"":t,n),n);let A=new class{constructor(){C(this,"current",this.detect()),C(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return"server"===this.current}get isClient(){return"client"===this.current}detect(){return"undefined"==typeof window||"undefined"==typeof document?"server":"client"}},D=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(",");O=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e))(O||{}),N=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(N||{}),T=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(T||{}),"undefined"!=typeof window&&"undefined"!=typeof document&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{1===e.detail?delete document.documentElement.dataset.headlessuiFocusVisible:0===e.detail&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));let V=["textarea","input"].join(",");B=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(B||{}),j=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(j||{});let R=e.defineComponent({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup:(e,{slots:t,attrs:n})=>()=>{var l;let{features:o,...r}=e;return p({ourProps:{"aria-hidden":!(2&~o)||(null!=(l=r["aria-hidden"])?l:void 0),hidden:!(4&~o)||void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...!(4&~o)&&!!(2&~o)&&{display:"none"}}},theirProps:r,slot:{},attrs:n,slots:t,name:"Hidden"})}}),_=Symbol("Context");F=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(F||{}),I=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(I||{}),L=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(L||{});let $=Symbol("ForcePortalRootContext");e.defineComponent({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup:(t,{slots:n,attrs:l})=>(e.provide($,t.force),()=>{let{force:e,...o}=t;return p({theirProps:o,ourProps:{},slot:{},slots:n,attrs:l,name:"ForcePortalRoot"})})});let G=Symbol("DescriptionContext");e.defineComponent({name:"Description",props:{as:{type:[Object,String],default:"p"},id:{type:String,default:()=>`headlessui-description-${t()}`}},setup(t,{attrs:n,slots:l}){let o=function(){let t=e.inject(G,null);if(null===t)throw new Error("Missing parent");return t}();return e.onMounted(()=>e.onUnmounted(o.register(t.id))),()=>{let{name:r="Description",slot:a=e.ref({}),props:u={}}=o,{id:i,...s}=t;return p({ourProps:{...Object.entries(u).reduce((t,[n,l])=>Object.assign(t,{[n]:e.unref(l)}),{}),id:i},theirProps:s,slot:a.value,attrs:n,slots:l,name:r})}}}),e.defineComponent({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:l,attrs:r}){let a=e.ref(null),u=e.computed(()=>o(a)),i=e.inject($,!1),s=e.inject(U,null),d=e.ref(!0===i||null==s?function(e){let t=o(e);if(!t){if(null===e)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${e}`)}let n=t.getElementById("headlessui-portal-root");if(n)return n;let l=t.createElement("div");return l.setAttribute("id","headlessui-portal-root"),t.body.appendChild(l)}(a.value):s.resolveTarget()),c=e.ref(!1);e.onMounted(()=>{c.value=!0}),e.watchEffect(()=>{i||null!=s&&(d.value=s.resolveTarget())});let f=e.inject(H,null),v=!1,m=e.getCurrentInstance();return e.watch(a,()=>{if(v)return;if(!f)return;let t=n(a);t&&(e.onUnmounted(f.register(t),m),v=!0)}),e.onUnmounted(()=>{var e,t;let n=null==(e=u.value)?void 0:e.getElementById("headlessui-portal-root");n&&d.value===n&&d.value.children.length<=0&&(null==(t=d.value.parentElement)||t.removeChild(d.value))}),()=>{if(!c.value)return null;if(null===d.value)return null;let n={ref:a,"data-headlessui-portal":""};return e.h(e.Teleport,{to:d.value},p({ourProps:n,theirProps:t,slot:{},attrs:r,slots:l,name:"Portal"}))}}});let H=Symbol("PortalParentContext"),U=Symbol("PortalGroupContext");e.defineComponent({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(t,{attrs:n,slots:l}){let o=e.reactive({resolveTarget:()=>t.target});return e.provide(U,o),()=>{let{target:e,...o}=t;return p({theirProps:o,ourProps:{},slot:{},attrs:n,slots:l,name:"PortalGroup"})}}});let W=Symbol("PopoverContext"),K=Symbol("PopoverGroupContext"),q=Symbol("PopoverPanelContext"),J=e.defineComponent({name:"Popover",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:u,attrs:d,expose:c}){var f,v,m,h,g,b;let y=e.ref(null);c({el:y,$el:y});let w=e.ref(1),P=e.ref(null),E=e.ref(null),k=e.ref(null),x=e.ref(null),C=e.computed(()=>o(y)),O=e.computed(()=>{var e,t;if(!n(P))return!1;if(!n(x))return!1;for(let e of document.querySelectorAll("body > *"))if(Number(null==e?void 0:e.contains(n(P)))^Number(null==e?void 0:e.contains(n(x))))return!0;let l=r(),o=l.indexOf(n(P)),a=(o+l.length-1)%l.length,u=(o+1)%l.length,i=l[a],s=l[u];return!(null==(e=n(x))?void 0:e.contains(i))&&!(null==(t=n(x))?void 0:t.contains(s))}),N={popoverState:w,buttonId:e.ref(null),panelId:e.ref(null),panel:x,button:P,isPortalled:O,beforePanelSentinel:E,afterPanelSentinel:k,togglePopover(){w.value=l(w.value,{0:1,1:0})},closePopover(){1!==w.value&&(w.value=1)},close(e){N.closePopover();let t=e?e instanceof HTMLElement?e:e.value instanceof HTMLElement?n(e):n(N.button):n(N.button);null==t||t.focus()}};e.provide(W,N),v=e.computed(()=>l(w.value,{0:F.Open,1:F.Closed})),e.provide(_,v);let B={buttonId:N.buttonId,panelId:N.panelId,close(){N.closePopover()}},I=S(),L=null==I?void 0:I.registerPopover,[M,D]=function(){function t(e){let t=l.value.indexOf(e);-1!==t&&l.value.splice(t,1),n&&n.unregister(e)}let n=e.inject(H,null),l=e.ref([]),o={register:function(e){return l.value.push(e),n&&n.register(e),()=>t(e)},unregister:t,portals:l};return[l,e.defineComponent({name:"PortalWrapper",setup:(t,{slots:n})=>(e.provide(H,o),()=>{var e;return null==(e=n.default)?void 0:e.call(n)})})]}(),V=function({defaultContainers:t=[],portals:l,mainTreeNodeRef:r}={}){function a(){var e,o,r;let a=[];for(let e of t)null!==e&&(e instanceof HTMLElement?a.push(e):"value"in e&&e.value instanceof HTMLElement&&a.push(e.value));if(null==l?void 0:l.value)for(let e of l.value)a.push(e);for(let t of null!=(e=null==i?void 0:i.querySelectorAll("html > *, body > *"))?e:[])t!==document.body&&t!==document.head&&t instanceof HTMLElement&&"headlessui-portal-root"!==t.id&&(t.contains(n(u))||t.contains(null==(r=null==(o=n(u))?void 0:o.getRootNode())?void 0:r.host)||a.some(e=>t.contains(e))||a.push(t));return a}let u=e.ref(null),i=o(u);return{resolveContainers:a,contains:e=>a().some(t=>t.contains(e)),mainTreeNodeRef:u,MainTreeNode:()=>null!=r?null:e.h(R,{features:j.Hidden,ref:u})}}({mainTreeNodeRef:null==I?void 0:I.mainTreeNodeRef,portals:M,defaultContainers:[P,x]});return e.watchEffect(()=>null==L?void 0:L(B)),m=null==(f=C.value)?void 0:f.defaultView,h="focus",g=e=>{var t,l;e.target!==window&&e.target instanceof HTMLElement&&0===w.value&&(function(){var e,t,l,o;return null!=(o=null==I?void 0:I.isFocusWithinPopoverGroup())?o:(null==(e=C.value)?void 0:e.activeElement)&&((null==(t=n(P))?void 0:t.contains(C.value.activeElement))||(null==(l=n(x))?void 0:l.contains(C.value.activeElement)))}()||P&&x&&(V.contains(e.target)||(null==(t=n(N.beforePanelSentinel))?void 0:t.contains(e.target))||(null==(l=n(N.afterPanelSentinel))?void 0:l.contains(e.target))||N.closePopover()))},b=!0,A.isServer||e.watchEffect(e=>{(m=null!=m?m:window).addEventListener(h,g,b),e(()=>m.removeEventListener(h,g,b))}),function(t,l,o=e.computed(()=>!0)){function r(e,r){if(!o.value)return;if(e.defaultPrevented)return;let u=r(e);if(null===u)return;if(!u.getRootNode().contains(u))return;let i=function e(t){return"function"==typeof t?e(t()):Array.isArray(t)||t instanceof Set?t:[t]}(t);for(let t of i){if(null===t)continue;let l=t instanceof HTMLElement?t:n(t);if(null==l?void 0:l.contains(u))return;if(e.composed&&e.composedPath().includes(l))return}return a(u,T.Loose)||-1===u.tabIndex||e.preventDefault(),l(e,u)}let u=e.ref(null);i("pointerdown",e=>{var t,n;o.value&&(u.value=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)},!0),i("mousedown",e=>{var t,n;o.value&&(u.value=(null==(n=null==(t=e.composedPath)?void 0:t.call(e))?void 0:n[0])||e.target)},!0),i("click",e=>{/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0||/Android/gi.test(window.navigator.userAgent)||u.value&&(r(e,()=>u.value),u.value=null)},!0),i("touchend",e=>r(e,()=>e.target instanceof HTMLElement?e.target:null),!0),s("blur",e=>r(e,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}(V.resolveContainers,(e,t)=>{var l;N.closePopover(),a(t,T.Loose)||(e.preventDefault(),null==(l=n(P))||l.focus())},e.computed(()=>0===w.value)),()=>{let n={open:0===w.value,close:N.close};return e.h(e.Fragment,[e.h(D,{},()=>p({theirProps:{...t,...d},ourProps:{ref:y},slot:n,slots:u,attrs:d,name:"Popover"})),e.h(V.MainTreeNode)])}}}),z=e.defineComponent({name:"PopoverButton",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-popover-button-${t()}`}},inheritAttrs:!1,setup(a,{attrs:i,slots:s,expose:d}){function f(e){var t,l,o,r,a;if(C.value){if(1===b.popoverState.value)return;switch(e.key){case I.Space:case I.Enter:e.preventDefault(),null==(l=(t=e.target).click)||l.call(t),b.closePopover(),null==(o=n(b.button))||o.focus()}}else switch(e.key){case I.Space:case I.Enter:e.preventDefault(),e.stopPropagation(),1===b.popoverState.value&&(null==k||k(b.buttonId.value)),b.togglePopover();break;case I.Escape:if(0!==b.popoverState.value)return null==k?void 0:k(b.buttonId.value);if(!n(b.button))return;if((null==(r=P.value)?void 0:r.activeElement)&&!(null==(a=n(b.button))?void 0:a.contains(P.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),b.closePopover()}}function v(e){C.value||e.key===I.Space&&e.preventDefault()}function m(e){var t,l;a.disabled||(C.value?(b.closePopover(),null==(t=n(b.button))||t.focus()):(e.preventDefault(),e.stopPropagation(),1===b.popoverState.value&&(null==k||k(b.buttonId.value)),b.togglePopover(),null==(l=n(b.button))||l.focus()))}function h(e){e.preventDefault(),e.stopPropagation()}function g(){let e=n(b.panel);e&&l(M.value,{[L.Forwards]:()=>u(e,O.First),[L.Backwards]:()=>u(e,O.Last)})===N.Error&&u(r().filter(e=>"true"!==e.dataset.headlessuiFocusGuard),l(M.value,{[L.Forwards]:O.Next,[L.Backwards]:O.Previous}),{relativeTo:n(b.button)})}let b=w("PopoverButton"),P=e.computed(()=>o(b.button));d({el:b.button,$el:b.button}),e.onMounted(()=>{b.buttonId.value=a.id}),e.onUnmounted(()=>{b.buttonId.value=null});let E=S(),k=null==E?void 0:E.closeOthers,x=e.inject(q,null),C=e.computed(()=>null!==x&&x.value===b.panelId.value),T=e.ref(null),B=`headlessui-focus-sentinel-${t()}`;C.value||e.watchEffect(()=>{b.button.value=n(T)});let F=c(e.computed(()=>({as:a.as,type:i.type})),T),M=y();return()=>{let t=0===b.popoverState.value,l={open:t},{id:o,...r}=a,u=C.value?{ref:T,type:F.value,onKeydown:f,onClick:m}:{ref:T,id:o,type:F.value,"aria-expanded":0===b.popoverState.value,"aria-controls":n(b.panel)?b.panelId.value:void 0,disabled:!!a.disabled||void 0,onKeydown:f,onKeyup:v,onClick:m,onMousedown:h};return e.h(e.Fragment,[p({ourProps:u,theirProps:{...i,...r},slot:l,attrs:i,slots:s,name:"PopoverButton"}),t&&!C.value&&b.isPortalled.value&&e.h(R,{id:B,features:j.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:g})])}}});e.defineComponent({name:"PopoverOverlay",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0}},setup(n,{attrs:l,slots:o}){function r(){a.closePopover()}let a=w("PopoverOverlay"),u=`headlessui-popover-overlay-${t()}`,i=b(),s=e.computed(()=>null!==i?(i.value&F.Open)===F.Open:0===a.popoverState.value);return()=>{let e={open:0===a.popoverState.value};return p({ourProps:{id:u,"aria-hidden":!0,onClick:r},theirProps:n,slot:e,attrs:l,slots:o,features:B.RenderStrategy|B.Static,visible:s.value,name:"PopoverOverlay"})}}});let X=e.defineComponent({name:"PopoverPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},focus:{type:Boolean,default:!1},id:{type:String,default:()=>`headlessui-popover-panel-${t()}`}},inheritAttrs:!1,setup(a,{attrs:i,slots:s,expose:d}){function c(e){var t,l;if(e.key===I.Escape){if(0!==g.popoverState.value)return;if(!n(g.panel))return;if(S.value&&!(null==(t=n(g.panel))?void 0:t.contains(S.value.activeElement)))return;e.preventDefault(),e.stopPropagation(),g.closePopover(),null==(l=n(g.button))||l.focus()}}function f(e){var t,l,o,r,a;let u=e.relatedTarget;u&&n(g.panel)&&((null==(t=n(g.panel))?void 0:t.contains(u))||(g.closePopover(),((null==(o=null==(l=n(g.beforePanelSentinel))?void 0:l.contains)?void 0:o.call(l,u))||(null==(a=null==(r=n(g.afterPanelSentinel))?void 0:r.contains)?void 0:a.call(r,u)))&&u.focus({preventScroll:!0})))}function v(){let e=n(g.panel);e&&l(C.value,{[L.Forwards]:()=>{var t;u(e,O.First)===N.Error&&(null==(t=n(g.afterPanelSentinel))||t.focus())},[L.Backwards]:()=>{var e;null==(e=n(g.button))||e.focus({preventScroll:!0})}})}function m(){let e=n(g.panel);e&&l(C.value,{[L.Forwards]:()=>{let e=n(g.button),t=n(g.panel);if(!e)return;let l=r(),o=l.indexOf(e),a=l.slice(0,o+1),i=[...l.slice(o+1),...a];for(let e of i.slice())if("true"===e.dataset.headlessuiFocusGuard||(null==t?void 0:t.contains(e))){let t=i.indexOf(e);-1!==t&&i.splice(t,1)}u(i,O.First,{sorted:!1})},[L.Backwards]:()=>{var t;u(e,O.Previous)===N.Error&&(null==(t=n(g.button))||t.focus())}})}let{focus:h}=a,g=w("PopoverPanel"),S=e.computed(()=>o(g.panel)),P=`headlessui-focus-sentinel-before-${t()}`,E=`headlessui-focus-sentinel-after-${t()}`;d({el:g.panel,$el:g.panel}),e.onMounted(()=>{g.panelId.value=a.id}),e.onUnmounted(()=>{g.panelId.value=null}),e.provide(q,g.panelId),e.watchEffect(()=>{var e,t;if(!h)return;if(0!==g.popoverState.value)return;if(!g.panel)return;let l=null==(e=S.value)?void 0:e.activeElement;(null==(t=n(g.panel))?void 0:t.contains(l))||u(n(g.panel),O.First)});let k=b(),x=e.computed(()=>null!==k?(k.value&F.Open)===F.Open:0===g.popoverState.value),C=y();return()=>{let t={open:0===g.popoverState.value,close:g.close},{id:n,focus:l,...o}=a;return p({ourProps:{ref:g.panel,id:n,onKeydown:c,onFocusout:h&&0===g.popoverState.value?f:void 0,tabIndex:-1},theirProps:{...i,...o},attrs:i,slot:t,slots:{...s,default:(...t)=>{var n;return[e.h(e.Fragment,[x.value&&g.isPortalled.value&&e.h(R,{id:P,ref:g.beforePanelSentinel,features:j.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:v}),null==(n=s.default)?void 0:n.call(s,...t),x.value&&g.isPortalled.value&&e.h(R,{id:E,ref:g.afterPanelSentinel,features:j.Focusable,"data-headlessui-focus-guard":!0,as:"button",type:"button",onFocus:m})])]}},features:B.RenderStrategy|B.Static,visible:x.value,name:"PopoverPanel"})}}});e.defineComponent({name:"PopoverGroup",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:l,slots:r,expose:a}){function u(e){let t=s.value.indexOf(e);-1!==t&&s.value.splice(t,1)}let i=e.ref(null),s=e.shallowRef([]),d=e.computed(()=>o(i)),c=function(){let t=e.ref(null);return{mainTreeNodeRef:t,MainTreeNode:()=>e.h(R,{features:j.Hidden,ref:t})}}();return a({el:i,$el:i}),e.provide(K,{registerPopover:function(e){return s.value.push(e),()=>{u(e)}},unregisterPopover:u,isFocusWithinPopoverGroup:function(){var e;let t=d.value;if(!t)return!1;let l=t.activeElement;return!!(null==(e=n(i))?void 0:e.contains(l))||s.value.some(e=>{var n,o;return(null==(n=t.getElementById(e.buttonId.value))?void 0:n.contains(l))||(null==(o=t.getElementById(e.panelId.value))?void 0:o.contains(l))})},closeOthers:function(e){for(let t of s.value)t.buttonId.value!==e&&t.close()},mainTreeNodeRef:c.mainTreeNodeRef}),()=>{let n={ref:i};return e.h(e.Fragment,[p({ourProps:n,theirProps:{...t,...l},slot:{},attrs:l,slots:r,name:"PopoverGroup"}),e.h(c.MainTreeNode)])}}});let Z=Symbol("LabelContext");e.defineComponent({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${t()}`}},setup(t,{slots:n,attrs:l}){let o=P();return e.onMounted(()=>e.onUnmounted(o.register(t.id))),()=>{let{name:r="Label",slot:a={},props:u={}}=o,{id:i,passive:s,...d}=t,c={...Object.entries(u).reduce((t,[n,l])=>Object.assign(t,{[n]:e.unref(l)}),{}),id:i};return s&&(delete c.onClick,delete c.htmlFor,delete d.onClick),p({ourProps:c,theirProps:d,slot:a,attrs:l,slots:n,name:r})}}});let Y=Symbol("GroupContext");e.defineComponent({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:n,attrs:l}){let o=e.ref(null),r=function({slot:t={},name:n="Label",props:l={}}={}){let o=e.ref([]);return e.provide(Z,{register:function(e){return o.value.push(e),()=>{let t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1)}},slot:t,name:n,props:l}),e.computed(()=>o.value.length>0?o.value.join(" "):void 0)}({name:"SwitchLabel",props:{htmlFor:e.computed(()=>{var e;return null==(e=o.value)?void 0:e.id}),onClick(e){o.value&&("LABEL"===e.currentTarget.tagName&&e.preventDefault(),o.value.click(),o.value.focus({preventScroll:!0}))}}}),a=function({slot:t=e.ref({}),name:n="Description",props:l={}}={}){let o=e.ref([]);return e.provide(G,{register:function(e){return o.value.push(e),()=>{let t=o.value.indexOf(e);-1!==t&&o.value.splice(t,1)}},slot:t,name:n,props:l}),e.computed(()=>o.value.length>0?o.value.join(" "):void 0)}({name:"SwitchDescription"}),u={switchRef:o,labelledby:r,describedby:a};return e.provide(Y,u),()=>p({theirProps:t,ourProps:{},slot:{},slots:n,attrs:l,name:"SwitchGroup"})}});let Q=e.defineComponent({name:"Switch",emits:{"update:modelValue":()=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${t()}`},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(t,{emit:l,attrs:o,slots:r,expose:a}){function u(){m(!v.value)}function i(e){e.preventDefault(),u()}function s(e){e.key===I.Space?(e.preventDefault(),u()):e.key===I.Enter&&function(e){var t,n;let l=null!=(t=null==e?void 0:e.form)?t:e.closest("form");if(l){for(let t of l.elements)if(t!==e&&("INPUT"===t.tagName&&"submit"===t.type||"BUTTON"===t.tagName&&"submit"===t.type||"INPUT"===t.nodeName&&"image"===t.type))return void t.click();null==(n=l.requestSubmit)||n.call(l)}}(e.currentTarget)}function d(e){e.preventDefault()}let f=e.inject(Y,null),[v,m]=function(t,n,l){let o=e.ref(null==l?void 0:l.value),r=e.computed(()=>void 0!==t.value);return[e.computed(()=>r.value?t.value:o.value),function(e){return r.value||(o.value=e),null==n?void 0:n(e)}]}(e.computed(()=>t.modelValue),e=>l("update:modelValue",e),e.computed(()=>t.defaultChecked)),b=e.ref(null),y=null===f?b:f.switchRef,w=c(e.computed(()=>({as:t.as,type:o.type})),y);a({el:y,$el:y});let S=e.computed(()=>{var e,t;return null==(t=null==(e=n(y))?void 0:e.closest)?void 0:t.call(e,"form")});return e.onMounted(()=>{e.watch([S],()=>{function e(){m(t.defaultChecked)}if(S.value&&void 0!==t.defaultChecked)return S.value.addEventListener("reset",e),()=>{var t;null==(t=S.value)||t.removeEventListener("reset",e)}},{immediate:!0})}),()=>{let{id:n,name:l,value:a,form:u,tabIndex:c,...m}=t,b={checked:v.value},S={id:n,ref:y,role:"switch",type:w.value,tabIndex:-1===c?0:c,"aria-checked":v.value,"aria-labelledby":null==f?void 0:f.labelledby.value,"aria-describedby":null==f?void 0:f.describedby.value,onClick:i,onKeyup:s,onKeypress:d};return e.h(e.Fragment,[null!=l&&null!=v.value?e.h(R,h({features:j.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:v.value,form:u,disabled:m.disabled,name:l,value:a})):null,p({ourProps:S,theirProps:{...o,...g(m,["modelValue","defaultChecked"])},slot:b,attrs:o,slots:r,name:"Switch"})])}}});const ee=(e,t)=>{const n=e.__vccOpts||e;for(const[e,l]of t)n[e]=l;return n},te={class:"my-1.5 border-b border-token-border-light"},ne=ee({},[["render",function(){return e.openBlock(),e.createElementBlock("div",te)}]]),le={},oe={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},re=[e.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M10 2C5.58172 2 2 5.58172 2 10C2 14.4183 5.58172 18 10 18C14.4183 18 18 14.4183 18 10C18 5.58172 14.4183 2 10 2ZM0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10Z",fill:"currentColor",opacity:"0.16"},null,-1)],ae=ee(le,[["render",function(){return e.openBlock(),e.createElementBlock("svg",oe,re)}]]),ue={},ie={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"},se=[e.createElementVNode("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M0 10C0 4.47715 4.47715 0 10 0C15.5228 0 20 4.47715 20 10C20 15.5228 15.5228 20 10 20C4.47715 20 0 15.5228 0 10ZM14.0755 5.93219C14.5272 6.25003 14.6356 6.87383 14.3178 7.32549L9.56781 14.0755C9.39314 14.3237 9.11519 14.4792 8.81226 14.4981C8.50934 14.517 8.21422 14.3973 8.01006 14.1727L5.51006 11.4227C5.13855 11.014 5.16867 10.3816 5.57733 10.0101C5.98598 9.63855 6.61843 9.66867 6.98994 10.0773L8.65042 11.9039L12.6822 6.17451C13 5.72284 13.6238 5.61436 14.0755 5.93219Z",fill:"currentColor"},null,-1)],de=ee(ue,[["render",function(){return e.openBlock(),e.createElementBlock("svg",ie,se)}]]),ce={class:"flex grow items-center justify-between gap-2"},pe={class:"flex items-center gap-3"},fe={class:"text-token-text-tertiary"},ve={__name:"ModelItem",props:{title:{type:String,required:!0},description:{type:String,required:!0},isSelected:{type:Boolean,default:!1}},setup:t=>()=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["flex gap-2 m-1.5 rounded p-2.5 text-sm cursor-pointer focus:ring-0 hover:bg-token-main-surface-secondary radix-disabled:pointer-events-none radix-disabled:opacity-50 group !pr-3",{"!opacity-100":t.isSelected}])},[e.createElementVNode("div",ce,[e.createElementVNode("div",null,[e.createElementVNode("div",pe,[e.createElementVNode("div",null,[e.createTextVNode(e.toDisplayString(t.title)+" ",1),e.createElementVNode("div",fe,e.toDisplayString(t.description),1)])])]),(e.openBlock(),e.createBlock(e.resolveDynamicComponent(t.isSelected?de:ae),{class:"icon-md flex-shrink-0"}))])],2))},me={},he={width:"16",height:"17",viewBox:"0 0 16 17",fill:"none"},ge=[e.createElementVNode("path",{d:"M11.3346 7.83203L8.00131 11.1654L4.66797 7.83203",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)],be=ee(me,[["render",function(){return e.openBlock(),e.createElementBlock("svg",he,ge)}]]),ye=[{slug:"text-davinci-002-render-sha-mobile",title:"GPT-3.5 (Mobile)",description:"An experimental model that does not guarantee usability",tags:["gpt3.5","mobile","unofficial"]},{slug:"gpt-4-mobile",title:"GPT-4 (Mobile)",description:"An experimental model that does not guarantee usability",tags:["gpt4","mobile","unofficial"]}],we=e.reactive({all:[],update(e){this.all=e.concat(ye.filter(t=>e.some(e=>e.tags.includes("gpt4"))||!t.tags.includes("gpt4")))}}),Se="github.com/hydrotho/ChatGPT_Model_Switcher",Pe=e.reactive(function(){const e={isEnabled:!1,selectedModelSlug:"text-davinci-002-render-sha"};try{const e=localStorage.getItem(Se);if(e)return JSON.parse(e)}catch(e){console.warn("[ChatGPT_Model_Switcher]","Failed to restore state from localStorage, falling back to default state")}return localStorage.setItem(Se,JSON.stringify(e)),e}());e.watch(Pe,e=>{localStorage.setItem(Se,JSON.stringify(e))});const Ee={__name:"App",setup(t){const n=e.ref(),l=e.ref(),o=e.computed(()=>[we.all.filter(e=>e.tags.includes("gpt3.5")&&!e.tags.includes("unofficial")),we.all.filter(e=>e.tags.includes("gpt4")&&!e.tags.includes("unofficial")),we.all.filter(e=>e.tags.includes("unofficial"))].filter(e=>e.length>0));return e.onMounted(async()=>{const e=n.value.getBoundingClientRect();l.value={position:"fixed",right:document.documentElement.clientWidth-e.right+"px",top:`${e.bottom}px`}}),(t,r)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createVNode(e.unref(Q),{modelValue:e.unref(Pe).isEnabled,"onUpdate:modelValue":r[0]||(r[0]=t=>e.unref(Pe).isEnabled=t),class:e.normalizeClass(["cursor-pointer relative shrink-0 rounded-full h-[20px] w-[32px]",e.unref(Pe).isEnabled?"bg-green-600":"bg-gray-200"])},{default:e.withCtx(()=>[e.createElementVNode("span",{class:"flex items-center justify-center rounded-full transition-transform duration-100 will-change-transform bg-white shadow-[0_1px_2px_rgba(0,0,0,0.45)] h-[16px] w-[16px]",style:e.normalizeStyle(e.unref(Pe).isEnabled?"transform: translateX(14px)":"transform: translateX(0.125rem)")},null,4)]),_:1},8,["modelValue","class"]),e.createVNode(e.unref(J),{class:"relative"},{default:e.withCtx(()=>[e.createVNode(e.unref(z),{class:"group flex cursor-pointer items-center gap-1 rounded-xl py-2 px-3 text-lg font-medium hover:bg-token-main-surface-secondary"},{default:e.withCtx(()=>[e.createTextVNode(" ChatGPT Model Switcher "),e.createVNode(be,{class:"text-token-text-tertiary"})]),_:1}),e.createElementVNode("div",{ref_key:"anchorPopoverPanel",ref:n,class:"absolute right-0"},null,512),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{"enter-active-class":"transition duration-200 ease-out","enter-from-class":"translate-y-1 opacity-0","enter-to-class":"translate-y-0 opacity-100","leave-active-class":"transition duration-150 ease-in","leave-from-class":"translate-y-0 opacity-100","leave-to-class":"translate-y-1 opacity-0"},{default:e.withCtx(()=>[e.createVNode(e.unref(X),{class:"popover mt-2 min-w-[340px] max-w-xs overflow-hidden rounded-lg border border-token-border-light bg-token-main-surface-primary shadow-lg",style:e.normalizeStyle(l.value)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(o.value,(t,n)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t,t=>(e.openBlock(),e.createBlock(ve,{key:t.slug,title:t.title,description:t.description,isSelected:t.slug===e.unref(Pe).selectedModelSlug,onClick:()=>{return e=t.slug,void(Pe.selectedModelSlug=e);var e}},null,8,["title","description","isSelected","onClick"]))),128)),n<o.value.length-1?(e.openBlock(),e.createBlock(ne,{key:n})):e.createCommentVNode("",!0)],64))),256))]),_:1},8,["style"])]),_:1})]))]),_:1})],64))}};let ke=null;new MutationObserver(e=>{for(const t of e)if("childList"===t.type){const e=document.querySelector("main div.sticky");if(e&&Array.from(e.childNodes).some(e=>e.hasChildNodes())&&!document.getElementById("chatgpt-model-switcher")){E(e);break}}}).observe(document.body,{subtree:!0,childList:!0}),window.fetch=new Proxy(window.fetch,{apply:async function(e,t,n){let l=n[0],o=n[1];if(Pe.isEnabled&&l.endsWith("/backend-api/conversation")&&"POST"===o.method){const e=JSON.parse(o.body);e.model=Pe.selectedModelSlug,o={...o,body:JSON.stringify(e)},n[0]=l,n[1]=o}const r=Reflect.apply(e,t,n);return l.includes("/backend-api/models")&&"GET"===o.method?async function(e){return e.then(async e=>{if(e.ok){const t=await e.clone().json();we.update(t.models)}return e})}(r):r}})}(Vue);
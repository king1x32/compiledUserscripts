// ==UserScript==
// @version      7.6.8
// @name         Magic Userscript+ : Show Site All UserJS
// @author       Magic <magicoflolis@tuta.io>
// @supportURL   https://github.com/magicoflolis/Userscript-Plus/issues
// @namespace    https://github.com/magicoflolis/Userscript-Plus
// @homepageURL  https://github.com/magicoflolis/Userscript-Plus
// @icon         data:image/png;base64,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
// @license      MIT
// @compatible     chrome
// @compatible     firefox
// @compatible     edge
// @compatible     opera
// @compatible     safari
// @connect     greasyfork.org
// @connect     sleazyfork.org
// @connect     github.com
// @connect     githubusercontent.com
// @connect     openuserjs.org
// @grant     GM_addElement
// @grant     GM_info
// @grant     GM_getValue
// @grant     GM_openInTab
// @grant     GM_setValue
// @grant     GM_registerMenuCommand
// @grant     GM_xmlhttpRequest
// @grant     GM.addElement
// @grant     GM.info
// @grant     GM.getValue
// @grant     GM.openInTab
// @grant     GM.setValue
// @grant     GM.registerMenuCommand
// @grant     GM.xmlHttpRequest
// @match     https://*/*
// @noframes
// @run-at     document-start
// @downloadURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/AMagic20Userscript2B203A20Show20Site20All20UserJS.user.js
// @updateURL https://raw.githubusercontent.com/king1x32/compiledUserscripts/release/release/AMagic20Userscript2B203A20Show20Site20All20UserJS.meta.js
// ==/UserScript==
        this.META_START_COMMENT = this.isUserCSS ? '/* ==UserStyle==' : '// ==UserScript==';
        this.META_END_COMMENT = this.isUserCSS ? '==/UserStyle== */' : '// ==/UserScript==';
        this.META_START_COMMENT = this.isUserCSS ? '/* ==UserStyle==' : '// ==UserScript==';
        this.META_END_COMMENT = this.isUserCSS ? '==/UserStyle== */' : '// ==/UserScript==';
(()=>{"use strict";function e(){const e={build:c};try{const{scheduler:t}=C,{btnfullscreen:n,mainframe:i,main:l,Tabs:c,showError:h,cfgpage:{_mujs:{sections:b,base:D}}}=X,H=()=>{for(const e of D){const[,t,n]=/^(\w+)-(.+)/.exec(e.value)??[];let s=$[e.value],a=r[e.value];if("engine"===e.tag){const t=$.engines.find(t=>t.name===e.value),n=r.engines.find(t=>t.name===e.value);t&&(s=t),n&&(a=n)}else t&&(s=$[t][n],a=r[t][n]);e.cache=a,"checkbox"===e.type?t?e.elem.checked="filters"===t?r[t][n].enabled:a:"engine"===e.tag&&(e.elem.checked=a.enabled,e.elemUrl.value=N(a.query),e.elemUrl.placeholder=N(s.query),e.elemToken&&(e.elemToken=a.token)):e.elem.value=a}X.setTheme()},V=async e=>{const t=window.top.location;j(t.assign)?t.assign(e.href):t.href=e.href,e.remove(),await Q()},W=async e=>{if(!e.url)return;const t=G("a");t.href=e.url,t.setAttribute("download",e.filename||""),t.setAttribute("type","text/plain"),t.dispatchEvent(new MouseEvent("click")),await Q()},J=(e,t,n,s)=>{const a=e._mujs.code[t]??e._mujs.code.data_meta[t];if(x(a)){const e=G("mujs-a",{textContent:R("listing_none")});return void n.append(e)}if(P.prop(n,"innerHTML",""),P.cl.remove(s,"hidden"),g(a))if("resource"===t)for(const[e,t]of Object.entries(a)){const s=G("mujs-a",{textContent:e??"ERROR"});t.startsWith("http")&&(s.dataset.command="open-tab",s.dataset.webpage=t),n.append(s)}else{const e=G("mujs-a",{textContent:a.text});a.domain&&(e.dataset.command="open-tab",e.dataset.webpage=`https://${a.text}`),n.append(e)}else if("string"==typeof a){const e=G("mujs-a",{textContent:a});n.append(e)}else for(const e of a)if("string"==typeof e&&e.startsWith("http")){const t=G("mujs-a",{textContent:e,dataset:{command:"open-tab",webpage:e}});n.append(t)}else if(g(e)){const t=G("mujs-a",{textContent:e.text});e.domain&&(t.dataset.command="open-tab",t.dataset.webpage=`https://${e.text}`),n.append(t)}else{const t=G("mujs-a",{textContent:e});n.append(t)}},Y=X.timeouts.frame;if(U(l,E?"touchend":"click",async t=>{try{if(w(t.target))return;const a=t.target.closest("[data-command]");if(w(a))return;let o=a.dataset,d=o.command;if(/^prompt-/.test(a.dataset.command)){o=a.parentElement.dataset,d=o.command;let e=a.parentElement.parentElement;if(/prompt-install/.test(a.dataset.command)){e=a.parentElement.parentElement.parentElement;const t=G("a",{onclick(e){e.preventDefault(),V(e.target)}});t.href=a.dataset.code_url,t.click()}else if(/prompt-download/.test(a.dataset.command)){e=a.parentElement.parentElement.parentElement;const t=X.userjsCache.get(+a.dataset.userjs);if(t){const e=await t._mujs.code.request(!1,a.dataset.code_url);"string"==typeof e.code&&W({url:"data:text/plain;charset=utf-8,"+encodeURIComponent(e.code),filename:`${t.name}${_(a.dataset.code_url)?".user.css":".user.js"}`})}}return void e.remove()}if("install-script"===d){const e=X.userjsCache.get(+o.userjs);if(w(e))return;if(e.code_urls.length>1){const t=G("mujs-list",{style:"display: flex; flex-direction: column;"});for(const n of e.code_urls){const e=G("mujs-a",{title:n.code_url,textContent:n.name,dataset:{command:"prompt-install",code_url:n.code_url}});t.append(e)}X.makePrompt(`Multiple detected: ${t.outerHTML}`,o,!1)}else{const t=G("a",{onclick(e){e.preventDefault(),V(e.target)}});t.href=e.code_url,t.click()}}else{if(/open-tab|more-info/.test(d)&&o.webpage){if("more-info"===d&&t.preventDefault(),s.log(d),A){if(j(GM.openInTab))return GM.openInTab(o.webpage);if(j(GM_openInTab))return GM_openInTab(o.webpage,{active:!0,insert:!0})}return window.open(o.webpage,"_blank")}if("navigation"===d)for(const e of B(I("mujs-btn",a.parentElement)).filter(e=>!P.cl.has(e,"nav")))P.cl.toggle(e,"hidden");else if("list-description"===d){const e=[],t=new Set(["TD","MUJS-A","MU-JS"]),n=a.parentElement;for(const s of Object.values(n._mujs))t.has(s.tagName)||"TEXTAREA"===s.tagName&&x(s.value)||e.push(s);a.nextElementSibling&&(e.push(a.nextElementSibling),a.nextElementSibling.nextElementSibling&&e.push(a.nextElementSibling.nextElementSibling)),P.cl.has(e[0],"hidden")?P.cl.remove(e,"hidden"):P.cl.add(e,"hidden")}else if("close"===d)X.remove();else if("fullscreen"===d)P.cl.has(n,"expanded")?(P.cl.remove([n,l],"expanded"),P.prop(n,"innerHTML",q.load("expand"))):(P.cl.add([n,l],"expanded"),P.prop(n,"innerHTML",q.load("collapse")));else if("hide-list"===d)P.cl.add(l,"hidden"),P.cl.remove(i,"hidden"),X.timeoutFrame();else if("save"===d){if(X.rebuild=!0,P.prop(X.rateContainer,"innerHTML",""),!P.prop(a,"disabled")){const t=await X.save();X.rebuild&&t.autofetch&&e.build(),X.unsaved=!1,X.rebuild=!1}}else if("reset"===d)r=$,P.remove(I(".error",X.footer)),X.unsaved=!0,X.rebuild=!0,H();else if("settings"===d)X.unsaved&&h("Unsaved changes"),c.create("mujs:settings"),X.rebuild=!1;else if("new-tab"===d)c.create();else if("switch-tab"===d)c.active(a);else if("close-tab"===d&&a.parentElement)c.close(a.parentElement);else if("download-userjs"===d){const e=X.userjsCache.get(+o.userjs);if(w(e))return;if(e.code_urls.length>1){const t=G("mujs-list",{style:"display: flex; flex-direction: column;"});for(const n of e.code_urls){const e=G("mujs-a",{title:n.code_url,textContent:n.name,dataset:{command:"prompt-download",code_url:n.code_url,userjs:o.userjs}});t.append(e)}X.makePrompt(`Multiple detected: ${t.outerHTML}`,o,!1)}else{const t=await e._mujs.code.request(!1);"string"==typeof t.code&&W({url:"data:text/plain;charset=utf-8,"+encodeURIComponent(t.code),filename:`${e.name}${_(e.code_url)?".user.css":".user.js"}`})}}else if("load-userjs"===d||"load-header"===d){if(!X.userjsCache.has(+o.userjs))return;const e=F("textarea",a.parentElement.parentElement);if(!x(e.value)&&d===e.dataset.load)return void P.cl.toggle(e,"hidden");e.dataset.load=d;const t=X.userjsCache.get(+o.userjs),n=await t._mujs.code.request();if("string"!=typeof n.data_code_block)return void(e.value="An error occured");e.value="load-userjs"===d?n.data_code_block:n.data_meta_block,P.cl.remove(e,"hidden");for(const e of I('mujs-column[data-el="matches"]',a.parentElement.parentElement))J(t,e.dataset.type,F(".mujs-grants",e),e)}else if("load-page"===d){if(!X.userjsCache.has(+o.userjs))return;let e=F("mujs-page",a.parentElement.parentElement);if(!e){e=G("mujs-page"),a.parentElement.parentElement.append(e);const t=X.userjsCache.get(+o.userjs),n=t._mujs.info.engine;let s;if(n.name.includes("fork")){const{navigator:{language:e}}=C,{current:n}=O;s=t.url.replace(/\/scripts/,`/${/^(zh|fr|es)/.test(n)?e:n}/scripts`)}else{if(n.name.includes("github")){const s=await Z.req(t.page_url,"GET","json",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${n.token}`,"X-GitHub-Api-Version":"2022-11-28"}}).catch(()=>({}));if(!s.download_url)return;const a=await Z.req(s.download_url,"GET","text");if(X.shadowSupport){const t=e.attachShadow({mode:"closed"}),n=G("div",{innerHTML:a});t.append(n)}return}s=t.url}if(!s)return;const r=await Z.req(s,"GET","document"),i=()=>{let e="An error occured";const n=new URL(t.url),s=F(".user-content",r.documentElement);for(const e of I("[href]",s))e.target="_blank",e.style="pointer-events: auto;",e.href.startsWith("/")&&(e.href=`${n.origin}${e.href}`);for(const e of I("img[src]",s))e.style="max-width: 25em; max-height: 25em; -webkit-user-select: none; -moz-user-select: none; -ms-user-select: none; user-select: none;";return e=s?s.innerHTML:"No additional info available",e};if(X.shadowSupport){const t=e.attachShadow({mode:"closed"}),n=G("div",{style:"pointer-events: none;",innerHTML:i()});t.append(n)}return}if(!P.cl.has(e,"hidden"))return void P.cl.add(e,"hidden");P.cl.remove(e,"hidden")}else if(/export-/.test(d)){const e="export-cfg"===d;W({url:"data:text/plain;charset=utf-8,"+encodeURIComponent(JSON.stringify(e?r:r.theme,null," ")),filename:`Magic_Userscript_${e?"config":"theme"}.json`})}else if(/import-/.test(d)){if(F("input",a.parentElement))return void F("input",a.parentElement).click();const t=G("input","hidden",{type:"file",accept:".json",onchange(n){const s=n.target.files[0];if(void 0===s||""===s.name)return;const a=new FileReader;a.onload=function(){if("string"!=typeof a.result)return;const n=JSON.parse(a.result);n.blacklist?(r=n,X.unsaved=!0,X.rebuild=!0,H(),X.save().then(t=>{t.autofetch&&e.build(),X.unsaved=!1,X.rebuild=!1})):(r.theme=n,X.setTheme()),t.remove()},a.readAsText(s)}});a.parentElement.append(t),t.click()}}}catch(e){h(e)}}),U(l,"auxclick",e=>{if(1!==e.button)return;const t=e.target.closest("[data-command]");if(!t)return;const n=t.dataset.command;"switch-tab"===n||"close-tab"===n?c.close(t):"new-tab"===n&&c.create()}),!E){const e=async(e,t)=>{"mouseenter"===t?(Y.clear(...Y.ids),X.timeouts.mouse.clear(...X.timeouts.mouse.ids),e.style.opacity=X.opacityMax):"mouseleave"===t&&(await X.timeouts.mouse.set(r.time),e.style.opacity=X.opacityMin)};for(const t of["mouseenter","mouseleave"])U(l,t,t=>{t.preventDefault(),t.stopPropagation(),e(t.target,t.type)})}U(l,"updateditem",e=>{const t=e.detail;if(t._mujs){if(!0===t.deleted)return t._mujs.root.remove(),X.userjsCache.delete(t.id),K.reset(),void le.sortRecords();x(t.code_urls)||(t.code_url=t.code_urls[0].code_url);for(const e of I("[data-name]",t._mujs.root)){const n=e.dataset.name;"code"!==n?t[n]&&("license"===n?(P.attr(e,"title",t.license??R("no_license")),P.text(e,`${R("license")}: ${t.license??R("no_license")}`)):"code_updated_at"===n?(P.text(e,O.toDate(t.code_updated_at)),e.dataset.value=new Date(t.code_updated_at).toISOString()):"created_date"===n?(P.text(e,`${R("created_date")}: ${O.toDate(t.created_at)}`),e.dataset.value=new Date(t.created_at).toISOString()):"total_installs"===n?P.text(e,`${R("total_installs")}: ${O.toNumber(t.total_installs)}`):P.text(e,t[n])):t._mujs.code.data_code_block&&(r.preview.code&&!r.preview.metadata?e.value=t._mujs.code.data_code_block:r.preview.metadata&&!r.preview.code?e.value=t._mujs.code.data_meta_block:e.value=`${t._mujs.code.META_START_COMMENT}${t._mujs.code.data_meta_block}${t._mujs.code.META_END_COMMENT}${t._mujs.code.data_code_block}`)}if(t._mujs.code.data_code_block)for(const e of I('mujs-column[data-el="matches"]',t._mujs.root))J(t,e.dataset.type,F(".mujs-grants",e),e);X.userjsCache.has(t.id)&&X.userjsCache.set(t.id,t)}});const ee=["com","net","org","de","co.uk"],te=["http://*","https://*","http://*/*","https://*/*","http*://*","http*://*/*","*","*://*","*://*/*","http*"];class ne{code;data_meta_block;data_code_block;data_meta;data_names;constructor(e,t){this.isUserCSS=!0===t,this.META_START_COMMENT=this.isUserCSS?"/* ==UserStyle==":"// ==UserScript==",this.META_END_COMMENT=this.isUserCSS?"==/UserStyle== */":"// ==/UserScript==",e&&(this.code=e,this.get_meta_block(),this.get_code_block(),this.parse_meta(),this.calculate_applies_to_names())}get_meta_block(){if(x(this.code))return"";if(this.data_meta_block)return this.data_meta_block;const e=this.code.indexOf(this.META_START_COMMENT);if(w(e))return"";const t=this.code.indexOf(this.META_END_COMMENT,e);if(w(t))return"";const n=this.code.substring(e+this.META_START_COMMENT.length,t);return this.data_meta_block=n,this.data_meta_block}get_code_block(){if(x(this.code))return"";if(this.data_code_block)return this.data_code_block;const e=this.code.indexOf(this.META_START_COMMENT);if(w(e))return null;const t=this.code.indexOf(this.META_END_COMMENT,e);if(w(t))return null;const n=this.code.substring(t+this.META_END_COMMENT.length,this.code.length);return this.data_code_block=n.split("\n").filter(Boolean).join("\n"),this.data_code_block}parse_meta(){if(x(this.code))return{};if(this.data_meta)return this.data_meta;const e={},t=new Map,n=this.isUserCSS&&/@([a-zA-Z:-]+)\s+(.*)/||/\/\/\s+@([a-zA-Z:-]+)\s+(.*)/;for(const e of this.get_meta_block().split("\n").filter(Boolean)){let[,s,a]=n.exec(e)??[];if(!s)continue;s=s.trim(),a=a.trim(),t.has(s)||t.set(s,[]);const o=t.get(s);o.push(a),t.set(s,o)}for(const[n,s]of t)s.length>1?e[n]=s:e[n]=s[0];return this.data_meta=e,this.data_meta}calculate_applies_to_names(){if(x(this.code))return[];if(this.data_names)return this.data_names;let e=[];for(const[t,n]of Object.entries(this.parse_meta()))/include|match/i.test(t)&&(e=Array.isArray(n)?e.concat(n):e.concat([n]));return x(e)?[]:this.intersect(e,te)?(this.data_names=[{domain:!1,text:"All sites",tld_extra:!1}],this.data_names):(this.data_names=ne.getNames(e),this.data_names)}intersect(e,...t){return!v([...new Set(e)].filter(e=>t.every(t=>t.includes(e))))}static getNames(e=[]){const t=new Map,n=e=>{t.has(e.text)||t.set(e.text,e)};for(let t of e){const e=t;let s=[];if(t.match(/^\/(.*)\/$/))s=[t];else{let e=/^\*(https?:.*)/i.exec(t);e&&(t=e[1]),t=t.replace(/^\*:/i,"http:").replace(/^\*\/\//i,"http://").replace(/^http\*:/i,"http:").replace(/^(https?):([^/])/i,"$1://$2"),e=/^([a-z]+:\/\/)\*\.?([a-z0-9-]+(?:.[a-z0-9-]+)+.*)/i.exec(t),e&&(t=e[1]+e[2]),e=/^\*\.?([a-z0-9-]+\.[a-z0-9-]+.*)/i.exec(t),e&&(t=`http://${e[1]}`),e=/^http\*(?:\/\/)?\.?((?:[a-z0-9-]+)(?:\.[a-z0-9-]+)+.*)/i.exec(t),e&&(t=`http://${e[1]}`),e=/^([a-z]+:\/\/([a-z0-9-]+(?:\.[a-z0-9-]+)*\.))\*(.*)/.exec(t),e&&e[2].match(/A([0-9]+\.){2,}z/)?(t=`${e[1]}tld${e[3]}`,s=[t.split("*")[0]]):s=[t]}for(const t of s)try{const s=new URL(t),{host:a}=s;if(w(a))n({text:e,domain:!1,tld_extra:!1});else if(!a.includes(".")&&a.includes("*"))n({text:e,domain:!1,tld_extra:!1});else if(a.endsWith(".tld"))for(let e=0;e<ee.length;e++){const t=ee[e];n({text:a.replace(/tld$/i,t),domain:!0,tld_extra:0!=e})}else a.endsWith(".")?n({text:a.slice(0,-1),domain:!0,tld_extra:!1}):n({text:a,domain:!0,tld_extra:!1})}catch{n({text:e,domain:!1,tld_extra:!1})}}return[...t.values()]}async request(e=!1,t,n){if(this.data_code_block)return this;const s=await Z.req(t,"GET","text").catch(a);if("string"!=typeof s)return this;this.isUserCSS=_(t),this.META_START_COMMENT=this.isUserCSS?"/* ==UserStyle==":"// ==UserScript==",this.META_END_COMMENT=this.isUserCSS?"==/UserStyle== */":"// ==/UserScript==",this.code=s,this.get_meta_block(),this.get_code_block(),this.parse_meta(),this.calculate_applies_to_names();const{data_meta:o}=this;if(e&&(o[`name:${O.current}`]&&(Object.assign(n,{name:o[`name:${O.current}`]}),this.translated=!0),o[`description:${O.current}`]&&(Object.assign(n,{description:o[`description:${O.current}`]}),this.translated=!0)),Array.isArray(o.grant)&&(o.grant=((...e)=>[...new Set(e.flat())])(o.grant)),o.resource){const e={};if("string"==typeof o.resource){const[,t,n]=/(.+)\s+(.+)/.exec(o.resource)??[];t&&(e[t.trim()]=n)}else for(const t of o.resource){const[,n,s]=/(.+)\s+(http.+)/.exec(t)??[];n&&(e[n.trim()]=s)}o.resource=e}return Object.assign(this,{code_size:[Z.format(s.length)],meta:o}),this}}const se={id:0,bad_ratings:0,good_ratings:0,ok_ratings:0,daily_installs:0,total_installs:0,name:"NOT FOUND",description:"NOT FOUND",version:"0.0.0",url:d,code_url:d,created_at:Date.now(),code_updated_at:Date.now(),locale:"NOT FOUND",deleted:!1,users:[]},ae=(e="",t={})=>{if(!t.root||!t.type)return;const{root:n,type:s}=t,a=G("mu-js","mujs-list",{textContent:`${e}: `}),o=G("mu-js","mujs-grants"),r=G("mujs-column","mujs-list",{dataset:{el:"matches",type:s}});r.append(a,o),n.append(r);const i=t.list??[];if(x(i)){const e=G("mujs-a",{textContent:R("listing_none")});return o.append(e),void P.cl.add(r,"hidden")}for(const e of i)if("string"==typeof e&&e.startsWith("http")){const t=G("mujs-a",{textContent:e,dataset:{command:"open-tab",webpage:e}});o.append(t)}else if(g(e))if("resource"===s)for(const[t,n]of Object.entries(e)){const e=G("mujs-a",{textContent:t??"ERROR"});n.startsWith("http")&&(e.dataset.command="open-tab",e.dataset.webpage=n),o.append(e)}else{const t=G("mujs-a",{textContent:e.text});e.domain&&(t.dataset.command="open-tab",t.dataset.webpage=`https://${e.text}`),o.append(t)}else{const t=G("mujs-a",{textContent:e});o.append(t)}},oe=(e,t)=>{if([!0===e.deleted,421603===e.id,z.includes(e.id),z.includes(e.url)].some(e=>!0===e))return;X.userjsCache.has(e.id)||X.userjsCache.set(e.id,e);const n=G("td","install-btn"),s=G("td","mujs-uframe"),a=G("td","mujs-list",{textContent:e.daily_installs,dataset:{name:"daily_installs"}}),o=G("td","mujs-list",{textContent:O.toDate(e.code_updated_at),dataset:{name:"code_updated_at",value:new Date(e.code_updated_at).toISOString()}}),i=G("td","mujs-name"),l=G("mujs-column","mujs-list hidden",{dataset:{el:"more-info"}}),c=G("mujs-column","mujs-list hidden"),d=G("mujs-row","mujs-list"),m=G("mujs-row","mujs-list"),u=G("mujs-column","mujs-list"),h=G("mujs-a","mujs-homepage",{textContent:e.name,title:e.url,dataset:{command:"open-tab",webpage:e.url}}),p=G("mu-js","mujs-list",{textContent:`${R("version_number")}: ${e.version}`}),f=G("mu-js","mujs-list",{textContent:`${R("created_date")}: ${O.toDate(e.created_at)}`,dataset:{name:"created_at",value:new Date(e.created_at).toISOString()}}),b=G("mu-js","mujs-list",{title:e.license??R("no_license"),textContent:`${R("license")}: ${e.license??R("no_license")}`,dataset:{name:"license"}}),g=G("mu-js","mujs-list",{textContent:`${R("total_installs")}: ${O.toNumber(e.total_installs)}`,dataset:{name:"total_installs"}}),j=G("mu-js","mujs-list",{title:R("ratings"),textContent:`${R("ratings")}:`}),_=G("mu-js","mujs-list mujs-ratings",{title:R("good"),textContent:e.good_ratings,dataset:{name:"good_ratings",el:"good"}}),y=G("mu-js","mujs-list mujs-ratings",{title:R("ok"),textContent:e.ok_ratings,dataset:{name:"ok_ratings",el:"ok"}}),v=G("mu-js","mujs-list mujs-ratings",{title:R("bad"),textContent:e.bad_ratings,dataset:{name:"bad_ratings",el:"bad"}}),x=G("mu-js","mujs-list mujs-pointer",{title:e.description,textContent:e.description,dataset:{command:"list-description"}}),k=G("mu-jsbtn","install",{innerHTML:`${q.load("install")} ${R("install")}`,title:`${R("install")} "${e.name}"`,dataset:{command:"install-script",userjs:e.id}}),C=G("mu-jsbtn",{innerHTML:`${q.load("download")} ${R("saveFile")}`,dataset:{command:"download-userjs",userjs:e.id,userjsName:e.name}}),T=G("tr","frame",{dataset:{engine:t,scriptId:e.id}}),E=G("textarea","code-area hidden",{dataset:{name:"code"},rows:"10",autocomplete:!1,spellcheck:!1,wrap:"soft"}),A=G("mu-jsbtn",{innerHTML:`${q.load("code")} ${R("code")}`,dataset:{command:"load-userjs",userjs:e.id}}),L=G("mu-jsbtn",{innerHTML:`${q.load("code")} ${R("metadata")}`,dataset:{command:"load-header",userjs:e.id}});!t.includes("fork")&&r.recommend.others&&S.includes(e.url)&&(T.dataset.good="upsell");for(const t of e.users){const e=G("mujs-a",{innerHTML:t.name,title:t.url,dataset:{command:"open-tab",webpage:t.url}});!r.recommend.author||t.id!==M&&"https://github.com/magicoflolis"!==t.url||(T.dataset.author="upsell",P.prop(e,"innerHTML",`${t.name} ${q.load("verified")}`)),s.append(e)}r.recommend.others&&S.includes(e.id)&&(T.dataset.good="upsell"),n.append(k),u.append(j,_,y,v),d.append(g,u,p,f),ae(R("code_size"),{list:e._mujs.code.code_size,type:"code_size",root:d}),m.append(b);const $=e._mujs.code?.data_meta??{};ae(R("antifeatures"),{list:$.antifeatures??[],type:"antifeatures",root:m}),ae(R("applies_to"),{list:e._mujs.code?.data_names??[],type:"data_names",root:m}),ae("@grant",{list:$.grant??[],type:"grant",root:m}),ae("@require",{list:$.require,type:"require",root:m}),ae("@resource",{list:w($.resource)?[]:[$.resource],type:"resource",root:m}),l.append(d,m),c.append(C,A,L),i.append(h,x,l,c,E),i._mujs={fmore:l,fBtns:c,codeArea:E};const N=G("mu-jsbtn",{innerHTML:`${q.load("pager")} Page`,dataset:{command:"load-page",userjs:e.id}});c.append(N),e._mujs.code?.translated&&T.classList.add("translated");for(const e of[i,s,a,o,n])T.append(e);return e._mujs.root=T,e._mujs.root},re=()=>{const e=new Map,t={pool:e,enabled:()=>[...e.values()].filter(e=>e.enabled),refresh(){Object.is(e.size,0)||e.clear();for(const[t,n]of Object.entries(r.filters))e.has(t)||e.set(t,{...n,reg:new RegExp(n.regExp,n.flag),keyReg:new RegExp(t.trim().toLocaleLowerCase(),"gi"),valueReg:new RegExp(n.name.trim().toLocaleLowerCase(),"gi")});return this},get:t=>[...e.values()].find(e=>e.keyReg.test(t)||e.valueReg.test(t)),match({name:e,users:n}){const s=t.enabled();if(Object.is(s.length,0))return!0;for(const t of s)if([{name:e},...n].find(e=>e.name.match(t.reg)))return!1;return!0}};for(const[t,n]of Object.entries(r.filters))e.has(t)||e.set(t,{...n,reg:new RegExp(n.regExp,n.flag),keyReg:new RegExp(t.trim().toLocaleLowerCase(),"gi"),valueReg:new RegExp(n.name.trim().toLocaleLowerCase(),"gi")});return t.refresh()},ie=class{#e;#t;constructor(e){this.build=this.build.bind(this),this.groupBy=this.groupBy.bind(this),this.dispatch=this.dispatch.bind(this),this.sortRecords=this.sortRecords.bind(this),this.#e=r.engines??[],this.setHost(e)}setEngines(e=[]){const{host:t}=this,n=e.filter(e=>!(!e.enabled||(T[e.name]??[]).includes(t)&&(h(`Engine: "${e.name}" unsupported on "${t}"`),X.timeoutFrame(),1)));return this.#e=n,n}setHost(e){return x(e)&&(e=X.host),this.#t=e,this.blacklisted=X.checkBlacklist(e),this.#e=this.setEngines(this.engines),this.domain=this.getDomain(this.#t),this.blacklisted&&(h(`Blacklisted "${e}"`),X.timeoutFrame()),e}dispatch(e){const{CustomEvent:t}=C,n=new t("updateditem",{detail:e});l.dispatchEvent(n)}get engines(){return this.#e}get host(){return this.#t}getDomain(e=""){return"*"===e?"all-sites":e.split(".").at(-2)??d}build(){try{X.refresh();const{blacklisted:e,engines:t,host:n,domain:s,dispatch:a}=this;if(e||x(t))return X.opacityMin="0",void(i.style.opacity=X.opacityMin);const l=[],c=re(),d=Array.from(this);o("Building list",{hostCache:d,engines:t,container:X,list:this});const m=this.groupBy(),u=t.filter(e=>!m[e.name]),p=u.filter(e=>d.find(({_mujs:t})=>e.name===t.info.engine.name));if(!v(u)&&v(p))for(const e of t){o(`Fetching from "${e.name}" for "${n}"`);const t=t=>{t.cause||(t.cause=e.name),t.message.startsWith("429")?h(`Engine: "${e.name}" Too many requests...`):h(`Engine: "${e.name}"`,t.message)},i=t=>{const s={...se,...t,code_urls:[],_mujs:{root:{},info:{engine:e,host:n},code:{meta:{}}}};return s._mujs.code.request=async(e=!1,t)=>{if("string"==typeof s._mujs.code.data_code_block)return s._mujs.code;const n=new ne;if(await n.request(e,t??s.code_url,s),t)return n;for(const[e,t]of Object.entries(n))s._mujs.code[e]=t;return s._mujs.code},s},d=t=>e.query?N(e.query).replace(/\{host\}/g,n).replace(/\{domain\}/g,s):t,m=async t=>{if(!t)return void h("Invalid data received from the server, check internet connection");const n=(Array.isArray(t)?t:Array.isArray(t.query)?t.query:[]).filter(Boolean).filter(e=>!e.deleted).filter(c.match);if(v(n))return;const{groupBy:s}=C,o=s(n.map(i),({locale:e})=>{const[t=e]=e.split("-");return t});for(const[t,n]of Object.entries(o)){if(!n)break;for(const s of n)r.filterlang&&t!==O.current&&!(await s._mujs.code.request(!0)).translated||(s._mujs.code.data_code_block||!r.preview.code&&!r.preview.metadata||s._mujs.code.request().then(()=>{a(s)}),_(s.code_url)&&s.code_urls.push({name:`${s.name} (.user.css)`,code_url:s.code_url},{name:`${s.name} (.user.js)`,code_url:s.code_url.replace(/\.user\.css$/,".user.js")}),oe(s,e.name))}},u=async t=>{try{if(!t)return void h("Invalid data received from the server, TODO fix this");const n=t.documentElement;if(/openuserjs/gi.test(e.name)){const t=I(".col-sm-8 .tr-link",n)??[];for(const n of t){for(;w(F(".script-version",n));)await new Promise(e=>requestAnimationFrame(e));const t=P.prop(F(".tr-link-a",n),"href").replace(new RegExp(document.location.origin,"gi"),"https://openuserjs.org"),s=i({name:P.text(F(".tr-link-a",n)),description:P.text(F("p",n)),version:P.text(F(".script-version",n)),url:t,code_url:`${t.replace(/\/scripts/gi,"/install")}.user.js`,total_installs:P.text(F("td:nth-child(2) p",n)),created_at:P.attr(F("td:nth-child(4) time",n),"datetime"),code_updated_at:P.attr(F("td:nth-child(4) time",n),"datetime"),users:[{name:P.text(F(".inline-block a",n)),url:P.prop(F(".inline-block a",n),"href")}]});c.match(s)||(s._mujs.code.data_code_block||!r.preview.code&&!r.preview.metadata||s._mujs.code.request().then(()=>{a(s)}),oe(s,e.name))}}}catch(e){h(e)}},p=n=>{try{if(v(n.items))return;for(const s of n.items){const n=i({id:s.id??0,name:s.name,description:x(s.description)?R("no_license"):s.description,url:s.html_url,code_url:s.html_url,page_url:`${s.url}/contents/README.md`,created_at:s.created_at,code_updated_at:s.updated_at||Date.now(),daily_installs:s.watchers_count??0,good_ratings:s.stargazers_count??0,users:[{name:s.owner.login,url:s.owner.html_url}]});s.license?.name&&(n.license=s.license.name);const o=s.contents_url.replace(/\{\+path\}/,""),l=async s=>{const a=await Z.req(s,"GET","json",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e.token}`,"X-GitHub-Api-Version":"2022-11-28"}}).catch(t);for(const e of a)"file"===e.type?(y(e.name)||_(e.name))&&n.code_urls.push({name:e.name,code_url:e.download_url}):"dir"===e.type&&await l(`${o}/${e.path}`)};l(o).then(()=>{if(x(n.code_urls))n.deleted=!0;else if(!n._mujs.code.data_code_block&&(r.preview.code||r.preview.metadata))return void n._mujs.code.request().then(()=>{a(n)});a(n)}),oe(n,e.name)}}catch(e){h(e)}};let f;if(/github/gi.test(e.name)){if(x(e.token)){h(`"${e.name}" requires a token to use`);continue}Z.req(`https://api.github.com/search/repositories?q=topic:${s}+topic:userstyle`,"GET","json",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e.token}`,"X-GitHub-Api-Version":"2022-11-28"}}).then(p).catch(t),f=Z.req(d(`https://api.github.com/search/repositories?q=topic:${s}+topic:userscript`),"GET","json",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e.token}`,"X-GitHub-Api-Version":"2022-11-28"}}).then(p).then(()=>{Z.req("https://api.github.com/rate_limit","GET","json",{headers:{Accept:"application/vnd.github+json",Authorization:`Bearer ${e.token}`,"X-GitHub-Api-Version":"2022-11-28"}}).then(e=>{for(const[t,n]of Object.entries(e.resources.code_search)){const e=G("mujs-row","rate-info",{textContent:`${t.toUpperCase()}: ${n}`});X.rateContainer.append(e)}}).catch(t)})}else f=/openuserjs/gi.test(e.name)?Z.req(d(`${e.url}${n}`),"GET","document").then(u):Z.req(d(`${e.url}/scripts/by-site/${n}.json?language=all`)).then(m);f&&l.push(f.catch(t))}else for(const e of d)X.tabbody.append(e._mujs.root);if(X.urlBar.placeholder=R("search_placeholder"),X.urlBar.value="",v(l))return void this.sortRecords();Promise.allSettled(l).then(this.sortRecords).catch(h)}catch(e){h(e)}}sortRecords(){const e=Array.from(this);for(const t of e.flat().sort((e,t)=>{const n=r.autoSort??"daily_installs";return t[n]-e[n]}))f(t._mujs.root)&&X.tabbody.append(t._mujs.root);for(const[t,n]of Object.entries(this.groupBy(e)))K.update(n.length,{name:t})}groupBy(){return C.groupBy(Array.from(this),({_mujs:e})=>e.info.engine.name)}*[Symbol.iterator](){const{host:e,engines:t}=this,n=Array.from(X).filter(({_mujs:n})=>n.info.host===e&&t.find(e=>e.enabled&&e.name===n.info.engine.name));for(const e of n)yield e}},le=new ie,ce=()=>{const e=G("mu-js","mujs-sty-flex"),t=G("mujs-btn","save",{textContent:R("save"),dataset:{command:"save"},disabled:!1}),s=G("mujs-btn","reset",{textContent:R("reset"),dataset:{command:"reset"}});e.append(s,t);const o=(e,t)=>{t=t??R("no_license"),e=e??R("no_license");const n=G("mujs-section",{dataset:{name:t}}),s=G("label",{dataset:{command:t}}),a=G("mu-js",{innerHTML:e});return U(n,"click",e=>{const s=e.target.closest("[data-command]");if(s&&s.dataset.command===t){const e=I(`[data-${t}]`,n);P.cl.has(e,"hidden")?P.cl.remove(e,"hidden"):P.cl.add(e,"hidden")}}),s.append(a),n.append(s),X.cfgpage.append(n),b.has(n)||b.add(n),n},i={general:o("General","general"),load:o("Automation","load"),list:o("List","list"),filters:o(`List Filters ${q.load("info",{dataset:{command:"more-info",webpage:"https://greasyfork.org/scripts/12179"}})}`,"filters"),blacklist:o("Blacklist (WIP)","blacklist"),engine:o("Search Engines","engine"),theme:o("Theme Colors","theme"),exp:o("Import / Export","exp")},c=(e,n,s="checkbox",o="general",l={})=>{const[c,d,m]=/^(\w+)-(.+)/.exec(n)??[],u=G("label","sub-section hidden",{dataset:{[o]:e}}),h=G("mu-js",{innerHTML:e});u.append(h);const p={text:e,tag:o,value:n,type:s,attrs:l,default:(()=>{if("engine"===o){const e=$.engines.find(e=>e.name===n);if(e)return e}return d?$[d][m]:$[n]})(),cache:(()=>{if("engine"===o){const e=r.engines.find(e=>e.name===n);if(e)return e}return d?r[d][m]:r[n]})()};if("select"===s){const t=G("select",{dataset:{[o]:e},...l});for(const e of Object.keys(se)){if("deleted"===e||"users"===e)continue;const n=G("option",{value:e,textContent:e});t.append(n)}return t.value=r[n],u.append(t),i[o]&&i[o].append(u),p.elem=t,D.push(p),u}const f=G("input",{type:s,dataset:{[o]:e},...l});if("engine"===o&&(f.dataset.name=n),i[o]&&i[o].append(u),"checkbox"===s){const e=G("mu-js","mujs-inlab"),t=G("label",{onclick(){f.dispatchEvent(new MouseEvent("click"))}});if(e.append(f,t),u.append(e),f.checked=d?"filters"===d?r[d][m].enabled:r[d][m]:r[n],U(f,"change",e=>{X.unsaved=!0,/filterlang/i.test(n)&&(X.rebuild=!0),d?"filters"===d?r[d][m].enabled=e.target.checked:r[d][m]=e.target.checked:r[n]=e.target.checked}),"engine"===o){const e=r.engines.find(e=>e.name===n);if(e){if(f.checked=e.enabled,f.dataset.engine=e.name,U(f,"change",t=>{X.unsaved=!0,X.rebuild=!0,e.enabled=t.target.checked,le.setEngines(r.engines)}),e.query){const t=$.engines.find(t=>t.name===e.name),n=G("input",{type:"text",defaultValue:"",value:N(e.query),placeholder:N(t.query),dataset:{name:c,engine:e.name},onchange(t){X.unsaved=!0,X.rebuild=!0;try{e.query=encodeURIComponent(new URL(t.target.value).toString()),le.setEngines(r.engines)}catch(e){a(e)}}});p.elemUrl=n,u.append(n)}if("github"===e.name){const t=G("input",{type:"text",defaultValue:"",value:e.token??"",placeholder:"Paste Access Token",dataset:{engine:"github-token"},onchange(t){X.unsaved=!0,X.rebuild=!0,e.token=t.target.value,le.setEngines(r.engines)}});p.elemToken=t,u.append(t)}}}}else"text"===s&&(f.defaultValue="",f.value=n??"",f.placeholder=n??"","theme"===o&&(f.dataset[o]=e,U(f,"change",n=>{let s=!0;try{const t=n.target.value,s=X.root.style,a=`--mujs-${e}`,o=s.getPropertyValue(a);if(x(t))return r.theme[e]=$.theme[e],void s.removeProperty(a);if(o===t)return;s.removeProperty(a),s.setProperty(a,t),r.theme[e]=t}catch(e){a(e),s=!1}finally{s?(P.cl.remove(n.target,"mujs-invalid"),P.prop(t,"disabled",!1)):(P.cl.add(n.target,"mujs-invalid"),P.prop(t,"disabled",!0))}}))),u.append(f);return p.elem=f,D.push(p),u};A&&(c(R("userjs_sync"),"cache"),c(R("userjs_autoinject"),"autoinject","checkbox","load")),c(`${R("redirect")} ${q.load("info",{dataset:{command:"more-info",webpage:"https://greasyfork.org/scripts/23840"}})}`,"sleazyredirect"),c(`${R("dtime")} (ms)`,"time","number","general",{defaultValue:1e4,value:r.time,min:0,step:500,onbeforeinput(e){e.target.validity.badInput?(P.cl.add(e.target,"mujs-invalid"),P.prop(t,"disabled",!0)):(P.cl.remove(e.target,"mujs-invalid"),P.prop(t,"disabled",!1))},oninput(e){X.unsaved=!0;const n=e.target;n.validity.badInput||n.validity.rangeUnderflow&&"-1"!==n.value?(P.cl.add(n,"mujs-invalid"),P.prop(t,"disabled",!0)):(P.cl.remove(n,"mujs-invalid"),P.prop(t,"disabled",!1),r.time=x(n.value)?r.time:parseFloat(n.value))}}),c(R("auto_fetch"),"autofetch","checkbox","load"),c(R("userjs_fullscreen"),"autoexpand","checkbox","load",{onchange(e){e.target.checked?(P.cl.add([n,l],"expanded"),P.prop(n,"innerHTML",q.load("collapse"))):(P.cl.remove([n,l],"expanded"),P.prop(n,"innerHTML",q.load("expand")))}}),c("Clear on Tab close","clearTabCache","checkbox","load"),c(R("default_sort"),"autoSort","select","list"),c(R("filter"),"filterlang","checkbox","list"),c(R("preview_code"),"preview-code","checkbox","list"),c(R("preview_metadata"),"preview-metadata","checkbox","list"),c(R("recommend_author"),"recommend-author","checkbox","list"),c(R("recommend_other"),"recommend-others","checkbox","list");for(const[e,t]of Object.entries(r.filters))c(t.name,`filters-${e}`,"checkbox","filters");c("Greasy Fork","greasyfork","checkbox","engine"),c("Sleazy Fork","sleazyfork","checkbox","engine"),c("Open UserJS","openuserjs","checkbox","engine"),c(`GitHub API ${q.load("info",{dataset:{command:"more-info",webpage:"https://docs.github.com/authentication/keeping-your-account-and-data-secure/managing-your-personal-access-tokens"}})}`,"github","checkbox","engine");for(const[e,t]of Object.entries(r.theme))c(e,t,"text","theme");const d=(e,n="",s=!1,o="String")=>{let r=e;if("string"==typeof e){if(e.startsWith("userjs-")){s=!0;const t=e.substring(7);r=`Built-in "${t}"`,n=L[t]}}else if(!e.enabled)return;p(n)?(n=n.toString(),o="RegExp"):(n=JSON.stringify(n),o="Object");const l=G("label","hidden",{textContent:r,dataset:{blacklist:e}}),c=G("input",{type:"text",defaultValue:"",value:n??"",placeholder:n??"",dataset:{blacklist:e},onchange(e){let n=!0;try{const t=e.target.value;if(x(t))return;n=!0}catch(e){a(e),n=!1}finally{n?(P.cl.remove(e.target,"mujs-invalid"),P.prop(t,"disabled",!1)):(P.cl.add(e.target,"mujs-invalid"),P.prop(t,"disabled",!0))}}}),d=G("select",{disabled:s,dataset:{blacklist:e}});if(s){c.readOnly=!0;const e=G("option",{value:o,textContent:o});d.append(e)}else for(const e of["String","RegExp","Object"]){const t=G("option",{value:e,textContent:e});d.append(t)}d.value=o,l.append(c,d),i.blacklist.append(l)};for(const e of r.blacklist)d(e);const m={export:{cfg:G("mujs-btn","mujs-export sub-section hidden",{textContent:R("export_config"),dataset:{command:"export-cfg",exp:"export-cfg"}}),theme:G("mujs-btn","mujs-export sub-section hidden",{textContent:R("export_theme"),dataset:{command:"export-theme",exp:"export-theme"}})},import:{cfg:G("mujs-btn","mujs-import sub-section hidden",{textContent:R("import_config"),dataset:{command:"import-cfg",exp:"import-cfg"}}),theme:G("mujs-btn","mujs-import sub-section hidden",{textContent:R("import_theme"),dataset:{command:"import-theme",exp:"import-theme"}})}};for(const e of Object.values(m))for(const t of Object.values(e))i.exp.append(t);X.cfgpage.append(e)};X.Tabs.custom=t=>{le.setHost(t),e.build()},U(i,"mouseenter",e=>{e.preventDefault(),e.stopPropagation(),w(e.target)||(e.target.style.opacity=X.opacityMax,Y.clear(...Y.ids))}),U(i,"mouseleave",e=>{e.preventDefault(),e.stopPropagation(),w(e.target)||(e.target.style.opacity=X.opacityMin,X.timeoutFrame())});let de=!0;U(i,"click",t=>{t.preventDefault(),Y.clear(...Y.ids),de&&!r.autofetch&&(de=!1,e.build()),P.cl.remove(l,"hidden"),P.cl.add(i,"hidden"),r.autoexpand&&(P.cl.add([X.btnfullscreen,l],"expanded"),P.prop(X.btnfullscreen,"innerHTML",q.load("collapse")))}),U(X.urlBar,"input",e=>{if(e.preventDefault(),X.urlBar.placeholder===R("newTab"))return;const t=e.target.value;if(x(t))return void P.cl.remove([...X.toElem(),...b],"hidden");const n=new Set;if(!P.cl.has(X.cfgpage,"hidden")){const e=new RegExp(t,"gi");for(const t of b)f(t)&&(n.has(t)||t.textContent.match(e)&&n.add(t));return P.cl.add(b,"hidden"),void P.cl.remove([...n],"hidden")}const s=Array.from(X).filter(({_mujs:e})=>!n.has(e.root)),a=(e,a)=>{const o=t.replace(e,""),r=new RegExp(o,"gi");for(const e of s)"number"==typeof k&&`${e[a]}`.match(r)&&n.add(e._mujs.root)};if(t.match(/^(code_url|url):/))a(/^(code_url|url):/,"code_url");else if(t.match(/^(author|users?):/)){const[,e]=/^[\w_]+:(.+)/.exec(t)??[];if(e){const t=new RegExp(e,"gi");for(const e of s.filter(e=>!x(e.users)))for(const s of e.users)for(const a of Object.values(s))("string"==typeof a&&a.match(t)||"number"==typeof a&&`${a}`.match(t))&&n.add(e._mujs.root)}}else if(t.match(/^(locale|i18n):/))a(/^(locale|i18n):/,"locale");else if(t.match(/^id:/))a(/^id:/,"id");else if(t.match(/^license:/))a(/^license:/,"license");else if(t.match(/^name:/))a(/^name:/,"name");else if(t.match(/^description:/))a(/^description:/,"description");else if(t.match(/^(search_engine|engine):/)){const[,e]=/^[\w_]+:(\w+)/.exec(t)??[];if(e){const t=new RegExp(e,"gi");for(const{_mujs:e}of s)e.info.engine.name.match(t)&&n.add(e.root)}}else if(t.match(/^filter:/)){const[,e]=/^\w+:(.+)/.exec(t)??[];if(e){const t=re().get(e.trim().toLocaleLowerCase());if(t){const{reg:e}=t;for(const{name:t,users:a,_mujs:o}of s)[{name:t},...a].find(t=>t.name.match(e))||n.add(o.root)}}}else if(t.match(/^recommend:/))for(const{url:e,id:t,users:a,_mujs:o}of s)(a.find(e=>e.id===M)||S.includes(e)||S.includes(t))&&n.add(o.root);else{const e=new RegExp(t,"gi");for(const t of s)if(t.name&&t.name.match(e)&&n.add(t._mujs.root),t.description&&t.description.match(e)&&n.add(t._mujs.root),t._mujs.code.data_meta)for(const s of Object.keys(t._mujs.code.data_meta))/name|desc/i.test(s)&&s.match(e)&&n.add(t._mujs.root)}P.cl.add(X.toElem(),"hidden"),P.cl.remove([...n],"hidden")}),U(X.urlBar,"change",t=>{if(t.preventDefault(),w(t.target))return;const{target:n}=t,s=c.getActive();if(X.urlBar.placeholder===R("newTab")&&s){const t=s.firstElementChild,a=u(m(n.value));if(c.protoReg.test(n.value)){const e=c.getTab(n.value);c.close(s),e?c.active(e):c.create(n.value),n.placeholder=R("search_placeholder"),n.value=""}else"*"===a?(s.dataset.host=a,t.title="<All Sites>",t.textContent="<All Sites>",le.setHost(a),e.build()):X.checkBlacklist(a)?h(`Blacklisted "${a}"`):(s.dataset.host=a,t.title=a,t.textContent=a,le.setHost(a),e.build())}}),t.postTask(ce,{priority:"background"}),e.build=async()=>{await t.postTask(le.build,{priority:"background"}),X.timeoutFrame()},r.autofetch?e.build():X.timeoutFrame()}catch(e){a(e),X.remove()}return e}if((()=>{try{return window.self!==window.top}catch{return!0}})())return;let t=self.userjs;if(!(document instanceof Document||document instanceof XMLDocument&&document.createElement("div")instanceof HTMLDivElement)||!0!==/^text\/html|^application\/(xhtml|xml)/.test(document.contentType||"")||self.userjs instanceof Object!=0&&!0===t.UserJS?console.error("[%cMagic Userscript+%c] %cERROR","color: rgb(29, 155, 240);","","color: rgb(249, 24, 128);",`MIME type is not a document, got "${document.contentType||""}"`):t=self.userjs={UserJS:!0},"object"!=typeof t||!t.UserJS)return;{const e=["outlook.office.com"],t=location?.hostname||"";window.trustedTypes&&window.trustedTypes.createPolicy&&!t.includes(e)&&window.trustedTypes.createPolicy("default",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}const n={ar:{createdby:"انشأ من قبل",name:"اسم",daily_installs:"التثبيت اليومي",close:"يغلق",filterA:"منقي",max:"تحقيق أقصى قدر",min:"تصغير",search:"يبحث",search_placeholder:"بحث في البرامج النصية",install:"تثبيت",issue:"إصدار جديد",version_number:"الإصدار",updated:"آخر تحديث",total_installs:"إجمالي التثبيت",ratings:"التقييمات",good:"جيد",ok:"جيد",bad:"سيء",created_date:"تم إنشاؤه",redirect:"شوكة دهنية للكبار",filter:"تصفية اللغات الأخرى",dtime:"عرض المهلة",save:"حفظ",reset:"إعادة تعيين",preview_code:"كود المعاينة",saveFile:"احفظ الملف",newTab:"علامة تبويب جديدة",applies_to:"ينطبق على",license:"الترخيص",no_license:"لا يوجد",antifeatures:"إعلانات",userjs_fullscreen:"ملء الشاشة الكاملة التلقائي",listing_none:"(لا يوجد)",export_config:"تهيئة التصدير",export_theme:"تصدير السمة",import_config:"استيراد تهيئة الاستيراد",import_theme:"استيراد النسق",code_size:"حجم الرمز",prmpt_css:"التثبيت كأسلوب المستخدم؟",userjs_inject:"حقن Userscript+",userjs_close:"إغلاق Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Code",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},de:{createdby:"Erstellt von",name:"Name",daily_installs:"Tägliche Installationen",close:"Schließen Sie",filterA:"Filter",max:"Maximieren Sie",min:"minimieren",search:"Suche",search_placeholder:"Suche nach Userscripts",install:"Installieren Sie",issue:"Neue Ausgabe",version_number:"Version",updated:"Zuletzt aktualisiert",total_installs:"Installationen insgesamt",ratings:"Bewertungen",good:"Gut",ok:"Okay",bad:"Schlecht",created_date:"Erstellt",redirect:"Greasy Fork für Erwachsene",filter:"Andere Sprachen herausfiltern",dtime:"Zeitüberschreitung anzeigen",save:"Speichern Sie",reset:"Zurücksetzen",preview_code:"Vorschau Code",saveFile:"Datei speichern",newTab:"Neue Registerkarte",applies_to:"Gilt für",license:"Lizenz",no_license:"N/A",antifeatures:"Antifeatures",userjs_fullscreen:"Automatischer Vollbildmodus",listing_none:"(Keine)",export_config:"Konfig exportieren",export_theme:"Thema exportieren",import_config:"Konfig importieren",import_theme:"Thema importieren",code_size:"Code Größe",prmpt_css:"Als UserStyle installieren?",userjs_inject:"Userscript+ einfügen",userjs_close:"Userscript+ schließen",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Quelltext",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},en:{createdby:"Created by",name:"Name",daily_installs:"Daily Installs",close:"Close",filterA:"Filter",max:"Maximize",min:"Minimize",search:"Search",search_placeholder:"Search for userscripts",install:"Install",issue:"New Issue",version_number:"Version",updated:"Last Updated",total_installs:"Total Installs",ratings:"Ratings",good:"Good",ok:"Okay",bad:"Bad",created_date:"Created",redirect:"Greasy Fork for adults",filter:"Filter out other languages",dtime:"Display Timeout",save:"Save",reset:"Reset",preview_code:"Preview Code",saveFile:"Download",newTab:"New Tab",applies_to:"Applies to",license:"License",no_license:"N/A",antifeatures:"Antifeatures",userjs_fullscreen:"Automatic Fullscreen",listing_none:"(None)",export_config:"Export Config",export_theme:"Export Theme",import_config:"Import Config",import_theme:"Import Theme",code_size:"Code Size",prmpt_css:"Install as UserStyle?",userjs_inject:"Inject Userscript+",userjs_close:"Close Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Code",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},en_GB:{createdby:"Created by",name:"Name",daily_installs:"Daily Installs",close:"Close",filterA:"Filter",max:"Maximize",min:"Minimize",search:"Search",search_placeholder:"Search for userscripts",install:"Install",issue:"New Issue",version_number:"Version",updated:"Last Updated",total_installs:"Total Installs",ratings:"Ratings",good:"Good",ok:"Okay",bad:"Bad",created_date:"Created",redirect:"Greasy Fork for adults",filter:"Filter out other languages",dtime:"Display Timeout",save:"Save",reset:"Reset",preview_code:"Preview Code",saveFile:"Download",newTab:"New Tab",applies_to:"Applies to",license:"License",no_license:"N/A",antifeatures:"Antifeatures",userjs_fullscreen:"Automatic Fullscreen",listing_none:"(None)",export_config:"Export Config",export_theme:"Export Theme",import_config:"Import Config",import_theme:"Import Theme",code_size:"Code Size",prmpt_css:"Install as UserStyle?",userjs_inject:"Inject Userscript+",userjs_close:"Close Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Code",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},es:{createdby:"Creado por",name:"Nombre",daily_installs:"Instalaciones diarias",close:"Ya no se muestra",filterA:"Filtro",max:"Maximizar",min:"Minimizar",search:"Busque en",search_placeholder:"Buscar userscripts",install:"Instalar",issue:"Nueva edición",version_number:"Versión",updated:"Última actualización",total_installs:"Total de instalaciones",ratings:"Clasificaciones",good:"Bueno",ok:"Ok",bad:"Malo",created_date:"Creado",redirect:"Greasy Fork para adultos",filter:"Filtrar otros idiomas",dtime:"Mostrar el tiempo de espera",save:"Guardar",reset:"Reiniciar",preview_code:"Vista previa del código",saveFile:"Guardar archivo",newTab:"Guardar archivo",applies_to:"Se aplica a",license:"Licencia",no_license:"Desconocida",antifeatures:"Características indeseables",userjs_fullscreen:"Pantalla completa automática",listing_none:"(Ninguno)",export_config:"Exportar configuración",export_theme:"Exportar tema",import_config:"Importar configuración",import_theme:"Importar tema",code_size:"Código Tamaño",prmpt_css:"¿Instalar como UserStyle?",userjs_inject:"Inyectar Userscript+",userjs_close:"Cerrar Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Código",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},fr:{createdby:"Créé par",name:"Nom",daily_installs:"Installations quotidiennes",close:"Ne plus montrer",filterA:"Filtre",max:"Maximiser",min:"Minimiser",search:"Recherche",search_placeholder:"Rechercher des userscripts",install:"Installer",issue:"Nouveau numéro",version_number:"Version",updated:"Dernière mise à jour",total_installs:"Total des installations",ratings:"Notations",good:"Bon",ok:"Ok",bad:"Mauvais",created_date:"Créé",redirect:"Greasy Fork pour les adultes",filter:"Filtrer les autres langues",dtime:"Délai d'affichage",save:"Sauvez",reset:"Réinitialiser",preview_code:"Prévisualiser le code",saveFile:"Enregistrer le fichier",newTab:"Nouvel onglet",applies_to:"S'applique à",license:"Licence",no_license:"N/A",antifeatures:"Antifeatures",userjs_fullscreen:"Plein écran automatique",listing_none:"(Aucun)",export_config:"Export Config",export_theme:"Exporter le thème",import_config:"Importer la configuration",import_theme:"Importer le thème",code_size:"Code Taille",prmpt_css:"Installer comme UserStyle ?",userjs_inject:"Injecter Userscript+",userjs_close:"Fermer Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Code",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},ja:{createdby:"によって作成された",name:"名前",daily_installs:"デイリーインストール",close:"表示されなくなりました",filterA:"フィルター",max:"最大化",min:"ミニマム",search:"検索",search_placeholder:"ユーザースクリプトの検索",install:"インストール",issue:"新刊のご案内",version_number:"バージョン",updated:"最終更新日",total_installs:"総インストール数",ratings:"レーティング",good:"グッド",ok:"良い",bad:"悪い",created_date:"作成",redirect:"大人のGreasyfork",filter:"他の言語をフィルタリングする",dtime:"表示タイムアウト",save:"拯救",reset:"リセット",preview_code:"コードのプレビュー",saveFile:"ファイルを保存",newTab:"新しいタブ",applies_to:"適用対象",license:"ライセンス",no_license:"不明",antifeatures:"アンチ機能",userjs_fullscreen:"自動フルスクリーン",listing_none:"(なし)",export_config:"エクスポート設定",export_theme:"テーマのエクスポート",import_config:"設定のインポート",import_theme:"テーマのインポート",code_size:"コード・サイズ",prmpt_css:"UserStyleとしてインストールしますか？",userjs_inject:"Userscript+ を挿入",userjs_close:"Userscript+ を閉じる",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"コード",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},nl:{createdby:"Gemaakt door",name:"Naam",daily_installs:"Dagelijkse Installaties",close:"Sluit",filterA:"Filter",max:"Maximaliseer",min:"Minimaliseer",search:"Zoek",search_placeholder:"Zoeken naar gebruikersscripts",install:"Installeer",issue:"Nieuw Issue",version_number:"Versie",updated:"Laatste Update",total_installs:"Totale Installaties",ratings:"Beoordeling",good:"Goed",ok:"Ok",bad:"Slecht",created_date:"Aangemaakt",redirect:"Greasy Fork voor volwassenen",filter:"Filter andere talen",dtime:"Weergave timeout",save:"Opslaan",reset:"Opnieuw instellen",preview_code:"Voorbeeldcode",saveFile:"Bestand opslaan",newTab:"Nieuw tabblad",applies_to:"Geldt voor",license:"Licentie",no_license:"N.v.t.",antifeatures:"Functies voor eigen gewin",userjs_fullscreen:"Automatisch volledig scherm",listing_none:"(Geen)",export_config:"Configuratie exporteren",export_theme:"Thema exporteren",import_config:"Configuratie importeren",import_theme:"Thema importeren",code_size:"Code Grootte",prmpt_css:"Installeren als UserStyle?",userjs_inject:"Injecteer Userscript+",userjs_close:"Sluit Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Code",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},pl:{createdby:"Stworzony przez",name:"Nazwa",daily_installs:"Codzienne instalacje",close:"Zamknij",filterA:"Filtr",max:"Maksymalizuj",min:"Minimalizuj",search:"Wyszukiwanie",search_placeholder:"Wyszukiwanie skryptów użytkownika",install:"Instalacja",issue:"Nowy numer",version_number:"Wersja",updated:"Ostatnia aktualizacja",total_installs:"Łączna liczba instalacji",ratings:"Oceny",good:"Dobry",ok:"Ok",bad:"Zły",created_date:"Utworzony",redirect:"Greasy Fork dla dorosłych",filter:"Odfiltruj inne języki",dtime:"Limit czasu wyświetlania",save:"Zapisz",reset:"Reset",preview_code:"Kod podglądu",saveFile:"Zapisz plik",newTab:"Nowa karta",applies_to:"Dotyczy",license:"Licencja",no_license:"N/A",antifeatures:"Antywzorce",userjs_fullscreen:"Automatyczny pełny ekran",listing_none:"(Brak)",export_config:"Konfiguracja eksportu",export_theme:"Motyw eksportu",import_config:"Importuj konfigurację",import_theme:"Importuj motyw",code_size:"Kod Rozmiar",prmpt_css:"Zainstalować jako UserStyle?",userjs_inject:"Wstrzyknij Userscript+",userjs_close:"Zamknij Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Kod",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},ru:{createdby:"Сделано",name:"Имя",daily_installs:"Ежедневные установки",close:"Больше не показывать",filterA:"Фильтр",max:"Максимизировать",min:"Минимизировать",search:"Поиск",search_placeholder:"Поиск юзерскриптов",install:"Установите",issue:"Новый выпуск",version_number:"Версия",updated:"Последнее обновление",total_installs:"Всего установок",ratings:"Рейтинги",good:"Хорошо",ok:"Хорошо",bad:"Плохо",created_date:"Создано",redirect:"Greasy Fork для взрослых",filter:"Отфильтровать другие языки",dtime:"Тайм-аут отображения",save:"Сохранить",reset:"Перезагрузить",preview_code:"Предварительный просмотр кода",saveFile:"Сохранить файл",newTab:"Новая вкладка",applies_to:"Применяется к",license:"Лицензия",no_license:"Недоступно",antifeatures:"Нежелательная функциональность",userjs_fullscreen:"Автоматический полноэкранный режим",listing_none:"(нет)",export_config:"Экспорт конфигурации",export_theme:"Экспорт темы",import_config:"Импорт конфигурации",import_theme:"Импортировать тему",code_size:"Код Размер",prmpt_css:"Установить как UserStyle?",userjs_inject:"Вставить Userscript+",userjs_close:"Закрыть Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"Исходный код",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},zh:{createdby:"由...制作",name:"姓名",daily_installs:"日常安装",close:"不再显示",filterA:"过滤器",max:"最大化",min:"最小化",search:"搜索",search_placeholder:"搜索用户脚本",install:"安装",issue:"新问题",version_number:"版本",updated:"最后更新",total_installs:"总安装量",ratings:"评级",good:"好的",ok:"好的",bad:"不好",created_date:"创建",redirect:"大人的Greasyfork",filter:"过滤掉其他语言",dtime:"显示超时",save:"拯救",reset:"重置",preview_code:"预览代码",saveFile:"保存存档",newTab:"新标签",applies_to:"适用于",license:"许可证",no_license:"暂无",antifeatures:"可能不受欢迎的功能",userjs_fullscreen:"自动全屏",listing_none:"(无)",export_config:"导出配置",export_theme:"导出主题",import_config:"导入配置",import_theme:"导入主题",code_size:"代码 尺寸",prmpt_css:"安装为用户风格？",userjs_inject:"注入 Userscript+",userjs_close:"关闭 Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"代码",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},zh_CN:{createdby:"由...制作",name:"姓名",daily_installs:"日常安装",close:"不再显示",filterA:"过滤器",max:"最大化",min:"最小化",search:"搜索",search_placeholder:"搜索用户脚本",install:"安装",issue:"新问题",version_number:"版本",updated:"最后更新",total_installs:"总安装量",ratings:"评级",good:"好的",ok:"好的",bad:"不好",created_date:"创建",redirect:"大人的Greasyfork",filter:"过滤掉其他语言",dtime:"显示超时",save:"拯救",reset:"重置",preview_code:"预览代码",saveFile:"保存存档",newTab:"新标签",applies_to:"适用于",license:"许可证",no_license:"暂无",antifeatures:"可能不受欢迎的功能",userjs_fullscreen:"自动全屏",listing_none:"(无)",export_config:"导出配置",export_theme:"导出主题",import_config:"导入配置",import_theme:"导入主题",code_size:"代码 尺寸",prmpt_css:"安装为用户风格？",userjs_inject:"注入 Userscript+",userjs_close:"关闭 Userscript+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"代码",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"},zh_TW:{createdby:"由...制作",name:"姓名",daily_installs:"日常安装",close:"不再显示",filterA:"过滤器",max:"最大化",min:"最小化",search:"搜索",search_placeholder:"搜索用户脚本",install:"安装",issue:"新问题",version_number:"版本",updated:"最后更新",total_installs:"总安装量",ratings:"评级",good:"好的",ok:"好的",bad:"不好",created_date:"创建",redirect:"大人的Greasyfork",filter:"过滤掉其他语言",dtime:"显示超时",save:"拯救",reset:"重置",preview_code:"预览代码",saveFile:"保存存档",newTab:"新标签",applies_to:"适用于",license:"许可证",no_license:"暂无",antifeatures:"可能不受欢迎的功能",userjs_fullscreen:"自动全屏",listing_none:"(无)",export_config:"导出配置",export_theme:"导出主题",import_config:"导入配置",import_theme:"导入主题",code_size:"代码 尺寸",prmpt_css:"作為使用者樣式安裝？",userjs_inject:"注入用戶腳本+",userjs_close:"關閉用戶腳本+",userjs_sync:"Sync",userjs_autoinject:"Inject on load",auto_fetch:"Fetch on load",code:"代碼",metadata:"Metadata",preview_metadata:"Preview Metadata",recommend_author:"Recommend Author",recommend_other:"Recommend Others",default_sort:"Default Sort"}},s={title:"[%cMagic Userscript+%c]",color:"color: rgb(29, 155, 240);",dbg(...e){const t=new Date;console.debug(`${s.title} %cDBG`,s.color,"","color: rgb(255, 212, 0);",`[${t.getHours()}:${("0"+t.getMinutes()).slice(-2)}:${("0"+t.getSeconds()).slice(-2)}]`,...e)},err(...e){console.error(`${s.title} %cERROR`,s.color,"","color: rgb(249, 24, 128);",...e);const t="undefined"!=typeof alert&&alert,n=s.title.replace(/%c/g,"");for(const s of e)"object"==typeof s&&"cause"in s&&t&&t(`${n} (${s.cause}) ${s.message}`)},info(...e){console.info(`${s.title} %cINF`,s.color,"","color: rgb(0, 186, 124);",...e)},log(...e){console.log(`${s.title} %cLOG`,s.color,"","color: rgb(219, 160, 73);",...e)}},{err:a,info:o}=s;let r,i;try{i=new URL(window.location.href??d)}catch{}const l=function(){},c=async function(){},d="about:blank",m=e=>e.replace(/^www\./,""),u=e=>e.split(".").splice(-2).join(".").replace(/\/|https:/g,""),h=e=>Object.prototype.toString.call(e).match(/\[object (.*)\]/)[1],p=e=>/RegExp/.test(h(e)),f=e=>/Element/.test(h(e)),b=e=>/HTML/.test(h(e)),g=e=>/Object/.test(h(e)),j=e=>/Function/.test(h(e)),_=e=>/\.user\.css$/.test(e),y=e=>/\.user\.js$/.test(e),w=e=>Object.is(e,null)||Object.is(e,void 0),v=e=>"string"==typeof e&&Object.is(e.trim(),"")||(e instanceof Set||e instanceof Map)&&Object.is(e.size,0)||Array.isArray(e)&&Object.is(e.length,0)||g(e)&&Object.is(Object.keys(e).length,0),x=e=>w(e)||v(e);let C;{const e=(()=>{const e=e=>e&&e.Math===Math&&e;return e("object"==typeof globalThis&&globalThis)||e("object"==typeof window&&window)||e("object"==typeof self&&self)})();try{const t={XMLHttpRequest:e.XMLHttpRequest,CustomEvent:e.CustomEvent,createElement:e.document.createElement.bind(e.document),createElementNS:e.document.createElementNS.bind(e.document),createTextNode:e.document.createTextNode.bind(e.document),setTimeout:e.setTimeout,clearTimeout:e.clearTimeout,navigator:e.navigator,scheduler:{postTask:(t,n)=>"scheduler"in e&&"postTask"in e.scheduler?e.scheduler.postTask(t,n):(void 0===(n=Object.assign({},n)).delay&&(n.delay=0),n.delay=Number(n.delay),n.delay<0?Promise.reject(new TypeError('"delay" must be a positive number.')):new Promise(s=>{e.setTimeout(()=>{s(t())},n.delay)})),yield:()=>"scheduler"in e&&"yield"in e.scheduler?e.scheduler.yield():new Promise(t=>{e.setTimeout(t,0)})},groupBy:(e,t)=>"groupBy"in Object?Object.groupBy(e,t):e.reduce((e={},...n)=>{const s=t(...n);return e[s]??=[],e[s].push(n[0]),e},{})};for(const[e,n]of Object.entries(t))if(!/scheduler|navigator/.test(e)&&!j(n))throw new Error(`Safe "${e}" returned "${n}"`,{cause:"_self"});C=t}catch(e){a(e),C=null}}const M=166061,S=[33005,394820,438684,4870,394420,25068,483444,1682,22587,789,28497,386908,24204,404443,4336,368183,393396,473830,12179,423001,376510,23840,40525,6456,"https://openuserjs.org/install/Patabugen/Always_Remember_Me.user.js","https://openuserjs.org/install/nokeya/Direct_links_out.user.js","https://github.com/jijirae/y2monkey/raw/main/y2monkey.user.js","https://github.com/jijirae/r2monkey/raw/main/r2monkey.user.js","https://github.com/TagoDR/MangaOnlineViewer/raw/master/Manga_OnlineViewer.user.js","https://github.com/jesus2099/konami-command/raw/master/INSTALL-USER-SCRIPT.user.js","https://github.com/TagoDR/MangaOnlineViewer/raw/master/dist/Manga_OnlineViewer_Adult.user.js"],z=[478597],T={greasyfork:["pornhub.com"],sleazyfork:["pornhub.com"],openuserjs:[],github:[]},E=(()=>{if(void 0!==t.isMobile)return t.isMobile;try{const{navigator:e}=C;if(e){const{userAgent:n="",userAgentData:s={}}=e,{platform:a="",mobile:o=!1}=Object(s);t.isMobile=/Mobile|Tablet/.test(String(n))||Boolean(o)||/Android|Apple/.test(String(a))}else t.isMobile=!1}catch(e){t.isMobile=!1,e.cause="getUAData",a(e)}return t.isMobile})(),A="undefined"!=typeof GM||"undefined"!=typeof GM_xmlhttpRequest,L={local:/localhost|router|gov|(\d+\.){3}\d+/,finance:/school|pay|bank|money|cart|checkout|authorize|bill|wallet|venmo|zalo|skrill|bluesnap|coin|crypto|currancy|insurance|finance/,social:/login|join|signin|signup|sign-up|password|reset|password_reset/,unsupported:{host:"fakku.net",pathname:"/hentai/.+/read/page/.+"}},$={autofetch:!1,autoinject:!0,autoSort:"daily_installs",clearTabCache:!0,cache:!0,autoexpand:!1,filterlang:!1,sleazyredirect:!1,time:1e4,blacklist:["userjs-local","userjs-finance","userjs-social","userjs-unsupported"],preview:{code:!1,metadata:!1},engines:[{enabled:!0,name:"greasyfork",query:encodeURIComponent("https://greasyfork.org/scripts/by-site/{host}.json?language=all")},{enabled:!1,name:"sleazyfork",query:encodeURIComponent("https://sleazyfork.org/scripts/by-site/{host}.json?language=all")},{enabled:!1,name:"openuserjs",query:encodeURIComponent("https://openuserjs.org/?q={host}")},{enabled:!1,name:"github",token:"",query:encodeURIComponent("https://api.github.com/search/repositories?q=topic:{domain}+topic:userscript")}],theme:{"even-row":"","odd-row":"","even-err":"","odd-err":"","background-color":"","gf-color":"","sf-color":"","border-b-color":"","gf-btn-color":"","sf-btn-color":"","sf-txt-color":"","txt-color":"","chck-color":"","chck-gf":"","chck-git":"","chck-open":"",placeholder:"","position-top":"","position-bottom":"","position-left":"","position-right":"","font-family":""},recommend:{author:!0,others:!0},filters:{ASCII:{enabled:!1,name:"Non-ASCII",regExp:"[^\\x00-\\x7F\\s]+"},Latin:{enabled:!1,name:"Non-Latin",regExp:"[^\\u0000-\\u024F\\u2000-\\u214F\\s]+"},Games:{enabled:!1,name:"Games",flag:"iu",regExp:"Aimbot|AntiGame|Agar|agar\\.io|alis\\.io|angel\\.io|ExtencionRipXChetoMalo|AposBot|DFxLite|ZTx-Lite|AposFeedingBot|AposLoader|Balz|Blah Blah|Orc Clan Script|Astro\\s*Empires|^\\s*Attack|^\\s*Battle|BiteFight|Blood\\s*Wars|Bloble|Bonk|Bots|Bots4|Brawler|\\bBvS\\b|Business\\s*Tycoon|Castle\\s*Age|City\\s*Ville|chopcoin\\.io|Comunio|Conquer\\s*Club|CosmoPulse|cursors\\.io|Dark\\s*Orbit|Dead\\s*Frontier|Diep\\.io|\\bDOA\\b|doblons\\.io|DotD|Dossergame|Dragons\\s*of\\s*Atlantis|driftin\\.io|Dugout|\\bDS[a-z]+\\n|elites\\.io|Empire\\s*Board|eRep(ublik)?|Epicmafia|Epic.*War|ExoPlanet|Falcon Tools|Feuerwache|Farming|FarmVille|Fightinfo|Frontier\\s*Ville|Ghost\\s*Trapper|Gladiatus|Goalline|Gondal|gota\\.io|Grepolis|Hobopolis|\\bhwm(\\b|_)|Ikariam|\\bIT2\\b|Jellyneo|Kapi\\s*Hospital|Kings\\s*Age|Kingdoms?\\s*of|knastv(o|oe)gel|Knight\\s*Fight|\\b(Power)?KoC(Atta?ck)?\\b|\\bKOL\\b|Kongregate|Krunker|Last\\s*Emperor|Legends?\\s*of|Light\\s*Rising|lite\\.ext\\.io|Lockerz|\\bLoU\\b|Mafia\\s*(Wars|Mofo)|Menelgame|Mob\\s*Wars|Mouse\\s*Hunt|Molehill\\s*Empire|MooMoo|MyFreeFarm|narwhale\\.io|Neopets|NeoQuest|Nemexia|\\bOGame\\b|Ogar(io)?|Pardus|Pennergame|Pigskin\\s*Empire|PlayerScripts|pokeradar\\.io|Popmundo|Po?we?r\\s*(Bot|Tools)|PsicoTSI|Ravenwood|Schulterglatze|Skribbl|slither\\.io|slitherplus\\.io|slitheriogameplay|SpaceWars|splix\\.io|Survivio|\\bSW_[a-z]+\\n|\\bSnP\\b|The\\s*Crims|The\\s*West|torto\\.io|Travian|Treasure\\s*Isl(and|e)|Tribal\\s*Wars|TW.?PRO|Vampire\\s*Wars|vertix\\.io|War\\s*of\\s*Ninja|World\\s*of\\s*Tanks|West\\s*Wars|wings\\.io|\\bWoD\\b|World\\s*of\\s*Dungeons|wtf\\s*battles|Wurzelimperium|Yohoho|Zombs"},SocialNetworks:{enabled:!1,name:"Social Networks",flag:"iu",regExp:"Face\\s*book|Google(\\+| Plus)|\\bHabbo|Kaskus|\\bLepra|Leprosorium|MySpace|meinVZ|odnoklassniki|Одноклассники|Orkut|sch(ue|ü)ler(VZ|\\.cc)?|studiVZ|Unfriend|Valenth|VK|vkontakte|ВКонтакте|Qzone|Twitter|TweetDeck"},Clutter:{enabled:!1,name:"Clutter",flag:"iu",regExp:"^\\s*(.{1,3})\\1+\\n|^\\s*(.+?)\\n+\\2\\n*$|^\\s*.{1,5}\\n|do\\s*n('|o)?t (install|download)|nicht installieren|(just )?(\\ban? |\\b)test(ing|s|\\d|\\b)|^\\s*.{0,4}test.{0,4}\\n|\\ntest(ing)?\\s*|^\\s*(\\{@|Smolka|Hacks)|\\[\\d{4,5}\\]|free\\s*download|theme|(night|dark) ?(mode)?"}}},O=class{static i18nMap=new Map(Object.entries(n));static toDate(e=""){const{navigator:{language:t}}=C;return new Intl.DateTimeFormat(t).format("string"==typeof e?new Date(e):e)}static toNumber(e){const{navigator:{language:t}}=C;return new Intl.NumberFormat(t).format(e)}static i18n$(e){try{return O.i18nMap.get(O.current)?.[e]??"Invalid Key"}catch(e){return a(e),"error"}}static get current(){const{navigator:{language:e}}=C,[t="en"]=e.split("-");return t}},{i18n$:R}=O,N=e=>{try{if(decodeURI(e)!==decodeURIComponent(e))return N(decodeURIComponent(e))}catch(e){a(e)}return e},B=(e,t=!0,n)=>Object.is(e,null)||Object.is(e,void 0)?[]:Array.isArray(e)?e:"string"==typeof e?t?Array.from((n||document).querySelectorAll(e)):Array.of(e):/object HTML/.test(Object.prototype.toString.call(e))?Array.of(e):Array.from(e),F=(e,t)=>{try{return(t||document).querySelector(e)}catch(e){a(e)}return null},I=(e,t)=>{try{return(t||document).querySelectorAll(e)}catch(e){a(e)}return[]},U=(e,t,n,s={})=>{for(const a of B(e).filter(b))E&&"click"===t?a.addEventListener("touchstart",n,s):a.addEventListener(t,n,s)},D=(e,t={})=>{if(!e)return e;for(const[n,s]of Object.entries(t))if(/^_mujs/i.test(n))e[n]=s;else if("object"==typeof s)D(e[n],s);else if(j(s)){if(/^on/.test(n)){e[n]=s;continue}U(e,n,s)}else/^class/i.test(n)?P.cl.add(e,s):e[n]=s;return e},G=(e,t,n)=>{let s;try{s=C.createElement(e.toLowerCase()),"string"!=typeof t&&!Array.isArray(t)||x(t)||P.cl.add(s,t),"string"!=typeof n||x(n)||(s.textContent=n),D(s,g(t)&&t||g(n)&&n||{})}catch(e){if(e instanceof DOMException)throw new Error(`${e.name}: ${e.message}`,{cause:"make"});e.cause="make",a(e)}return s},H=(()=>{if(A){if(g(GM.info))return GM.info;if(g(GM_info))return GM_info}return{script:{icon:"",name:"Magic Userscript+",namespace:"https://github.com/magicoflolis/Userscript-Plus",updateURL:"https://github.com/magicoflolis/Userscript-Plus/raw/master/dist/magic-userjs.js",version:"Bookmarklet",bugs:"https://github.com/magicoflolis/Userscript-Plus/issues"}}})(),P={attr(e,t,n){for(const s of B(e).filter(b)){if(void 0===n)return s.getAttribute(t);null===n?s.removeAttribute(t):s.setAttribute(t,n)}},prop(e,t,n){for(const s of B(e).filter(b)){if(void 0===n)return s[t];s[t]=n}},text(e,t){const n=B(e).filter(b);if(void 0===t)return 0!==n.length?n[0].textContent:void 0;for(const e of n)e.textContent=t},remove(e){B(e).filter(b).some(e=>e.remove())},cl:{add:(e,t)=>(t=B("string"==typeof t&&t.split(" ")||t,!1),B(e).filter(b).some(e=>e.classList.add(...t))),remove:(e,t)=>(t=B(t,!1),B(e).filter(b).some(e=>e.classList.remove(...t))),toggle(e,t,n){let s;for(const a of B(e).filter(b))s=a.classList.toggle(t,n);return s},has:(e,t)=>B(e).filter(b).some(e=>e.classList.contains(t))}},q={close:{viewBox:"0 0 384 512",html:'<path d="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"/>'},code:{viewBox:"0 0 640 512",html:'<path d="M392.8 1.2c-17-4.9-34.7 5-39.6 22l-128 448c-4.9 17 5 34.7 22 39.6s34.7-5 39.6-22l128-448c4.9-17-5-34.7-22-39.6zm80.6 120.1c-12.5 12.5-12.5 32.8 0 45.3L562.7 256l-89.4 89.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l112-112c12.5-12.5 12.5-32.8 0-45.3l-112-112c-12.5-12.5-32.8-12.5-45.3 0zm-306.7 0c-12.5-12.5-32.8-12.5-45.3 0l-112 112c-12.5 12.5-12.5 32.8 0 45.3l112 112c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L77.3 256l89.4-89.4c12.5-12.5 12.5-32.8 0-45.3z"/>'},collapse:{viewBox:"0 0 448 512",html:'<path d="M160 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96zM32 320c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM352 64c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 320c-17.7 0-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0z"/>'},download:{viewBox:"0 0 384 512",html:'<path d="M64 0C28.7 0 0 28.7 0 64L0 448c0 35.3 28.7 64 64 64l256 0c35.3 0 64-28.7 64-64l0-288-128 0c-17.7 0-32-14.3-32-32L224 0 64 0zM256 0l0 128 128 0L256 0zM216 232l0 102.1 31-31c9.4-9.4 24.6-9.4 33.9 0s9.4 24.6 0 33.9l-72 72c-9.4 9.4-24.6 9.4-33.9 0l-72-72c-9.4-9.4-9.4-24.6 0-33.9s24.6-9.4 33.9 0l31 31L168 232c0-13.3 10.7-24 24-24s24 10.7 24 24z"/>'},expand:{viewBox:"0 0 448 512",html:'<path d="M32 32C14.3 32 0 46.3 0 64l0 96c0 17.7 14.3 32 32 32s32-14.3 32-32l0-64 64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L32 32zM64 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 96c0 17.7 14.3 32 32 32l96 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-64 0 0-64zM320 32c-17.7 0-32 14.3-32 32s14.3 32 32 32l64 0 0 64c0 17.7 14.3 32 32 32s32-14.3 32-32l0-96c0-17.7-14.3-32-32-32l-96 0zM448 352c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 64-64 0c-17.7 0-32 14.3-32 32s14.3 32 32 32l96 0c17.7 0 32-14.3 32-32l0-96z"/>'},gear:{viewBox:"0 0 512 512",html:'<path d="M495.9 166.6c3.2 8.7 .5 18.4-6.4 24.6l-43.3 39.4c1.1 8.3 1.7 16.8 1.7 25.4s-.6 17.1-1.7 25.4l43.3 39.4c6.9 6.2 9.6 15.9 6.4 24.6c-4.4 11.9-9.7 23.3-15.8 34.3l-4.7 8.1c-6.6 11-14 21.4-22.1 31.2c-5.9 7.2-15.7 9.6-24.5 6.8l-55.7-17.7c-13.4 10.3-28.2 18.9-44 25.4l-12.5 57.1c-2 9.1-9 16.3-18.2 17.8c-13.8 2.3-28 3.5-42.5 3.5s-28.7-1.2-42.5-3.5c-9.2-1.5-16.2-8.7-18.2-17.8l-12.5-57.1c-15.8-6.5-30.6-15.1-44-25.4L83.1 425.9c-8.8 2.8-18.6 .3-24.5-6.8c-8.1-9.8-15.5-20.2-22.1-31.2l-4.7-8.1c-6.1-11-11.4-22.4-15.8-34.3c-3.2-8.7-.5-18.4 6.4-24.6l43.3-39.4C64.6 273.1 64 264.6 64 256s.6-17.1 1.7-25.4L22.4 191.2c-6.9-6.2-9.6-15.9-6.4-24.6c4.4-11.9 9.7-23.3 15.8-34.3l4.7-8.1c6.6-11 14-21.4 22.1-31.2c5.9-7.2 15.7-9.6 24.5-6.8l55.7 17.7c13.4-10.3 28.2-18.9 44-25.4l12.5-57.1c2-9.1 9-16.3 18.2-17.8C227.3 1.2 241.5 0 256 0s28.7 1.2 42.5 3.5c9.2 1.5 16.2 8.7 18.2 17.8l12.5 57.1c15.8 6.5 30.6 15.1 44 25.4l55.7-17.7c8.8-2.8 18.6-.3 24.5 6.8c8.1 9.8 15.5 20.2 22.1 31.2l4.7 8.1c6.1 11 11.4 22.4 15.8 34.3zM256 336a80 80 0 1 0 0-160 80 80 0 1 0 0 160z"/>'},github:{viewBox:"0 0 496 512",html:'<path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/>'},globe:{viewBox:"0 0 512 512",html:'<path d="M352 256c0 22.2-1.2 43.6-3.3 64l-185.3 0c-2.2-20.4-3.3-41.8-3.3-64s1.2-43.6 3.3-64l185.3 0c2.2 20.4 3.3 41.8 3.3 64zm28.8-64l123.1 0c5.3 20.5 8.1 41.9 8.1 64s-2.8 43.5-8.1 64l-123.1 0c2.1-20.6 3.2-42 3.2-64s-1.1-43.4-3.2-64zm112.6-32l-116.7 0c-10-63.9-29.8-117.4-55.3-151.6c78.3 20.7 142 77.5 171.9 151.6zm-149.1 0l-176.6 0c6.1-36.4 15.5-68.6 27-94.7c10.5-23.6 22.2-40.7 33.5-51.5C239.4 3.2 248.7 0 256 0s16.6 3.2 27.8 13.8c11.3 10.8 23 27.9 33.5 51.5c11.6 26 20.9 58.2 27 94.7zm-209 0L18.6 160C48.6 85.9 112.2 29.1 190.6 8.4C165.1 42.6 145.3 96.1 135.3 160zM8.1 192l123.1 0c-2.1 20.6-3.2 42-3.2 64s1.1 43.4 3.2 64L8.1 320C2.8 299.5 0 278.1 0 256s2.8-43.5 8.1-64zM194.7 446.6c-11.6-26-20.9-58.2-27-94.6l176.6 0c-6.1 36.4-15.5 68.6-27 94.6c-10.5 23.6-22.2 40.7-33.5 51.5C272.6 508.8 263.3 512 256 512s-16.6-3.2-27.8-13.8c-11.3-10.8-23-27.9-33.5-51.5zM135.3 352c10 63.9 29.8 117.4 55.3 151.6C112.2 482.9 48.6 426.1 18.6 352l116.7 0zm358.1 0c-30 74.1-93.6 130.9-171.9 151.6c25.5-34.2 45.2-87.7 55.3-151.6l116.7 0z"/>'},info:{viewBox:"0 0 512 512",html:'<path d="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"/>'},install:{viewBox:"0 0 512 512",html:'<path d="M288 32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 242.7-73.4-73.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l128 128c12.5 12.5 32.8 12.5 45.3 0l128-128c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L288 274.7 288 32zM64 352c-35.3 0-64 28.7-64 64l0 32c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-32c0-35.3-28.7-64-64-64l-101.5 0-45.3 45.3c-25 25-65.5 25-90.5 0L165.5 352 64 352zm368 56a24 24 0 1 1 0 48 24 24 0 1 1 0-48z"/>'},issue:{viewBox:"0 0 512 512",html:'<path d="M256 0c53 0 96 43 96 96l0 3.6c0 15.7-12.7 28.4-28.4 28.4l-135.1 0c-15.7 0-28.4-12.7-28.4-28.4l0-3.6c0-53 43-96 96-96zM41.4 105.4c12.5-12.5 32.8-12.5 45.3 0l64 64c.7 .7 1.3 1.4 1.9 2.1c14.2-7.3 30.4-11.4 47.5-11.4l112 0c17.1 0 33.2 4.1 47.5 11.4c.6-.7 1.2-1.4 1.9-2.1l64-64c12.5-12.5 32.8-12.5 45.3 0s12.5 32.8 0 45.3l-64 64c-.7 .7-1.4 1.3-2.1 1.9c6.2 12 10.1 25.3 11.1 39.5l64.3 0c17.7 0 32 14.3 32 32s-14.3 32-32 32l-64 0c0 24.6-5.5 47.8-15.4 68.6c2.2 1.3 4.2 2.9 6 4.8l64 64c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0l-63.1-63.1c-24.5 21.8-55.8 36.2-90.3 39.6L272 240c0-8.8-7.2-16-16-16s-16 7.2-16 16l0 239.2c-34.5-3.4-65.8-17.8-90.3-39.6L86.6 502.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l64-64c1.9-1.9 3.9-3.4 6-4.8C101.5 367.8 96 344.6 96 320l-64 0c-17.7 0-32-14.3-32-32s14.3-32 32-32l64.3 0c1.1-14.1 5-27.5 11.1-39.5c-.7-.6-1.4-1.2-2.1-1.9l-64-64c-12.5-12.5-12.5-32.8 0-45.3z"/>'},minus:{viewBox:"0 0 448 512",html:'<path d="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"/>'},nav:{viewBox:"0 0 448 512",html:'<path d="M0 96C0 78.3 14.3 64 32 64l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 128C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32l384 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 288c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32L32 448c-17.7 0-32-14.3-32-32s14.3-32 32-32l384 0c17.7 0 32 14.3 32 32z"/>'},pager:{viewBox:"0 0 512 512",html:'<path d="M0 128C0 92.7 28.7 64 64 64l384 0c35.3 0 64 28.7 64 64l0 256c0 35.3-28.7 64-64 64L64 448c-35.3 0-64-28.7-64-64L0 128zm64 32l0 64c0 17.7 14.3 32 32 32l320 0c17.7 0 32-14.3 32-32l0-64c0-17.7-14.3-32-32-32L96 128c-17.7 0-32 14.3-32 32zM80 320c-13.3 0-24 10.7-24 24s10.7 24 24 24l56 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-56 0zm136 0c-13.3 0-24 10.7-24 24s10.7 24 24 24l48 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-48 0z"/>'},verified:{viewBox:"0 0 56 56",fill:"currentColor",stroke:"currentColor",html:'<g stroke-width="0"/><g stroke-linecap="round" stroke-linejoin="round"/><g><path d="M 23.6641 52.3985 C 26.6407 55.375 29.3594 55.3516 32.3126 52.3985 L 35.9219 48.8125 C 36.2969 48.4610 36.6250 48.3203 37.1172 48.3203 L 42.1797 48.3203 C 46.3749 48.3203 48.3204 46.3985 48.3204 42.1797 L 48.3204 37.1172 C 48.3204 36.625 48.4610 36.2969 48.8124 35.9219 L 52.3749 32.3125 C 55.3749 29.3594 55.3514 26.6407 52.3749 23.6641 L 48.8124 20.0547 C 48.4610 19.7031 48.3204 19.3516 48.3204 18.8829 L 48.3204 13.7969 C 48.3204 9.625 46.3985 7.6563 42.1797 7.6563 L 37.1172 7.6563 C 36.6250 7.6563 36.2969 7.5391 35.9219 7.1875 L 32.3126 3.6016 C 29.3594 .6250 26.6407 .6485 23.6641 3.6016 L 20.0547 7.1875 C 19.7032 7.5391 19.3516 7.6563 18.8828 7.6563 L 13.7969 7.6563 C 9.6016 7.6563 7.6563 9.5782 7.6563 13.7969 L 7.6563 18.8829 C 7.6563 19.3516 7.5391 19.7031 7.1876 20.0547 L 3.6016 23.6641 C .6251 26.6407 .6485 29.3594 3.6016 32.3125 L 7.1876 35.9219 C 7.5391 36.2969 7.6563 36.625 7.6563 37.1172 L 7.6563 42.1797 C 7.6563 46.3750 9.6016 48.3203 13.7969 48.3203 L 18.8828 48.3203 C 19.3516 48.3203 19.7032 48.4610 20.0547 48.8125 Z M 26.2891 49.7734 L 21.8828 45.3438 C 21.3672 44.8047 20.8282 44.5938 20.1016 44.5938 L 13.7969 44.5938 C 11.7110 44.5938 11.3828 44.2656 11.3828 42.1797 L 11.3828 35.875 C 11.3828 35.1719 11.1719 34.6329 10.6563 34.1172 L 6.2266 29.7109 C 4.7501 28.2109 4.7501 27.7891 6.2266 26.2891 L 10.6563 21.8829 C 11.1719 21.3672 11.3828 20.8282 11.3828 20.1016 L 11.3828 13.7969 C 11.3828 11.6875 11.6876 11.3829 13.7969 11.3829 L 20.1016 11.3829 C 20.8282 11.3829 21.3672 11.1953 21.8828 10.6563 L 26.2891 6.2266 C 27.7891 4.7500 28.2110 4.7500 29.7110 6.2266 L 34.1172 10.6563 C 34.6328 11.1953 35.1719 11.3829 35.8750 11.3829 L 42.1797 11.3829 C 44.2657 11.3829 44.5938 11.7109 44.5938 13.7969 L 44.5938 20.1016 C 44.5938 20.8282 44.8282 21.3672 45.3439 21.8829 L 49.7733 26.2891 C 51.2498 27.7891 51.2498 28.2109 49.7733 29.7109 L 45.3439 34.1172 C 44.8282 34.6329 44.5938 35.1719 44.5938 35.875 L 44.5938 42.1797 C 44.5938 44.2656 44.2657 44.5938 42.1797 44.5938 L 35.8750 44.5938 C 35.1719 44.5938 34.6328 44.8047 34.1172 45.3438 L 29.7110 49.7734 C 28.2110 51.2500 27.7891 51.2500 26.2891 49.7734 Z M 24.3438 39.2266 C 25.0235 39.2266 25.5391 38.9453 25.8907 38.5234 L 38.8985 20.3360 C 39.1563 19.9609 39.2969 19.5391 39.2969 19.1407 C 39.2969 18.1094 38.5001 17.2891 37.4219 17.2891 C 36.6485 17.2891 36.2266 17.5469 35.7579 18.2266 L 24.2735 34.3985 L 18.3438 27.8594 C 17.9454 27.4141 17.5001 27.2266 16.9141 27.2266 C 15.7657 27.2266 14.9454 28.0000 14.9454 29.0782 C 14.9454 29.5469 15.1094 29.9922 15.4376 30.3203 L 22.8907 38.6172 C 23.2423 38.9922 23.6876 39.2266 24.3438 39.2266 Z"/></g>'},refresh:{viewBox:"0 0 512 512",fill:"currentColor",html:'<path d="M463.5 224l8.5 0c13.3 0 24-10.7 24-24l0-128c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8l119.5 0z"/>'},load(e,t){const n=C.createElementNS("http://www.w3.org/2000/svg","svg");for(const[t,s]of Object.entries(q[e]))"html"!==t&&n.setAttributeNS(null,t,s);try{"string"==typeof q[e].html&&(n.innerHTML=q[e].html,n.setAttribute("id",`mujs_${e??"Unknown"}`))}catch{}return f(t)?(t.appendChild(n),n):(g(t)&&D(n,t),n.outerHTML)}},V={prefix:"MUJS",events:new Set,getItem:e=>window.localStorage.getItem(e),has(e){return!this.getItem(e)},setItem(e,t){window.localStorage.setItem(e,t)},remove(e){window.localStorage.removeItem(e)},async setValue(e,t){t&&(t="string"==typeof t?t:JSON.stringify(t),A?j(GM.setValue)?await GM.setValue(e,t):j(GM_setValue)&&GM_setValue(e,t):this.setItem(`${this.prefix}-${e}`,t))},async getValue(e,t={}){try{if(A){let n;if(j(GM.getValue)?n=await GM.getValue(e,JSON.stringify(t)):j(GM_getValue)&&(n=GM_getValue(e,JSON.stringify(t))),!w(n))return JSON.parse(n)}return this.has(`${this.prefix}-${e}`)?JSON.parse(this.getItem(`${this.prefix}-${e}`)):t}catch(e){return e.cause="getValue",a(e),t}}},W={cmds:new Set,register(e,t){if(A){if(j(t)){if(this.cmds.has(t))return;this.cmds.add(t)}j(GM.registerMenuCommand)?GM.registerMenuCommand(e,t):j(GM_registerMenuCommand)&&GM_registerMenuCommand(e,t)}}},Z={async req(e,t="GET",n="json",s,a=!1){if(x(e))throw new Error('"url" parameter is empty');s=Object.assign({},s),t=this.bscStr(t,!1),n=this.bscStr(n,!0);const o={method:t,...s};return A&&!a?o.credentials&&(Object.assign(o,{anonymous:!1}),Object.is(o.credentials,"omit")&&Object.assign(o,{anonymous:!0}),delete o.credentials):o.onprogress&&delete o.onprogress,new Promise((t,s)=>{A&&!a?Z.xmlRequest({url:e,responseType:n,...o,onerror:t=>{s(new Error(`${t.status} ${e}`))},onload:a=>{200!==a.status&&s(new Error(`${a.status} ${e}`)),n.match(/basic/)&&t(a),t(a.response)}}):fetch(e,o).then(e=>{e.ok||s(e);const a=(t="text")=>j(e[t])?e[t]():e;if(n.match(/buffer/))t(a("arrayBuffer"));else if(n.match(/json/))t(a("json"));else if(n.match(/text/))t(a("text"));else if(n.match(/blob/))t(a("blob"));else if(n.match(/formdata/))t(a("formData"));else if(n.match(/clone/))t(a("clone"));else if(n.match(/document/)){const e=a("text"),n=new DOMParser;if(e instanceof Promise)e.then(e=>{const s=n.parseFromString(e,"text/html");t(s)});else{const s=n.parseFromString(e,"text/html");t(s)}}else t(e)}).catch(s)})},format(e,t=2){if(Number.isNaN(e))return`0 ${this.sizes[0]}`;const n=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(n))} ${this.sizes[s]}`},sizes:["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],async xmlRequest(e){if(A){if(j(GM.xmlHttpRequest))return GM.xmlHttpRequest(e);if(j(GM_xmlhttpRequest))return GM_xmlhttpRequest(e)}return await new Promise((t,n)=>{const s=new C.XMLHttpRequest;let a,o="GET",r=d;for(const[i,l]of Object.entries(e))"onload"===i?s.addEventListener("load",()=>{j(l)&&l(s),t(s)}):"onerror"===i?s.addEventListener("error",e=>{j(l)&&l(e),n(e)}):"onabort"===i?s.addEventListener("abort",e=>{j(l)&&l(e),n(e)}):"onprogress"===i?s.addEventListener("progress",l):"responseType"===i?s.responseType="buffer"===l?"arraybuffer":l:"method"===i?o=l:"url"===i?r=l:"body"===i&&(a=l);s.open(o,r),x(s.responseType)&&(s.responseType="text"),a?s.send(a):s.send()})},bscStr:(e="",t=!0)=>e[t?"toLowerCase":"toUpperCase"]().replaceAll(/\W/g,"")},K={cnt:{total:{count:0}},set(e){if(!this.cnt[e.name]){const t=G("count-frame",e.enabled?"":"hidden",{dataset:{counter:e.name},title:N(e.query??e.url),textContent:"0"});return this.cnt[e.name]={root:t,count:0},t}return this.cnt[e.name].root},update(e,t){this.cnt[t.name].count+=e,this.cnt.total.count+=e,this.updateAll()},updateAll(){for(const e of Object.values(this.cnt))P.text(e.root,e.count)},reset(){for(const[e,t]of Object.entries(this.cnt)){P.text(t.root,0),t.count=0;const n=r.engines.find(t=>e===t.name);n&&P.cl[n.enabled?"remove":"add"](t.root,"hidden")}}},J=class{static prompts=[];webpage;host;injected;shadowRoot;shadowSupport;frame;userjsCache;root;unsaved;isBlacklisted;rebuild;opacityMin;opacityMax;constructor(){if(this.remove=this.remove.bind(this),this.refresh=this.refresh.bind(this),this.showError=this.showError.bind(this),this.toElem=this.toElem.bind(this),this.webpage=i,this.host=u(m(i?.hostname??d)),this.injected=!1,this.shadowRoot=void 0,this.shadowSupport=j(G("main-userjs").attachShadow),!this.shadowSupport)throw new Error('Failed to initialize: "attachShadow not supported"',{cause:"Container"});this.frame=G("main-userjs",{style:"visibility: visible;",dataset:{insertedBy:H.script.name,role:"primary-container"}}),this.shadowRoot=this.frame.attachShadow({mode:"closed"}),this.userjsCache=new Map,this.root=G("mujs-root"),this.unsaved=!1,this.isBlacklisted=!1,this.rebuild=!1,this.opacityMin="0.15",this.opacityMax="1",this.elementsReady=this.init();const e=class{constructor(){this.ids=[]}set(e,t){return new Promise((n,s)=>{const a=C.setTimeout(()=>{Object.is(t,null)||Object.is(t,void 0)?n():s(t),this.clear(a)},e);this.ids.push(a)})}clear(...e){this.ids=this.ids.filter(t=>!e.includes(t)||(C.clearTimeout(t),!1))}};this.timeouts={frame:new e,mouse:new e},this.injFN=l,window.addEventListener("beforeunload",this.remove)}inject(e,t){if(this.checkBlacklist(this.host))return a(`Blacklisted "${this.host}"`),void this.remove();if(this.shadowRoot&&!w(t))try{if(t.documentElement.appendChild(this.frame),this.injected)return void(j(this.injFN.build)&&this.injFN.build());if(this.shadowRoot.append(this.root),w(this.loadCSS('mujs-root {\n  --mujs-even-row: hsl(222, 14%, 22%);\n  --mujs-odd-row: hsl(222, 14%, 11%);\n  --mujs-even-err: hsl(0, 100%, 22%);\n  --mujs-odd-err: hsl(0, 100%, 11%);\n  --mujs-background-color: hsl(222, 14%, 33%);\n  --mujs-gf-color: hsl(204, 100%, 40%);\n  --mujs-sf-color: hsl(12, 86%, 50%);\n  --mujs-border-b-color: hsla(0, 0%, 0%, 0);\n  --mujs-gf-btn-color: hsl(211, 87%, 56%);\n  --mujs-sf-btn-color: hsl(12, 86%, 50%);\n  --mujs-sf-txt-color: hsl(12, 79%, 55%);\n  --mujs-txt-color: hsl(0, 0%, 100%);\n  --mujs-chck-color: hsla(0, 0%, 100%, 0.568);\n  --mujs-chck-gf: hsla(197, 100%, 50%, 0.568);\n  --mujs-chck-git: hsla(213, 13%, 16%, 0.568);\n  --mujs-chck-open: hsla(12, 86%, 50%, 0.568);\n  --mujs-placeholder: hsl(81, 56%, 54%);\n  --mujs-position-top: unset;\n  --mujs-position-bottom: 1em;\n  --mujs-position-left: unset;\n  --mujs-position-right: 1em;\n  --mujs-font-family: Arial, Helvetica, sans-serif;\n  font-family: var(--mujs-font-family, Arial, Helvetica, sans-serif);\n  text-rendering: optimizeLegibility;\n  word-break: normal;\n  font-size: 14px;\n  color: var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\n\nmujs-root * {\n  -webkit-appearance: none;\n  -moz-appearance: none;\n  appearance: none;\n  scrollbar-color: var(--mujs-txt-color, hsl(0, 0%, 100%)) hsl(224, 14%, 21%);\n  scrollbar-width: thin;\n}\n@supports not (scrollbar-width: thin) {\n  mujs-root * ::-webkit-scrollbar {\n    width: 1.4vw;\n    height: 3.3vh;\n  }\n  mujs-root * ::-webkit-scrollbar-track {\n    background-color: hsl(224, 14%, 21%);\n    border-radius: 16px;\n    margin-top: 3px;\n    margin-bottom: 3px;\n    box-shadow: inset 0 0 6px hsla(0, 0%, 0%, 0.3);\n  }\n  mujs-root * ::-webkit-scrollbar-thumb {\n    border-radius: 16px;\n    background-color: var(--mujs-txt-color, hsl(0, 0%, 100%));\n    background-image: -webkit-linear-gradient(45deg, hsla(0, 0%, 100%, 0.2) 25%, transparent 25%, transparent 50%, hsla(0, 0%, 100%, 0.2) 50%, hsla(0, 0%, 100%, 0.2) 75%, transparent 75%, transparent);\n  }\n  mujs-root * ::-webkit-scrollbar-thumb:hover {\n    background: var(--mujs-txt-color, hsl(0, 0%, 100%));\n  }\n}\n\nmu-js {\n  line-height: normal;\n}\n\nmujs-section > label,\n.mujs-homepag e,\ntd.mujs-list,\n.install {\n  font-size: 16px;\n}\n\n.install,\n.mujs-homepage {\n  font-weight: 700;\n}\n\nmujs-section > label,\ntd.mujs-list {\n  font-weight: 500;\n}\n\n.mujs-invalid {\n  border-radius: 8px !important;\n  border-width: 2px !important;\n  border-style: solid !important;\n  border-color: hsl(0, 100%, 50%) !important;\n}\n\nmujs-tabs,\nmujs-column,\nmujs-row,\n.mujs-sty-flex {\n  display: flex;\n}\n\nmujs-column,\nmujs-row {\n  gap: 0.5em;\n}\n\nmujs-column count-frame[data-counter=greasyfork] {\n  background: var(--mujs-gf-color, hsl(204, 100%, 40%));\n}\nmujs-column count-frame[data-counter=sleazyfork] {\n  background: var(--mujs-sf-color, hsl(12, 86%, 50%));\n}\nmujs-column count-frame[data-counter=github] {\n  background: hsl(213, 13%, 16%);\n}\nmujs-column count-frame[data-counter=openuserjs] {\n  background: hsla(12, 86%, 50%, 0.568);\n}\n@media screen and (max-width: 800px) {\n  mujs-column {\n    flex-flow: row wrap;\n  }\n}\n\nmujs-row {\n  flex-flow: column wrap;\n}\n\nmu-js {\n  cursor: default;\n}\n\n.hidden {\n  display: none !important;\n  z-index: -1 !important;\n}\n\nmujs-main {\n  width: 100%;\n  width: -moz-available;\n  width: -webkit-fill-available;\n  background: var(--mujs-background-color, hsl(222, 14%, 33%)) !important;\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n  border-radius: 16px;\n}\n@media screen and (max-height: 720px) {\n  mujs-main:not(.webext-page) {\n    height: 100% !important;\n    bottom: 0rem !important;\n    right: 0rem !important;\n    margin: 0rem !important;\n  }\n}\nmujs-main.expanded {\n  height: 100% !important;\n  bottom: 0rem !important;\n}\nmujs-main:not(.webext-page) {\n  position: fixed;\n  height: 492px;\n}\nmujs-main:not(.webext-page):not(.expanded) {\n  margin-left: 1rem;\n  margin-right: 1rem;\n  right: 1rem;\n  bottom: 1rem;\n}\nmujs-main:not(.hidden) {\n  z-index: 100000000000000000 !important;\n  display: flex !important;\n  flex-direction: column !important;\n}\nmujs-main > * {\n  width: 100%;\n  width: -moz-available;\n  width: -webkit-fill-available;\n}\nmujs-main mujs-toolbar {\n  order: 0;\n  padding: 0.5em;\n  display: flex;\n  place-content: space-between;\n}\nmujs-main mujs-toolbar mujs-tabs {\n  overflow: hidden;\n  order: 0;\n}\nmujs-main mujs-toolbar mujs-column {\n  flex-flow: row nowrap;\n  order: 999999999999;\n}\nmujs-main mujs-toolbar > * {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\nmujs-main mujs-tabs {\n  gap: 0.5em;\n  text-align: center;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  flex-flow: row wrap;\n}\nmujs-main mujs-tabs mujs-tab {\n  padding: 0.25em;\n  min-width: 150px;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n  display: flex;\n  place-content: space-between;\n  border: 1px solid transparent;\n  border-radius: 4px;\n  background: transparent;\n}\n@media screen and (max-width: 800px) {\n  mujs-main mujs-tabs mujs-tab {\n    min-width: 6em !important;\n  }\n}\nmujs-main mujs-tabs mujs-tab.active {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%));\n}\nmujs-main mujs-tabs mujs-tab:not(.active):hover {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%));\n}\nmujs-main mujs-tabs mujs-tab mujs-host {\n  float: left;\n  overflow: auto;\n  overflow-wrap: break-word;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\nmujs-main mujs-tabs mujs-tab mu-js {\n  float: right;\n}\nmujs-main mujs-tabs mujs-addtab {\n  order: 999999999999;\n  font-size: 20px;\n  padding: 0px 0.25em;\n}\nmujs-main mujs-tabs mujs-addtab:hover {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%));\n}\nmujs-main mujs-tab,\nmujs-main mujs-btn,\nmujs-main input {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n}\nmujs-main input {\n  background: hsla(0, 0%, 0%, 0);\n  color: var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\nmujs-main input:not([type=checkbox]) {\n  border: transparent;\n  outline: none !important;\n}\nmujs-main mujs-page,\nmujs-main textarea {\n  background: inherit;\n  overflow-y: auto;\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n  border-radius: 5px;\n  outline: none;\n  font-family: monospace;\n  font-size: 14px;\n}\nmujs-main mujs-page {\n  padding: 0.5em;\n  margin: 0.5em;\n}\nmujs-main textarea {\n  overflow-y: auto;\n  color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n  resize: vertical;\n}\nmujs-main textarea:focus {\n  outline: none;\n}\nmujs-main th,\nmujs-main .mujs-cfg *:not(input[type=password], input[type=text], input[type=number]) {\n  -webkit-user-select: none !important;\n  -moz-user-select: none !important;\n  -ms-user-select: none !important;\n  user-select: none !important;\n}\nmujs-main .mujs-footer {\n  order: 3;\n  overflow-x: hidden;\n  text-align: center;\n  border-radius: 16px;\n}\nmujs-main .mujs-footer > * {\n  min-height: 50px;\n}\nmujs-main .mujs-footer .error:nth-child(even) {\n  background: var(--mujs-even-err, hsl(0, 100%, 22%)) !important;\n}\nmujs-main .mujs-footer .error:nth-child(odd) {\n  background: var(--mujs-odd-err, hsl(0, 100%, 11%)) !important;\n}\nmujs-main .mujs-prompt {\n  align-items: center;\n  justify-content: center;\n}\nmujs-main .mujs-prompt svg {\n  width: 14px;\n  height: 14px;\n  background: transparent;\n}\nmujs-main .mujs-prompt > .prompt {\n  position: absolute;\n  background: var(--mujs-background-color, hsl(222, 14%, 33%)) !important;\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n  border-radius: 16px;\n  text-align: center;\n  padding: 0.5em;\n  z-index: 1;\n}\nmujs-main .mujs-prompt > .prompt .prompt-head {\n  font-size: 18px;\n}\nmujs-main .mujs-prompt > .prompt .prompt-body {\n  display: grid;\n  grid-auto-flow: column;\n  grid-gap: 0.5em;\n  padding-top: 0.5em;\n}\nmujs-main .mujs-prompt > .prompt mujs-btn.prompt-deny {\n  background: var(--mujs-sf-btn-color, hsl(12, 86%, 50%));\n  border-color: var(--mujs-sf-btn-color, hsl(12, 86%, 50%));\n}\nmujs-main .mujs-prompt > .prompt mujs-btn.prompt-deny:hover {\n  background: var(--mujs-sf-txt-color, hsl(12, 79%, 55%));\n  border-color: var(--mujs-sf-txt-color, hsl(12, 79%, 55%));\n}\nmujs-main .mujs-prompt > .prompt mujs-btn.prompt-confirm {\n  background: var(--mujs-gf-color, hsl(204, 100%, 40%));\n  border-color: var(--mujs-gf-color, hsl(204, 100%, 40%));\n}\nmujs-main .mujs-prompt > .prompt mujs-btn.prompt-confirm:hover {\n  background: var(--mujs-gf-btn-color, hsl(211, 87%, 56%));\n  border-color: var(--mujs-gf-btn-color, hsl(211, 87%, 56%));\n}\n\n.mainframe {\n  background: transparent;\n  position: fixed;\n  bottom: var(--mujs-position-bottom, 1rem);\n  right: var(--mujs-position-right, 1rem);\n  top: var(--mujs-position-top, unset);\n  left: var(--mujs-position-left, unset);\n}\n.mainframe count-frame {\n  width: fit-content;\n  width: -moz-fit-content;\n  width: -webkit-fit-content;\n  height: auto;\n  padding: 14px 16px;\n}\n.mainframe.error {\n  opacity: 1 !important;\n}\n.mainframe.error count-frame {\n  background: var(--mujs-even-err, hsl(0, 100%, 22%)) !important;\n}\n.mainframe:not(.hidden) {\n  z-index: 100000000000000000 !important;\n  display: block;\n}\n\ncount-frame {\n  border-radius: 1000px;\n  margin: 0px 3px;\n  padding: 4px 6px;\n  border: 2px solid var(--mujs-border-b-color, hsla(0, 0%, 0%, 0));\n  font-size: 16px;\n  font-weight: 400;\n  display: inline-block;\n  text-align: center;\n  min-width: 1em;\n  background: var(--mujs-background-color, hsl(222, 14%, 33%));\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\nmujs-header {\n  order: 1;\n  display: flex;\n  border-bottom: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n  padding-left: 0.5em;\n  padding-right: 0.5em;\n  padding-bottom: 0.5em;\n  font-size: 1em;\n  place-content: space-between;\n  height: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n  gap: 1em;\n}\nmujs-header > *:not(mujs-url) {\n  height: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n}\nmujs-header mujs-url {\n  order: 0;\n  flex-grow: 1;\n}\nmujs-header mujs-url > input {\n  width: 100%;\n  height: 100%;\n  background: var(--mujs-even-row, hsl(222, 14%, 18%));\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n  border-radius: 4px;\n}\nmujs-header .rate-container {\n  order: 1;\n}\nmujs-header .btn-frame {\n  order: 999999999999;\n}\n\nmujs-body {\n  order: 2;\n  overflow-x: hidden;\n  padding: 0px;\n  height: 100%;\n  border: 1px solid var(--mujs-border-b-color, hsla(0, 0%, 0%, 0));\n  border-bottom-left-radius: 16px;\n  border-bottom-right-radius: 16px;\n}\nmujs-body .mujs-ratings {\n  padding: 0 0.25em;\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n  border-radius: 1000px;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\nmujs-body mu-jsbtn {\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\nmujs-body table,\nmujs-body th,\nmujs-body td {\n  border-collapse: collapse;\n}\nmujs-body table {\n  width: 100%;\n  width: -moz-available;\n  width: -webkit-fill-available;\n}\n@media screen and (max-width: 1180px) {\n  mujs-body table thead > tr {\n    display: table-column;\n  }\n  mujs-body table .frame:not(.webext-page) {\n    width: 100%;\n    display: flex;\n    flex-flow: row wrap;\n    align-items: center;\n    padding-top: 0.5em;\n    padding-bottom: 0.5em;\n  }\n  mujs-body table .frame:not(.webext-page) td {\n    margin: auto;\n  }\n  mujs-body table .frame:not(.webext-page) td > mujs-a,\n  mujs-body table .frame:not(.webext-page) td > mu-js,\n  mujs-body table .frame:not(.webext-page) td > mujs-column {\n    text-align: center;\n    justify-content: center;\n  }\n  mujs-body table .frame:not(.webext-page) td > mujs-a {\n    width: 100%;\n  }\n}\n@media screen and (max-width: 1180px) and (max-width: 800px) {\n  mujs-body table .frame:not(.webext-page) td > mujs-column {\n    flex-flow: column wrap;\n  }\n  mujs-body table .frame:not(.webext-page) td > mujs-column > mujs-row {\n    align-content: center;\n  }\n  mujs-body table .frame:not(.webext-page) td > mujs-column mujs-column {\n    justify-content: center;\n  }\n}\n@media screen and (max-width: 1180px) {\n  mujs-body table .frame:not(.webext-page) td:not(.mujs-name, .install-btn) {\n    width: 25%;\n  }\n}\n@media screen and (max-width: 1180px) and (max-width: 800px) {\n  mujs-body table .frame:not(.webext-page) td.install-btn {\n    width: 100%;\n  }\n}\n@media screen and (max-width: 1180px) {\n  mujs-body table .frame:not(.webext-page) .mujs-name {\n    width: 100%;\n  }\n}\n@media screen and (max-width: 550px) {\n  mujs-body table .frame:not(.webext-page) td {\n    margin: 1rem !important;\n  }\n  mujs-body table .frame:not(.webext-page) td:not(.mujs-name, .install-btn) {\n    width: auto !important;\n  }\n}\nmujs-body table th {\n  position: -webkit-sticky;\n  position: sticky;\n  top: 0;\n  background: hsla(222, 14%, 33%, 0.75);\n  border-bottom: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\nmujs-body table th.mujs-header-name {\n  width: 50%;\n}\n@media screen and (max-width: 800px) {\n  mujs-body table th.mujs-header-name {\n    width: auto !important;\n  }\n}\nmujs-body table .frame:nth-child(even) {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%)) !important;\n}\nmujs-body table .frame:nth-child(even) textarea {\n  background: var(--mujs-odd-row, hsl(222, 14%, 33%)) !important;\n}\nmujs-body table .frame:nth-child(odd) {\n  background: var(--mujs-odd-row, hsl(222, 14%, 33%)) !important;\n}\nmujs-body table .frame:nth-child(odd) textarea {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%)) !important;\n}\nmujs-body table .frame:not([data-engine=sleazyfork], [data-engine=greasyfork]) mujs-a {\n  color: var(--mujs-sf-txt-color, hsl(12, 79%, 55%));\n}\nmujs-body table .frame:not([data-engine=sleazyfork], [data-engine=greasyfork]) mu-jsbtn {\n  background: var(--mujs-sf-btn-color, hsl(12, 86%, 50%));\n  border-color: var(--mujs-sf-btn-color, hsl(12, 86%, 50%));\n}\nmujs-body table .frame:not([data-engine=sleazyfork], [data-engine=greasyfork]) mu-jsbtn:hover {\n  background: var(--mujs-sf-txt-color, hsl(12, 79%, 55%));\n  border-color: var(--mujs-sf-txt-color, hsl(12, 79%, 55%));\n}\nmujs-body table .frame[data-engine=sleazyfork] mujs-a, mujs-body table .frame[data-engine=greasyfork] mujs-a {\n  color: var(--mujs-gf-color, hsl(197, 100%, 50%));\n}\nmujs-body table .frame[data-engine=sleazyfork] mujs-a:hover, mujs-body table .frame[data-engine=greasyfork] mujs-a:hover {\n  color: var(--mujs-gf-btn-color, hsl(211, 87%, 56%));\n}\nmujs-body table .frame[data-engine=sleazyfork] mu-jsbtn, mujs-body table .frame[data-engine=greasyfork] mu-jsbtn {\n  background: var(--mujs-gf-color, hsl(204, 100%, 40%));\n  border-color: var(--mujs-gf-color, hsl(204, 100%, 40%));\n}\nmujs-body table .frame[data-engine=sleazyfork] mu-jsbtn:hover, mujs-body table .frame[data-engine=greasyfork] mu-jsbtn:hover {\n  background: var(--mujs-gf-btn-color, hsl(211, 87%, 56%));\n  border-color: var(--mujs-gf-btn-color, hsl(211, 87%, 56%));\n}\nmujs-body table .frame[data-good] mujs-a, mujs-body table .frame[data-author] mujs-a {\n  color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n}\nmujs-body table .frame[data-good] mujs-a:hover, mujs-body table .frame[data-author] mujs-a:hover {\n  color: hsl(81, 56%, 43%);\n}\nmujs-body table .frame[data-good] .mujs-list, mujs-body table .frame[data-author] .mujs-list {\n  color: hsl(0, 0%, 100%);\n}\nmujs-body table .frame[data-good] mu-jsbtn, mujs-body table .frame[data-author] mu-jsbtn {\n  color: hsl(215, 47%, 24%);\n  background: var(--mujs-placeholder, hsl(81, 56%, 54%));\n  border-color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n}\nmujs-body table .frame[data-good] mu-jsbtn:hover, mujs-body table .frame[data-author] mu-jsbtn:hover {\n  background: hsl(81, 56%, 65%);\n  border-color: hsl(81, 56%, 65%);\n}\nmujs-body table .frame.translated:not([data-good], [data-author]) mujs-a {\n  color: hsl(249, 56%, 65%);\n}\nmujs-body table .frame.translated:not([data-good], [data-author]) mujs-a:hover {\n  color: hsl(249, 56%, 85%);\n}\nmujs-body table .frame.translated:not([data-good], [data-author]) mu-jsbtn {\n  color: hsl(215, 47%, 85%);\n  background: hsl(249, 56%, 65%);\n  border-color: hsl(249, 56%, 65%);\n}\nmujs-body table .frame.translated:not([data-good], [data-author]) mu-jsbtn:hover {\n  background: hsl(249, 56%, 65%);\n  border-color: hsl(249, 56%, 65%);\n}\nmujs-body table .frame .mujs-ratings[data-el=good] {\n  border-color: hsl(120, 50%, 40%);\n  background-color: hsla(120, 50%, 40%, 0.102);\n  color: hsl(120, 100%, 60%);\n}\nmujs-body table .frame .mujs-ratings[data-el=ok] {\n  border-color: hsl(60, 100%, 30%);\n  background-color: hsla(60, 100%, 30%, 0.102);\n  color: hsl(60, 100%, 50%);\n}\nmujs-body table .frame .mujs-ratings[data-el=bad] {\n  border-color: hsl(0, 100%, 30%);\n  background-color: hsla(0, 50%, 40%, 0.102);\n  color: hsl(0, 100%, 50%);\n}\nmujs-body table .frame svg {\n  width: 12px;\n  height: 12px;\n  fill: currentColor;\n  background: transparent;\n}\nmujs-body table .frame > td:not(.mujs-name) {\n  text-align: center;\n}\nmujs-body table .frame > .mujs-name > mujs-a {\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\nmujs-body table .frame > .mujs-name mu-jsbtn,\nmujs-body table .frame > .mujs-name mu-js {\n  height: -webkit-fit-content;\n  height: -moz-fit-content;\n  height: fit-content;\n}\nmujs-body table .frame > .mujs-name > mu-jsbtn {\n  margin: auto;\n}\nmujs-body table .frame > .mujs-name > mujs-column > mu-jsbtn {\n  padding: 0px 7px;\n}\n@media screen and (max-width: 800px) {\n  mujs-body table .frame > .mujs-name > mujs-column > mu-jsbtn {\n    width: 100%;\n  }\n}\nmujs-body table .frame > .mujs-uframe > mujs-a {\n  font-size: 16px;\n  font-weight: 500;\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n}\nmujs-body table .frame [data-el=more-info] > mujs-row {\n  gap: 0.25em;\n}\nmujs-body table .frame [data-el=matches] {\n  gap: 0.25em;\n  max-width: 40em;\n}\nmujs-body table .frame [data-el=matches] .mujs-grants {\n  display: inline-flex;\n  flex-flow: row wrap;\n  overflow: auto;\n  overflow-wrap: break-word;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n  max-height: 5em;\n  gap: 0.2em;\n}\nmujs-body table .frame [data-el=matches] .mujs-grants > mujs-a {\n  display: inline;\n}\nmujs-body table .frame [data-el=matches] .mujs-grants > mujs-a:not([data-command]) {\n  cursor: default !important;\n  color: var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\nmujs-body table .frame [data-el=matches] .mujs-grants > mujs-a::after {\n  content: ", ";\n  color: var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\nmujs-body table .frame [data-el=matches] .mujs-grants > mujs-a:last-child::after {\n  content: "";\n}\n@media screen and (max-width: 800px) {\n  mujs-body table .frame [data-el=matches] {\n    align-self: center;\n    width: 30em !important;\n  }\n}\nmujs-body table .frame [data-name=license] {\n  text-overflow: ellipsis;\n  overflow: hidden;\n  white-space: nowrap;\n  width: -webkit-fit-content;\n  width: -moz-fit-content;\n  width: fit-content;\n}\n@media screen and (max-width: 800px) {\n  mujs-body table .frame [data-name=license] {\n    width: 100% !important;\n    width: -moz-available !important;\n    width: -webkit-fill-available !important;\n  }\n}\n\n@media screen and (max-width: 1150px) {\n  .mujs-cfg {\n    margin: 0px auto 1rem auto !important;\n  }\n}\n.mujs-cfg {\n  height: fit-content;\n  height: -moz-fit-content;\n  height: -webkit-fit-content;\n}\n.mujs-cfg mujs-section {\n  border-radius: 16px;\n  padding: 0.5em;\n}\n.mujs-cfg mujs-section:nth-child(even) {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%)) !important;\n}\n.mujs-cfg mujs-section:nth-child(even) input,\n.mujs-cfg mujs-section:nth-child(even) select {\n  background: var(--mujs-odd-row, hsl(222, 14%, 33%));\n}\n.mujs-cfg mujs-section:nth-child(even) select option {\n  background: var(--mujs-odd-row, hsl(222, 14%, 33%));\n}\n.mujs-cfg mujs-section:nth-child(even) select option:hover {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%)) !important;\n}\n.mujs-cfg mujs-section:nth-child(odd) {\n  background: var(--mujs-odd-row, hsl(222, 14%, 33%)) !important;\n}\n.mujs-cfg mujs-section:nth-child(odd) input,\n.mujs-cfg mujs-section:nth-child(odd) select {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%));\n}\n.mujs-cfg mujs-section:nth-child(odd) select option {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%));\n}\n.mujs-cfg mujs-section:nth-child(odd) select option:hover {\n  background: var(--mujs-odd-row, hsl(222, 14%, 33%)) !important;\n}\n.mujs-cfg mujs-section[data-name=theme] .sub-section {\n  border-radius: 4px;\n}\n.mujs-cfg mujs-section[data-name=theme] .sub-section:nth-child(even) {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%));\n}\n.mujs-cfg mujs-section[data-name=theme] .sub-section:nth-child(odd) {\n  background: var(--mujs-odd-row, hsl(222, 14%, 33%));\n}\n.mujs-cfg mujs-section[data-name=theme] input,\n.mujs-cfg mujs-section[data-name=theme] select {\n  background: inherit;\n}\n.mujs-cfg mujs-section[data-name=theme] select option {\n  background: inherit;\n}\n.mujs-cfg mujs-section[data-name=theme] select option:hover {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%)) !important;\n}\n.mujs-cfg mujs-section svg {\n  width: 14px;\n  height: 14px;\n  fill: currentColor;\n  background: transparent;\n}\n.mujs-cfg mujs-section[data-name=exp], .mujs-cfg mujs-section[data-name=blacklist] {\n  display: flex;\n  justify-content: space-between;\n  flex-direction: column;\n  gap: 0.25em;\n}\n.mujs-cfg mujs-section[data-name=exp] > mujs-btn, .mujs-cfg mujs-section[data-name=blacklist] > mujs-btn {\n  width: 100%;\n  width: -moz-available;\n  width: -webkit-fill-available;\n}\n.mujs-cfg mujs-section[data-name=exp] > mujs-btn:hover, .mujs-cfg mujs-section[data-name=blacklist] > mujs-btn:hover {\n  background: var(--mujs-even-row, hsl(222, 14%, 18%)) !important;\n}\n.mujs-cfg mujs-section input[type=text]::-webkit-input-placeholder {\n  color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n}\n.mujs-cfg mujs-section input[type=text]::-moz-placeholder {\n  color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n}\n.mujs-cfg mujs-section input[type=text]:-ms-input-placeholder {\n  color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n}\n.mujs-cfg mujs-section input[type=text]::-ms-input-placeholder {\n  color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n}\n.mujs-cfg mujs-section input[type=text]::placeholder {\n  color: var(--mujs-placeholder, hsl(81, 56%, 54%));\n}\n.mujs-cfg mujs-section > label:not([data-blacklist]) {\n  display: flex;\n  justify-content: space-between;\n}\n.mujs-cfg mujs-section > label[data-blacklist] {\n  display: grid;\n  grid-auto-flow: column;\n}\n.mujs-cfg mujs-section > label[data-blacklist]:not(.new-list) {\n  grid-template-columns: repeat(2, 1fr);\n}\n.mujs-cfg mujs-section > label.new-list {\n  order: 999999999999;\n}\n.mujs-cfg mujs-section > label.new-list mujs-add {\n  font-size: 20px;\n}\n.mujs-cfg mujs-section > label input:not([type=checkbox]) {\n  font-size: 14px;\n  position: relative;\n  border-radius: 4px;\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\n.mujs-cfg mujs-section select,\n.mujs-cfg mujs-section select option {\n  color: var(--mujs-txt-color, hsl(0, 0%, 100%));\n  border: 1px solid transparent;\n  list-style: none;\n  outline-style: none;\n  pointer-events: auto;\n}\n.mujs-cfg mujs-section select {\n  text-align: center;\n  border-radius: 4px;\n}\n.mujs-cfg mujs-section > *.sub-section {\n  padding: 0.2em;\n}\n.mujs-cfg mujs-section > *.sub-section[data-engine] {\n  flex-wrap: wrap;\n}\n.mujs-cfg mujs-section > *.sub-section[data-engine] input {\n  width: 100%;\n  width: -moz-available;\n  width: -webkit-fill-available;\n}\n.mujs-cfg mujs-section > *.sub-section input[type=text] {\n  margin: 0.2em 0px;\n}\n.mujs-cfg .mujs-inlab {\n  position: relative;\n  width: 38px;\n}\n.mujs-cfg .mujs-inlab input[type=checkbox] {\n  display: none;\n}\n.mujs-cfg .mujs-inlab input[type=checkbox]:checked + label {\n  margin-left: 0;\n  background: var(--mujs-chck-color, hsla(0, 0%, 100%, 0.568));\n}\n.mujs-cfg .mujs-inlab input[type=checkbox]:checked + label:before {\n  right: 0px;\n}\n.mujs-cfg .mujs-inlab input[type=checkbox][data-name=greasyfork]:checked + label {\n  background: var(--mujs-gf-color, hsl(204, 100%, 40%));\n}\n.mujs-cfg .mujs-inlab input[type=checkbox][data-name=sleazyfork]:checked + label {\n  background: var(--mujs-sf-color, hsl(12, 86%, 50%));\n}\n.mujs-cfg .mujs-inlab input[type=checkbox][data-name=openuserjs]:checked + label {\n  background: var(--mujs-chck-open, hsla(12, 86%, 50%, 0.568));\n}\n.mujs-cfg .mujs-inlab input[type=checkbox][data-name=github]:checked + label {\n  background: var(--mujs-chck-git, hsla(213, 13%, 16%, 0.568));\n}\n.mujs-cfg .mujs-inlab label {\n  padding: 0;\n  display: block;\n  overflow: hidden;\n  height: 16px;\n  border-radius: 20px;\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\n.mujs-cfg .mujs-inlab label:before {\n  content: "";\n  display: block;\n  width: 20px;\n  height: 20px;\n  margin: -2px;\n  background: var(--mujs-txt-color, hsl(0, 0%, 100%));\n  position: absolute;\n  top: 0;\n  right: 20px;\n  border-radius: 20px;\n}\n.mujs-cfg .mujs-sty-flex mujs-btn {\n  margin: auto;\n}\n.mujs-cfg .mujs-sty-flex mujs-btn[data-command=reset] {\n  background: var(--mujs-sf-btn-color, hsl(12, 86%, 50%));\n  border-color: var(--mujs-sf-btn-color, hsl(12, 86%, 50%));\n}\n.mujs-cfg .mujs-sty-flex mujs-btn[data-command=reset]:hover {\n  background: var(--mujs-sf-txt-color, hsl(12, 79%, 55%));\n  border-color: var(--mujs-sf-txt-color, hsl(12, 79%, 55%));\n}\n.mujs-cfg .mujs-sty-flex mujs-btn[data-command=save] {\n  background: var(--mujs-gf-color, hsl(204, 100%, 40%));\n  border-color: var(--mujs-gf-color, hsl(204, 100%, 40%));\n}\n.mujs-cfg .mujs-sty-flex mujs-btn[data-command=save]:hover {\n  background: var(--mujs-gf-btn-color, hsl(211, 87%, 56%));\n  border-color: var(--mujs-gf-btn-color, hsl(211, 87%, 56%));\n}\n.mujs-cfg:not(.webext-page) {\n  margin: 1rem 25rem;\n}\n@media screen and (max-height: 720px) {\n  .mujs-cfg:not(.webext-page) {\n    height: 100%;\n    height: -moz-available;\n    height: -webkit-fill-available;\n    width: 100%;\n    width: -moz-available;\n    width: -webkit-fill-available;\n    overflow-x: auto;\n    padding: 0.5em;\n  }\n}\n\nmujs-a {\n  display: inline-block;\n}\n\n.mujs-name {\n  display: flex;\n  flex-flow: column wrap;\n  gap: 0.5em;\n}\n.mujs-name span {\n  font-size: 0.8em !important;\n}\n\nmujs-btn {\n  font-style: normal;\n  font-weight: 500;\n  font-variant: normal;\n  text-transform: none;\n  text-rendering: auto;\n  text-align: center;\n  border: 1px solid var(--mujs-txt-color, hsl(0, 0%, 100%));\n  font-size: 16px;\n  border-radius: 4px;\n  line-height: 1;\n  padding: 6px 15px;\n}\nmujs-btn svg {\n  width: 14px;\n  height: 14px;\n  fill: var(--mujs-txt-color, hsl(0, 0%, 100%));\n}\n\nmu-jsbtn {\n  font-size: 14px;\n  border-radius: 4px;\n  font-style: normal;\n  padding: 7px 15%;\n  font-weight: 400;\n  font-variant: normal;\n  line-height: normal;\n  display: block;\n  text-align: center;\n}\n\nmujs-a,\nmu-jsbtn,\n.mujs-pointer,\n.mujs-cfg mujs-section *:not(input[type=text], input[type=number], [data-theme], [data-blacklist]),\n.mainbtn,\n.mainframe,\nmujs-btn {\n  cursor: pointer !important;\n}',"primary-stylesheet")))throw new Error("Failed to initialize script!",{cause:"loadCSS"});this.injected=!0,this.initFn(),j(e)&&this.elementsReady&&(this.injFN=e.call(this,this.shadowRoot))}catch(e){a(e),this.remove()}}initFn(){if(this.setTheme(),K.cnt.total.root=this.mainbtn,this.countframe)for(const e of r.engines)this.countframe.append(K.set(e));const{refresh:e,urlBar:t,host:n,userjsCache:s,cfgpage:a,table:o}=this;this.Tabs=new class{constructor(e){this.pool=new Set,this.blank=d,this.protocal="mujs:",this.protoReg=new RegExp(`${this.protocal}(.+)`,"i"),this.el={add:G("mujs-addtab",{textContent:"+",dataset:{command:"new-tab"}}),head:G("mujs-tabs"),root:e},this.el.head.append(this.el.add),this.el.root.append(this.el.head),this.custom=l}getTab(e){return[...this.pool].find(({dataset:t})=>e===t.host)}getActive(){return[...this.pool].find(e=>e.classList.contains("active"))}intFN(e){const[,n]=this.protoReg.exec(e)??[];"settings"===n&&(P.cl.remove(a,"hidden"),P.cl.add(o,"hidden"),t.placeholder="Search settings")}active(t,n=!0){if(this.pool.has(t)||this.pool.add(t),P.cl.add([o,a],"hidden"),P.cl.remove([...this.pool],"active"),P.cl.add(t,"active"),!n)return void P.cl.remove(o,"hidden");const s=t.dataset.host??this.blank;s===this.blank?(P.cl.add(a,"hidden"),P.cl.remove(o,"hidden"),e()):s.startsWith(this.protocal)?this.intFN(s):(P.cl.add(a,"hidden"),P.cl.remove(o,"hidden"),this.custom(s))}close(t){if(this.pool.has(t)&&this.pool.delete(t),r.clearTabCache){const{host:e}=t.dataset,n=Array.from(s.values()).filter(({_mujs:t})=>!x(t)&&t.info.host===e);for(const e of n)n.splice(n.indexOf(e),1)}t.classList.contains("active")&&e();const n=t.nextElementSibling??t.previousElementSibling;n&&"new-tab"!==n.dataset.command&&this.active(n),t.remove()}create(t){if("string"==typeof t){const e=this.getTab(t);if(this.protoReg.test(t)&&e)return void this.active(e)}const n=G("mujs-tab",{dataset:{command:"switch-tab"},style:`order: ${this.el.head.childElementCount};`}),s=G("mu-js",{dataset:{command:"close-tab"},title:R("close"),textContent:"X"}),a=G("mujs-host"),[,o]=this.protoReg.exec(t)??[];return n.append(a,s),this.el.head.append(n),this.active(n,!1),w(t)?(e(),n.dataset.host=this.blank,a.title=R("newTab"),a.textContent=R("newTab")):o?(n.dataset.host=t||o,a.title=o||n.dataset.host,a.textContent=a.title,this.intFN(t)):(n.dataset.host=t||o,a.title=t||o,a.textContent=a.title),n}}(this.toolbar),this.Tabs.create(n);const i=this.tabbody,c=(e,t)=>e.children[t].dataset.value||e.children[t].textContent;for(const e of this.tabhead.rows[0].cells)P.text(e)!==R("install")&&(P.cl.add(e,"mujs-pointer"),U(e,"click",()=>{var t,n;Array.from(i.querySelectorAll("tr")).sort((t=Array.from(e.parentNode.children).indexOf(e),n=this.asc=!this.asc,(e,s)=>{return a=c(n?e:s,t),o=c(n?s:e,t),""===a||""===o||isNaN(a)||isNaN(o)?a.toString().localeCompare(o):a-o;var a,o})).forEach(e=>i.appendChild(e))}))}init(){try{return this.mainframe=G("mu-js","mainframe",{style:`opacity: ${this.opacityMin};`}),this.countframe=G("mujs-column"),this.mainbtn=G("count-frame","mainbtn",{textContent:"0"}),this.urlBar=G("input","mujs-url-bar",{autocomplete:"off",spellcheck:!1,type:"text",placeholder:R("search_placeholder")}),this.rateContainer=G("mujs-column","rate-container"),this.footer=G("mujs-row","mujs-footer"),this.tabbody=G("tbody"),this.promptElem=G("mujs-row","mujs-prompt"),this.toolbar=G("mujs-toolbar"),this.table=G("table"),this.tabhead=G("thead"),this.header=G("mujs-header"),this.tbody=G("mujs-body"),this.cfgpage=G("mujs-row","mujs-cfg hidden",{_mujs:{base:[],sections:new Set}}),this.main=G("mujs-main","hidden"),this.urlContainer=G("mujs-url"),this.btnframe=G("mujs-column","btn-frame"),this.btnHandles=G("mujs-column","btn-handles"),this.btnHide=G("mujs-btn","hide-list",{title:R("min"),innerHTML:q.load("minus"),dataset:{command:"hide-list"}}),this.btnfullscreen=G("mujs-btn","fullscreen",{title:R("max"),innerHTML:q.load("expand"),dataset:{command:"fullscreen"}}),this.closebtn=G("mujs-btn","close",{title:R("close"),innerHTML:q.load("close"),dataset:{command:"close"}}),this.btncfg=G("mujs-btn","settings hidden",{title:"Settings",innerHTML:q.load("gear"),dataset:{command:"settings"}}),this.btnhome=G("mujs-btn","github hidden",{title:`GitHub (v${/\d+\.\d+\.\d+|Book/.test(H.script.version)?H.script.version:H.script.version.slice(0,5)})`,innerHTML:q.load("github"),dataset:{command:"open-tab",webpage:H.script.namespace}}),this.btnissue=G("mujs-btn","issue hidden",{innerHTML:q.load("issue"),title:R("issue"),dataset:{command:"open-tab",webpage:H.script.bugs??"https://github.com/magicoflolis/Userscript-Plus/issues"}}),this.btngreasy=G("mujs-btn","greasy hidden",{title:"Greasy Fork",innerHTML:q.load("globe"),dataset:{command:"open-tab",webpage:"https://greasyfork.org/scripts/421603"}}),this.btnnav=G("mujs-btn","nav",{title:"Navigation",innerHTML:q.load("nav"),dataset:{command:"navigation"}}),((e=[])=>{const t=G("tr");for(const n of e){const e=G("th",n.class??"",n);t.append(e)}this.tabhead.append(t),this.table.append(this.tabhead,this.tabbody)})([{class:"mujs-header-name",textContent:R("name")},{textContent:R("createdby")},{textContent:R("daily_installs")},{textContent:R("updated")},{textContent:R("install")}]),E?(P.cl.add([this.btnHide,this.btnfullscreen,this.closebtn],"hidden"),this.btnframe.append(this.btnHide,this.btnfullscreen,this.closebtn,this.btnhome,this.btngreasy,this.btnissue,this.btncfg,this.btnnav)):(this.btnHandles.append(this.btnHide,this.btnfullscreen,this.closebtn),this.btnframe.append(this.btnhome,this.btngreasy,this.btnissue,this.btncfg,this.btnnav)),this.toolbar.append(this.btnHandles),this.urlContainer.append(this.urlBar),this.header.append(this.urlContainer,this.rateContainer,this.countframe,this.btnframe),this.tbody.append(this.table,this.cfgpage),this.main.append(this.toolbar,this.header,this.tbody,this.footer,this.promptElem),this.mainframe.append(this.mainbtn),this.root.append(this.mainframe,this.main),!0}catch(e){a(e)}return!1}remove(){this.userjsCache.clear(),P.remove(this.frame)}async save(){return this.unsaved=!1,await V.setValue("Config",r),o("Saved config:",r),this.redirect(),r}loadCSS(e,t="CSS",n=!0){try{if(this.stylesheet)return this.stylesheet;if("string"!=typeof t)throw new Error('"name" must be a typeof "string"',{cause:"loadCSS"});if("string"!=typeof e)throw new Error('"css" must be a typeof "string"',{cause:"loadCSS"});if(v(e))throw new Error(`"${t}" contains empty CSS string`,{cause:"loadCSS"});const s=x(this.root.shadowRoot)?this.root:this.root.shadowRoot;if(n&&A){const n=j(GM.addElement)&&GM.addElement||j(GM_addElement)&&GM_addElement;if(!j(n))return this.loadCSS(e,t,!1);const a=n(s,"style",{textContent:e});if(f(a))return a.dataset.insertedBy=H.script.name,a.dataset.role=t,this.stylesheet=a,this.stylesheet}const a=G("style",{textContent:e,dataset:{insertedBy:H.script.name,role:t}});return s.appendChild(a),this.stylesheet=a,this.stylesheet}catch(e){a(e)}}checkBlacklist(e){if(e=e||this.host,/accounts*\.google\./.test(this.webpage.host))return this.isBlacklisted=!0,this.isBlacklisted;let t=!1;for(const n of B(r.blacklist))if("string"==typeof n){if(n.startsWith("userjs-")){const[,s]=/userjs-(\w+)/.exec(n)??[],a=L[s];p(a)?a.test(e)&&(t=!0):g(a)&&a.host===this.host&&(t=!0)}}else if(g(n)){if(!n.enabled)continue;if(!0===n.regex&&new RegExp(n.url,n.flags).test(e)&&(t=!0),Array.isArray(n.url))for(const s of n.url)e.includes(s)&&(t=!0);e.includes(n.url)&&(t=!0)}return this.isBlacklisted=t,this.isBlacklisted}setTheme(){const e=r.theme??$.theme;if(e===$.theme)return;const{style:t}=this.root;for(const[n,s]of Object.entries(e)){const a=`--mujs-${n}`,o=t.getPropertyValue(a);x(s)&&(e[n]=o),o!==s&&(t.removeProperty(a),t.setProperty(a,s))}}makePrompt(e,t={},n=!0){P.remove(J.prompts);const s=G("mu-js","prompt",{dataset:{prompt:e}}),a=G("mu-js","prompt-head",{innerHTML:`${q.load("refresh")} ${e}`});if(s.append(a),n){const e=G("mu-js","prompt-body",{dataset:t}),n=G("mujs-btn","prompt-confirm",{innerHTML:"Confirm",dataset:{command:"prompt-confirm"}}),a=G("mujs-btn","prompt-deny",{innerHTML:"Deny",dataset:{command:"prompt-deny"}});e.append(n,a),s.append(e)}else{const e=G("mu-js","prompt-body"),t=G("mujs-btn","prompt-deny",{textContent:R("close")});U(t,E?"touchend":"click",()=>{s.remove()}),e.append(t),s.append(e)}return J.prompts.push(s),this.promptElem.append(s),s}showError(...e){a(...e);const t=G("mu-js","error");let n="";for(const t of e)n+=`${"string"==typeof t?t:`${t.cause?`[${t.cause}] `:""}${t.message}${t.stack?` ${t.stack}`:""}`}\n`;t.appendChild(C.createTextNode(n)),this.footer.append(t)}refresh(){this.urlBar.placeholder=R("newTab"),K.reset(),P.cl.remove(this.toElem(),"hidden"),P.cl.remove(this.cfgpage._mujs.sections,"hidden"),P.prop([this.tabbody,this.rateContainer,this.footer],"innerHTML","")}redirect(){const e=window.top.location,{hostname:t}=e,n=/greasyfork\.org/.test(t);if(!n&&r.sleazyredirect)return;const s=n?"sleazyfork":"greasyfork";if(F("span.sign-in-link")&&/scripts\/\d+/.test(e.href)&&!F("#script-info")&&("greasyfork"==s||F("div.width-constraint>section>p>a"))){const t=e.href.replace(/\/\/([^.]+\.)?(greasyfork|sleazyfork)\.org/,"//$1"+s+".org");o(`Redirecting to "${t}"`),j(e.assign)?e.assign(t):e.href=t}}async timeoutFrame(e){const t=this.timeouts.frame;if(t.clear(...t.ids),P.cl.has(this.mainframe,"hidden"))return;let n=1e4;"number"!=typeof(e=e??r.time??$.time)||Number.isNaN(e)||(n=this.isBlacklisted?e/2:e),await t.set(n),this.remove(),t.clear(...t.ids)}toElem(){return Array.from(this).map(({_mujs:e})=>e.root)}*[Symbol.iterator](){const e=Array.from(this.userjsCache.values()).filter(({_mujs:e})=>!x(e)&&e.info.engine.enabled);for(const t of e)yield t}},X=new J,Q=async(t="Config")=>{const n=await V.getValue(t,$);var s;r={...$,...n},o("Config:",r),j(s=t=>{try{if(null===window.location)throw new Error('"window.location" is null, reload the webpage or use a different one',{cause:"loadDOM"});if(null===t)throw new Error('"doc" is null, reload the webpage or use a different one',{cause:"loadDOM"});X.redirect(),r.autoinject?X.inject(e,t):X.timeoutFrame(),W.register(R("userjs_inject"),()=>{X.inject(e,t)}),W.register(R("userjs_close"),()=>{X.remove()})}catch(e){a(e)}})&&("interactive"===document.readyState||"complete"===document.readyState?s(document):document.addEventListener("DOMContentLoaded",e=>s(e.target),{once:!0}))};Q()})();